(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))t(x);new MutationObserver(x=>{for(const f of x)if(f.type==="childList")for(const u of f.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function g(x){const f={};return x.integrity&&(f.integrity=x.integrity),x.referrerPolicy&&(f.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?f.credentials="include":x.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function t(x){if(x.ep)return;x.ep=!0;const f=g(x);fetch(x.href,f)}})();var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qh(D){return D&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D}var Oh={exports:{}},Il={},Ah={exports:{}},Ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function l0(){if(gy)return Ht;gy=1;var D=Symbol.for("react.element"),r=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function i(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a=Object.assign,o={};function h(Q,se,A){this.props=Q,this.context=se,this.refs=o,this.updater=A||n}h.prototype.isReactComponent={},h.prototype.setState=function(Q,se){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,se,"setState")},h.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function p(){}p.prototype=h.prototype;function y(Q,se,A){this.props=Q,this.context=se,this.refs=o,this.updater=A||n}var w=y.prototype=new p;w.constructor=y,a(w,h.prototype),w.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(Q,se,A){var z,q={},$=null,ie=null;if(se!=null)for(z in se.ref!==void 0&&(ie=se.ref),se.key!==void 0&&($=""+se.key),se)S.call(se,z)&&!E.hasOwnProperty(z)&&(q[z]=se[z]);var re=arguments.length-2;if(re===1)q.children=A;else if(1<re){for(var fe=Array(re),ge=0;ge<re;ge++)fe[ge]=arguments[ge+2];q.children=fe}if(Q&&Q.defaultProps)for(z in re=Q.defaultProps,re)q[z]===void 0&&(q[z]=re[z]);return{$$typeof:D,type:Q,key:$,ref:ie,props:q,_owner:k.current}}function R(Q,se){return{$$typeof:D,type:Q.type,key:se,ref:Q.ref,props:Q.props,_owner:Q._owner}}function O(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===D}function M(Q){var se={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(A){return se[A]})}var L=/\/+/g;function I(Q,se){return typeof Q=="object"&&Q!==null&&Q.key!=null?M(""+Q.key):se.toString(36)}function B(Q,se,A,z,q){var $=typeof Q;($==="undefined"||$==="boolean")&&(Q=null);var ie=!1;if(Q===null)ie=!0;else switch($){case"string":case"number":ie=!0;break;case"object":switch(Q.$$typeof){case D:case r:ie=!0}}if(ie)return ie=Q,q=q(ie),Q=z===""?"."+I(ie,0):z,b(q)?(A="",Q!=null&&(A=Q.replace(L,"$&/")+"/"),B(q,se,A,"",function(ge){return ge})):q!=null&&(O(q)&&(q=R(q,A+(!q.key||ie&&ie.key===q.key?"":(""+q.key).replace(L,"$&/")+"/")+Q)),se.push(q)),1;if(ie=0,z=z===""?".":z+":",b(Q))for(var re=0;re<Q.length;re++){$=Q[re];var fe=z+I($,re);ie+=B($,se,A,fe,q)}else if(fe=i(Q),typeof fe=="function")for(Q=fe.call(Q),re=0;!($=Q.next()).done;)$=$.value,fe=z+I($,re++),ie+=B($,se,A,fe,q);else if($==="object")throw se=String(Q),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return ie}function V(Q,se,A){if(Q==null)return Q;var z=[],q=0;return B(Q,z,"","",function($){return se.call(A,$,q++)}),z}function G(Q){if(Q._status===-1){var se=Q._result;se=se(),se.then(function(A){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=A)},function(A){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=A)}),Q._status===-1&&(Q._status=0,Q._result=se)}if(Q._status===1)return Q._result.default;throw Q._result}var Y={current:null},H={transition:null},W={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:H,ReactCurrentOwner:k};function K(){throw Error("act(...) is not supported in production builds of React.")}return Ht.Children={map:V,forEach:function(Q,se,A){V(Q,function(){se.apply(this,arguments)},A)},count:function(Q){var se=0;return V(Q,function(){se++}),se},toArray:function(Q){return V(Q,function(se){return se})||[]},only:function(Q){if(!O(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Ht.Component=h,Ht.Fragment=g,Ht.Profiler=x,Ht.PureComponent=y,Ht.StrictMode=t,Ht.Suspense=s,Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Ht.act=K,Ht.cloneElement=function(Q,se,A){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var z=a({},Q.props),q=Q.key,$=Q.ref,ie=Q._owner;if(se!=null){if(se.ref!==void 0&&($=se.ref,ie=k.current),se.key!==void 0&&(q=""+se.key),Q.type&&Q.type.defaultProps)var re=Q.type.defaultProps;for(fe in se)S.call(se,fe)&&!E.hasOwnProperty(fe)&&(z[fe]=se[fe]===void 0&&re!==void 0?re[fe]:se[fe])}var fe=arguments.length-2;if(fe===1)z.children=A;else if(1<fe){re=Array(fe);for(var ge=0;ge<fe;ge++)re[ge]=arguments[ge+2];z.children=re}return{$$typeof:D,type:Q.type,key:q,ref:$,props:z,_owner:ie}},Ht.createContext=function(Q){return Q={$$typeof:u,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:f,_context:Q},Q.Consumer=Q},Ht.createElement=T,Ht.createFactory=function(Q){var se=T.bind(null,Q);return se.type=Q,se},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(Q){return{$$typeof:c,render:Q}},Ht.isValidElement=O,Ht.lazy=function(Q){return{$$typeof:m,_payload:{_status:-1,_result:Q},_init:G}},Ht.memo=function(Q,se){return{$$typeof:d,type:Q,compare:se===void 0?null:se}},Ht.startTransition=function(Q){var se=H.transition;H.transition={};try{Q()}finally{H.transition=se}},Ht.unstable_act=K,Ht.useCallback=function(Q,se){return Y.current.useCallback(Q,se)},Ht.useContext=function(Q){return Y.current.useContext(Q)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(Q){return Y.current.useDeferredValue(Q)},Ht.useEffect=function(Q,se){return Y.current.useEffect(Q,se)},Ht.useId=function(){return Y.current.useId()},Ht.useImperativeHandle=function(Q,se,A){return Y.current.useImperativeHandle(Q,se,A)},Ht.useInsertionEffect=function(Q,se){return Y.current.useInsertionEffect(Q,se)},Ht.useLayoutEffect=function(Q,se){return Y.current.useLayoutEffect(Q,se)},Ht.useMemo=function(Q,se){return Y.current.useMemo(Q,se)},Ht.useReducer=function(Q,se,A){return Y.current.useReducer(Q,se,A)},Ht.useRef=function(Q){return Y.current.useRef(Q)},Ht.useState=function(Q){return Y.current.useState(Q)},Ht.useSyncExternalStore=function(Q,se,A){return Y.current.useSyncExternalStore(Q,se,A)},Ht.useTransition=function(){return Y.current.useTransition()},Ht.version="18.3.1",Ht}var vy;function $h(){return vy||(vy=1,Ah.exports=l0()),Ah.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function u0(){if(_y)return Il;_y=1;var D=$h(),r=Symbol.for("react.element"),g=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,x=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function u(c,s,d){var m,v={},i=null,n=null;d!==void 0&&(i=""+d),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(n=s.ref);for(m in s)t.call(s,m)&&!f.hasOwnProperty(m)&&(v[m]=s[m]);if(c&&c.defaultProps)for(m in s=c.defaultProps,s)v[m]===void 0&&(v[m]=s[m]);return{$$typeof:r,type:c,key:i,ref:n,props:v,_owner:x.current}}return Il.Fragment=g,Il.jsx=u,Il.jsxs=u,Il}var by;function c0(){return by||(by=1,Oh.exports=u0()),Oh.exports}var Bt=c0(),lr=$h();const xy=Qh(lr);var mc={},Ph={exports:{}},Hn={},Rh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function d0(){return wy||(wy=1,function(D){function r(H,W){var K=H.length;H.push(W);e:for(;0<K;){var Q=K-1>>>1,se=H[Q];if(0<x(se,W))H[Q]=W,H[K]=se,K=Q;else break e}}function g(H){return H.length===0?null:H[0]}function t(H){if(H.length===0)return null;var W=H[0],K=H.pop();if(K!==W){H[0]=K;e:for(var Q=0,se=H.length,A=se>>>1;Q<A;){var z=2*(Q+1)-1,q=H[z],$=z+1,ie=H[$];if(0>x(q,K))$<se&&0>x(ie,q)?(H[Q]=ie,H[$]=K,Q=$):(H[Q]=q,H[z]=K,Q=z);else if($<se&&0>x(ie,K))H[Q]=ie,H[$]=K,Q=$;else break e}}return W}function x(H,W){var K=H.sortIndex-W.sortIndex;return K!==0?K:H.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;D.unstable_now=function(){return f.now()}}else{var u=Date,c=u.now();D.unstable_now=function(){return u.now()-c}}var s=[],d=[],m=1,v=null,i=3,n=!1,a=!1,o=!1,h=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var W=g(d);W!==null;){if(W.callback===null)t(d);else if(W.startTime<=H)t(d),W.sortIndex=W.expirationTime,r(s,W);else break;W=g(d)}}function b(H){if(o=!1,w(H),!a)if(g(s)!==null)a=!0,G(S);else{var W=g(d);W!==null&&Y(b,W.startTime-H)}}function S(H,W){a=!1,o&&(o=!1,p(T),T=-1),n=!0;var K=i;try{for(w(W),v=g(s);v!==null&&(!(v.expirationTime>W)||H&&!M());){var Q=v.callback;if(typeof Q=="function"){v.callback=null,i=v.priorityLevel;var se=Q(v.expirationTime<=W);W=D.unstable_now(),typeof se=="function"?v.callback=se:v===g(s)&&t(s),w(W)}else t(s);v=g(s)}if(v!==null)var A=!0;else{var z=g(d);z!==null&&Y(b,z.startTime-W),A=!1}return A}finally{v=null,i=K,n=!1}}var k=!1,E=null,T=-1,R=5,O=-1;function M(){return!(D.unstable_now()-O<R)}function L(){if(E!==null){var H=D.unstable_now();O=H;var W=!0;try{W=E(!0,H)}finally{W?I():(k=!1,E=null)}}else k=!1}var I;if(typeof y=="function")I=function(){y(L)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=L,I=function(){V.postMessage(null)}}else I=function(){h(L,0)};function G(H){E=H,k||(k=!0,I())}function Y(H,W){T=h(function(){H(D.unstable_now())},W)}D.unstable_IdlePriority=5,D.unstable_ImmediatePriority=1,D.unstable_LowPriority=4,D.unstable_NormalPriority=3,D.unstable_Profiling=null,D.unstable_UserBlockingPriority=2,D.unstable_cancelCallback=function(H){H.callback=null},D.unstable_continueExecution=function(){a||n||(a=!0,G(S))},D.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<H?Math.floor(1e3/H):5},D.unstable_getCurrentPriorityLevel=function(){return i},D.unstable_getFirstCallbackNode=function(){return g(s)},D.unstable_next=function(H){switch(i){case 1:case 2:case 3:var W=3;break;default:W=i}var K=i;i=W;try{return H()}finally{i=K}},D.unstable_pauseExecution=function(){},D.unstable_requestPaint=function(){},D.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=i;i=H;try{return W()}finally{i=K}},D.unstable_scheduleCallback=function(H,W,K){var Q=D.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Q+K:Q):K=Q,H){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=K+se,H={id:m++,callback:W,priorityLevel:H,startTime:K,expirationTime:se,sortIndex:-1},K>Q?(H.sortIndex=K,r(d,H),g(s)===null&&H===g(d)&&(o?(p(T),T=-1):o=!0,Y(b,K-Q))):(H.sortIndex=se,r(s,H),a||n||(a=!0,G(S))),H},D.unstable_shouldYield=M,D.unstable_wrapCallback=function(H){var W=i;return function(){var K=i;i=W;try{return H.apply(this,arguments)}finally{i=K}}}}(Dh)),Dh}var Sy;function h0(){return Sy||(Sy=1,Rh.exports=d0()),Rh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function f0(){if(jy)return Hn;jy=1;var D=$h(),r=h0();function g(l){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+l,C=1;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+l+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t=new Set,x={};function f(l,_){u(l,_),u(l+"Capture",_)}function u(l,_){for(x[l]=_,l=0;l<_.length;l++)t.add(_[l])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function i(l){return s.call(v,l)?!0:s.call(m,l)?!1:d.test(l)?v[l]=!0:(m[l]=!0,!1)}function n(l,_,C,F){if(C!==null&&C.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return F?!1:C!==null?!C.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function a(l,_,C,F){if(_===null||typeof _>"u"||n(l,_,C,F))return!0;if(F)return!1;if(C!==null)switch(C.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function o(l,_,C,F,Z,J,ue){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=F,this.attributeNamespace=Z,this.mustUseProperty=C,this.propertyName=l,this.type=_,this.sanitizeURL=J,this.removeEmptyString=ue}var h={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){h[l]=new o(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var _=l[0];h[_]=new o(_,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){h[l]=new o(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){h[l]=new o(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){h[l]=new o(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){h[l]=new o(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){h[l]=new o(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){h[l]=new o(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){h[l]=new o(l,5,!1,l.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function y(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var _=l.replace(p,y);h[_]=new o(_,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var _=l.replace(p,y);h[_]=new o(_,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var _=l.replace(p,y);h[_]=new o(_,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){h[l]=new o(l,1,!1,l.toLowerCase(),null,!1,!1)}),h.xlinkHref=new o("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){h[l]=new o(l,1,!1,l.toLowerCase(),null,!0,!0)});function w(l,_,C,F){var Z=h.hasOwnProperty(_)?h[_]:null;(Z!==null?Z.type!==0:F||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(a(_,C,Z,F)&&(C=null),F||Z===null?i(_)&&(C===null?l.removeAttribute(_):l.setAttribute(_,""+C)):Z.mustUseProperty?l[Z.propertyName]=C===null?Z.type===3?!1:"":C:(_=Z.attributeName,F=Z.attributeNamespace,C===null?l.removeAttribute(_):(Z=Z.type,C=Z===3||Z===4&&C===!0?"":""+C,F?l.setAttributeNS(F,_,C):l.setAttribute(_,C))))}var b=D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),k=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),H=Symbol.iterator;function W(l){return l===null||typeof l!="object"?null:(l=H&&l[H]||l["@@iterator"],typeof l=="function"?l:null)}var K=Object.assign,Q;function se(l){if(Q===void 0)try{throw Error()}catch(C){var _=C.stack.trim().match(/\n( *(at )?)/);Q=_&&_[1]||""}return`
`+Q+l}var A=!1;function z(l,_){if(!l||A)return"";A=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(qe){var F=qe}Reflect.construct(l,[],_)}else{try{_.call()}catch(qe){F=qe}l.call(_.prototype)}else{try{throw Error()}catch(qe){F=qe}l()}}catch(qe){if(qe&&F&&typeof qe.stack=="string"){for(var Z=qe.stack.split(`
`),J=F.stack.split(`
`),ue=Z.length-1,Te=J.length-1;1<=ue&&0<=Te&&Z[ue]!==J[Te];)Te--;for(;1<=ue&&0<=Te;ue--,Te--)if(Z[ue]!==J[Te]){if(ue!==1||Te!==1)do if(ue--,Te--,0>Te||Z[ue]!==J[Te]){var Oe=`
`+Z[ue].replace(" at new "," at ");return l.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",l.displayName)),Oe}while(1<=ue&&0<=Te);break}}}finally{A=!1,Error.prepareStackTrace=C}return(l=l?l.displayName||l.name:"")?se(l):""}function q(l){switch(l.tag){case 5:return se(l.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return l=z(l.type,!1),l;case 11:return l=z(l.type.render,!1),l;case 1:return l=z(l.type,!0),l;default:return""}}function $(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case E:return"Fragment";case k:return"Portal";case R:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case B:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case M:return(l.displayName||"Context")+".Consumer";case O:return(l._context.displayName||"Context")+".Provider";case L:var _=l.render;return l=l.displayName,l||(l=_.displayName||_.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case V:return _=l.displayName||null,_!==null?_:$(l.type)||"Memo";case G:_=l._payload,l=l._init;try{return $(l(_))}catch{}}return null}function ie(l){var _=l.type;switch(l.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=_.render,l=l.displayName||l.name||"",_.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(_);case 8:return _===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function re(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function fe(l){var _=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function ge(l){var _=fe(l)?"checked":"value",C=Object.getOwnPropertyDescriptor(l.constructor.prototype,_),F=""+l[_];if(!l.hasOwnProperty(_)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var Z=C.get,J=C.set;return Object.defineProperty(l,_,{configurable:!0,get:function(){return Z.call(this)},set:function(ue){F=""+ue,J.call(this,ue)}}),Object.defineProperty(l,_,{enumerable:C.enumerable}),{getValue:function(){return F},setValue:function(ue){F=""+ue},stopTracking:function(){l._valueTracker=null,delete l[_]}}}}function de(l){l._valueTracker||(l._valueTracker=ge(l))}function me(l){if(!l)return!1;var _=l._valueTracker;if(!_)return!0;var C=_.getValue(),F="";return l&&(F=fe(l)?l.checked?"true":"false":l.value),l=F,l!==C?(_.setValue(l),!0):!1}function _e(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function ae(l,_){var C=_.checked;return K({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??l._wrapperState.initialChecked})}function he(l,_){var C=_.defaultValue==null?"":_.defaultValue,F=_.checked!=null?_.checked:_.defaultChecked;C=re(_.value!=null?_.value:C),l._wrapperState={initialChecked:F,initialValue:C,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function be(l,_){_=_.checked,_!=null&&w(l,"checked",_,!1)}function ke(l,_){be(l,_);var C=re(_.value),F=_.type;if(C!=null)F==="number"?(C===0&&l.value===""||l.value!=C)&&(l.value=""+C):l.value!==""+C&&(l.value=""+C);else if(F==="submit"||F==="reset"){l.removeAttribute("value");return}_.hasOwnProperty("value")?we(l,_.type,C):_.hasOwnProperty("defaultValue")&&we(l,_.type,re(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(l.defaultChecked=!!_.defaultChecked)}function xe(l,_,C){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var F=_.type;if(!(F!=="submit"&&F!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+l._wrapperState.initialValue,C||_===l.value||(l.value=_),l.defaultValue=_}C=l.name,C!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,C!==""&&(l.name=C)}function we(l,_,C){(_!=="number"||_e(l.ownerDocument)!==l)&&(C==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+C&&(l.defaultValue=""+C))}var Me=Array.isArray;function He(l,_,C,F){if(l=l.options,_){_={};for(var Z=0;Z<C.length;Z++)_["$"+C[Z]]=!0;for(C=0;C<l.length;C++)Z=_.hasOwnProperty("$"+l[C].value),l[C].selected!==Z&&(l[C].selected=Z),Z&&F&&(l[C].defaultSelected=!0)}else{for(C=""+re(C),_=null,Z=0;Z<l.length;Z++){if(l[Z].value===C){l[Z].selected=!0,F&&(l[Z].defaultSelected=!0);return}_!==null||l[Z].disabled||(_=l[Z])}_!==null&&(_.selected=!0)}}function Ie(l,_){if(_.dangerouslySetInnerHTML!=null)throw Error(g(91));return K({},_,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function dt(l,_){var C=_.value;if(C==null){if(C=_.children,_=_.defaultValue,C!=null){if(_!=null)throw Error(g(92));if(Me(C)){if(1<C.length)throw Error(g(93));C=C[0]}_=C}_==null&&(_=""),C=_}l._wrapperState={initialValue:re(C)}}function nt(l,_){var C=re(_.value),F=re(_.defaultValue);C!=null&&(C=""+C,C!==l.value&&(l.value=C),_.defaultValue==null&&l.defaultValue!==C&&(l.defaultValue=C)),F!=null&&(l.defaultValue=""+F)}function ot(l){var _=l.textContent;_===l._wrapperState.initialValue&&_!==""&&_!==null&&(l.value=_)}function ut(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(l,_){return l==null||l==="http://www.w3.org/1999/xhtml"?ut(_):l==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ae,Xe=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,C,F,Z){MSApp.execUnsafeLocalFunction(function(){return l(_,C,F,Z)})}:l}(function(l,_){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=_;else{for(Ae=Ae||document.createElement("div"),Ae.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=Ae.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;_.firstChild;)l.appendChild(_.firstChild)}});function Le(l,_){if(_){var C=l.firstChild;if(C&&C===l.lastChild&&C.nodeType===3){C.nodeValue=_;return}}l.textContent=_}var oe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ce=["Webkit","ms","Moz","O"];Object.keys(oe).forEach(function(l){ce.forEach(function(_){_=_+l.charAt(0).toUpperCase()+l.substring(1),oe[_]=oe[l]})});function ne(l,_,C){return _==null||typeof _=="boolean"||_===""?"":C||typeof _!="number"||_===0||oe.hasOwnProperty(l)&&oe[l]?(""+_).trim():_+"px"}function pe(l,_){l=l.style;for(var C in _)if(_.hasOwnProperty(C)){var F=C.indexOf("--")===0,Z=ne(C,_[C],F);C==="float"&&(C="cssFloat"),F?l.setProperty(C,Z):l[C]=Z}}var Ee=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function De(l,_){if(_){if(Ee[l]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(g(137,l));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(g(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(g(61))}if(_.style!=null&&typeof _.style!="object")throw Error(g(62))}}function Ge(l,_){if(l.indexOf("-")===-1)return typeof _.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ke=null;function it(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var at=null,ht=null,Pt=null;function Ot(l){if(l=bl(l)){if(typeof at!="function")throw Error(g(280));var _=l.stateNode;_&&(_=Ou(_),at(l.stateNode,l.type,_))}}function gt(l){ht?Pt?Pt.push(l):Pt=[l]:ht=l}function Dt(){if(ht){var l=ht,_=Pt;if(Pt=ht=null,Ot(l),_)for(l=0;l<_.length;l++)Ot(_[l])}}function Ct(l,_){return l(_)}function sr(){}var Gr=!1;function Cr(l,_,C){if(Gr)return l(_,C);Gr=!0;try{return Ct(l,_,C)}finally{Gr=!1,(ht!==null||Pt!==null)&&(sr(),Dt())}}function Xt(l,_){var C=l.stateNode;if(C===null)return null;var F=Ou(C);if(F===null)return null;C=F[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(l=l.type,F=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!F;break e;default:l=!1}if(l)return null;if(C&&typeof C!="function")throw Error(g(231,_,typeof C));return C}var ir=!1;if(c)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){ir=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{ir=!1}function Qr(l,_,C,F,Z,J,ue,Te,Oe){var qe=Array.prototype.slice.call(arguments,3);try{_.apply(C,qe)}catch(tt){this.onError(tt)}}var xr=!1,$t=null,Pr=!1,ti=null,co={onError:function(l){xr=!0,$t=l}};function ho(l,_,C,F,Z,J,ue,Te,Oe){xr=!1,$t=null,Qr.apply(co,arguments)}function Jo(l,_,C,F,Z,J,ue,Te,Oe){if(ho.apply(this,arguments),xr){if(xr){var qe=$t;xr=!1,$t=null}else throw Error(g(198));Pr||(Pr=!0,ti=qe)}}function Zn(l){var _=l,C=l;if(l.alternate)for(;_.return;)_=_.return;else{l=_;do _=l,_.flags&4098&&(C=_.return),l=_.return;while(l)}return _.tag===3?C:null}function Ti(l){if(l.tag===13){var _=l.memoizedState;if(_===null&&(l=l.alternate,l!==null&&(_=l.memoizedState)),_!==null)return _.dehydrated}return null}function je(l){if(Zn(l)!==l)throw Error(g(188))}function Je(l){var _=l.alternate;if(!_){if(_=Zn(l),_===null)throw Error(g(188));return _!==l?null:l}for(var C=l,F=_;;){var Z=C.return;if(Z===null)break;var J=Z.alternate;if(J===null){if(F=Z.return,F!==null){C=F;continue}break}if(Z.child===J.child){for(J=Z.child;J;){if(J===C)return je(Z),l;if(J===F)return je(Z),_;J=J.sibling}throw Error(g(188))}if(C.return!==F.return)C=Z,F=J;else{for(var ue=!1,Te=Z.child;Te;){if(Te===C){ue=!0,C=Z,F=J;break}if(Te===F){ue=!0,F=Z,C=J;break}Te=Te.sibling}if(!ue){for(Te=J.child;Te;){if(Te===C){ue=!0,C=J,F=Z;break}if(Te===F){ue=!0,F=J,C=Z;break}Te=Te.sibling}if(!ue)throw Error(g(189))}}if(C.alternate!==F)throw Error(g(190))}if(C.tag!==3)throw Error(g(188));return C.stateNode.current===C?l:_}function pt(l){return l=Je(l),l!==null?$e(l):null}function $e(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var _=$e(l);if(_!==null)return _;l=l.sibling}return null}var Gt=r.unstable_scheduleCallback,Ze=r.unstable_cancelCallback,Yt=r.unstable_shouldYield,ft=r.unstable_requestPaint,Mt=r.unstable_now,mt=r.unstable_getCurrentPriorityLevel,mr=r.unstable_ImmediatePriority,Rr=r.unstable_UserBlockingPriority,cr=r.unstable_NormalPriority,qr=r.unstable_LowPriority,Qn=r.unstable_IdlePriority,nn=null,Ur=null;function Wr(l){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(nn,l,void 0,(l.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:ea,$n=Math.log,ki=Math.LN2;function ea(l){return l>>>=0,l===0?32:31-($n(l)/ki|0)|0}var fo=64,po=4194304;function Ei(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Ci(l,_){var C=l.pendingLanes;if(C===0)return 0;var F=0,Z=l.suspendedLanes,J=l.pingedLanes,ue=C&268435455;if(ue!==0){var Te=ue&~Z;Te!==0?F=Ei(Te):(J&=ue,J!==0&&(F=Ei(J)))}else ue=C&~Z,ue!==0?F=Ei(ue):J!==0&&(F=Ei(J));if(F===0)return 0;if(_!==0&&_!==F&&!(_&Z)&&(Z=F&-F,J=_&-_,Z>=J||Z===16&&(J&4194240)!==0))return _;if(F&4&&(F|=C&16),_=l.entangledLanes,_!==0)for(l=l.entanglements,_&=F;0<_;)C=31-Nn(_),Z=1<<C,F|=l[C],_&=~Z;return F}function fu(l,_){switch(l){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pu(l,_){for(var C=l.suspendedLanes,F=l.pingedLanes,Z=l.expirationTimes,J=l.pendingLanes;0<J;){var ue=31-Nn(J),Te=1<<ue,Oe=Z[ue];Oe===-1?(!(Te&C)||Te&F)&&(Z[ue]=fu(Te,_)):Oe<=_&&(l.expiredLanes|=Te),J&=~Te}}function ta(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function mu(){var l=fo;return fo<<=1,!(fo&4194240)&&(fo=64),l}function mo(l){for(var _=[],C=0;31>C;C++)_.push(l);return _}function Mi(l,_,C){l.pendingLanes|=_,_!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,_=31-Nn(_),l[_]=C}function yu(l,_){var C=l.pendingLanes&~_;l.pendingLanes=_,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=_,l.mutableReadLanes&=_,l.entangledLanes&=_,_=l.entanglements;var F=l.eventTimes;for(l=l.expirationTimes;0<C;){var Z=31-Nn(C),J=1<<Z;_[Z]=0,F[Z]=-1,l[Z]=-1,C&=~J}}function Oi(l,_){var C=l.entangledLanes|=_;for(l=l.entanglements;C;){var F=31-Nn(C),Z=1<<F;Z&_|l[F]&_&&(l[F]|=_),C&=~Z}}var Zt=0;function Kn(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var al,ra,ri,ll,gu,yo=!1,go=[],Gs=null,Ts=null,ks=null,vo=new Map,Ai=new Map,qs=[],nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(l,_){switch(l){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":vo.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ai.delete(_.pointerId)}}function _o(l,_,C,F,Z,J){return l===null||l.nativeEvent!==J?(l={blockedOn:_,domEventName:C,eventSystemFlags:F,nativeEvent:J,targetContainers:[Z]},_!==null&&(_=bl(_),_!==null&&ra(_)),l):(l.eventSystemFlags|=F,_=l.targetContainers,Z!==null&&_.indexOf(Z)===-1&&_.push(Z),l)}function _u(l,_,C,F,Z){switch(_){case"focusin":return Gs=_o(Gs,l,_,C,F,Z),!0;case"dragenter":return Ts=_o(Ts,l,_,C,F,Z),!0;case"mouseover":return ks=_o(ks,l,_,C,F,Z),!0;case"pointerover":var J=Z.pointerId;return vo.set(J,_o(vo.get(J)||null,l,_,C,F,Z)),!0;case"gotpointercapture":return J=Z.pointerId,Ai.set(J,_o(Ai.get(J)||null,l,_,C,F,Z)),!0}return!1}function Jn(l){var _=Eo(l.target);if(_!==null){var C=Zn(_);if(C!==null){if(_=C.tag,_===13){if(_=Ti(C),_!==null){l.blockedOn=_,gu(l.priority,function(){ri(C)});return}}else if(_===3&&C.stateNode.current.memoizedState.isDehydrated){l.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Fn(l){if(l.blockedOn!==null)return!1;for(var _=l.targetContainers;0<_.length;){var C=ia(l.domEventName,l.eventSystemFlags,_[0],l.nativeEvent);if(C===null){C=l.nativeEvent;var F=new C.constructor(C.type,C);Ke=F,C.target.dispatchEvent(F),Ke=null}else return _=bl(C),_!==null&&ra(_),l.blockedOn=C,!1;_.shift()}return!0}function Pi(l,_,C){Fn(l)&&C.delete(_)}function bo(){yo=!1,Gs!==null&&Fn(Gs)&&(Gs=null),Ts!==null&&Fn(Ts)&&(Ts=null),ks!==null&&Fn(ks)&&(ks=null),vo.forEach(Pi),Ai.forEach(Pi)}function En(l,_){l.blockedOn===_&&(l.blockedOn=null,yo||(yo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,bo)))}function Es(l){function _(Z){return En(Z,l)}if(0<go.length){En(go[0],l);for(var C=1;C<go.length;C++){var F=go[C];F.blockedOn===l&&(F.blockedOn=null)}}for(Gs!==null&&En(Gs,l),Ts!==null&&En(Ts,l),ks!==null&&En(ks,l),vo.forEach(_),Ai.forEach(_),C=0;C<qs.length;C++)F=qs[C],F.blockedOn===l&&(F.blockedOn=null);for(;0<qs.length&&(C=qs[0],C.blockedOn===null);)Jn(C),C.blockedOn===null&&qs.shift()}var Ri=b.ReactCurrentBatchConfig,es=!0;function na(l,_,C,F){var Z=Zt,J=Ri.transition;Ri.transition=null;try{Zt=1,sa(l,_,C,F)}finally{Zt=Z,Ri.transition=J}}function bu(l,_,C,F){var Z=Zt,J=Ri.transition;Ri.transition=null;try{Zt=4,sa(l,_,C,F)}finally{Zt=Z,Ri.transition=J}}function sa(l,_,C,F){if(es){var Z=ia(l,_,C,F);if(Z===null)bd(l,_,F,xo,C),vu(l,F);else if(_u(Z,l,_,C,F))F.stopPropagation();else if(vu(l,F),_&4&&-1<nd.indexOf(l)){for(;Z!==null;){var J=bl(Z);if(J!==null&&al(J),J=ia(l,_,C,F),J===null&&bd(l,_,F,xo,C),J===Z)break;Z=J}Z!==null&&F.stopPropagation()}else bd(l,_,F,null,C)}}var xo=null;function ia(l,_,C,F){if(xo=null,l=it(F),l=Eo(l),l!==null)if(_=Zn(l),_===null)l=null;else if(C=_.tag,C===13){if(l=Ti(_),l!==null)return l;l=null}else if(C===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;l=null}else _!==l&&(l=null);return xo=l,null}function ul(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mt()){case mr:return 1;case Rr:return 4;case cr:case qr:return 16;case Qn:return 536870912;default:return 16}default:return 16}}var Cs=null,wo=null,So=null;function cl(){if(So)return So;var l,_=wo,C=_.length,F,Z="value"in Cs?Cs.value:Cs.textContent,J=Z.length;for(l=0;l<C&&_[l]===Z[l];l++);var ue=C-l;for(F=1;F<=ue&&_[C-F]===Z[J-F];F++);return So=Z.slice(l,1<F?1-F:void 0)}function jo(l){var _=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&_===13&&(l=13)):l=_,l===10&&(l=13),32<=l||l===13?l:0}function To(){return!0}function dl(){return!1}function bn(l){function _(C,F,Z,J,ue){this._reactName=C,this._targetInst=Z,this.type=F,this.nativeEvent=J,this.target=ue,this.currentTarget=null;for(var Te in l)l.hasOwnProperty(Te)&&(C=l[Te],this[Te]=C?C(J):J[Te]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?To:dl,this.isPropagationStopped=dl,this}return K(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=To)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=To)},persist:function(){},isPersistent:To}),_}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=bn(ni),Di=K({},ni,{view:0,detail:0}),hl=bn(Di),Ii,ko,Li,ts=K({},Di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Li&&(Li&&l.type==="mousemove"?(Ii=l.screenX-Li.screenX,ko=l.screenY-Li.screenY):ko=Ii=0,Li=l),Ii)},movementY:function(l){return"movementY"in l?l.movementY:ko}}),Ms=bn(ts),vt=K({},ts,{dataTransfer:0}),sd=bn(vt),xu=K({},Di,{relatedTarget:0}),Ws=bn(xu),id=K({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),od=bn(id),or=K({},ni,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),wu=bn(or),ad=K({},ni,{data:0}),Un=bn(ad),ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dd(l){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(l):(l=cd[l])?!!_[l]:!1}function fl(){return dd}var hd=K({},Di,{key:function(l){if(l.key){var _=ld[l.key]||l.key;if(_!=="Unidentified")return _}return l.type==="keypress"?(l=jo(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ud[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fl,charCode:function(l){return l.type==="keypress"?jo(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?jo(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Su=bn(hd),Dr=K({},ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aa=bn(Dr),j=K({},Di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fl}),P=bn(j),N=K({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=bn(N),X=K({},ts,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=bn(X),te=[9,13,27,32],le=c&&"CompositionEvent"in window,ye=null;c&&"documentMode"in document&&(ye=document.documentMode);var ve=c&&"TextEvent"in window&&!ye,Ce=c&&(!le||ye&&8<ye&&11>=ye),Ne=" ",Pe=!1;function Se(l,_){switch(l){case"keyup":return te.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ye(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Be=!1;function We(l,_){switch(l){case"compositionend":return Ye(_);case"keypress":return _.which!==32?null:(Pe=!0,Ne);case"textInput":return l=_.data,l===Ne&&Pe?null:l;default:return null}}function Fe(l,_){if(Be)return l==="compositionend"||!le&&Se(l,_)?(l=cl(),So=wo=Cs=null,Be=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return Ce&&_.locale!=="ko"?null:_.data;default:return null}}var Ue={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wt(l){var _=l&&l.nodeName&&l.nodeName.toLowerCase();return _==="input"?!!Ue[l.type]:_==="textarea"}function Nt(l,_,C,F){gt(F),_=Eu(_,"onChange"),0<_.length&&(C=new oa("onChange","change",null,C,F),l.push({event:C,listeners:_}))}var _t=null,xt=null;function zt(l){Rp(l,0)}function er(l){var _=ha(l);if(me(_))return l}function wr(l,_){if(l==="change")return _}var Mr=!1;if(c){var Hr;if(c){var Xr="oninput"in document;if(!Xr){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),Xr=typeof Bn.oninput=="function"}Hr=Xr}else Hr=!1;Mr=Hr&&(!document.documentMode||9<document.documentMode)}function rr(){_t&&(_t.detachEvent("onpropertychange",ar),xt=_t=null)}function ar(l){if(l.propertyName==="value"&&er(xt)){var _=[];Nt(_,xt,l,it(l)),Cr(zt,_)}}function tr(l,_,C){l==="focusin"?(rr(),_t=_,xt=C,_t.attachEvent("onpropertychange",ar)):l==="focusout"&&rr()}function sn(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return er(xt)}function yr(l,_){if(l==="click")return er(_)}function $r(l,_){if(l==="input"||l==="change")return er(_)}function dr(l,_){return l===_&&(l!==0||1/l===1/_)||l!==l&&_!==_}var nr=typeof Object.is=="function"?Object.is:dr;function Os(l,_){if(nr(l,_))return!0;if(typeof l!="object"||l===null||typeof _!="object"||_===null)return!1;var C=Object.keys(l),F=Object.keys(_);if(C.length!==F.length)return!1;for(F=0;F<C.length;F++){var Z=C[F];if(!s.call(_,Z)||!nr(l[Z],_[Z]))return!1}return!0}function si(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function pl(l,_){var C=si(l);l=0;for(var F;C;){if(C.nodeType===3){if(F=l+C.textContent.length,l<=_&&F>=_)return{node:C,offset:_-l};l=F}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=si(C)}}function wp(l,_){return l&&_?l===_?!0:l&&l.nodeType===3?!1:_&&_.nodeType===3?wp(l,_.parentNode):"contains"in l?l.contains(_):l.compareDocumentPosition?!!(l.compareDocumentPosition(_)&16):!1:!1}function Sp(){for(var l=window,_=_e();_ instanceof l.HTMLIFrameElement;){try{var C=typeof _.contentWindow.location.href=="string"}catch{C=!1}if(C)l=_.contentWindow;else break;_=_e(l.document)}return _}function fd(l){var _=l&&l.nodeName&&l.nodeName.toLowerCase();return _&&(_==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||_==="textarea"||l.contentEditable==="true")}function yv(l){var _=Sp(),C=l.focusedElem,F=l.selectionRange;if(_!==C&&C&&C.ownerDocument&&wp(C.ownerDocument.documentElement,C)){if(F!==null&&fd(C)){if(_=F.start,l=F.end,l===void 0&&(l=_),"selectionStart"in C)C.selectionStart=_,C.selectionEnd=Math.min(l,C.value.length);else if(l=(_=C.ownerDocument||document)&&_.defaultView||window,l.getSelection){l=l.getSelection();var Z=C.textContent.length,J=Math.min(F.start,Z);F=F.end===void 0?J:Math.min(F.end,Z),!l.extend&&J>F&&(Z=F,F=J,J=Z),Z=pl(C,J);var ue=pl(C,F);Z&&ue&&(l.rangeCount!==1||l.anchorNode!==Z.node||l.anchorOffset!==Z.offset||l.focusNode!==ue.node||l.focusOffset!==ue.offset)&&(_=_.createRange(),_.setStart(Z.node,Z.offset),l.removeAllRanges(),J>F?(l.addRange(_),l.extend(ue.node,ue.offset)):(_.setEnd(ue.node,ue.offset),l.addRange(_)))}}for(_=[],l=C;l=l.parentNode;)l.nodeType===1&&_.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<_.length;C++)l=_[C],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var gv=c&&"documentMode"in document&&11>=document.documentMode,la=null,pd=null,ml=null,md=!1;function jp(l,_,C){var F=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;md||la==null||la!==_e(F)||(F=la,"selectionStart"in F&&fd(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),ml&&Os(ml,F)||(ml=F,F=Eu(pd,"onSelect"),0<F.length&&(_=new oa("onSelect","select",null,_,C),l.push({event:_,listeners:F}),_.target=la)))}function ju(l,_){var C={};return C[l.toLowerCase()]=_.toLowerCase(),C["Webkit"+l]="webkit"+_,C["Moz"+l]="moz"+_,C}var ua={animationend:ju("Animation","AnimationEnd"),animationiteration:ju("Animation","AnimationIteration"),animationstart:ju("Animation","AnimationStart"),transitionend:ju("Transition","TransitionEnd")},yd={},Tp={};c&&(Tp=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function Tu(l){if(yd[l])return yd[l];if(!ua[l])return l;var _=ua[l],C;for(C in _)if(_.hasOwnProperty(C)&&C in Tp)return yd[l]=_[C];return l}var kp=Tu("animationend"),Ep=Tu("animationiteration"),Cp=Tu("animationstart"),Mp=Tu("transitionend"),Op=new Map,Ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(l,_){Op.set(l,_),f(_,[l])}for(var gd=0;gd<Ap.length;gd++){var vd=Ap[gd],vv=vd.toLowerCase(),_v=vd[0].toUpperCase()+vd.slice(1);Ni(vv,"on"+_v)}Ni(kp,"onAnimationEnd"),Ni(Ep,"onAnimationIteration"),Ni(Cp,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Mp,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bv=new Set("cancel close invalid load scroll toggle".split(" ").concat(yl));function Pp(l,_,C){var F=l.type||"unknown-event";l.currentTarget=C,Jo(F,_,void 0,l),l.currentTarget=null}function Rp(l,_){_=(_&4)!==0;for(var C=0;C<l.length;C++){var F=l[C],Z=F.event;F=F.listeners;e:{var J=void 0;if(_)for(var ue=F.length-1;0<=ue;ue--){var Te=F[ue],Oe=Te.instance,qe=Te.currentTarget;if(Te=Te.listener,Oe!==J&&Z.isPropagationStopped())break e;Pp(Z,Te,qe),J=Oe}else for(ue=0;ue<F.length;ue++){if(Te=F[ue],Oe=Te.instance,qe=Te.currentTarget,Te=Te.listener,Oe!==J&&Z.isPropagationStopped())break e;Pp(Z,Te,qe),J=Oe}}}if(Pr)throw l=ti,Pr=!1,ti=null,l}function gr(l,_){var C=_[kd];C===void 0&&(C=_[kd]=new Set);var F=l+"__bubble";C.has(F)||(Dp(_,l,2,!1),C.add(F))}function _d(l,_,C){var F=0;_&&(F|=4),Dp(C,l,F,_)}var ku="_reactListening"+Math.random().toString(36).slice(2);function gl(l){if(!l[ku]){l[ku]=!0,t.forEach(function(C){C!=="selectionchange"&&(bv.has(C)||_d(C,!1,l),_d(C,!0,l))});var _=l.nodeType===9?l:l.ownerDocument;_===null||_[ku]||(_[ku]=!0,_d("selectionchange",!1,_))}}function Dp(l,_,C,F){switch(ul(_)){case 1:var Z=na;break;case 4:Z=bu;break;default:Z=sa}C=Z.bind(null,_,C,l),Z=void 0,!ir||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(Z=!0),F?Z!==void 0?l.addEventListener(_,C,{capture:!0,passive:Z}):l.addEventListener(_,C,!0):Z!==void 0?l.addEventListener(_,C,{passive:Z}):l.addEventListener(_,C,!1)}function bd(l,_,C,F,Z){var J=F;if(!(_&1)&&!(_&2)&&F!==null)e:for(;;){if(F===null)return;var ue=F.tag;if(ue===3||ue===4){var Te=F.stateNode.containerInfo;if(Te===Z||Te.nodeType===8&&Te.parentNode===Z)break;if(ue===4)for(ue=F.return;ue!==null;){var Oe=ue.tag;if((Oe===3||Oe===4)&&(Oe=ue.stateNode.containerInfo,Oe===Z||Oe.nodeType===8&&Oe.parentNode===Z))return;ue=ue.return}for(;Te!==null;){if(ue=Eo(Te),ue===null)return;if(Oe=ue.tag,Oe===5||Oe===6){F=J=ue;continue e}Te=Te.parentNode}}F=F.return}Cr(function(){var qe=J,tt=it(C),st=[];e:{var et=Op.get(l);if(et!==void 0){var yt=oa,St=l;switch(l){case"keypress":if(jo(C)===0)break e;case"keydown":case"keyup":yt=Su;break;case"focusin":St="focus",yt=Ws;break;case"focusout":St="blur",yt=Ws;break;case"beforeblur":case"afterblur":yt=Ws;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=P;break;case kp:case Ep:case Cp:yt=od;break;case Mp:yt=U;break;case"scroll":yt=hl;break;case"wheel":yt=ee;break;case"copy":case"cut":case"paste":yt=wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=aa}var kt=(_&4)!==0,Br=!kt&&l==="scroll",Ve=kt?et!==null?et+"Capture":null:et;kt=[];for(var Re=qe,ze;Re!==null;){ze=Re;var lt=ze.stateNode;if(ze.tag===5&&lt!==null&&(ze=lt,Ve!==null&&(lt=Xt(Re,Ve),lt!=null&&kt.push(vl(Re,lt,ze)))),Br)break;Re=Re.return}0<kt.length&&(et=new yt(et,St,null,C,tt),st.push({event:et,listeners:kt}))}}if(!(_&7)){e:{if(et=l==="mouseover"||l==="pointerover",yt=l==="mouseout"||l==="pointerout",et&&C!==Ke&&(St=C.relatedTarget||C.fromElement)&&(Eo(St)||St[ii]))break e;if((yt||et)&&(et=tt.window===tt?tt:(et=tt.ownerDocument)?et.defaultView||et.parentWindow:window,yt?(St=C.relatedTarget||C.toElement,yt=qe,St=St?Eo(St):null,St!==null&&(Br=Zn(St),St!==Br||St.tag!==5&&St.tag!==6)&&(St=null)):(yt=null,St=qe),yt!==St)){if(kt=Ms,lt="onMouseLeave",Ve="onMouseEnter",Re="mouse",(l==="pointerout"||l==="pointerover")&&(kt=aa,lt="onPointerLeave",Ve="onPointerEnter",Re="pointer"),Br=yt==null?et:ha(yt),ze=St==null?et:ha(St),et=new kt(lt,Re+"leave",yt,C,tt),et.target=Br,et.relatedTarget=ze,lt=null,Eo(tt)===qe&&(kt=new kt(Ve,Re+"enter",St,C,tt),kt.target=ze,kt.relatedTarget=Br,lt=kt),Br=lt,yt&&St)t:{for(kt=yt,Ve=St,Re=0,ze=kt;ze;ze=ca(ze))Re++;for(ze=0,lt=Ve;lt;lt=ca(lt))ze++;for(;0<Re-ze;)kt=ca(kt),Re--;for(;0<ze-Re;)Ve=ca(Ve),ze--;for(;Re--;){if(kt===Ve||Ve!==null&&kt===Ve.alternate)break t;kt=ca(kt),Ve=ca(Ve)}kt=null}else kt=null;yt!==null&&Ip(st,et,yt,kt,!1),St!==null&&Br!==null&&Ip(st,Br,St,kt,!0)}}e:{if(et=qe?ha(qe):window,yt=et.nodeName&&et.nodeName.toLowerCase(),yt==="select"||yt==="input"&&et.type==="file")var Et=wr;else if(wt(et))if(Mr)Et=$r;else{Et=sn;var It=tr}else(yt=et.nodeName)&&yt.toLowerCase()==="input"&&(et.type==="checkbox"||et.type==="radio")&&(Et=yr);if(Et&&(Et=Et(l,qe))){Nt(st,Et,C,tt);break e}It&&It(l,et,qe),l==="focusout"&&(It=et._wrapperState)&&It.controlled&&et.type==="number"&&we(et,"number",et.value)}switch(It=qe?ha(qe):window,l){case"focusin":(wt(It)||It.contentEditable==="true")&&(la=It,pd=qe,ml=null);break;case"focusout":ml=pd=la=null;break;case"mousedown":md=!0;break;case"contextmenu":case"mouseup":case"dragend":md=!1,jp(st,C,tt);break;case"selectionchange":if(gv)break;case"keydown":case"keyup":jp(st,C,tt)}var Lt;if(le)e:{switch(l){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else Be?Se(l,C)&&(Ut="onCompositionEnd"):l==="keydown"&&C.keyCode===229&&(Ut="onCompositionStart");Ut&&(Ce&&C.locale!=="ko"&&(Be||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Be&&(Lt=cl()):(Cs=tt,wo="value"in Cs?Cs.value:Cs.textContent,Be=!0)),It=Eu(qe,Ut),0<It.length&&(Ut=new Un(Ut,l,null,C,tt),st.push({event:Ut,listeners:It}),Lt?Ut.data=Lt:(Lt=Ye(C),Lt!==null&&(Ut.data=Lt)))),(Lt=ve?We(l,C):Fe(l,C))&&(qe=Eu(qe,"onBeforeInput"),0<qe.length&&(tt=new Un("onBeforeInput","beforeinput",null,C,tt),st.push({event:tt,listeners:qe}),tt.data=Lt))}Rp(st,_)})}function vl(l,_,C){return{instance:l,listener:_,currentTarget:C}}function Eu(l,_){for(var C=_+"Capture",F=[];l!==null;){var Z=l,J=Z.stateNode;Z.tag===5&&J!==null&&(Z=J,J=Xt(l,C),J!=null&&F.unshift(vl(l,J,Z)),J=Xt(l,_),J!=null&&F.push(vl(l,J,Z))),l=l.return}return F}function ca(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Ip(l,_,C,F,Z){for(var J=_._reactName,ue=[];C!==null&&C!==F;){var Te=C,Oe=Te.alternate,qe=Te.stateNode;if(Oe!==null&&Oe===F)break;Te.tag===5&&qe!==null&&(Te=qe,Z?(Oe=Xt(C,J),Oe!=null&&ue.unshift(vl(C,Oe,Te))):Z||(Oe=Xt(C,J),Oe!=null&&ue.push(vl(C,Oe,Te)))),C=C.return}ue.length!==0&&l.push({event:_,listeners:ue})}var xv=/\r\n?/g,wv=/\u0000|\uFFFD/g;function Lp(l){return(typeof l=="string"?l:""+l).replace(xv,`
`).replace(wv,"")}function Cu(l,_,C){if(_=Lp(_),Lp(l)!==_&&C)throw Error(g(425))}function Mu(){}var xd=null,wd=null;function Sd(l,_){return l==="textarea"||l==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var jd=typeof setTimeout=="function"?setTimeout:void 0,Sv=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,jv=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(l){return Np.resolve(null).then(l).catch(Tv)}:jd;function Tv(l){setTimeout(function(){throw l})}function Td(l,_){var C=_,F=0;do{var Z=C.nextSibling;if(l.removeChild(C),Z&&Z.nodeType===8)if(C=Z.data,C==="/$"){if(F===0){l.removeChild(Z),Es(_);return}F--}else C!=="$"&&C!=="$?"&&C!=="$!"||F++;C=Z}while(C);Es(_)}function Fi(l){for(;l!=null;l=l.nextSibling){var _=l.nodeType;if(_===1||_===3)break;if(_===8){if(_=l.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return l}function Fp(l){l=l.previousSibling;for(var _=0;l;){if(l.nodeType===8){var C=l.data;if(C==="$"||C==="$!"||C==="$?"){if(_===0)return l;_--}else C==="/$"&&_++}l=l.previousSibling}return null}var da=Math.random().toString(36).slice(2),Hs="__reactFiber$"+da,_l="__reactProps$"+da,ii="__reactContainer$"+da,kd="__reactEvents$"+da,kv="__reactListeners$"+da,Ev="__reactHandles$"+da;function Eo(l){var _=l[Hs];if(_)return _;for(var C=l.parentNode;C;){if(_=C[ii]||C[Hs]){if(C=_.alternate,_.child!==null||C!==null&&C.child!==null)for(l=Fp(l);l!==null;){if(C=l[Hs])return C;l=Fp(l)}return _}l=C,C=l.parentNode}return null}function bl(l){return l=l[Hs]||l[ii],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function ha(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(g(33))}function Ou(l){return l[_l]||null}var Ed=[],fa=-1;function Ui(l){return{current:l}}function vr(l){0>fa||(l.current=Ed[fa],Ed[fa]=null,fa--)}function fr(l,_){fa++,Ed[fa]=l.current,l.current=_}var Bi={},xn=Ui(Bi),Vn=Ui(!1),Co=Bi;function pa(l,_){var C=l.type.contextTypes;if(!C)return Bi;var F=l.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===_)return F.__reactInternalMemoizedMaskedChildContext;var Z={},J;for(J in C)Z[J]=_[J];return F&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=_,l.__reactInternalMemoizedMaskedChildContext=Z),Z}function zn(l){return l=l.childContextTypes,l!=null}function Au(){vr(Vn),vr(xn)}function Up(l,_,C){if(xn.current!==Bi)throw Error(g(168));fr(xn,_),fr(Vn,C)}function Bp(l,_,C){var F=l.stateNode;if(_=_.childContextTypes,typeof F.getChildContext!="function")return C;F=F.getChildContext();for(var Z in F)if(!(Z in _))throw Error(g(108,ie(l)||"Unknown",Z));return K({},C,F)}function Pu(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Bi,Co=xn.current,fr(xn,l),fr(Vn,Vn.current),!0}function Vp(l,_,C){var F=l.stateNode;if(!F)throw Error(g(169));C?(l=Bp(l,_,Co),F.__reactInternalMemoizedMergedChildContext=l,vr(Vn),vr(xn),fr(xn,l)):vr(Vn),fr(Vn,C)}var oi=null,Ru=!1,Cd=!1;function zp(l){oi===null?oi=[l]:oi.push(l)}function Cv(l){Ru=!0,zp(l)}function Vi(){if(!Cd&&oi!==null){Cd=!0;var l=0,_=Zt;try{var C=oi;for(Zt=1;l<C.length;l++){var F=C[l];do F=F(!0);while(F!==null)}oi=null,Ru=!1}catch(Z){throw oi!==null&&(oi=oi.slice(l+1)),Gt(mr,Vi),Z}finally{Zt=_,Cd=!1}}return null}var ma=[],ya=0,Du=null,Iu=0,fs=[],ps=0,Mo=null,ai=1,li="";function Oo(l,_){ma[ya++]=Iu,ma[ya++]=Du,Du=l,Iu=_}function Gp(l,_,C){fs[ps++]=ai,fs[ps++]=li,fs[ps++]=Mo,Mo=l;var F=ai;l=li;var Z=32-Nn(F)-1;F&=~(1<<Z),C+=1;var J=32-Nn(_)+Z;if(30<J){var ue=Z-Z%5;J=(F&(1<<ue)-1).toString(32),F>>=ue,Z-=ue,ai=1<<32-Nn(_)+Z|C<<Z|F,li=J+l}else ai=1<<J|C<<Z|F,li=l}function Md(l){l.return!==null&&(Oo(l,1),Gp(l,1,0))}function Od(l){for(;l===Du;)Du=ma[--ya],ma[ya]=null,Iu=ma[--ya],ma[ya]=null;for(;l===Mo;)Mo=fs[--ps],fs[ps]=null,li=fs[--ps],fs[ps]=null,ai=fs[--ps],fs[ps]=null}var rs=null,ns=null,Sr=!1,As=null;function qp(l,_){var C=vs(5,null,null,0);C.elementType="DELETED",C.stateNode=_,C.return=l,_=l.deletions,_===null?(l.deletions=[C],l.flags|=16):_.push(C)}function Wp(l,_){switch(l.tag){case 5:var C=l.type;return _=_.nodeType!==1||C.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(l.stateNode=_,rs=l,ns=Fi(_.firstChild),!0):!1;case 6:return _=l.pendingProps===""||_.nodeType!==3?null:_,_!==null?(l.stateNode=_,rs=l,ns=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(C=Mo!==null?{id:ai,overflow:li}:null,l.memoizedState={dehydrated:_,treeContext:C,retryLane:1073741824},C=vs(18,null,null,0),C.stateNode=_,C.return=l,l.child=C,rs=l,ns=null,!0):!1;default:return!1}}function Ad(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Pd(l){if(Sr){var _=ns;if(_){var C=_;if(!Wp(l,_)){if(Ad(l))throw Error(g(418));_=Fi(C.nextSibling);var F=rs;_&&Wp(l,_)?qp(F,C):(l.flags=l.flags&-4097|2,Sr=!1,rs=l)}}else{if(Ad(l))throw Error(g(418));l.flags=l.flags&-4097|2,Sr=!1,rs=l}}}function Hp(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;rs=l}function Lu(l){if(l!==rs)return!1;if(!Sr)return Hp(l),Sr=!0,!1;var _;if((_=l.tag!==3)&&!(_=l.tag!==5)&&(_=l.type,_=_!=="head"&&_!=="body"&&!Sd(l.type,l.memoizedProps)),_&&(_=ns)){if(Ad(l))throw Xp(),Error(g(418));for(;_;)qp(l,_),_=Fi(_.nextSibling)}if(Hp(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(g(317));e:{for(l=l.nextSibling,_=0;l;){if(l.nodeType===8){var C=l.data;if(C==="/$"){if(_===0){ns=Fi(l.nextSibling);break e}_--}else C!=="$"&&C!=="$!"&&C!=="$?"||_++}l=l.nextSibling}ns=null}}else ns=rs?Fi(l.stateNode.nextSibling):null;return!0}function Xp(){for(var l=ns;l;)l=Fi(l.nextSibling)}function ga(){ns=rs=null,Sr=!1}function Rd(l){As===null?As=[l]:As.push(l)}var Mv=b.ReactCurrentBatchConfig;function xl(l,_,C){if(l=C.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(g(309));var F=C.stateNode}if(!F)throw Error(g(147,l));var Z=F,J=""+l;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===J?_.ref:(_=function(ue){var Te=Z.refs;ue===null?delete Te[J]:Te[J]=ue},_._stringRef=J,_)}if(typeof l!="string")throw Error(g(284));if(!C._owner)throw Error(g(290,l))}return l}function Nu(l,_){throw l=Object.prototype.toString.call(_),Error(g(31,l==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":l))}function Yp(l){var _=l._init;return _(l._payload)}function Zp(l){function _(Ve,Re){if(l){var ze=Ve.deletions;ze===null?(Ve.deletions=[Re],Ve.flags|=16):ze.push(Re)}}function C(Ve,Re){if(!l)return null;for(;Re!==null;)_(Ve,Re),Re=Re.sibling;return null}function F(Ve,Re){for(Ve=new Map;Re!==null;)Re.key!==null?Ve.set(Re.key,Re):Ve.set(Re.index,Re),Re=Re.sibling;return Ve}function Z(Ve,Re){return Ve=Zi(Ve,Re),Ve.index=0,Ve.sibling=null,Ve}function J(Ve,Re,ze){return Ve.index=ze,l?(ze=Ve.alternate,ze!==null?(ze=ze.index,ze<Re?(Ve.flags|=2,Re):ze):(Ve.flags|=2,Re)):(Ve.flags|=1048576,Re)}function ue(Ve){return l&&Ve.alternate===null&&(Ve.flags|=2),Ve}function Te(Ve,Re,ze,lt){return Re===null||Re.tag!==6?(Re=jh(ze,Ve.mode,lt),Re.return=Ve,Re):(Re=Z(Re,ze),Re.return=Ve,Re)}function Oe(Ve,Re,ze,lt){var Et=ze.type;return Et===E?tt(Ve,Re,ze.props.children,lt,ze.key):Re!==null&&(Re.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===G&&Yp(Et)===Re.type)?(lt=Z(Re,ze.props),lt.ref=xl(Ve,Re,ze),lt.return=Ve,lt):(lt=ac(ze.type,ze.key,ze.props,null,Ve.mode,lt),lt.ref=xl(Ve,Re,ze),lt.return=Ve,lt)}function qe(Ve,Re,ze,lt){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==ze.containerInfo||Re.stateNode.implementation!==ze.implementation?(Re=Th(ze,Ve.mode,lt),Re.return=Ve,Re):(Re=Z(Re,ze.children||[]),Re.return=Ve,Re)}function tt(Ve,Re,ze,lt,Et){return Re===null||Re.tag!==7?(Re=Fo(ze,Ve.mode,lt,Et),Re.return=Ve,Re):(Re=Z(Re,ze),Re.return=Ve,Re)}function st(Ve,Re,ze){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Re=jh(""+Re,Ve.mode,ze),Re.return=Ve,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case S:return ze=ac(Re.type,Re.key,Re.props,null,Ve.mode,ze),ze.ref=xl(Ve,null,Re),ze.return=Ve,ze;case k:return Re=Th(Re,Ve.mode,ze),Re.return=Ve,Re;case G:var lt=Re._init;return st(Ve,lt(Re._payload),ze)}if(Me(Re)||W(Re))return Re=Fo(Re,Ve.mode,ze,null),Re.return=Ve,Re;Nu(Ve,Re)}return null}function et(Ve,Re,ze,lt){var Et=Re!==null?Re.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number")return Et!==null?null:Te(Ve,Re,""+ze,lt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case S:return ze.key===Et?Oe(Ve,Re,ze,lt):null;case k:return ze.key===Et?qe(Ve,Re,ze,lt):null;case G:return Et=ze._init,et(Ve,Re,Et(ze._payload),lt)}if(Me(ze)||W(ze))return Et!==null?null:tt(Ve,Re,ze,lt,null);Nu(Ve,ze)}return null}function yt(Ve,Re,ze,lt,Et){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return Ve=Ve.get(ze)||null,Te(Re,Ve,""+lt,Et);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case S:return Ve=Ve.get(lt.key===null?ze:lt.key)||null,Oe(Re,Ve,lt,Et);case k:return Ve=Ve.get(lt.key===null?ze:lt.key)||null,qe(Re,Ve,lt,Et);case G:var It=lt._init;return yt(Ve,Re,ze,It(lt._payload),Et)}if(Me(lt)||W(lt))return Ve=Ve.get(ze)||null,tt(Re,Ve,lt,Et,null);Nu(Re,lt)}return null}function St(Ve,Re,ze,lt){for(var Et=null,It=null,Lt=Re,Ut=Re=0,ln=null;Lt!==null&&Ut<ze.length;Ut++){Lt.index>Ut?(ln=Lt,Lt=null):ln=Lt.sibling;var Jt=et(Ve,Lt,ze[Ut],lt);if(Jt===null){Lt===null&&(Lt=ln);break}l&&Lt&&Jt.alternate===null&&_(Ve,Lt),Re=J(Jt,Re,Ut),It===null?Et=Jt:It.sibling=Jt,It=Jt,Lt=ln}if(Ut===ze.length)return C(Ve,Lt),Sr&&Oo(Ve,Ut),Et;if(Lt===null){for(;Ut<ze.length;Ut++)Lt=st(Ve,ze[Ut],lt),Lt!==null&&(Re=J(Lt,Re,Ut),It===null?Et=Lt:It.sibling=Lt,It=Lt);return Sr&&Oo(Ve,Ut),Et}for(Lt=F(Ve,Lt);Ut<ze.length;Ut++)ln=yt(Lt,Ve,Ut,ze[Ut],lt),ln!==null&&(l&&ln.alternate!==null&&Lt.delete(ln.key===null?Ut:ln.key),Re=J(ln,Re,Ut),It===null?Et=ln:It.sibling=ln,It=ln);return l&&Lt.forEach(function(Qi){return _(Ve,Qi)}),Sr&&Oo(Ve,Ut),Et}function kt(Ve,Re,ze,lt){var Et=W(ze);if(typeof Et!="function")throw Error(g(150));if(ze=Et.call(ze),ze==null)throw Error(g(151));for(var It=Et=null,Lt=Re,Ut=Re=0,ln=null,Jt=ze.next();Lt!==null&&!Jt.done;Ut++,Jt=ze.next()){Lt.index>Ut?(ln=Lt,Lt=null):ln=Lt.sibling;var Qi=et(Ve,Lt,Jt.value,lt);if(Qi===null){Lt===null&&(Lt=ln);break}l&&Lt&&Qi.alternate===null&&_(Ve,Lt),Re=J(Qi,Re,Ut),It===null?Et=Qi:It.sibling=Qi,It=Qi,Lt=ln}if(Jt.done)return C(Ve,Lt),Sr&&Oo(Ve,Ut),Et;if(Lt===null){for(;!Jt.done;Ut++,Jt=ze.next())Jt=st(Ve,Jt.value,lt),Jt!==null&&(Re=J(Jt,Re,Ut),It===null?Et=Jt:It.sibling=Jt,It=Jt);return Sr&&Oo(Ve,Ut),Et}for(Lt=F(Ve,Lt);!Jt.done;Ut++,Jt=ze.next())Jt=yt(Lt,Ve,Ut,Jt.value,lt),Jt!==null&&(l&&Jt.alternate!==null&&Lt.delete(Jt.key===null?Ut:Jt.key),Re=J(Jt,Re,Ut),It===null?Et=Jt:It.sibling=Jt,It=Jt);return l&&Lt.forEach(function(a0){return _(Ve,a0)}),Sr&&Oo(Ve,Ut),Et}function Br(Ve,Re,ze,lt){if(typeof ze=="object"&&ze!==null&&ze.type===E&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case S:e:{for(var Et=ze.key,It=Re;It!==null;){if(It.key===Et){if(Et=ze.type,Et===E){if(It.tag===7){C(Ve,It.sibling),Re=Z(It,ze.props.children),Re.return=Ve,Ve=Re;break e}}else if(It.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===G&&Yp(Et)===It.type){C(Ve,It.sibling),Re=Z(It,ze.props),Re.ref=xl(Ve,It,ze),Re.return=Ve,Ve=Re;break e}C(Ve,It);break}else _(Ve,It);It=It.sibling}ze.type===E?(Re=Fo(ze.props.children,Ve.mode,lt,ze.key),Re.return=Ve,Ve=Re):(lt=ac(ze.type,ze.key,ze.props,null,Ve.mode,lt),lt.ref=xl(Ve,Re,ze),lt.return=Ve,Ve=lt)}return ue(Ve);case k:e:{for(It=ze.key;Re!==null;){if(Re.key===It)if(Re.tag===4&&Re.stateNode.containerInfo===ze.containerInfo&&Re.stateNode.implementation===ze.implementation){C(Ve,Re.sibling),Re=Z(Re,ze.children||[]),Re.return=Ve,Ve=Re;break e}else{C(Ve,Re);break}else _(Ve,Re);Re=Re.sibling}Re=Th(ze,Ve.mode,lt),Re.return=Ve,Ve=Re}return ue(Ve);case G:return It=ze._init,Br(Ve,Re,It(ze._payload),lt)}if(Me(ze))return St(Ve,Re,ze,lt);if(W(ze))return kt(Ve,Re,ze,lt);Nu(Ve,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"?(ze=""+ze,Re!==null&&Re.tag===6?(C(Ve,Re.sibling),Re=Z(Re,ze),Re.return=Ve,Ve=Re):(C(Ve,Re),Re=jh(ze,Ve.mode,lt),Re.return=Ve,Ve=Re),ue(Ve)):C(Ve,Re)}return Br}var va=Zp(!0),Qp=Zp(!1),Fu=Ui(null),Uu=null,_a=null,Dd=null;function Id(){Dd=_a=Uu=null}function Ld(l){var _=Fu.current;vr(Fu),l._currentValue=_}function Nd(l,_,C){for(;l!==null;){var F=l.alternate;if((l.childLanes&_)!==_?(l.childLanes|=_,F!==null&&(F.childLanes|=_)):F!==null&&(F.childLanes&_)!==_&&(F.childLanes|=_),l===C)break;l=l.return}}function ba(l,_){Uu=l,Dd=_a=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&_&&(Gn=!0),l.firstContext=null)}function ms(l){var _=l._currentValue;if(Dd!==l)if(l={context:l,memoizedValue:_,next:null},_a===null){if(Uu===null)throw Error(g(308));_a=l,Uu.dependencies={lanes:0,firstContext:l}}else _a=_a.next=l;return _}var Ao=null;function Fd(l){Ao===null?Ao=[l]:Ao.push(l)}function $p(l,_,C,F){var Z=_.interleaved;return Z===null?(C.next=C,Fd(_)):(C.next=Z.next,Z.next=C),_.interleaved=C,ui(l,F)}function ui(l,_){l.lanes|=_;var C=l.alternate;for(C!==null&&(C.lanes|=_),C=l,l=l.return;l!==null;)l.childLanes|=_,C=l.alternate,C!==null&&(C.childLanes|=_),C=l,l=l.return;return C.tag===3?C.stateNode:null}var zi=!1;function Ud(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kp(l,_){l=l.updateQueue,_.updateQueue===l&&(_.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ci(l,_){return{eventTime:l,lane:_,tag:0,payload:null,callback:null,next:null}}function Gi(l,_,C){var F=l.updateQueue;if(F===null)return null;if(F=F.shared,Kt&2){var Z=F.pending;return Z===null?_.next=_:(_.next=Z.next,Z.next=_),F.pending=_,ui(l,C)}return Z=F.interleaved,Z===null?(_.next=_,Fd(F)):(_.next=Z.next,Z.next=_),F.interleaved=_,ui(l,C)}function Bu(l,_,C){if(_=_.updateQueue,_!==null&&(_=_.shared,(C&4194240)!==0)){var F=_.lanes;F&=l.pendingLanes,C|=F,_.lanes=C,Oi(l,C)}}function Jp(l,_){var C=l.updateQueue,F=l.alternate;if(F!==null&&(F=F.updateQueue,C===F)){var Z=null,J=null;if(C=C.firstBaseUpdate,C!==null){do{var ue={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};J===null?Z=J=ue:J=J.next=ue,C=C.next}while(C!==null);J===null?Z=J=_:J=J.next=_}else Z=J=_;C={baseState:F.baseState,firstBaseUpdate:Z,lastBaseUpdate:J,shared:F.shared,effects:F.effects},l.updateQueue=C;return}l=C.lastBaseUpdate,l===null?C.firstBaseUpdate=_:l.next=_,C.lastBaseUpdate=_}function Vu(l,_,C,F){var Z=l.updateQueue;zi=!1;var J=Z.firstBaseUpdate,ue=Z.lastBaseUpdate,Te=Z.shared.pending;if(Te!==null){Z.shared.pending=null;var Oe=Te,qe=Oe.next;Oe.next=null,ue===null?J=qe:ue.next=qe,ue=Oe;var tt=l.alternate;tt!==null&&(tt=tt.updateQueue,Te=tt.lastBaseUpdate,Te!==ue&&(Te===null?tt.firstBaseUpdate=qe:Te.next=qe,tt.lastBaseUpdate=Oe))}if(J!==null){var st=Z.baseState;ue=0,tt=qe=Oe=null,Te=J;do{var et=Te.lane,yt=Te.eventTime;if((F&et)===et){tt!==null&&(tt=tt.next={eventTime:yt,lane:0,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null});e:{var St=l,kt=Te;switch(et=_,yt=C,kt.tag){case 1:if(St=kt.payload,typeof St=="function"){st=St.call(yt,st,et);break e}st=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=kt.payload,et=typeof St=="function"?St.call(yt,st,et):St,et==null)break e;st=K({},st,et);break e;case 2:zi=!0}}Te.callback!==null&&Te.lane!==0&&(l.flags|=64,et=Z.effects,et===null?Z.effects=[Te]:et.push(Te))}else yt={eventTime:yt,lane:et,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},tt===null?(qe=tt=yt,Oe=st):tt=tt.next=yt,ue|=et;if(Te=Te.next,Te===null){if(Te=Z.shared.pending,Te===null)break;et=Te,Te=et.next,et.next=null,Z.lastBaseUpdate=et,Z.shared.pending=null}}while(!0);if(tt===null&&(Oe=st),Z.baseState=Oe,Z.firstBaseUpdate=qe,Z.lastBaseUpdate=tt,_=Z.shared.interleaved,_!==null){Z=_;do ue|=Z.lane,Z=Z.next;while(Z!==_)}else J===null&&(Z.shared.lanes=0);Do|=ue,l.lanes=ue,l.memoizedState=st}}function em(l,_,C){if(l=_.effects,_.effects=null,l!==null)for(_=0;_<l.length;_++){var F=l[_],Z=F.callback;if(Z!==null){if(F.callback=null,F=C,typeof Z!="function")throw Error(g(191,Z));Z.call(F)}}}var wl={},Xs=Ui(wl),Sl=Ui(wl),jl=Ui(wl);function Po(l){if(l===wl)throw Error(g(174));return l}function Bd(l,_){switch(fr(jl,_),fr(Sl,l),fr(Xs,wl),l=_.nodeType,l){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:ct(null,"");break;default:l=l===8?_.parentNode:_,_=l.namespaceURI||null,l=l.tagName,_=ct(_,l)}vr(Xs),fr(Xs,_)}function xa(){vr(Xs),vr(Sl),vr(jl)}function tm(l){Po(jl.current);var _=Po(Xs.current),C=ct(_,l.type);_!==C&&(fr(Sl,l),fr(Xs,C))}function Vd(l){Sl.current===l&&(vr(Xs),vr(Sl))}var Or=Ui(0);function zu(l){for(var _=l;_!==null;){if(_.tag===13){var C=_.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===l)break;for(;_.sibling===null;){if(_.return===null||_.return===l)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var zd=[];function Gd(){for(var l=0;l<zd.length;l++)zd[l]._workInProgressVersionPrimary=null;zd.length=0}var Gu=b.ReactCurrentDispatcher,qd=b.ReactCurrentBatchConfig,Ro=0,Ar=null,Kr=null,on=null,qu=!1,Tl=!1,kl=0,Ov=0;function wn(){throw Error(g(321))}function Wd(l,_){if(_===null)return!1;for(var C=0;C<_.length&&C<l.length;C++)if(!nr(l[C],_[C]))return!1;return!0}function Hd(l,_,C,F,Z,J){if(Ro=J,Ar=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Gu.current=l===null||l.memoizedState===null?Dv:Iv,l=C(F,Z),Tl){J=0;do{if(Tl=!1,kl=0,25<=J)throw Error(g(301));J+=1,on=Kr=null,_.updateQueue=null,Gu.current=Lv,l=C(F,Z)}while(Tl)}if(Gu.current=Xu,_=Kr!==null&&Kr.next!==null,Ro=0,on=Kr=Ar=null,qu=!1,_)throw Error(g(300));return l}function Xd(){var l=kl!==0;return kl=0,l}function Ys(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Ar.memoizedState=on=l:on=on.next=l,on}function ys(){if(Kr===null){var l=Ar.alternate;l=l!==null?l.memoizedState:null}else l=Kr.next;var _=on===null?Ar.memoizedState:on.next;if(_!==null)on=_,Kr=l;else{if(l===null)throw Error(g(310));Kr=l,l={memoizedState:Kr.memoizedState,baseState:Kr.baseState,baseQueue:Kr.baseQueue,queue:Kr.queue,next:null},on===null?Ar.memoizedState=on=l:on=on.next=l}return on}function El(l,_){return typeof _=="function"?_(l):_}function Yd(l){var _=ys(),C=_.queue;if(C===null)throw Error(g(311));C.lastRenderedReducer=l;var F=Kr,Z=F.baseQueue,J=C.pending;if(J!==null){if(Z!==null){var ue=Z.next;Z.next=J.next,J.next=ue}F.baseQueue=Z=J,C.pending=null}if(Z!==null){J=Z.next,F=F.baseState;var Te=ue=null,Oe=null,qe=J;do{var tt=qe.lane;if((Ro&tt)===tt)Oe!==null&&(Oe=Oe.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),F=qe.hasEagerState?qe.eagerState:l(F,qe.action);else{var st={lane:tt,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Oe===null?(Te=Oe=st,ue=F):Oe=Oe.next=st,Ar.lanes|=tt,Do|=tt}qe=qe.next}while(qe!==null&&qe!==J);Oe===null?ue=F:Oe.next=Te,nr(F,_.memoizedState)||(Gn=!0),_.memoizedState=F,_.baseState=ue,_.baseQueue=Oe,C.lastRenderedState=F}if(l=C.interleaved,l!==null){Z=l;do J=Z.lane,Ar.lanes|=J,Do|=J,Z=Z.next;while(Z!==l)}else Z===null&&(C.lanes=0);return[_.memoizedState,C.dispatch]}function Zd(l){var _=ys(),C=_.queue;if(C===null)throw Error(g(311));C.lastRenderedReducer=l;var F=C.dispatch,Z=C.pending,J=_.memoizedState;if(Z!==null){C.pending=null;var ue=Z=Z.next;do J=l(J,ue.action),ue=ue.next;while(ue!==Z);nr(J,_.memoizedState)||(Gn=!0),_.memoizedState=J,_.baseQueue===null&&(_.baseState=J),C.lastRenderedState=J}return[J,F]}function rm(){}function nm(l,_){var C=Ar,F=ys(),Z=_(),J=!nr(F.memoizedState,Z);if(J&&(F.memoizedState=Z,Gn=!0),F=F.queue,Qd(om.bind(null,C,F,l),[l]),F.getSnapshot!==_||J||on!==null&&on.memoizedState.tag&1){if(C.flags|=2048,Cl(9,im.bind(null,C,F,Z,_),void 0,null),an===null)throw Error(g(349));Ro&30||sm(C,_,Z)}return Z}function sm(l,_,C){l.flags|=16384,l={getSnapshot:_,value:C},_=Ar.updateQueue,_===null?(_={lastEffect:null,stores:null},Ar.updateQueue=_,_.stores=[l]):(C=_.stores,C===null?_.stores=[l]:C.push(l))}function im(l,_,C,F){_.value=C,_.getSnapshot=F,am(_)&&lm(l)}function om(l,_,C){return C(function(){am(_)&&lm(l)})}function am(l){var _=l.getSnapshot;l=l.value;try{var C=_();return!nr(l,C)}catch{return!0}}function lm(l){var _=ui(l,1);_!==null&&Is(_,l,1,-1)}function um(l){var _=Ys();return typeof l=="function"&&(l=l()),_.memoizedState=_.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:l},_.queue=l,l=l.dispatch=Rv.bind(null,Ar,l),[_.memoizedState,l]}function Cl(l,_,C,F){return l={tag:l,create:_,destroy:C,deps:F,next:null},_=Ar.updateQueue,_===null?(_={lastEffect:null,stores:null},Ar.updateQueue=_,_.lastEffect=l.next=l):(C=_.lastEffect,C===null?_.lastEffect=l.next=l:(F=C.next,C.next=l,l.next=F,_.lastEffect=l)),l}function cm(){return ys().memoizedState}function Wu(l,_,C,F){var Z=Ys();Ar.flags|=l,Z.memoizedState=Cl(1|_,C,void 0,F===void 0?null:F)}function Hu(l,_,C,F){var Z=ys();F=F===void 0?null:F;var J=void 0;if(Kr!==null){var ue=Kr.memoizedState;if(J=ue.destroy,F!==null&&Wd(F,ue.deps)){Z.memoizedState=Cl(_,C,J,F);return}}Ar.flags|=l,Z.memoizedState=Cl(1|_,C,J,F)}function dm(l,_){return Wu(8390656,8,l,_)}function Qd(l,_){return Hu(2048,8,l,_)}function hm(l,_){return Hu(4,2,l,_)}function fm(l,_){return Hu(4,4,l,_)}function pm(l,_){if(typeof _=="function")return l=l(),_(l),function(){_(null)};if(_!=null)return l=l(),_.current=l,function(){_.current=null}}function mm(l,_,C){return C=C!=null?C.concat([l]):null,Hu(4,4,pm.bind(null,_,l),C)}function $d(){}function ym(l,_){var C=ys();_=_===void 0?null:_;var F=C.memoizedState;return F!==null&&_!==null&&Wd(_,F[1])?F[0]:(C.memoizedState=[l,_],l)}function gm(l,_){var C=ys();_=_===void 0?null:_;var F=C.memoizedState;return F!==null&&_!==null&&Wd(_,F[1])?F[0]:(l=l(),C.memoizedState=[l,_],l)}function vm(l,_,C){return Ro&21?(nr(C,_)||(C=mu(),Ar.lanes|=C,Do|=C,l.baseState=!0),_):(l.baseState&&(l.baseState=!1,Gn=!0),l.memoizedState=C)}function Av(l,_){var C=Zt;Zt=C!==0&&4>C?C:4,l(!0);var F=qd.transition;qd.transition={};try{l(!1),_()}finally{Zt=C,qd.transition=F}}function _m(){return ys().memoizedState}function Pv(l,_,C){var F=Xi(l);if(C={lane:F,action:C,hasEagerState:!1,eagerState:null,next:null},bm(l))xm(_,C);else if(C=$p(l,_,C,F),C!==null){var Z=Mn();Is(C,l,F,Z),wm(C,_,F)}}function Rv(l,_,C){var F=Xi(l),Z={lane:F,action:C,hasEagerState:!1,eagerState:null,next:null};if(bm(l))xm(_,Z);else{var J=l.alternate;if(l.lanes===0&&(J===null||J.lanes===0)&&(J=_.lastRenderedReducer,J!==null))try{var ue=_.lastRenderedState,Te=J(ue,C);if(Z.hasEagerState=!0,Z.eagerState=Te,nr(Te,ue)){var Oe=_.interleaved;Oe===null?(Z.next=Z,Fd(_)):(Z.next=Oe.next,Oe.next=Z),_.interleaved=Z;return}}catch{}finally{}C=$p(l,_,Z,F),C!==null&&(Z=Mn(),Is(C,l,F,Z),wm(C,_,F))}}function bm(l){var _=l.alternate;return l===Ar||_!==null&&_===Ar}function xm(l,_){Tl=qu=!0;var C=l.pending;C===null?_.next=_:(_.next=C.next,C.next=_),l.pending=_}function wm(l,_,C){if(C&4194240){var F=_.lanes;F&=l.pendingLanes,C|=F,_.lanes=C,Oi(l,C)}}var Xu={readContext:ms,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},Dv={readContext:ms,useCallback:function(l,_){return Ys().memoizedState=[l,_===void 0?null:_],l},useContext:ms,useEffect:dm,useImperativeHandle:function(l,_,C){return C=C!=null?C.concat([l]):null,Wu(4194308,4,pm.bind(null,_,l),C)},useLayoutEffect:function(l,_){return Wu(4194308,4,l,_)},useInsertionEffect:function(l,_){return Wu(4,2,l,_)},useMemo:function(l,_){var C=Ys();return _=_===void 0?null:_,l=l(),C.memoizedState=[l,_],l},useReducer:function(l,_,C){var F=Ys();return _=C!==void 0?C(_):_,F.memoizedState=F.baseState=_,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},F.queue=l,l=l.dispatch=Pv.bind(null,Ar,l),[F.memoizedState,l]},useRef:function(l){var _=Ys();return l={current:l},_.memoizedState=l},useState:um,useDebugValue:$d,useDeferredValue:function(l){return Ys().memoizedState=l},useTransition:function(){var l=um(!1),_=l[0];return l=Av.bind(null,l[1]),Ys().memoizedState=l,[_,l]},useMutableSource:function(){},useSyncExternalStore:function(l,_,C){var F=Ar,Z=Ys();if(Sr){if(C===void 0)throw Error(g(407));C=C()}else{if(C=_(),an===null)throw Error(g(349));Ro&30||sm(F,_,C)}Z.memoizedState=C;var J={value:C,getSnapshot:_};return Z.queue=J,dm(om.bind(null,F,J,l),[l]),F.flags|=2048,Cl(9,im.bind(null,F,J,C,_),void 0,null),C},useId:function(){var l=Ys(),_=an.identifierPrefix;if(Sr){var C=li,F=ai;C=(F&~(1<<32-Nn(F)-1)).toString(32)+C,_=":"+_+"R"+C,C=kl++,0<C&&(_+="H"+C.toString(32)),_+=":"}else C=Ov++,_=":"+_+"r"+C.toString(32)+":";return l.memoizedState=_},unstable_isNewReconciler:!1},Iv={readContext:ms,useCallback:ym,useContext:ms,useEffect:Qd,useImperativeHandle:mm,useInsertionEffect:hm,useLayoutEffect:fm,useMemo:gm,useReducer:Yd,useRef:cm,useState:function(){return Yd(El)},useDebugValue:$d,useDeferredValue:function(l){var _=ys();return vm(_,Kr.memoizedState,l)},useTransition:function(){var l=Yd(El)[0],_=ys().memoizedState;return[l,_]},useMutableSource:rm,useSyncExternalStore:nm,useId:_m,unstable_isNewReconciler:!1},Lv={readContext:ms,useCallback:ym,useContext:ms,useEffect:Qd,useImperativeHandle:mm,useInsertionEffect:hm,useLayoutEffect:fm,useMemo:gm,useReducer:Zd,useRef:cm,useState:function(){return Zd(El)},useDebugValue:$d,useDeferredValue:function(l){var _=ys();return Kr===null?_.memoizedState=l:vm(_,Kr.memoizedState,l)},useTransition:function(){var l=Zd(El)[0],_=ys().memoizedState;return[l,_]},useMutableSource:rm,useSyncExternalStore:nm,useId:_m,unstable_isNewReconciler:!1};function Ps(l,_){if(l&&l.defaultProps){_=K({},_),l=l.defaultProps;for(var C in l)_[C]===void 0&&(_[C]=l[C]);return _}return _}function Kd(l,_,C,F){_=l.memoizedState,C=C(F,_),C=C==null?_:K({},_,C),l.memoizedState=C,l.lanes===0&&(l.updateQueue.baseState=C)}var Yu={isMounted:function(l){return(l=l._reactInternals)?Zn(l)===l:!1},enqueueSetState:function(l,_,C){l=l._reactInternals;var F=Mn(),Z=Xi(l),J=ci(F,Z);J.payload=_,C!=null&&(J.callback=C),_=Gi(l,J,Z),_!==null&&(Is(_,l,Z,F),Bu(_,l,Z))},enqueueReplaceState:function(l,_,C){l=l._reactInternals;var F=Mn(),Z=Xi(l),J=ci(F,Z);J.tag=1,J.payload=_,C!=null&&(J.callback=C),_=Gi(l,J,Z),_!==null&&(Is(_,l,Z,F),Bu(_,l,Z))},enqueueForceUpdate:function(l,_){l=l._reactInternals;var C=Mn(),F=Xi(l),Z=ci(C,F);Z.tag=2,_!=null&&(Z.callback=_),_=Gi(l,Z,F),_!==null&&(Is(_,l,F,C),Bu(_,l,F))}};function Sm(l,_,C,F,Z,J,ue){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(F,J,ue):_.prototype&&_.prototype.isPureReactComponent?!Os(C,F)||!Os(Z,J):!0}function jm(l,_,C){var F=!1,Z=Bi,J=_.contextType;return typeof J=="object"&&J!==null?J=ms(J):(Z=zn(_)?Co:xn.current,F=_.contextTypes,J=(F=F!=null)?pa(l,Z):Bi),_=new _(C,J),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Yu,l.stateNode=_,_._reactInternals=l,F&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=Z,l.__reactInternalMemoizedMaskedChildContext=J),_}function Tm(l,_,C,F){l=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(C,F),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(C,F),_.state!==l&&Yu.enqueueReplaceState(_,_.state,null)}function Jd(l,_,C,F){var Z=l.stateNode;Z.props=C,Z.state=l.memoizedState,Z.refs={},Ud(l);var J=_.contextType;typeof J=="object"&&J!==null?Z.context=ms(J):(J=zn(_)?Co:xn.current,Z.context=pa(l,J)),Z.state=l.memoizedState,J=_.getDerivedStateFromProps,typeof J=="function"&&(Kd(l,_,J,C),Z.state=l.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof Z.getSnapshotBeforeUpdate=="function"||typeof Z.UNSAFE_componentWillMount!="function"&&typeof Z.componentWillMount!="function"||(_=Z.state,typeof Z.componentWillMount=="function"&&Z.componentWillMount(),typeof Z.UNSAFE_componentWillMount=="function"&&Z.UNSAFE_componentWillMount(),_!==Z.state&&Yu.enqueueReplaceState(Z,Z.state,null),Vu(l,C,Z,F),Z.state=l.memoizedState),typeof Z.componentDidMount=="function"&&(l.flags|=4194308)}function wa(l,_){try{var C="",F=_;do C+=q(F),F=F.return;while(F);var Z=C}catch(J){Z=`
Error generating stack: `+J.message+`
`+J.stack}return{value:l,source:_,stack:Z,digest:null}}function eh(l,_,C){return{value:l,source:null,stack:C??null,digest:_??null}}function th(l,_){try{console.error(_.value)}catch(C){setTimeout(function(){throw C})}}var Nv=typeof WeakMap=="function"?WeakMap:Map;function km(l,_,C){C=ci(-1,C),C.tag=3,C.payload={element:null};var F=_.value;return C.callback=function(){tc||(tc=!0,yh=F),th(l,_)},C}function Em(l,_,C){C=ci(-1,C),C.tag=3;var F=l.type.getDerivedStateFromError;if(typeof F=="function"){var Z=_.value;C.payload=function(){return F(Z)},C.callback=function(){th(l,_)}}var J=l.stateNode;return J!==null&&typeof J.componentDidCatch=="function"&&(C.callback=function(){th(l,_),typeof F!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var ue=_.stack;this.componentDidCatch(_.value,{componentStack:ue!==null?ue:""})}),C}function Cm(l,_,C){var F=l.pingCache;if(F===null){F=l.pingCache=new Nv;var Z=new Set;F.set(_,Z)}else Z=F.get(_),Z===void 0&&(Z=new Set,F.set(_,Z));Z.has(C)||(Z.add(C),l=$v.bind(null,l,_,C),_.then(l,l))}function Mm(l){do{var _;if((_=l.tag===13)&&(_=l.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return l;l=l.return}while(l!==null);return null}function Om(l,_,C,F,Z){return l.mode&1?(l.flags|=65536,l.lanes=Z,l):(l===_?l.flags|=65536:(l.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(_=ci(-1,1),_.tag=2,Gi(C,_,1))),C.lanes|=1),l)}var Fv=b.ReactCurrentOwner,Gn=!1;function Cn(l,_,C,F){_.child=l===null?Qp(_,null,C,F):va(_,l.child,C,F)}function Am(l,_,C,F,Z){C=C.render;var J=_.ref;return ba(_,Z),F=Hd(l,_,C,F,J,Z),C=Xd(),l!==null&&!Gn?(_.updateQueue=l.updateQueue,_.flags&=-2053,l.lanes&=~Z,di(l,_,Z)):(Sr&&C&&Md(_),_.flags|=1,Cn(l,_,F,Z),_.child)}function Pm(l,_,C,F,Z){if(l===null){var J=C.type;return typeof J=="function"&&!Sh(J)&&J.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(_.tag=15,_.type=J,Rm(l,_,J,F,Z)):(l=ac(C.type,null,F,_,_.mode,Z),l.ref=_.ref,l.return=_,_.child=l)}if(J=l.child,!(l.lanes&Z)){var ue=J.memoizedProps;if(C=C.compare,C=C!==null?C:Os,C(ue,F)&&l.ref===_.ref)return di(l,_,Z)}return _.flags|=1,l=Zi(J,F),l.ref=_.ref,l.return=_,_.child=l}function Rm(l,_,C,F,Z){if(l!==null){var J=l.memoizedProps;if(Os(J,F)&&l.ref===_.ref)if(Gn=!1,_.pendingProps=F=J,(l.lanes&Z)!==0)l.flags&131072&&(Gn=!0);else return _.lanes=l.lanes,di(l,_,Z)}return rh(l,_,C,F,Z)}function Dm(l,_,C){var F=_.pendingProps,Z=F.children,J=l!==null?l.memoizedState:null;if(F.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(ja,ss),ss|=C;else{if(!(C&1073741824))return l=J!==null?J.baseLanes|C:C,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:l,cachePool:null,transitions:null},_.updateQueue=null,fr(ja,ss),ss|=l,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=J!==null?J.baseLanes:C,fr(ja,ss),ss|=F}else J!==null?(F=J.baseLanes|C,_.memoizedState=null):F=C,fr(ja,ss),ss|=F;return Cn(l,_,Z,C),_.child}function Im(l,_){var C=_.ref;(l===null&&C!==null||l!==null&&l.ref!==C)&&(_.flags|=512,_.flags|=2097152)}function rh(l,_,C,F,Z){var J=zn(C)?Co:xn.current;return J=pa(_,J),ba(_,Z),C=Hd(l,_,C,F,J,Z),F=Xd(),l!==null&&!Gn?(_.updateQueue=l.updateQueue,_.flags&=-2053,l.lanes&=~Z,di(l,_,Z)):(Sr&&F&&Md(_),_.flags|=1,Cn(l,_,C,Z),_.child)}function Lm(l,_,C,F,Z){if(zn(C)){var J=!0;Pu(_)}else J=!1;if(ba(_,Z),_.stateNode===null)Qu(l,_),jm(_,C,F),Jd(_,C,F,Z),F=!0;else if(l===null){var ue=_.stateNode,Te=_.memoizedProps;ue.props=Te;var Oe=ue.context,qe=C.contextType;typeof qe=="object"&&qe!==null?qe=ms(qe):(qe=zn(C)?Co:xn.current,qe=pa(_,qe));var tt=C.getDerivedStateFromProps,st=typeof tt=="function"||typeof ue.getSnapshotBeforeUpdate=="function";st||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Te!==F||Oe!==qe)&&Tm(_,ue,F,qe),zi=!1;var et=_.memoizedState;ue.state=et,Vu(_,F,ue,Z),Oe=_.memoizedState,Te!==F||et!==Oe||Vn.current||zi?(typeof tt=="function"&&(Kd(_,C,tt,F),Oe=_.memoizedState),(Te=zi||Sm(_,C,Te,F,et,Oe,qe))?(st||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(_.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=F,_.memoizedState=Oe),ue.props=F,ue.state=Oe,ue.context=qe,F=Te):(typeof ue.componentDidMount=="function"&&(_.flags|=4194308),F=!1)}else{ue=_.stateNode,Kp(l,_),Te=_.memoizedProps,qe=_.type===_.elementType?Te:Ps(_.type,Te),ue.props=qe,st=_.pendingProps,et=ue.context,Oe=C.contextType,typeof Oe=="object"&&Oe!==null?Oe=ms(Oe):(Oe=zn(C)?Co:xn.current,Oe=pa(_,Oe));var yt=C.getDerivedStateFromProps;(tt=typeof yt=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Te!==st||et!==Oe)&&Tm(_,ue,F,Oe),zi=!1,et=_.memoizedState,ue.state=et,Vu(_,F,ue,Z);var St=_.memoizedState;Te!==st||et!==St||Vn.current||zi?(typeof yt=="function"&&(Kd(_,C,yt,F),St=_.memoizedState),(qe=zi||Sm(_,C,qe,F,et,St,Oe)||!1)?(tt||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(F,St,Oe),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(F,St,Oe)),typeof ue.componentDidUpdate=="function"&&(_.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Te===l.memoizedProps&&et===l.memoizedState||(_.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Te===l.memoizedProps&&et===l.memoizedState||(_.flags|=1024),_.memoizedProps=F,_.memoizedState=St),ue.props=F,ue.state=St,ue.context=Oe,F=qe):(typeof ue.componentDidUpdate!="function"||Te===l.memoizedProps&&et===l.memoizedState||(_.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Te===l.memoizedProps&&et===l.memoizedState||(_.flags|=1024),F=!1)}return nh(l,_,C,F,J,Z)}function nh(l,_,C,F,Z,J){Im(l,_);var ue=(_.flags&128)!==0;if(!F&&!ue)return Z&&Vp(_,C,!1),di(l,_,J);F=_.stateNode,Fv.current=_;var Te=ue&&typeof C.getDerivedStateFromError!="function"?null:F.render();return _.flags|=1,l!==null&&ue?(_.child=va(_,l.child,null,J),_.child=va(_,null,Te,J)):Cn(l,_,Te,J),_.memoizedState=F.state,Z&&Vp(_,C,!0),_.child}function Nm(l){var _=l.stateNode;_.pendingContext?Up(l,_.pendingContext,_.pendingContext!==_.context):_.context&&Up(l,_.context,!1),Bd(l,_.containerInfo)}function Fm(l,_,C,F,Z){return ga(),Rd(Z),_.flags|=256,Cn(l,_,C,F),_.child}var sh={dehydrated:null,treeContext:null,retryLane:0};function ih(l){return{baseLanes:l,cachePool:null,transitions:null}}function Um(l,_,C){var F=_.pendingProps,Z=Or.current,J=!1,ue=(_.flags&128)!==0,Te;if((Te=ue)||(Te=l!==null&&l.memoizedState===null?!1:(Z&2)!==0),Te?(J=!0,_.flags&=-129):(l===null||l.memoizedState!==null)&&(Z|=1),fr(Or,Z&1),l===null)return Pd(_),l=_.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(_.mode&1?l.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(ue=F.children,l=F.fallback,J?(F=_.mode,J=_.child,ue={mode:"hidden",children:ue},!(F&1)&&J!==null?(J.childLanes=0,J.pendingProps=ue):J=lc(ue,F,0,null),l=Fo(l,F,C,null),J.return=_,l.return=_,J.sibling=l,_.child=J,_.child.memoizedState=ih(C),_.memoizedState=sh,l):oh(_,ue));if(Z=l.memoizedState,Z!==null&&(Te=Z.dehydrated,Te!==null))return Uv(l,_,ue,F,Te,Z,C);if(J){J=F.fallback,ue=_.mode,Z=l.child,Te=Z.sibling;var Oe={mode:"hidden",children:F.children};return!(ue&1)&&_.child!==Z?(F=_.child,F.childLanes=0,F.pendingProps=Oe,_.deletions=null):(F=Zi(Z,Oe),F.subtreeFlags=Z.subtreeFlags&14680064),Te!==null?J=Zi(Te,J):(J=Fo(J,ue,C,null),J.flags|=2),J.return=_,F.return=_,F.sibling=J,_.child=F,F=J,J=_.child,ue=l.child.memoizedState,ue=ue===null?ih(C):{baseLanes:ue.baseLanes|C,cachePool:null,transitions:ue.transitions},J.memoizedState=ue,J.childLanes=l.childLanes&~C,_.memoizedState=sh,F}return J=l.child,l=J.sibling,F=Zi(J,{mode:"visible",children:F.children}),!(_.mode&1)&&(F.lanes=C),F.return=_,F.sibling=null,l!==null&&(C=_.deletions,C===null?(_.deletions=[l],_.flags|=16):C.push(l)),_.child=F,_.memoizedState=null,F}function oh(l,_){return _=lc({mode:"visible",children:_},l.mode,0,null),_.return=l,l.child=_}function Zu(l,_,C,F){return F!==null&&Rd(F),va(_,l.child,null,C),l=oh(_,_.pendingProps.children),l.flags|=2,_.memoizedState=null,l}function Uv(l,_,C,F,Z,J,ue){if(C)return _.flags&256?(_.flags&=-257,F=eh(Error(g(422))),Zu(l,_,ue,F)):_.memoizedState!==null?(_.child=l.child,_.flags|=128,null):(J=F.fallback,Z=_.mode,F=lc({mode:"visible",children:F.children},Z,0,null),J=Fo(J,Z,ue,null),J.flags|=2,F.return=_,J.return=_,F.sibling=J,_.child=F,_.mode&1&&va(_,l.child,null,ue),_.child.memoizedState=ih(ue),_.memoizedState=sh,J);if(!(_.mode&1))return Zu(l,_,ue,null);if(Z.data==="$!"){if(F=Z.nextSibling&&Z.nextSibling.dataset,F)var Te=F.dgst;return F=Te,J=Error(g(419)),F=eh(J,F,void 0),Zu(l,_,ue,F)}if(Te=(ue&l.childLanes)!==0,Gn||Te){if(F=an,F!==null){switch(ue&-ue){case 4:Z=2;break;case 16:Z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Z=32;break;case 536870912:Z=268435456;break;default:Z=0}Z=Z&(F.suspendedLanes|ue)?0:Z,Z!==0&&Z!==J.retryLane&&(J.retryLane=Z,ui(l,Z),Is(F,l,Z,-1))}return wh(),F=eh(Error(g(421))),Zu(l,_,ue,F)}return Z.data==="$?"?(_.flags|=128,_.child=l.child,_=Kv.bind(null,l),Z._reactRetry=_,null):(l=J.treeContext,ns=Fi(Z.nextSibling),rs=_,Sr=!0,As=null,l!==null&&(fs[ps++]=ai,fs[ps++]=li,fs[ps++]=Mo,ai=l.id,li=l.overflow,Mo=_),_=oh(_,F.children),_.flags|=4096,_)}function Bm(l,_,C){l.lanes|=_;var F=l.alternate;F!==null&&(F.lanes|=_),Nd(l.return,_,C)}function ah(l,_,C,F,Z){var J=l.memoizedState;J===null?l.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:F,tail:C,tailMode:Z}:(J.isBackwards=_,J.rendering=null,J.renderingStartTime=0,J.last=F,J.tail=C,J.tailMode=Z)}function Vm(l,_,C){var F=_.pendingProps,Z=F.revealOrder,J=F.tail;if(Cn(l,_,F.children,C),F=Or.current,F&2)F=F&1|2,_.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=_.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Bm(l,C,_);else if(l.tag===19)Bm(l,C,_);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===_)break e;for(;l.sibling===null;){if(l.return===null||l.return===_)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}F&=1}if(fr(Or,F),!(_.mode&1))_.memoizedState=null;else switch(Z){case"forwards":for(C=_.child,Z=null;C!==null;)l=C.alternate,l!==null&&zu(l)===null&&(Z=C),C=C.sibling;C=Z,C===null?(Z=_.child,_.child=null):(Z=C.sibling,C.sibling=null),ah(_,!1,Z,C,J);break;case"backwards":for(C=null,Z=_.child,_.child=null;Z!==null;){if(l=Z.alternate,l!==null&&zu(l)===null){_.child=Z;break}l=Z.sibling,Z.sibling=C,C=Z,Z=l}ah(_,!0,C,null,J);break;case"together":ah(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function Qu(l,_){!(_.mode&1)&&l!==null&&(l.alternate=null,_.alternate=null,_.flags|=2)}function di(l,_,C){if(l!==null&&(_.dependencies=l.dependencies),Do|=_.lanes,!(C&_.childLanes))return null;if(l!==null&&_.child!==l.child)throw Error(g(153));if(_.child!==null){for(l=_.child,C=Zi(l,l.pendingProps),_.child=C,C.return=_;l.sibling!==null;)l=l.sibling,C=C.sibling=Zi(l,l.pendingProps),C.return=_;C.sibling=null}return _.child}function Bv(l,_,C){switch(_.tag){case 3:Nm(_),ga();break;case 5:tm(_);break;case 1:zn(_.type)&&Pu(_);break;case 4:Bd(_,_.stateNode.containerInfo);break;case 10:var F=_.type._context,Z=_.memoizedProps.value;fr(Fu,F._currentValue),F._currentValue=Z;break;case 13:if(F=_.memoizedState,F!==null)return F.dehydrated!==null?(fr(Or,Or.current&1),_.flags|=128,null):C&_.child.childLanes?Um(l,_,C):(fr(Or,Or.current&1),l=di(l,_,C),l!==null?l.sibling:null);fr(Or,Or.current&1);break;case 19:if(F=(C&_.childLanes)!==0,l.flags&128){if(F)return Vm(l,_,C);_.flags|=128}if(Z=_.memoizedState,Z!==null&&(Z.rendering=null,Z.tail=null,Z.lastEffect=null),fr(Or,Or.current),F)break;return null;case 22:case 23:return _.lanes=0,Dm(l,_,C)}return di(l,_,C)}var zm,lh,Gm,qm;zm=function(l,_){for(var C=_.child;C!==null;){if(C.tag===5||C.tag===6)l.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===_)break;for(;C.sibling===null;){if(C.return===null||C.return===_)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},lh=function(){},Gm=function(l,_,C,F){var Z=l.memoizedProps;if(Z!==F){l=_.stateNode,Po(Xs.current);var J=null;switch(C){case"input":Z=ae(l,Z),F=ae(l,F),J=[];break;case"select":Z=K({},Z,{value:void 0}),F=K({},F,{value:void 0}),J=[];break;case"textarea":Z=Ie(l,Z),F=Ie(l,F),J=[];break;default:typeof Z.onClick!="function"&&typeof F.onClick=="function"&&(l.onclick=Mu)}De(C,F);var ue;C=null;for(qe in Z)if(!F.hasOwnProperty(qe)&&Z.hasOwnProperty(qe)&&Z[qe]!=null)if(qe==="style"){var Te=Z[qe];for(ue in Te)Te.hasOwnProperty(ue)&&(C||(C={}),C[ue]="")}else qe!=="dangerouslySetInnerHTML"&&qe!=="children"&&qe!=="suppressContentEditableWarning"&&qe!=="suppressHydrationWarning"&&qe!=="autoFocus"&&(x.hasOwnProperty(qe)?J||(J=[]):(J=J||[]).push(qe,null));for(qe in F){var Oe=F[qe];if(Te=Z!=null?Z[qe]:void 0,F.hasOwnProperty(qe)&&Oe!==Te&&(Oe!=null||Te!=null))if(qe==="style")if(Te){for(ue in Te)!Te.hasOwnProperty(ue)||Oe&&Oe.hasOwnProperty(ue)||(C||(C={}),C[ue]="");for(ue in Oe)Oe.hasOwnProperty(ue)&&Te[ue]!==Oe[ue]&&(C||(C={}),C[ue]=Oe[ue])}else C||(J||(J=[]),J.push(qe,C)),C=Oe;else qe==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Te=Te?Te.__html:void 0,Oe!=null&&Te!==Oe&&(J=J||[]).push(qe,Oe)):qe==="children"?typeof Oe!="string"&&typeof Oe!="number"||(J=J||[]).push(qe,""+Oe):qe!=="suppressContentEditableWarning"&&qe!=="suppressHydrationWarning"&&(x.hasOwnProperty(qe)?(Oe!=null&&qe==="onScroll"&&gr("scroll",l),J||Te===Oe||(J=[])):(J=J||[]).push(qe,Oe))}C&&(J=J||[]).push("style",C);var qe=J;(_.updateQueue=qe)&&(_.flags|=4)}},qm=function(l,_,C,F){C!==F&&(_.flags|=4)};function Ml(l,_){if(!Sr)switch(l.tailMode){case"hidden":_=l.tail;for(var C=null;_!==null;)_.alternate!==null&&(C=_),_=_.sibling;C===null?l.tail=null:C.sibling=null;break;case"collapsed":C=l.tail;for(var F=null;C!==null;)C.alternate!==null&&(F=C),C=C.sibling;F===null?_||l.tail===null?l.tail=null:l.tail.sibling=null:F.sibling=null}}function Sn(l){var _=l.alternate!==null&&l.alternate.child===l.child,C=0,F=0;if(_)for(var Z=l.child;Z!==null;)C|=Z.lanes|Z.childLanes,F|=Z.subtreeFlags&14680064,F|=Z.flags&14680064,Z.return=l,Z=Z.sibling;else for(Z=l.child;Z!==null;)C|=Z.lanes|Z.childLanes,F|=Z.subtreeFlags,F|=Z.flags,Z.return=l,Z=Z.sibling;return l.subtreeFlags|=F,l.childLanes=C,_}function Vv(l,_,C){var F=_.pendingProps;switch(Od(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(_),null;case 1:return zn(_.type)&&Au(),Sn(_),null;case 3:return F=_.stateNode,xa(),vr(Vn),vr(xn),Gd(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(l===null||l.child===null)&&(Lu(_)?_.flags|=4:l===null||l.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,As!==null&&(_h(As),As=null))),lh(l,_),Sn(_),null;case 5:Vd(_);var Z=Po(jl.current);if(C=_.type,l!==null&&_.stateNode!=null)Gm(l,_,C,F,Z),l.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!F){if(_.stateNode===null)throw Error(g(166));return Sn(_),null}if(l=Po(Xs.current),Lu(_)){F=_.stateNode,C=_.type;var J=_.memoizedProps;switch(F[Hs]=_,F[_l]=J,l=(_.mode&1)!==0,C){case"dialog":gr("cancel",F),gr("close",F);break;case"iframe":case"object":case"embed":gr("load",F);break;case"video":case"audio":for(Z=0;Z<yl.length;Z++)gr(yl[Z],F);break;case"source":gr("error",F);break;case"img":case"image":case"link":gr("error",F),gr("load",F);break;case"details":gr("toggle",F);break;case"input":he(F,J),gr("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!J.multiple},gr("invalid",F);break;case"textarea":dt(F,J),gr("invalid",F)}De(C,J),Z=null;for(var ue in J)if(J.hasOwnProperty(ue)){var Te=J[ue];ue==="children"?typeof Te=="string"?F.textContent!==Te&&(J.suppressHydrationWarning!==!0&&Cu(F.textContent,Te,l),Z=["children",Te]):typeof Te=="number"&&F.textContent!==""+Te&&(J.suppressHydrationWarning!==!0&&Cu(F.textContent,Te,l),Z=["children",""+Te]):x.hasOwnProperty(ue)&&Te!=null&&ue==="onScroll"&&gr("scroll",F)}switch(C){case"input":de(F),xe(F,J,!0);break;case"textarea":de(F),ot(F);break;case"select":case"option":break;default:typeof J.onClick=="function"&&(F.onclick=Mu)}F=Z,_.updateQueue=F,F!==null&&(_.flags|=4)}else{ue=Z.nodeType===9?Z:Z.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=ut(C)),l==="http://www.w3.org/1999/xhtml"?C==="script"?(l=ue.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof F.is=="string"?l=ue.createElement(C,{is:F.is}):(l=ue.createElement(C),C==="select"&&(ue=l,F.multiple?ue.multiple=!0:F.size&&(ue.size=F.size))):l=ue.createElementNS(l,C),l[Hs]=_,l[_l]=F,zm(l,_,!1,!1),_.stateNode=l;e:{switch(ue=Ge(C,F),C){case"dialog":gr("cancel",l),gr("close",l),Z=F;break;case"iframe":case"object":case"embed":gr("load",l),Z=F;break;case"video":case"audio":for(Z=0;Z<yl.length;Z++)gr(yl[Z],l);Z=F;break;case"source":gr("error",l),Z=F;break;case"img":case"image":case"link":gr("error",l),gr("load",l),Z=F;break;case"details":gr("toggle",l),Z=F;break;case"input":he(l,F),Z=ae(l,F),gr("invalid",l);break;case"option":Z=F;break;case"select":l._wrapperState={wasMultiple:!!F.multiple},Z=K({},F,{value:void 0}),gr("invalid",l);break;case"textarea":dt(l,F),Z=Ie(l,F),gr("invalid",l);break;default:Z=F}De(C,Z),Te=Z;for(J in Te)if(Te.hasOwnProperty(J)){var Oe=Te[J];J==="style"?pe(l,Oe):J==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&Xe(l,Oe)):J==="children"?typeof Oe=="string"?(C!=="textarea"||Oe!=="")&&Le(l,Oe):typeof Oe=="number"&&Le(l,""+Oe):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(x.hasOwnProperty(J)?Oe!=null&&J==="onScroll"&&gr("scroll",l):Oe!=null&&w(l,J,Oe,ue))}switch(C){case"input":de(l),xe(l,F,!1);break;case"textarea":de(l),ot(l);break;case"option":F.value!=null&&l.setAttribute("value",""+re(F.value));break;case"select":l.multiple=!!F.multiple,J=F.value,J!=null?He(l,!!F.multiple,J,!1):F.defaultValue!=null&&He(l,!!F.multiple,F.defaultValue,!0);break;default:typeof Z.onClick=="function"&&(l.onclick=Mu)}switch(C){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return Sn(_),null;case 6:if(l&&_.stateNode!=null)qm(l,_,l.memoizedProps,F);else{if(typeof F!="string"&&_.stateNode===null)throw Error(g(166));if(C=Po(jl.current),Po(Xs.current),Lu(_)){if(F=_.stateNode,C=_.memoizedProps,F[Hs]=_,(J=F.nodeValue!==C)&&(l=rs,l!==null))switch(l.tag){case 3:Cu(F.nodeValue,C,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Cu(F.nodeValue,C,(l.mode&1)!==0)}J&&(_.flags|=4)}else F=(C.nodeType===9?C:C.ownerDocument).createTextNode(F),F[Hs]=_,_.stateNode=F}return Sn(_),null;case 13:if(vr(Or),F=_.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Sr&&ns!==null&&_.mode&1&&!(_.flags&128))Xp(),ga(),_.flags|=98560,J=!1;else if(J=Lu(_),F!==null&&F.dehydrated!==null){if(l===null){if(!J)throw Error(g(318));if(J=_.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(g(317));J[Hs]=_}else ga(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;Sn(_),J=!1}else As!==null&&(_h(As),As=null),J=!0;if(!J)return _.flags&65536?_:null}return _.flags&128?(_.lanes=C,_):(F=F!==null,F!==(l!==null&&l.memoizedState!==null)&&F&&(_.child.flags|=8192,_.mode&1&&(l===null||Or.current&1?Jr===0&&(Jr=3):wh())),_.updateQueue!==null&&(_.flags|=4),Sn(_),null);case 4:return xa(),lh(l,_),l===null&&gl(_.stateNode.containerInfo),Sn(_),null;case 10:return Ld(_.type._context),Sn(_),null;case 17:return zn(_.type)&&Au(),Sn(_),null;case 19:if(vr(Or),J=_.memoizedState,J===null)return Sn(_),null;if(F=(_.flags&128)!==0,ue=J.rendering,ue===null)if(F)Ml(J,!1);else{if(Jr!==0||l!==null&&l.flags&128)for(l=_.child;l!==null;){if(ue=zu(l),ue!==null){for(_.flags|=128,Ml(J,!1),F=ue.updateQueue,F!==null&&(_.updateQueue=F,_.flags|=4),_.subtreeFlags=0,F=C,C=_.child;C!==null;)J=C,l=F,J.flags&=14680066,ue=J.alternate,ue===null?(J.childLanes=0,J.lanes=l,J.child=null,J.subtreeFlags=0,J.memoizedProps=null,J.memoizedState=null,J.updateQueue=null,J.dependencies=null,J.stateNode=null):(J.childLanes=ue.childLanes,J.lanes=ue.lanes,J.child=ue.child,J.subtreeFlags=0,J.deletions=null,J.memoizedProps=ue.memoizedProps,J.memoizedState=ue.memoizedState,J.updateQueue=ue.updateQueue,J.type=ue.type,l=ue.dependencies,J.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),C=C.sibling;return fr(Or,Or.current&1|2),_.child}l=l.sibling}J.tail!==null&&Mt()>Ta&&(_.flags|=128,F=!0,Ml(J,!1),_.lanes=4194304)}else{if(!F)if(l=zu(ue),l!==null){if(_.flags|=128,F=!0,C=l.updateQueue,C!==null&&(_.updateQueue=C,_.flags|=4),Ml(J,!0),J.tail===null&&J.tailMode==="hidden"&&!ue.alternate&&!Sr)return Sn(_),null}else 2*Mt()-J.renderingStartTime>Ta&&C!==1073741824&&(_.flags|=128,F=!0,Ml(J,!1),_.lanes=4194304);J.isBackwards?(ue.sibling=_.child,_.child=ue):(C=J.last,C!==null?C.sibling=ue:_.child=ue,J.last=ue)}return J.tail!==null?(_=J.tail,J.rendering=_,J.tail=_.sibling,J.renderingStartTime=Mt(),_.sibling=null,C=Or.current,fr(Or,F?C&1|2:C&1),_):(Sn(_),null);case 22:case 23:return xh(),F=_.memoizedState!==null,l!==null&&l.memoizedState!==null!==F&&(_.flags|=8192),F&&_.mode&1?ss&1073741824&&(Sn(_),_.subtreeFlags&6&&(_.flags|=8192)):Sn(_),null;case 24:return null;case 25:return null}throw Error(g(156,_.tag))}function zv(l,_){switch(Od(_),_.tag){case 1:return zn(_.type)&&Au(),l=_.flags,l&65536?(_.flags=l&-65537|128,_):null;case 3:return xa(),vr(Vn),vr(xn),Gd(),l=_.flags,l&65536&&!(l&128)?(_.flags=l&-65537|128,_):null;case 5:return Vd(_),null;case 13:if(vr(Or),l=_.memoizedState,l!==null&&l.dehydrated!==null){if(_.alternate===null)throw Error(g(340));ga()}return l=_.flags,l&65536?(_.flags=l&-65537|128,_):null;case 19:return vr(Or),null;case 4:return xa(),null;case 10:return Ld(_.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var $u=!1,jn=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Sa(l,_){var C=l.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(F){Ir(l,_,F)}else C.current=null}function uh(l,_,C){try{C()}catch(F){Ir(l,_,F)}}var Wm=!1;function qv(l,_){if(xd=es,l=Sp(),fd(l)){if("selectionStart"in l)var C={start:l.selectionStart,end:l.selectionEnd};else e:{C=(C=l.ownerDocument)&&C.defaultView||window;var F=C.getSelection&&C.getSelection();if(F&&F.rangeCount!==0){C=F.anchorNode;var Z=F.anchorOffset,J=F.focusNode;F=F.focusOffset;try{C.nodeType,J.nodeType}catch{C=null;break e}var ue=0,Te=-1,Oe=-1,qe=0,tt=0,st=l,et=null;t:for(;;){for(var yt;st!==C||Z!==0&&st.nodeType!==3||(Te=ue+Z),st!==J||F!==0&&st.nodeType!==3||(Oe=ue+F),st.nodeType===3&&(ue+=st.nodeValue.length),(yt=st.firstChild)!==null;)et=st,st=yt;for(;;){if(st===l)break t;if(et===C&&++qe===Z&&(Te=ue),et===J&&++tt===F&&(Oe=ue),(yt=st.nextSibling)!==null)break;st=et,et=st.parentNode}st=yt}C=Te===-1||Oe===-1?null:{start:Te,end:Oe}}else C=null}C=C||{start:0,end:0}}else C=null;for(wd={focusedElem:l,selectionRange:C},es=!1,bt=_;bt!==null;)if(_=bt,l=_.child,(_.subtreeFlags&1028)!==0&&l!==null)l.return=_,bt=l;else for(;bt!==null;){_=bt;try{var St=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(St!==null){var kt=St.memoizedProps,Br=St.memoizedState,Ve=_.stateNode,Re=Ve.getSnapshotBeforeUpdate(_.elementType===_.type?kt:Ps(_.type,kt),Br);Ve.__reactInternalSnapshotBeforeUpdate=Re}break;case 3:var ze=_.stateNode.containerInfo;ze.nodeType===1?ze.textContent="":ze.nodeType===9&&ze.documentElement&&ze.removeChild(ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(g(163))}}catch(lt){Ir(_,_.return,lt)}if(l=_.sibling,l!==null){l.return=_.return,bt=l;break}bt=_.return}return St=Wm,Wm=!1,St}function Ol(l,_,C){var F=_.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var Z=F=F.next;do{if((Z.tag&l)===l){var J=Z.destroy;Z.destroy=void 0,J!==void 0&&uh(_,C,J)}Z=Z.next}while(Z!==F)}}function Ku(l,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&l)===l){var F=C.create;C.destroy=F()}C=C.next}while(C!==_)}}function ch(l){var _=l.ref;if(_!==null){var C=l.stateNode;switch(l.tag){case 5:l=C;break;default:l=C}typeof _=="function"?_(l):_.current=l}}function Hm(l){var _=l.alternate;_!==null&&(l.alternate=null,Hm(_)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(_=l.stateNode,_!==null&&(delete _[Hs],delete _[_l],delete _[kd],delete _[kv],delete _[Ev])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Xm(l){return l.tag===5||l.tag===3||l.tag===4}function Ym(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Xm(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function dh(l,_,C){var F=l.tag;if(F===5||F===6)l=l.stateNode,_?C.nodeType===8?C.parentNode.insertBefore(l,_):C.insertBefore(l,_):(C.nodeType===8?(_=C.parentNode,_.insertBefore(l,C)):(_=C,_.appendChild(l)),C=C._reactRootContainer,C!=null||_.onclick!==null||(_.onclick=Mu));else if(F!==4&&(l=l.child,l!==null))for(dh(l,_,C),l=l.sibling;l!==null;)dh(l,_,C),l=l.sibling}function hh(l,_,C){var F=l.tag;if(F===5||F===6)l=l.stateNode,_?C.insertBefore(l,_):C.appendChild(l);else if(F!==4&&(l=l.child,l!==null))for(hh(l,_,C),l=l.sibling;l!==null;)hh(l,_,C),l=l.sibling}var hn=null,Rs=!1;function qi(l,_,C){for(C=C.child;C!==null;)Zm(l,_,C),C=C.sibling}function Zm(l,_,C){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(nn,C)}catch{}switch(C.tag){case 5:jn||Sa(C,_);case 6:var F=hn,Z=Rs;hn=null,qi(l,_,C),hn=F,Rs=Z,hn!==null&&(Rs?(l=hn,C=C.stateNode,l.nodeType===8?l.parentNode.removeChild(C):l.removeChild(C)):hn.removeChild(C.stateNode));break;case 18:hn!==null&&(Rs?(l=hn,C=C.stateNode,l.nodeType===8?Td(l.parentNode,C):l.nodeType===1&&Td(l,C),Es(l)):Td(hn,C.stateNode));break;case 4:F=hn,Z=Rs,hn=C.stateNode.containerInfo,Rs=!0,qi(l,_,C),hn=F,Rs=Z;break;case 0:case 11:case 14:case 15:if(!jn&&(F=C.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){Z=F=F.next;do{var J=Z,ue=J.destroy;J=J.tag,ue!==void 0&&(J&2||J&4)&&uh(C,_,ue),Z=Z.next}while(Z!==F)}qi(l,_,C);break;case 1:if(!jn&&(Sa(C,_),F=C.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=C.memoizedProps,F.state=C.memoizedState,F.componentWillUnmount()}catch(Te){Ir(C,_,Te)}qi(l,_,C);break;case 21:qi(l,_,C);break;case 22:C.mode&1?(jn=(F=jn)||C.memoizedState!==null,qi(l,_,C),jn=F):qi(l,_,C);break;default:qi(l,_,C)}}function Qm(l){var _=l.updateQueue;if(_!==null){l.updateQueue=null;var C=l.stateNode;C===null&&(C=l.stateNode=new Gv),_.forEach(function(F){var Z=Jv.bind(null,l,F);C.has(F)||(C.add(F),F.then(Z,Z))})}}function Ds(l,_){var C=_.deletions;if(C!==null)for(var F=0;F<C.length;F++){var Z=C[F];try{var J=l,ue=_,Te=ue;e:for(;Te!==null;){switch(Te.tag){case 5:hn=Te.stateNode,Rs=!1;break e;case 3:hn=Te.stateNode.containerInfo,Rs=!0;break e;case 4:hn=Te.stateNode.containerInfo,Rs=!0;break e}Te=Te.return}if(hn===null)throw Error(g(160));Zm(J,ue,Z),hn=null,Rs=!1;var Oe=Z.alternate;Oe!==null&&(Oe.return=null),Z.return=null}catch(qe){Ir(Z,_,qe)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)$m(_,l),_=_.sibling}function $m(l,_){var C=l.alternate,F=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Ds(_,l),Zs(l),F&4){try{Ol(3,l,l.return),Ku(3,l)}catch(kt){Ir(l,l.return,kt)}try{Ol(5,l,l.return)}catch(kt){Ir(l,l.return,kt)}}break;case 1:Ds(_,l),Zs(l),F&512&&C!==null&&Sa(C,C.return);break;case 5:if(Ds(_,l),Zs(l),F&512&&C!==null&&Sa(C,C.return),l.flags&32){var Z=l.stateNode;try{Le(Z,"")}catch(kt){Ir(l,l.return,kt)}}if(F&4&&(Z=l.stateNode,Z!=null)){var J=l.memoizedProps,ue=C!==null?C.memoizedProps:J,Te=l.type,Oe=l.updateQueue;if(l.updateQueue=null,Oe!==null)try{Te==="input"&&J.type==="radio"&&J.name!=null&&be(Z,J),Ge(Te,ue);var qe=Ge(Te,J);for(ue=0;ue<Oe.length;ue+=2){var tt=Oe[ue],st=Oe[ue+1];tt==="style"?pe(Z,st):tt==="dangerouslySetInnerHTML"?Xe(Z,st):tt==="children"?Le(Z,st):w(Z,tt,st,qe)}switch(Te){case"input":ke(Z,J);break;case"textarea":nt(Z,J);break;case"select":var et=Z._wrapperState.wasMultiple;Z._wrapperState.wasMultiple=!!J.multiple;var yt=J.value;yt!=null?He(Z,!!J.multiple,yt,!1):et!==!!J.multiple&&(J.defaultValue!=null?He(Z,!!J.multiple,J.defaultValue,!0):He(Z,!!J.multiple,J.multiple?[]:"",!1))}Z[_l]=J}catch(kt){Ir(l,l.return,kt)}}break;case 6:if(Ds(_,l),Zs(l),F&4){if(l.stateNode===null)throw Error(g(162));Z=l.stateNode,J=l.memoizedProps;try{Z.nodeValue=J}catch(kt){Ir(l,l.return,kt)}}break;case 3:if(Ds(_,l),Zs(l),F&4&&C!==null&&C.memoizedState.isDehydrated)try{Es(_.containerInfo)}catch(kt){Ir(l,l.return,kt)}break;case 4:Ds(_,l),Zs(l);break;case 13:Ds(_,l),Zs(l),Z=l.child,Z.flags&8192&&(J=Z.memoizedState!==null,Z.stateNode.isHidden=J,!J||Z.alternate!==null&&Z.alternate.memoizedState!==null||(mh=Mt())),F&4&&Qm(l);break;case 22:if(tt=C!==null&&C.memoizedState!==null,l.mode&1?(jn=(qe=jn)||tt,Ds(_,l),jn=qe):Ds(_,l),Zs(l),F&8192){if(qe=l.memoizedState!==null,(l.stateNode.isHidden=qe)&&!tt&&l.mode&1)for(bt=l,tt=l.child;tt!==null;){for(st=bt=tt;bt!==null;){switch(et=bt,yt=et.child,et.tag){case 0:case 11:case 14:case 15:Ol(4,et,et.return);break;case 1:Sa(et,et.return);var St=et.stateNode;if(typeof St.componentWillUnmount=="function"){F=et,C=et.return;try{_=F,St.props=_.memoizedProps,St.state=_.memoizedState,St.componentWillUnmount()}catch(kt){Ir(F,C,kt)}}break;case 5:Sa(et,et.return);break;case 22:if(et.memoizedState!==null){ey(st);continue}}yt!==null?(yt.return=et,bt=yt):ey(st)}tt=tt.sibling}e:for(tt=null,st=l;;){if(st.tag===5){if(tt===null){tt=st;try{Z=st.stateNode,qe?(J=Z.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none"):(Te=st.stateNode,Oe=st.memoizedProps.style,ue=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Te.style.display=ne("display",ue))}catch(kt){Ir(l,l.return,kt)}}}else if(st.tag===6){if(tt===null)try{st.stateNode.nodeValue=qe?"":st.memoizedProps}catch(kt){Ir(l,l.return,kt)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===l)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===l)break e;for(;st.sibling===null;){if(st.return===null||st.return===l)break e;tt===st&&(tt=null),st=st.return}tt===st&&(tt=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:Ds(_,l),Zs(l),F&4&&Qm(l);break;case 21:break;default:Ds(_,l),Zs(l)}}function Zs(l){var _=l.flags;if(_&2){try{e:{for(var C=l.return;C!==null;){if(Xm(C)){var F=C;break e}C=C.return}throw Error(g(160))}switch(F.tag){case 5:var Z=F.stateNode;F.flags&32&&(Le(Z,""),F.flags&=-33);var J=Ym(l);hh(l,J,Z);break;case 3:case 4:var ue=F.stateNode.containerInfo,Te=Ym(l);dh(l,Te,ue);break;default:throw Error(g(161))}}catch(Oe){Ir(l,l.return,Oe)}l.flags&=-3}_&4096&&(l.flags&=-4097)}function Wv(l,_,C){bt=l,Km(l)}function Km(l,_,C){for(var F=(l.mode&1)!==0;bt!==null;){var Z=bt,J=Z.child;if(Z.tag===22&&F){var ue=Z.memoizedState!==null||$u;if(!ue){var Te=Z.alternate,Oe=Te!==null&&Te.memoizedState!==null||jn;Te=$u;var qe=jn;if($u=ue,(jn=Oe)&&!qe)for(bt=Z;bt!==null;)ue=bt,Oe=ue.child,ue.tag===22&&ue.memoizedState!==null?ty(Z):Oe!==null?(Oe.return=ue,bt=Oe):ty(Z);for(;J!==null;)bt=J,Km(J),J=J.sibling;bt=Z,$u=Te,jn=qe}Jm(l)}else Z.subtreeFlags&8772&&J!==null?(J.return=Z,bt=J):Jm(l)}}function Jm(l){for(;bt!==null;){var _=bt;if(_.flags&8772){var C=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:jn||Ku(5,_);break;case 1:var F=_.stateNode;if(_.flags&4&&!jn)if(C===null)F.componentDidMount();else{var Z=_.elementType===_.type?C.memoizedProps:Ps(_.type,C.memoizedProps);F.componentDidUpdate(Z,C.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var J=_.updateQueue;J!==null&&em(_,J,F);break;case 3:var ue=_.updateQueue;if(ue!==null){if(C=null,_.child!==null)switch(_.child.tag){case 5:C=_.child.stateNode;break;case 1:C=_.child.stateNode}em(_,ue,C)}break;case 5:var Te=_.stateNode;if(C===null&&_.flags&4){C=Te;var Oe=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&C.focus();break;case"img":Oe.src&&(C.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var qe=_.alternate;if(qe!==null){var tt=qe.memoizedState;if(tt!==null){var st=tt.dehydrated;st!==null&&Es(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(g(163))}jn||_.flags&512&&ch(_)}catch(et){Ir(_,_.return,et)}}if(_===l){bt=null;break}if(C=_.sibling,C!==null){C.return=_.return,bt=C;break}bt=_.return}}function ey(l){for(;bt!==null;){var _=bt;if(_===l){bt=null;break}var C=_.sibling;if(C!==null){C.return=_.return,bt=C;break}bt=_.return}}function ty(l){for(;bt!==null;){var _=bt;try{switch(_.tag){case 0:case 11:case 15:var C=_.return;try{Ku(4,_)}catch(Oe){Ir(_,C,Oe)}break;case 1:var F=_.stateNode;if(typeof F.componentDidMount=="function"){var Z=_.return;try{F.componentDidMount()}catch(Oe){Ir(_,Z,Oe)}}var J=_.return;try{ch(_)}catch(Oe){Ir(_,J,Oe)}break;case 5:var ue=_.return;try{ch(_)}catch(Oe){Ir(_,ue,Oe)}}}catch(Oe){Ir(_,_.return,Oe)}if(_===l){bt=null;break}var Te=_.sibling;if(Te!==null){Te.return=_.return,bt=Te;break}bt=_.return}}var Hv=Math.ceil,Ju=b.ReactCurrentDispatcher,fh=b.ReactCurrentOwner,gs=b.ReactCurrentBatchConfig,Kt=0,an=null,Yr=null,fn=0,ss=0,ja=Ui(0),Jr=0,Al=null,Do=0,ec=0,ph=0,Pl=null,qn=null,mh=0,Ta=1/0,hi=null,tc=!1,yh=null,Wi=null,rc=!1,Hi=null,nc=0,Rl=0,gh=null,sc=-1,ic=0;function Mn(){return Kt&6?Mt():sc!==-1?sc:sc=Mt()}function Xi(l){return l.mode&1?Kt&2&&fn!==0?fn&-fn:Mv.transition!==null?(ic===0&&(ic=mu()),ic):(l=Zt,l!==0||(l=window.event,l=l===void 0?16:ul(l.type)),l):1}function Is(l,_,C,F){if(50<Rl)throw Rl=0,gh=null,Error(g(185));Mi(l,C,F),(!(Kt&2)||l!==an)&&(l===an&&(!(Kt&2)&&(ec|=C),Jr===4&&Yi(l,fn)),Wn(l,F),C===1&&Kt===0&&!(_.mode&1)&&(Ta=Mt()+500,Ru&&Vi()))}function Wn(l,_){var C=l.callbackNode;pu(l,_);var F=Ci(l,l===an?fn:0);if(F===0)C!==null&&Ze(C),l.callbackNode=null,l.callbackPriority=0;else if(_=F&-F,l.callbackPriority!==_){if(C!=null&&Ze(C),_===1)l.tag===0?Cv(ny.bind(null,l)):zp(ny.bind(null,l)),jv(function(){!(Kt&6)&&Vi()}),C=null;else{switch(Kn(F)){case 1:C=mr;break;case 4:C=Rr;break;case 16:C=cr;break;case 536870912:C=Qn;break;default:C=cr}C=dy(C,ry.bind(null,l))}l.callbackPriority=_,l.callbackNode=C}}function ry(l,_){if(sc=-1,ic=0,Kt&6)throw Error(g(327));var C=l.callbackNode;if(ka()&&l.callbackNode!==C)return null;var F=Ci(l,l===an?fn:0);if(F===0)return null;if(F&30||F&l.expiredLanes||_)_=oc(l,F);else{_=F;var Z=Kt;Kt|=2;var J=iy();(an!==l||fn!==_)&&(hi=null,Ta=Mt()+500,Lo(l,_));do try{Zv();break}catch(Te){sy(l,Te)}while(!0);Id(),Ju.current=J,Kt=Z,Yr!==null?_=0:(an=null,fn=0,_=Jr)}if(_!==0){if(_===2&&(Z=ta(l),Z!==0&&(F=Z,_=vh(l,Z))),_===1)throw C=Al,Lo(l,0),Yi(l,F),Wn(l,Mt()),C;if(_===6)Yi(l,F);else{if(Z=l.current.alternate,!(F&30)&&!Xv(Z)&&(_=oc(l,F),_===2&&(J=ta(l),J!==0&&(F=J,_=vh(l,J))),_===1))throw C=Al,Lo(l,0),Yi(l,F),Wn(l,Mt()),C;switch(l.finishedWork=Z,l.finishedLanes=F,_){case 0:case 1:throw Error(g(345));case 2:No(l,qn,hi);break;case 3:if(Yi(l,F),(F&130023424)===F&&(_=mh+500-Mt(),10<_)){if(Ci(l,0)!==0)break;if(Z=l.suspendedLanes,(Z&F)!==F){Mn(),l.pingedLanes|=l.suspendedLanes&Z;break}l.timeoutHandle=jd(No.bind(null,l,qn,hi),_);break}No(l,qn,hi);break;case 4:if(Yi(l,F),(F&4194240)===F)break;for(_=l.eventTimes,Z=-1;0<F;){var ue=31-Nn(F);J=1<<ue,ue=_[ue],ue>Z&&(Z=ue),F&=~J}if(F=Z,F=Mt()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*Hv(F/1960))-F,10<F){l.timeoutHandle=jd(No.bind(null,l,qn,hi),F);break}No(l,qn,hi);break;case 5:No(l,qn,hi);break;default:throw Error(g(329))}}}return Wn(l,Mt()),l.callbackNode===C?ry.bind(null,l):null}function vh(l,_){var C=Pl;return l.current.memoizedState.isDehydrated&&(Lo(l,_).flags|=256),l=oc(l,_),l!==2&&(_=qn,qn=C,_!==null&&_h(_)),l}function _h(l){qn===null?qn=l:qn.push.apply(qn,l)}function Xv(l){for(var _=l;;){if(_.flags&16384){var C=_.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var F=0;F<C.length;F++){var Z=C[F],J=Z.getSnapshot;Z=Z.value;try{if(!nr(J(),Z))return!1}catch{return!1}}}if(C=_.child,_.subtreeFlags&16384&&C!==null)C.return=_,_=C;else{if(_===l)break;for(;_.sibling===null;){if(_.return===null||_.return===l)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Yi(l,_){for(_&=~ph,_&=~ec,l.suspendedLanes|=_,l.pingedLanes&=~_,l=l.expirationTimes;0<_;){var C=31-Nn(_),F=1<<C;l[C]=-1,_&=~F}}function ny(l){if(Kt&6)throw Error(g(327));ka();var _=Ci(l,0);if(!(_&1))return Wn(l,Mt()),null;var C=oc(l,_);if(l.tag!==0&&C===2){var F=ta(l);F!==0&&(_=F,C=vh(l,F))}if(C===1)throw C=Al,Lo(l,0),Yi(l,_),Wn(l,Mt()),C;if(C===6)throw Error(g(345));return l.finishedWork=l.current.alternate,l.finishedLanes=_,No(l,qn,hi),Wn(l,Mt()),null}function bh(l,_){var C=Kt;Kt|=1;try{return l(_)}finally{Kt=C,Kt===0&&(Ta=Mt()+500,Ru&&Vi())}}function Io(l){Hi!==null&&Hi.tag===0&&!(Kt&6)&&ka();var _=Kt;Kt|=1;var C=gs.transition,F=Zt;try{if(gs.transition=null,Zt=1,l)return l()}finally{Zt=F,gs.transition=C,Kt=_,!(Kt&6)&&Vi()}}function xh(){ss=ja.current,vr(ja)}function Lo(l,_){l.finishedWork=null,l.finishedLanes=0;var C=l.timeoutHandle;if(C!==-1&&(l.timeoutHandle=-1,Sv(C)),Yr!==null)for(C=Yr.return;C!==null;){var F=C;switch(Od(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&Au();break;case 3:xa(),vr(Vn),vr(xn),Gd();break;case 5:Vd(F);break;case 4:xa();break;case 13:vr(Or);break;case 19:vr(Or);break;case 10:Ld(F.type._context);break;case 22:case 23:xh()}C=C.return}if(an=l,Yr=l=Zi(l.current,null),fn=ss=_,Jr=0,Al=null,ph=ec=Do=0,qn=Pl=null,Ao!==null){for(_=0;_<Ao.length;_++)if(C=Ao[_],F=C.interleaved,F!==null){C.interleaved=null;var Z=F.next,J=C.pending;if(J!==null){var ue=J.next;J.next=Z,F.next=ue}C.pending=F}Ao=null}return l}function sy(l,_){do{var C=Yr;try{if(Id(),Gu.current=Xu,qu){for(var F=Ar.memoizedState;F!==null;){var Z=F.queue;Z!==null&&(Z.pending=null),F=F.next}qu=!1}if(Ro=0,on=Kr=Ar=null,Tl=!1,kl=0,fh.current=null,C===null||C.return===null){Jr=1,Al=_,Yr=null;break}e:{var J=l,ue=C.return,Te=C,Oe=_;if(_=fn,Te.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var qe=Oe,tt=Te,st=tt.tag;if(!(tt.mode&1)&&(st===0||st===11||st===15)){var et=tt.alternate;et?(tt.updateQueue=et.updateQueue,tt.memoizedState=et.memoizedState,tt.lanes=et.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var yt=Mm(ue);if(yt!==null){yt.flags&=-257,Om(yt,ue,Te,J,_),yt.mode&1&&Cm(J,qe,_),_=yt,Oe=qe;var St=_.updateQueue;if(St===null){var kt=new Set;kt.add(Oe),_.updateQueue=kt}else St.add(Oe);break e}else{if(!(_&1)){Cm(J,qe,_),wh();break e}Oe=Error(g(426))}}else if(Sr&&Te.mode&1){var Br=Mm(ue);if(Br!==null){!(Br.flags&65536)&&(Br.flags|=256),Om(Br,ue,Te,J,_),Rd(wa(Oe,Te));break e}}J=Oe=wa(Oe,Te),Jr!==4&&(Jr=2),Pl===null?Pl=[J]:Pl.push(J),J=ue;do{switch(J.tag){case 3:J.flags|=65536,_&=-_,J.lanes|=_;var Ve=km(J,Oe,_);Jp(J,Ve);break e;case 1:Te=Oe;var Re=J.type,ze=J.stateNode;if(!(J.flags&128)&&(typeof Re.getDerivedStateFromError=="function"||ze!==null&&typeof ze.componentDidCatch=="function"&&(Wi===null||!Wi.has(ze)))){J.flags|=65536,_&=-_,J.lanes|=_;var lt=Em(J,Te,_);Jp(J,lt);break e}}J=J.return}while(J!==null)}ay(C)}catch(Et){_=Et,Yr===C&&C!==null&&(Yr=C=C.return);continue}break}while(!0)}function iy(){var l=Ju.current;return Ju.current=Xu,l===null?Xu:l}function wh(){(Jr===0||Jr===3||Jr===2)&&(Jr=4),an===null||!(Do&268435455)&&!(ec&268435455)||Yi(an,fn)}function oc(l,_){var C=Kt;Kt|=2;var F=iy();(an!==l||fn!==_)&&(hi=null,Lo(l,_));do try{Yv();break}catch(Z){sy(l,Z)}while(!0);if(Id(),Kt=C,Ju.current=F,Yr!==null)throw Error(g(261));return an=null,fn=0,Jr}function Yv(){for(;Yr!==null;)oy(Yr)}function Zv(){for(;Yr!==null&&!Yt();)oy(Yr)}function oy(l){var _=cy(l.alternate,l,ss);l.memoizedProps=l.pendingProps,_===null?ay(l):Yr=_,fh.current=null}function ay(l){var _=l;do{var C=_.alternate;if(l=_.return,_.flags&32768){if(C=zv(C,_),C!==null){C.flags&=32767,Yr=C;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{Jr=6,Yr=null;return}}else if(C=Vv(C,_,ss),C!==null){Yr=C;return}if(_=_.sibling,_!==null){Yr=_;return}Yr=_=l}while(_!==null);Jr===0&&(Jr=5)}function No(l,_,C){var F=Zt,Z=gs.transition;try{gs.transition=null,Zt=1,Qv(l,_,C,F)}finally{gs.transition=Z,Zt=F}return null}function Qv(l,_,C,F){do ka();while(Hi!==null);if(Kt&6)throw Error(g(327));C=l.finishedWork;var Z=l.finishedLanes;if(C===null)return null;if(l.finishedWork=null,l.finishedLanes=0,C===l.current)throw Error(g(177));l.callbackNode=null,l.callbackPriority=0;var J=C.lanes|C.childLanes;if(yu(l,J),l===an&&(Yr=an=null,fn=0),!(C.subtreeFlags&2064)&&!(C.flags&2064)||rc||(rc=!0,dy(cr,function(){return ka(),null})),J=(C.flags&15990)!==0,C.subtreeFlags&15990||J){J=gs.transition,gs.transition=null;var ue=Zt;Zt=1;var Te=Kt;Kt|=4,fh.current=null,qv(l,C),$m(C,l),yv(wd),es=!!xd,wd=xd=null,l.current=C,Wv(C),ft(),Kt=Te,Zt=ue,gs.transition=J}else l.current=C;if(rc&&(rc=!1,Hi=l,nc=Z),J=l.pendingLanes,J===0&&(Wi=null),Wr(C.stateNode),Wn(l,Mt()),_!==null)for(F=l.onRecoverableError,C=0;C<_.length;C++)Z=_[C],F(Z.value,{componentStack:Z.stack,digest:Z.digest});if(tc)throw tc=!1,l=yh,yh=null,l;return nc&1&&l.tag!==0&&ka(),J=l.pendingLanes,J&1?l===gh?Rl++:(Rl=0,gh=l):Rl=0,Vi(),null}function ka(){if(Hi!==null){var l=Kn(nc),_=gs.transition,C=Zt;try{if(gs.transition=null,Zt=16>l?16:l,Hi===null)var F=!1;else{if(l=Hi,Hi=null,nc=0,Kt&6)throw Error(g(331));var Z=Kt;for(Kt|=4,bt=l.current;bt!==null;){var J=bt,ue=J.child;if(bt.flags&16){var Te=J.deletions;if(Te!==null){for(var Oe=0;Oe<Te.length;Oe++){var qe=Te[Oe];for(bt=qe;bt!==null;){var tt=bt;switch(tt.tag){case 0:case 11:case 15:Ol(8,tt,J)}var st=tt.child;if(st!==null)st.return=tt,bt=st;else for(;bt!==null;){tt=bt;var et=tt.sibling,yt=tt.return;if(Hm(tt),tt===qe){bt=null;break}if(et!==null){et.return=yt,bt=et;break}bt=yt}}}var St=J.alternate;if(St!==null){var kt=St.child;if(kt!==null){St.child=null;do{var Br=kt.sibling;kt.sibling=null,kt=Br}while(kt!==null)}}bt=J}}if(J.subtreeFlags&2064&&ue!==null)ue.return=J,bt=ue;else e:for(;bt!==null;){if(J=bt,J.flags&2048)switch(J.tag){case 0:case 11:case 15:Ol(9,J,J.return)}var Ve=J.sibling;if(Ve!==null){Ve.return=J.return,bt=Ve;break e}bt=J.return}}var Re=l.current;for(bt=Re;bt!==null;){ue=bt;var ze=ue.child;if(ue.subtreeFlags&2064&&ze!==null)ze.return=ue,bt=ze;else e:for(ue=Re;bt!==null;){if(Te=bt,Te.flags&2048)try{switch(Te.tag){case 0:case 11:case 15:Ku(9,Te)}}catch(Et){Ir(Te,Te.return,Et)}if(Te===ue){bt=null;break e}var lt=Te.sibling;if(lt!==null){lt.return=Te.return,bt=lt;break e}bt=Te.return}}if(Kt=Z,Vi(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(nn,l)}catch{}F=!0}return F}finally{Zt=C,gs.transition=_}}return!1}function ly(l,_,C){_=wa(C,_),_=km(l,_,1),l=Gi(l,_,1),_=Mn(),l!==null&&(Mi(l,1,_),Wn(l,_))}function Ir(l,_,C){if(l.tag===3)ly(l,l,C);else for(;_!==null;){if(_.tag===3){ly(_,l,C);break}else if(_.tag===1){var F=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Wi===null||!Wi.has(F))){l=wa(C,l),l=Em(_,l,1),_=Gi(_,l,1),l=Mn(),_!==null&&(Mi(_,1,l),Wn(_,l));break}}_=_.return}}function $v(l,_,C){var F=l.pingCache;F!==null&&F.delete(_),_=Mn(),l.pingedLanes|=l.suspendedLanes&C,an===l&&(fn&C)===C&&(Jr===4||Jr===3&&(fn&130023424)===fn&&500>Mt()-mh?Lo(l,0):ph|=C),Wn(l,_)}function uy(l,_){_===0&&(l.mode&1?(_=po,po<<=1,!(po&130023424)&&(po=4194304)):_=1);var C=Mn();l=ui(l,_),l!==null&&(Mi(l,_,C),Wn(l,C))}function Kv(l){var _=l.memoizedState,C=0;_!==null&&(C=_.retryLane),uy(l,C)}function Jv(l,_){var C=0;switch(l.tag){case 13:var F=l.stateNode,Z=l.memoizedState;Z!==null&&(C=Z.retryLane);break;case 19:F=l.stateNode;break;default:throw Error(g(314))}F!==null&&F.delete(_),uy(l,C)}var cy;cy=function(l,_,C){if(l!==null)if(l.memoizedProps!==_.pendingProps||Vn.current)Gn=!0;else{if(!(l.lanes&C)&&!(_.flags&128))return Gn=!1,Bv(l,_,C);Gn=!!(l.flags&131072)}else Gn=!1,Sr&&_.flags&1048576&&Gp(_,Iu,_.index);switch(_.lanes=0,_.tag){case 2:var F=_.type;Qu(l,_),l=_.pendingProps;var Z=pa(_,xn.current);ba(_,C),Z=Hd(null,_,F,l,Z,C);var J=Xd();return _.flags|=1,typeof Z=="object"&&Z!==null&&typeof Z.render=="function"&&Z.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,zn(F)?(J=!0,Pu(_)):J=!1,_.memoizedState=Z.state!==null&&Z.state!==void 0?Z.state:null,Ud(_),Z.updater=Yu,_.stateNode=Z,Z._reactInternals=_,Jd(_,F,l,C),_=nh(null,_,F,!0,J,C)):(_.tag=0,Sr&&J&&Md(_),Cn(null,_,Z,C),_=_.child),_;case 16:F=_.elementType;e:{switch(Qu(l,_),l=_.pendingProps,Z=F._init,F=Z(F._payload),_.type=F,Z=_.tag=t0(F),l=Ps(F,l),Z){case 0:_=rh(null,_,F,l,C);break e;case 1:_=Lm(null,_,F,l,C);break e;case 11:_=Am(null,_,F,l,C);break e;case 14:_=Pm(null,_,F,Ps(F.type,l),C);break e}throw Error(g(306,F,""))}return _;case 0:return F=_.type,Z=_.pendingProps,Z=_.elementType===F?Z:Ps(F,Z),rh(l,_,F,Z,C);case 1:return F=_.type,Z=_.pendingProps,Z=_.elementType===F?Z:Ps(F,Z),Lm(l,_,F,Z,C);case 3:e:{if(Nm(_),l===null)throw Error(g(387));F=_.pendingProps,J=_.memoizedState,Z=J.element,Kp(l,_),Vu(_,F,null,C);var ue=_.memoizedState;if(F=ue.element,J.isDehydrated)if(J={element:F,isDehydrated:!1,cache:ue.cache,pendingSuspenseBoundaries:ue.pendingSuspenseBoundaries,transitions:ue.transitions},_.updateQueue.baseState=J,_.memoizedState=J,_.flags&256){Z=wa(Error(g(423)),_),_=Fm(l,_,F,C,Z);break e}else if(F!==Z){Z=wa(Error(g(424)),_),_=Fm(l,_,F,C,Z);break e}else for(ns=Fi(_.stateNode.containerInfo.firstChild),rs=_,Sr=!0,As=null,C=Qp(_,null,F,C),_.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(ga(),F===Z){_=di(l,_,C);break e}Cn(l,_,F,C)}_=_.child}return _;case 5:return tm(_),l===null&&Pd(_),F=_.type,Z=_.pendingProps,J=l!==null?l.memoizedProps:null,ue=Z.children,Sd(F,Z)?ue=null:J!==null&&Sd(F,J)&&(_.flags|=32),Im(l,_),Cn(l,_,ue,C),_.child;case 6:return l===null&&Pd(_),null;case 13:return Um(l,_,C);case 4:return Bd(_,_.stateNode.containerInfo),F=_.pendingProps,l===null?_.child=va(_,null,F,C):Cn(l,_,F,C),_.child;case 11:return F=_.type,Z=_.pendingProps,Z=_.elementType===F?Z:Ps(F,Z),Am(l,_,F,Z,C);case 7:return Cn(l,_,_.pendingProps,C),_.child;case 8:return Cn(l,_,_.pendingProps.children,C),_.child;case 12:return Cn(l,_,_.pendingProps.children,C),_.child;case 10:e:{if(F=_.type._context,Z=_.pendingProps,J=_.memoizedProps,ue=Z.value,fr(Fu,F._currentValue),F._currentValue=ue,J!==null)if(nr(J.value,ue)){if(J.children===Z.children&&!Vn.current){_=di(l,_,C);break e}}else for(J=_.child,J!==null&&(J.return=_);J!==null;){var Te=J.dependencies;if(Te!==null){ue=J.child;for(var Oe=Te.firstContext;Oe!==null;){if(Oe.context===F){if(J.tag===1){Oe=ci(-1,C&-C),Oe.tag=2;var qe=J.updateQueue;if(qe!==null){qe=qe.shared;var tt=qe.pending;tt===null?Oe.next=Oe:(Oe.next=tt.next,tt.next=Oe),qe.pending=Oe}}J.lanes|=C,Oe=J.alternate,Oe!==null&&(Oe.lanes|=C),Nd(J.return,C,_),Te.lanes|=C;break}Oe=Oe.next}}else if(J.tag===10)ue=J.type===_.type?null:J.child;else if(J.tag===18){if(ue=J.return,ue===null)throw Error(g(341));ue.lanes|=C,Te=ue.alternate,Te!==null&&(Te.lanes|=C),Nd(ue,C,_),ue=J.sibling}else ue=J.child;if(ue!==null)ue.return=J;else for(ue=J;ue!==null;){if(ue===_){ue=null;break}if(J=ue.sibling,J!==null){J.return=ue.return,ue=J;break}ue=ue.return}J=ue}Cn(l,_,Z.children,C),_=_.child}return _;case 9:return Z=_.type,F=_.pendingProps.children,ba(_,C),Z=ms(Z),F=F(Z),_.flags|=1,Cn(l,_,F,C),_.child;case 14:return F=_.type,Z=Ps(F,_.pendingProps),Z=Ps(F.type,Z),Pm(l,_,F,Z,C);case 15:return Rm(l,_,_.type,_.pendingProps,C);case 17:return F=_.type,Z=_.pendingProps,Z=_.elementType===F?Z:Ps(F,Z),Qu(l,_),_.tag=1,zn(F)?(l=!0,Pu(_)):l=!1,ba(_,C),jm(_,F,Z),Jd(_,F,Z,C),nh(null,_,F,!0,l,C);case 19:return Vm(l,_,C);case 22:return Dm(l,_,C)}throw Error(g(156,_.tag))};function dy(l,_){return Gt(l,_)}function e0(l,_,C,F){this.tag=l,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(l,_,C,F){return new e0(l,_,C,F)}function Sh(l){return l=l.prototype,!(!l||!l.isReactComponent)}function t0(l){if(typeof l=="function")return Sh(l)?1:0;if(l!=null){if(l=l.$$typeof,l===L)return 11;if(l===V)return 14}return 2}function Zi(l,_){var C=l.alternate;return C===null?(C=vs(l.tag,_,l.key,l.mode),C.elementType=l.elementType,C.type=l.type,C.stateNode=l.stateNode,C.alternate=l,l.alternate=C):(C.pendingProps=_,C.type=l.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=l.flags&14680064,C.childLanes=l.childLanes,C.lanes=l.lanes,C.child=l.child,C.memoizedProps=l.memoizedProps,C.memoizedState=l.memoizedState,C.updateQueue=l.updateQueue,_=l.dependencies,C.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},C.sibling=l.sibling,C.index=l.index,C.ref=l.ref,C}function ac(l,_,C,F,Z,J){var ue=2;if(F=l,typeof l=="function")Sh(l)&&(ue=1);else if(typeof l=="string")ue=5;else e:switch(l){case E:return Fo(C.children,Z,J,_);case T:ue=8,Z|=8;break;case R:return l=vs(12,C,_,Z|2),l.elementType=R,l.lanes=J,l;case I:return l=vs(13,C,_,Z),l.elementType=I,l.lanes=J,l;case B:return l=vs(19,C,_,Z),l.elementType=B,l.lanes=J,l;case Y:return lc(C,Z,J,_);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case O:ue=10;break e;case M:ue=9;break e;case L:ue=11;break e;case V:ue=14;break e;case G:ue=16,F=null;break e}throw Error(g(130,l==null?l:typeof l,""))}return _=vs(ue,C,_,Z),_.elementType=l,_.type=F,_.lanes=J,_}function Fo(l,_,C,F){return l=vs(7,l,F,_),l.lanes=C,l}function lc(l,_,C,F){return l=vs(22,l,F,_),l.elementType=Y,l.lanes=C,l.stateNode={isHidden:!1},l}function jh(l,_,C){return l=vs(6,l,null,_),l.lanes=C,l}function Th(l,_,C){return _=vs(4,l.children!==null?l.children:[],l.key,_),_.lanes=C,_.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},_}function r0(l,_,C,F,Z){this.tag=_,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mo(0),this.expirationTimes=mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mo(0),this.identifierPrefix=F,this.onRecoverableError=Z,this.mutableSourceEagerHydrationData=null}function kh(l,_,C,F,Z,J,ue,Te,Oe){return l=new r0(l,_,C,Te,Oe),_===1?(_=1,J===!0&&(_|=8)):_=0,J=vs(3,null,null,_),l.current=J,J.stateNode=l,J.memoizedState={element:F,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ud(J),l}function n0(l,_,C){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:k,key:F==null?null:""+F,children:l,containerInfo:_,implementation:C}}function hy(l){if(!l)return Bi;l=l._reactInternals;e:{if(Zn(l)!==l||l.tag!==1)throw Error(g(170));var _=l;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(zn(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(g(171))}if(l.tag===1){var C=l.type;if(zn(C))return Bp(l,C,_)}return _}function fy(l,_,C,F,Z,J,ue,Te,Oe){return l=kh(C,F,!0,l,Z,J,ue,Te,Oe),l.context=hy(null),C=l.current,F=Mn(),Z=Xi(C),J=ci(F,Z),J.callback=_??null,Gi(C,J,Z),l.current.lanes=Z,Mi(l,Z,F),Wn(l,F),l}function uc(l,_,C,F){var Z=_.current,J=Mn(),ue=Xi(Z);return C=hy(C),_.context===null?_.context=C:_.pendingContext=C,_=ci(J,ue),_.payload={element:l},F=F===void 0?null:F,F!==null&&(_.callback=F),l=Gi(Z,_,ue),l!==null&&(Is(l,Z,ue,J),Bu(l,Z,ue)),ue}function cc(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function py(l,_){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var C=l.retryLane;l.retryLane=C!==0&&C<_?C:_}}function Eh(l,_){py(l,_),(l=l.alternate)&&py(l,_)}var my=typeof reportError=="function"?reportError:function(l){console.error(l)};function Ch(l){this._internalRoot=l}dc.prototype.render=Ch.prototype.render=function(l){var _=this._internalRoot;if(_===null)throw Error(g(409));uc(l,_,null,null)},dc.prototype.unmount=Ch.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var _=l.containerInfo;Io(function(){uc(null,l,null,null)}),_[ii]=null}};function dc(l){this._internalRoot=l}dc.prototype.unstable_scheduleHydration=function(l){if(l){var _=ll();l={blockedOn:null,target:l,priority:_};for(var C=0;C<qs.length&&_!==0&&_<qs[C].priority;C++);qs.splice(C,0,l),C===0&&Jn(l)}};function Mh(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function hc(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function yy(){}function s0(l,_,C,F,Z){if(Z){if(typeof F=="function"){var J=F;F=function(){var qe=cc(ue);J.call(qe)}}var ue=fy(_,F,l,0,null,!1,!1,"",yy);return l._reactRootContainer=ue,l[ii]=ue.current,gl(l.nodeType===8?l.parentNode:l),Io(),ue}for(;Z=l.lastChild;)l.removeChild(Z);if(typeof F=="function"){var Te=F;F=function(){var qe=cc(Oe);Te.call(qe)}}var Oe=kh(l,0,!1,null,null,!1,!1,"",yy);return l._reactRootContainer=Oe,l[ii]=Oe.current,gl(l.nodeType===8?l.parentNode:l),Io(function(){uc(_,Oe,C,F)}),Oe}function fc(l,_,C,F,Z){var J=C._reactRootContainer;if(J){var ue=J;if(typeof Z=="function"){var Te=Z;Z=function(){var Oe=cc(ue);Te.call(Oe)}}uc(_,ue,l,Z)}else ue=s0(C,_,l,Z,F);return cc(ue)}al=function(l){switch(l.tag){case 3:var _=l.stateNode;if(_.current.memoizedState.isDehydrated){var C=Ei(_.pendingLanes);C!==0&&(Oi(_,C|1),Wn(_,Mt()),!(Kt&6)&&(Ta=Mt()+500,Vi()))}break;case 13:Io(function(){var F=ui(l,1);if(F!==null){var Z=Mn();Is(F,l,1,Z)}}),Eh(l,1)}},ra=function(l){if(l.tag===13){var _=ui(l,134217728);if(_!==null){var C=Mn();Is(_,l,134217728,C)}Eh(l,134217728)}},ri=function(l){if(l.tag===13){var _=Xi(l),C=ui(l,_);if(C!==null){var F=Mn();Is(C,l,_,F)}Eh(l,_)}},ll=function(){return Zt},gu=function(l,_){var C=Zt;try{return Zt=l,_()}finally{Zt=C}},at=function(l,_,C){switch(_){case"input":if(ke(l,C),_=C.name,C.type==="radio"&&_!=null){for(C=l;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<C.length;_++){var F=C[_];if(F!==l&&F.form===l.form){var Z=Ou(F);if(!Z)throw Error(g(90));me(F),ke(F,Z)}}}break;case"textarea":nt(l,C);break;case"select":_=C.value,_!=null&&He(l,!!C.multiple,_,!1)}},Ct=bh,sr=Io;var i0={usingClientEntryPoint:!1,Events:[bl,ha,Ou,gt,Dt,bh]},Dl={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o0={bundleType:Dl.bundleType,version:Dl.version,rendererPackageName:Dl.rendererPackageName,rendererConfig:Dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=pt(l),l===null?null:l.stateNode},findFiberByHostInstance:Dl.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{nn=pc.inject(o0),Ur=pc}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i0,Hn.createPortal=function(l,_){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mh(_))throw Error(g(200));return n0(l,_,null,C)},Hn.createRoot=function(l,_){if(!Mh(l))throw Error(g(299));var C=!1,F="",Z=my;return _!=null&&(_.unstable_strictMode===!0&&(C=!0),_.identifierPrefix!==void 0&&(F=_.identifierPrefix),_.onRecoverableError!==void 0&&(Z=_.onRecoverableError)),_=kh(l,1,!1,null,null,C,!1,F,Z),l[ii]=_.current,gl(l.nodeType===8?l.parentNode:l),new Ch(_)},Hn.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var _=l._reactInternals;if(_===void 0)throw typeof l.render=="function"?Error(g(188)):(l=Object.keys(l).join(","),Error(g(268,l)));return l=pt(_),l=l===null?null:l.stateNode,l},Hn.flushSync=function(l){return Io(l)},Hn.hydrate=function(l,_,C){if(!hc(_))throw Error(g(200));return fc(null,l,_,!0,C)},Hn.hydrateRoot=function(l,_,C){if(!Mh(l))throw Error(g(405));var F=C!=null&&C.hydratedSources||null,Z=!1,J="",ue=my;if(C!=null&&(C.unstable_strictMode===!0&&(Z=!0),C.identifierPrefix!==void 0&&(J=C.identifierPrefix),C.onRecoverableError!==void 0&&(ue=C.onRecoverableError)),_=fy(_,null,l,1,C??null,Z,!1,J,ue),l[ii]=_.current,gl(l),F)for(l=0;l<F.length;l++)C=F[l],Z=C._getVersion,Z=Z(C._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[C,Z]:_.mutableSourceEagerHydrationData.push(C,Z);return new dc(_)},Hn.render=function(l,_,C){if(!hc(_))throw Error(g(200));return fc(null,l,_,!1,C)},Hn.unmountComponentAtNode=function(l){if(!hc(l))throw Error(g(40));return l._reactRootContainer?(Io(function(){fc(null,null,l,!1,function(){l._reactRootContainer=null,l[ii]=null})}),!0):!1},Hn.unstable_batchedUpdates=bh,Hn.unstable_renderSubtreeIntoContainer=function(l,_,C,F){if(!hc(C))throw Error(g(200));if(l==null||l._reactInternals===void 0)throw Error(g(38));return fc(l,_,C,!1,F)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var Ty;function p0(){if(Ty)return Ph.exports;Ty=1;function D(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D)}catch(r){console.error(r)}}return D(),Ph.exports=f0(),Ph.exports}var ky;function m0(){if(ky)return mc;ky=1;var D=p0();return mc.createRoot=D.createRoot,mc.hydrateRoot=D.hydrateRoot,mc}var y0=m0();const Kh="15.0.4",Ey=(D,r,g)=>({endTime:r,insertTime:g,type:"exponentialRampToValue",value:D}),Cy=(D,r,g)=>({endTime:r,insertTime:g,type:"linearRampToValue",value:D}),Fh=(D,r)=>({startTime:r,type:"setValue",value:D}),ig=(D,r,g)=>({duration:g,startTime:r,type:"setValueCurve",values:D}),og=(D,r,{startTime:g,target:t,timeConstant:x})=>t+(r-t)*Math.exp((g-D)/x),Oa=D=>D.type==="exponentialRampToValue",kc=D=>D.type==="linearRampToValue",Ki=D=>Oa(D)||kc(D),Jh=D=>D.type==="setValue",pi=D=>D.type==="setValueCurve",Ec=(D,r,g,t)=>{const x=D[r];return x===void 0?t:Ki(x)||Jh(x)?x.value:pi(x)?x.values[x.values.length-1]:og(g,Ec(D,r-1,x.startTime,t),x)},My=(D,r,g,t,x)=>g===void 0?[t.insertTime,x]:Ki(g)?[g.endTime,g.value]:Jh(g)?[g.startTime,g.value]:pi(g)?[g.startTime+g.duration,g.values[g.values.length-1]]:[g.startTime,Ec(D,r-1,g.startTime,x)],Uh=D=>D.type==="cancelAndHold",Bh=D=>D.type==="cancelScheduledValues",$i=D=>Uh(D)||Bh(D)?D.cancelTime:Oa(D)||kc(D)?D.endTime:D.startTime,Oy=(D,r,g,{endTime:t,value:x})=>g===x?x:0<g&&0<x||g<0&&x<0?g*(x/g)**((D-r)/(t-r)):0,Ay=(D,r,g,{endTime:t,value:x})=>g+(D-r)/(t-r)*(x-g),g0=(D,r)=>{const g=Math.floor(r),t=Math.ceil(r);return g===t?D[g]:(1-(r-g))*D[g]+(1-(t-r))*D[t]},v0=(D,{duration:r,startTime:g,values:t})=>{const x=(D-g)/r*(t.length-1);return g0(t,x)},yc=D=>D.type==="setTarget";class _0{constructor(r){this._automationEvents=[],this._currenTime=0,this._defaultValue=r}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(r){const g=$i(r);if(Uh(r)||Bh(r)){const t=this._automationEvents.findIndex(f=>Bh(r)&&pi(f)?f.startTime+f.duration>=g:$i(f)>=g),x=this._automationEvents[t];if(t!==-1&&(this._automationEvents=this._automationEvents.slice(0,t)),Uh(r)){const f=this._automationEvents[this._automationEvents.length-1];if(x!==void 0&&Ki(x)){if(f!==void 0&&yc(f))throw new Error("The internal list is malformed.");const u=f===void 0?x.insertTime:pi(f)?f.startTime+f.duration:$i(f),c=f===void 0?this._defaultValue:pi(f)?f.values[f.values.length-1]:f.value,s=Oa(x)?Oy(g,u,c,x):Ay(g,u,c,x),d=Oa(x)?Ey(s,g,this._currenTime):Cy(s,g,this._currenTime);this._automationEvents.push(d)}if(f!==void 0&&yc(f)&&this._automationEvents.push(Fh(this.getValue(g),g)),f!==void 0&&pi(f)&&f.startTime+f.duration>g){const u=g-f.startTime,c=(f.values.length-1)/f.duration,s=Math.max(2,1+Math.ceil(u*c)),d=u/(s-1)*c,m=f.values.slice(0,s);if(d<1)for(let v=1;v<s;v+=1){const i=d*v%1;m[v]=f.values[v-1]*(1-i)+f.values[v]*i}this._automationEvents[this._automationEvents.length-1]=ig(m,f.startTime,u)}}}else{const t=this._automationEvents.findIndex(u=>$i(u)>g),x=t===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[t-1];if(x!==void 0&&pi(x)&&$i(x)+x.duration>g)return!1;const f=Oa(r)?Ey(r.value,r.endTime,this._currenTime):kc(r)?Cy(r.value,g,this._currenTime):r;if(t===-1)this._automationEvents.push(f);else{if(pi(r)&&g+r.duration>$i(this._automationEvents[t]))return!1;this._automationEvents.splice(t,0,f)}}return!0}flush(r){const g=this._automationEvents.findIndex(t=>$i(t)>r);if(g>1){const t=this._automationEvents.slice(g-1),x=t[0];yc(x)&&t.unshift(Fh(Ec(this._automationEvents,g-2,x.startTime,this._defaultValue),x.startTime)),this._automationEvents=t}}getValue(r){if(this._automationEvents.length===0)return this._defaultValue;const g=this._automationEvents.findIndex(u=>$i(u)>r),t=this._automationEvents[g],x=(g===-1?this._automationEvents.length:g)-1,f=this._automationEvents[x];if(f!==void 0&&yc(f)&&(t===void 0||!Ki(t)||t.insertTime>r))return og(r,Ec(this._automationEvents,x-1,f.startTime,this._defaultValue),f);if(f!==void 0&&Jh(f)&&(t===void 0||!Ki(t)))return f.value;if(f!==void 0&&pi(f)&&(t===void 0||!Ki(t)||f.startTime+f.duration>r))return r<f.startTime+f.duration?v0(r,f):f.values[f.values.length-1];if(f!==void 0&&Ki(f)&&(t===void 0||!Ki(t)))return f.value;if(t!==void 0&&Oa(t)){const[u,c]=My(this._automationEvents,x,f,t,this._defaultValue);return Oy(r,u,c,t)}if(t!==void 0&&kc(t)){const[u,c]=My(this._automationEvents,x,f,t,this._defaultValue);return Ay(r,u,c,t)}return this._defaultValue}}const b0=D=>({cancelTime:D,type:"cancelAndHold"}),x0=D=>({cancelTime:D,type:"cancelScheduledValues"}),w0=(D,r)=>({endTime:r,type:"exponentialRampToValue",value:D}),S0=(D,r)=>({endTime:r,type:"linearRampToValue",value:D}),j0=(D,r,g)=>({startTime:r,target:D,timeConstant:g,type:"setTarget"}),T0=()=>new DOMException("","AbortError"),k0=D=>(r,g,[t,x,f],u)=>{D(r[x],[g,t,f],c=>c[0]===g&&c[1]===t,u)},E0=D=>(r,g,t)=>{const x=[];for(let f=0;f<t.numberOfInputs;f+=1)x.push(new Set);D.set(r,{activeInputs:x,outputs:new Set,passiveInputs:new WeakMap,renderer:g})},C0=D=>(r,g)=>{D.set(r,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:g})},Ra=new WeakSet,ag=new WeakMap,ef=new WeakMap,lg=new WeakMap,tf=new WeakMap,Bc=new WeakMap,ug=new WeakMap,Vh=new WeakMap,zh=new WeakMap,Gh=new WeakMap,cg={construct(){return cg}},M0=D=>{try{const r=new Proxy(D,cg);new r}catch{return!1}return!0},Py=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ry=(D,r)=>{const g=[];let t=D.replace(/^[\s]+/,""),x=t.match(Py);for(;x!==null;){const f=x[1].slice(1,-1),u=x[0].replace(/([\s]+)?;?$/,"").replace(f,new URL(f,r).toString());g.push(u),t=t.slice(x[0].length).replace(/^[\s]+/,""),x=t.match(Py)}return[g.join(";"),t]},Dy=D=>{if(D!==void 0&&!Array.isArray(D))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Iy=D=>{if(!M0(D))throw new TypeError("The given value for processorCtor should be a constructor.");if(D.prototype===null||typeof D.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},O0=(D,r,g,t,x,f,u,c,s,d,m,v,i)=>{let n=0;return(a,o,h={credentials:"omit"})=>{const p=m.get(a);if(p!==void 0&&p.has(o))return Promise.resolve();const y=d.get(a);if(y!==void 0){const S=y.get(o);if(S!==void 0)return S}const w=f(a),b=w.audioWorklet===void 0?x(o).then(([S,k])=>{const[E,T]=Ry(S,k),R=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return g(R)}).then(()=>{const S=i._AWGS.pop();if(S===void 0)throw new SyntaxError;t(w.currentTime,w.sampleRate,()=>S(class{},void 0,(k,E)=>{if(k.trim()==="")throw r();const T=zh.get(w);if(T!==void 0){if(T.has(k))throw r();Iy(E),Dy(E.parameterDescriptors),T.set(k,E)}else Iy(E),Dy(E.parameterDescriptors),zh.set(w,new Map([[k,E]]))},w.sampleRate,void 0,void 0))}):Promise.all([x(o),Promise.resolve(D(v,v))]).then(([[S,k],E])=>{const T=n+1;n=T;const[R,O]=Ry(S,k),B=`${R};((AudioWorkletProcessor,registerProcessor)=>{${O}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,V=new Blob([B],{type:"application/javascript; charset=utf-8"}),G=URL.createObjectURL(V);return w.audioWorklet.addModule(G,h).then(()=>{if(c(w))return w;const Y=u(w);return Y.audioWorklet.addModule(G,h).then(()=>Y)}).then(Y=>{if(s===null)throw new SyntaxError;try{new s(Y,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(G))});return y===void 0?d.set(a,new Map([[o,b]])):y.set(o,b),b.then(()=>{const S=m.get(a);S===void 0?m.set(a,new Set([o])):S.add(o)}).finally(()=>{const S=d.get(a);S!==void 0&&S.delete(o)}),b}},Ns=(D,r)=>{const g=D.get(r);if(g===void 0)throw new Error("A value with the given key could not be found.");return g},Vc=(D,r)=>{const g=Array.from(D).filter(r);if(g.length>1)throw Error("More than one element was found.");if(g.length===0)throw Error("No element was found.");const[t]=g;return D.delete(t),t},dg=(D,r,g,t)=>{const x=Ns(D,r),f=Vc(x,u=>u[0]===g&&u[1]===t);return x.size===0&&D.delete(r),f},Wl=D=>Ns(ug,D),Da=D=>{if(Ra.has(D))throw new Error("The AudioNode is already stored.");Ra.add(D),Wl(D).forEach(r=>r(!0))},hg=D=>"port"in D,Hl=D=>{if(!Ra.has(D))throw new Error("The AudioNode is not stored.");Ra.delete(D),Wl(D).forEach(r=>r(!1))},qh=(D,r)=>{!hg(D)&&r.every(g=>g.size===0)&&Hl(D)},A0=(D,r,g,t,x,f,u,c,s,d,m,v,i)=>{const n=new WeakMap;return(a,o,h,p,y)=>{const{activeInputs:w,passiveInputs:b}=f(o),{outputs:S}=f(a),k=c(a),E=T=>{const R=s(o),O=s(a);if(T){const M=dg(b,a,h,p);D(w,a,M,!1),!y&&!v(a)&&g(O,R,h,p),i(o)&&Da(o)}else{const M=t(w,a,h,p);r(b,p,M,!1),!y&&!v(a)&&x(O,R,h,p);const L=u(o);if(L===0)m(o)&&qh(o,w);else{const I=n.get(o);I!==void 0&&clearTimeout(I),n.set(o,setTimeout(()=>{m(o)&&qh(o,w)},L*1e3))}}};return d(S,[o,h,p],T=>T[0]===o&&T[1]===h&&T[2]===p,!0)?(k.add(E),m(a)?D(w,a,[h,p,E],!0):r(b,p,[a,h,E],!0),!0):!1}},P0=D=>(r,g,[t,x,f],u)=>{const c=r.get(t);c===void 0?r.set(t,new Set([[x,g,f]])):D(c,[x,g,f],s=>s[0]===x&&s[1]===g,u)},R0=D=>(r,g)=>{const t=D(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});g.connect(t).connect(r.destination);const x=()=>{g.removeEventListener("ended",x),g.disconnect(t),t.disconnect()};g.addEventListener("ended",x)},D0=D=>(r,g)=>{D(r).add(g)},I0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},L0=(D,r,g,t,x,f)=>class extends D{constructor(c,s){const d=x(c),m={...I0,...s},v=t(d,m),i=f(d)?r():null;super(c,!1,v,i),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(c){this._nativeAnalyserNode.fftSize=c}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(c){const s=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=c,!(c>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=s,g()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(c){const s=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=c,!(this._nativeAnalyserNode.maxDecibels>c))throw this._nativeAnalyserNode.minDecibels=s,g()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(c){this._nativeAnalyserNode.smoothingTimeConstant=c}getByteFrequencyData(c){this._nativeAnalyserNode.getByteFrequencyData(c)}getByteTimeDomainData(c){this._nativeAnalyserNode.getByteTimeDomainData(c)}getFloatFrequencyData(c){this._nativeAnalyserNode.getFloatFrequencyData(c)}getFloatTimeDomainData(c){this._nativeAnalyserNode.getFloatTimeDomainData(c)}},kn=(D,r)=>D.context===r,N0=(D,r,g)=>()=>{const t=new WeakMap,x=async(f,u)=>{let c=r(f);if(!kn(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=D(u,d)}return t.set(u,c),await g(f,u,c),c};return{render(f,u){const c=t.get(u);return c!==void 0?Promise.resolve(c):x(f,u)}}},Cc=D=>{try{D.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Ks=()=>new DOMException("","IndexSizeError"),rf=D=>{D.getChannelData=(r=>g=>{try{return r.call(D,g)}catch(t){throw t.code===12?Ks():t}})(D.getChannelData)},F0={numberOfChannels:1},U0=(D,r,g,t,x,f,u,c)=>{let s=null;return class fg{constructor(m){if(x===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:i,sampleRate:n}={...F0,...m};s===null&&(s=new x(1,1,44100));const a=t!==null&&r(f,f)?new t({length:v,numberOfChannels:i,sampleRate:n}):s.createBuffer(i,v,n);if(a.numberOfChannels===0)throw g();return typeof a.copyFromChannel!="function"?(u(a),rf(a)):r(Cc,()=>Cc(a))||c(a),D.add(a),a}static[Symbol.hasInstance](m){return m!==null&&typeof m=="object"&&Object.getPrototypeOf(m)===fg.prototype||D.has(m)}}},os=-34028234663852886e22,On=34028234663852886e22,yi=D=>Ra.has(D),B0={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},V0=(D,r,g,t,x,f,u,c)=>class extends D{constructor(d,m){const v=f(d),i={...B0,...m},n=x(v,i),a=u(v),o=a?r():null;super(d,!1,n,o),this._audioBufferSourceNodeRenderer=o,this._isBufferNullified=!1,this._isBufferSet=i.buffer!==null,this._nativeAudioBufferSourceNode=n,this._onended=null,this._playbackRate=g(this,a,n.playbackRate,On,os)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(d){if(this._nativeAudioBufferSourceNode.buffer=d,d!==null){if(this._isBufferSet)throw t();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(d){this._nativeAudioBufferSourceNode.loop=d}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(d){this._nativeAudioBufferSourceNode.loopEnd=d}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(d){this._nativeAudioBufferSourceNode.loopStart=d}get onended(){return this._onended}set onended(d){const m=typeof d=="function"?c(this,d):null;this._nativeAudioBufferSourceNode.onended=m;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===m?d:v}get playbackRate(){return this._playbackRate}start(d=0,m=0,v){if(this._nativeAudioBufferSourceNode.start(d,m,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[d,m]:[d,m,v]),this.context.state!=="closed"){Da(this);const i=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",i),yi(this)&&Hl(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",i)}}stop(d=0){this._nativeAudioBufferSourceNode.stop(d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=d)}},z0=(D,r,g,t,x)=>()=>{const f=new WeakMap;let u=null,c=null;const s=async(d,m)=>{let v=g(d);const i=kn(v,m);if(!i){const n={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=r(m,n),u!==null&&v.start(...u),c!==null&&v.stop(c)}return f.set(m,v),i?await D(m,d.playbackRate,v.playbackRate):await t(m,d.playbackRate,v.playbackRate),await x(d,m,v),v};return{set start(d){u=d},set stop(d){c=d},render(d,m){const v=f.get(m);return v!==void 0?Promise.resolve(v):s(d,m)}}},G0=D=>"playbackRate"in D,q0=D=>"frequency"in D&&"gain"in D,W0=D=>"offset"in D,H0=D=>!("frequency"in D)&&"gain"in D,X0=D=>"detune"in D&&"frequency"in D&&!("gain"in D),Y0=D=>"pan"in D,Pn=D=>Ns(ag,D),Xl=D=>Ns(lg,D),Wh=(D,r)=>{const{activeInputs:g}=Pn(D);g.forEach(x=>x.forEach(([f])=>{r.includes(D)||Wh(f,[...r,D])}));const t=G0(D)?[D.playbackRate]:hg(D)?Array.from(D.parameters.values()):q0(D)?[D.Q,D.detune,D.frequency,D.gain]:W0(D)?[D.offset]:H0(D)?[D.gain]:X0(D)?[D.detune,D.frequency]:Y0(D)?[D.pan]:[];for(const x of t){const f=Xl(x);f!==void 0&&f.activeInputs.forEach(([u])=>Wh(u,r))}yi(D)&&Hl(D)},pg=D=>{Wh(D.destination,[])},Z0=D=>D===void 0||typeof D=="number"||typeof D=="string"&&(D==="balanced"||D==="interactive"||D==="playback"),Q0=(D,r,g,t,x,f,u,c,s)=>class extends D{constructor(m={}){if(s===null)throw new Error("Missing the native AudioContext constructor.");let v;try{v=new s(m)}catch(a){throw a.code===12&&a.message==="sampleRate is not in range"?g():a}if(v===null)throw t();if(!Z0(m.latencyHint))throw new TypeError(`The provided value '${m.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(m.sampleRate!==void 0&&v.sampleRate!==m.sampleRate)throw g();super(v,2);const{latencyHint:i}=m,{sampleRate:n}=v;if(this._baseLatency=typeof v.baseLatency=="number"?v.baseLatency:i==="balanced"?512/n:i==="interactive"||i===void 0?256/n:i==="playback"?1024/n:Math.max(2,Math.min(128,Math.round(i*n/128)))*128/n,this._nativeAudioContext=v,s.name==="webkitAudioContext"?(this._nativeGainNode=v.createGain(),this._nativeOscillatorNode=v.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(v.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,v.state==="running"){this._state="suspended";const a=()=>{this._state==="suspended"&&(this._state=null),v.removeEventListener("statechange",a)};v.addEventListener("statechange",a)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw r()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),pg(this)}))}createMediaElementSource(m){return new x(this,{mediaElement:m})}createMediaStreamDestination(){return new f(this)}createMediaStreamSource(m){return new u(this,{mediaStream:m})}createMediaStreamTrackSource(m){return new c(this,{mediaStreamTrack:m})}resume(){return this._state==="suspended"?new Promise((m,v)=>{const i=()=>{this._nativeAudioContext.removeEventListener("statechange",i),this._nativeAudioContext.state==="running"?m():this.resume().then(m,v)};this._nativeAudioContext.addEventListener("statechange",i)}):this._nativeAudioContext.resume().catch(m=>{throw m===void 0||m.code===15?r():m})}suspend(){return this._nativeAudioContext.suspend().catch(m=>{throw m===void 0?r():m})}},$0=(D,r,g,t,x,f,u,c)=>class extends D{constructor(d,m){const v=f(d),i=u(v),n=x(v,m,i),a=i?r(c):null;super(d,!1,n,a),this._isNodeOfNativeOfflineAudioContext=i,this._nativeAudioDestinationNode=n}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(d){if(this._isNodeOfNativeOfflineAudioContext)throw t();if(d>this._nativeAudioDestinationNode.maxChannelCount)throw g();this._nativeAudioDestinationNode.channelCount=d}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(d){if(this._isNodeOfNativeOfflineAudioContext)throw t();this._nativeAudioDestinationNode.channelCountMode=d}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},K0=D=>{const r=new WeakMap,g=async(t,x)=>{const f=x.destination;return r.set(x,f),await D(t,x,f),f};return{render(t,x){const f=r.get(x);return f!==void 0?Promise.resolve(f):g(t,x)}}},J0=(D,r,g,t,x,f,u,c)=>(s,d)=>{const m=d.listener,v=()=>{const S=new Float32Array(1),k=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=u(d);let T=!1,R=[0,0,-1,0,1,0],O=[0,0,0];const M=()=>{if(T)return;T=!0;const V=t(d,256,9,0);V.onaudioprocess=({inputBuffer:G})=>{const Y=[f(G,S,0),f(G,S,1),f(G,S,2),f(G,S,3),f(G,S,4),f(G,S,5)];Y.some((W,K)=>W!==R[K])&&(m.setOrientation(...Y),R=Y);const H=[f(G,S,6),f(G,S,7),f(G,S,8)];H.some((W,K)=>W!==O[K])&&(m.setPosition(...H),O=H)},k.connect(V)},L=V=>G=>{G!==R[V]&&(R[V]=G,m.setOrientation(...R))},I=V=>G=>{G!==O[V]&&(O[V]=G,m.setPosition(...O))},B=(V,G,Y)=>{const H=g(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:G});H.connect(k,0,V),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return G}});const W=D({context:s},E,H.offset,On,os);return c(W,"value",K=>()=>K.call(W),K=>Q=>{try{K.call(W,Q)}catch(se){if(se.code!==9)throw se}M(),E&&Y(Q)}),W.cancelAndHoldAtTime=(K=>E?()=>{throw x()}:(...Q)=>{const se=K.apply(W,Q);return M(),se})(W.cancelAndHoldAtTime),W.cancelScheduledValues=(K=>E?()=>{throw x()}:(...Q)=>{const se=K.apply(W,Q);return M(),se})(W.cancelScheduledValues),W.exponentialRampToValueAtTime=(K=>E?()=>{throw x()}:(...Q)=>{const se=K.apply(W,Q);return M(),se})(W.exponentialRampToValueAtTime),W.linearRampToValueAtTime=(K=>E?()=>{throw x()}:(...Q)=>{const se=K.apply(W,Q);return M(),se})(W.linearRampToValueAtTime),W.setTargetAtTime=(K=>E?()=>{throw x()}:(...Q)=>{const se=K.apply(W,Q);return M(),se})(W.setTargetAtTime),W.setValueAtTime=(K=>E?()=>{throw x()}:(...Q)=>{const se=K.apply(W,Q);return M(),se})(W.setValueAtTime),W.setValueCurveAtTime=(K=>E?()=>{throw x()}:(...Q)=>{const se=K.apply(W,Q);return M(),se})(W.setValueCurveAtTime),W};return{forwardX:B(0,0,L(0)),forwardY:B(1,0,L(1)),forwardZ:B(2,-1,L(2)),positionX:B(6,0,I(0)),positionY:B(7,0,I(1)),positionZ:B(8,0,I(2)),upX:B(3,0,L(3)),upY:B(4,1,L(4)),upZ:B(5,0,L(5))}},{forwardX:i,forwardY:n,forwardZ:a,positionX:o,positionY:h,positionZ:p,upX:y,upY:w,upZ:b}=m.forwardX===void 0?v():m;return{get forwardX(){return i},get forwardY(){return n},get forwardZ(){return a},get positionX(){return o},get positionY(){return h},get positionZ(){return p},get upX(){return y},get upY(){return w},get upZ(){return b}}},Mc=D=>"context"in D,Yl=D=>Mc(D[0]),qo=(D,r,g,t)=>{for(const x of D)if(g(x)){if(t)return!1;throw Error("The set contains at least one similar element.")}return D.add(r),!0},Ly=(D,r,[g,t],x)=>{qo(D,[r,g,t],f=>f[0]===r&&f[1]===g,x)},Ny=(D,[r,g,t],x)=>{const f=D.get(r);f===void 0?D.set(r,new Set([[g,t]])):qo(f,[g,t],u=>u[0]===g,x)},Ga=D=>"inputs"in D,Oc=(D,r,g,t)=>{if(Ga(r)){const x=r.inputs[t];return D.connect(x,g,0),[x,g,0]}return D.connect(r,g,t),[r,g,t]},mg=(D,r,g)=>{for(const t of D)if(t[0]===r&&t[1]===g)return D.delete(t),t;return null},e1=(D,r,g)=>Vc(D,t=>t[0]===r&&t[1]===g),yg=(D,r)=>{if(!Wl(D).delete(r))throw new Error("Missing the expected event listener.")},gg=(D,r,g)=>{const t=Ns(D,r),x=Vc(t,f=>f[0]===g);return t.size===0&&D.delete(r),x},Ac=(D,r,g,t)=>{Ga(r)?D.disconnect(r.inputs[t],g,0):D.disconnect(r,g,t)},br=D=>Ns(ef,D),Bl=D=>Ns(tf,D),zo=D=>Vh.has(D),xc=D=>!Ra.has(D),Fy=(D,r)=>new Promise(g=>{if(r!==null)g(!0);else{const t=D.createScriptProcessor(256,1,1),x=D.createGain(),f=D.createBuffer(1,2,44100),u=f.getChannelData(0);u[0]=1,u[1]=1;const c=D.createBufferSource();c.buffer=f,c.loop=!0,c.connect(t).connect(D.destination),c.connect(x),c.disconnect(x),t.onaudioprocess=s=>{const d=s.inputBuffer.getChannelData(0);Array.prototype.some.call(d,m=>m===1)?g(!0):g(!1),c.stop(),t.onaudioprocess=null,c.disconnect(t),t.disconnect(D.destination)},c.start()}}),Ih=(D,r)=>{const g=new Map;for(const t of D)for(const x of t){const f=g.get(x);g.set(x,f===void 0?1:f+1)}g.forEach((t,x)=>r(x,t))},Pc=D=>"context"in D,t1=D=>{const r=new Map;D.connect=(g=>(t,x=0,f=0)=>{const u=Pc(t)?g(t,x,f):g(t,x),c=r.get(t);return c===void 0?r.set(t,[{input:f,output:x}]):c.every(s=>s.input!==f||s.output!==x)&&c.push({input:f,output:x}),u})(D.connect.bind(D)),D.disconnect=(g=>(t,x,f)=>{if(g.apply(D),t===void 0)r.clear();else if(typeof t=="number")for(const[u,c]of r){const s=c.filter(d=>d.output!==t);s.length===0?r.delete(u):r.set(u,s)}else if(r.has(t))if(x===void 0)r.delete(t);else{const u=r.get(t);if(u!==void 0){const c=u.filter(s=>s.output!==x&&(s.input!==f||f===void 0));c.length===0?r.delete(t):r.set(t,c)}}for(const[u,c]of r)c.forEach(s=>{Pc(u)?D.connect(u,s.output,s.input):D.connect(u,s.output)})})(D.disconnect)},r1=(D,r,g,t)=>{const{activeInputs:x,passiveInputs:f}=Xl(r),{outputs:u}=Pn(D),c=Wl(D),s=d=>{const m=br(D),v=Bl(r);if(d){const i=gg(f,D,g);Ly(x,D,i,!1),!t&&!zo(D)&&m.connect(v,g)}else{const i=e1(x,D,g);Ny(f,i,!1),!t&&!zo(D)&&m.disconnect(v,g)}};return qo(u,[r,g],d=>d[0]===r&&d[1]===g,!0)?(c.add(s),yi(D)?Ly(x,D,[g,s],!0):Ny(f,[D,g,s],!0),!0):!1},n1=(D,r,g,t)=>{const{activeInputs:x,passiveInputs:f}=Pn(r),u=mg(x[t],D,g);return u===null?[dg(f,D,g,t)[2],!1]:[u[2],!0]},s1=(D,r,g)=>{const{activeInputs:t,passiveInputs:x}=Xl(r),f=mg(t,D,g);return f===null?[gg(x,D,g)[1],!1]:[f[2],!0]},nf=(D,r,g,t,x)=>{const[f,u]=n1(D,g,t,x);if(f!==null&&(yg(D,f),u&&!r&&!zo(D)&&Ac(br(D),br(g),t,x)),yi(g)){const{activeInputs:c}=Pn(g);qh(g,c)}},sf=(D,r,g,t)=>{const[x,f]=s1(D,g,t);x!==null&&(yg(D,x),f&&!r&&!zo(D)&&br(D).disconnect(Bl(g),t))},i1=(D,r)=>{const g=Pn(D),t=[];for(const x of g.outputs)Yl(x)?nf(D,r,...x):sf(D,r,...x),t.push(x[0]);return g.outputs.clear(),t},o1=(D,r,g)=>{const t=Pn(D),x=[];for(const f of t.outputs)f[1]===g&&(Yl(f)?nf(D,r,...f):sf(D,r,...f),x.push(f[0]),t.outputs.delete(f));return x},a1=(D,r,g,t,x)=>{const f=Pn(D);return Array.from(f.outputs).filter(u=>u[0]===g&&(t===void 0||u[1]===t)&&(x===void 0||u[2]===x)).map(u=>(Yl(u)?nf(D,r,...u):sf(D,r,...u),f.outputs.delete(u),u[0]))},l1=(D,r,g,t,x,f,u,c,s,d,m,v,i,n,a,o)=>class extends d{constructor(p,y,w,b){super(w),this._context=p,this._nativeAudioNode=w;const S=m(p);v(S)&&g(Fy,()=>Fy(S,o))!==!0&&t1(w),ef.set(this,w),ug.set(this,new Set),p.state!=="closed"&&y&&Da(this),D(this,b,w)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(p){this._nativeAudioNode.channelCount=p}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(p){this._nativeAudioNode.channelCountMode=p}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(p){this._nativeAudioNode.channelInterpretation=p}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(p,y=0,w=0){if(y<0||y>=this._nativeAudioNode.numberOfOutputs)throw x();const b=m(this._context),S=a(b);if(i(p)||n(p))throw f();if(Mc(p)){const T=br(p);try{const O=Oc(this._nativeAudioNode,T,y,w),M=xc(this);(S||M)&&this._nativeAudioNode.disconnect(...O),this.context.state!=="closed"&&!M&&xc(p)&&Da(p)}catch(O){throw O.code===12?f():O}if(r(this,p,y,w,S)){const O=s([this],p);Ih(O,t(S))}return p}const k=Bl(p);if(k.name==="playbackRate"&&k.maxValue===1024)throw u();try{this._nativeAudioNode.connect(k,y),(S||xc(this))&&this._nativeAudioNode.disconnect(k,y)}catch(T){throw T.code===12?f():T}if(r1(this,p,y,S)){const T=s([this],p);Ih(T,t(S))}}disconnect(p,y,w){let b;const S=m(this._context),k=a(S);if(p===void 0)b=i1(this,k);else if(typeof p=="number"){if(p<0||p>=this.numberOfOutputs)throw x();b=o1(this,k,p)}else{if(y!==void 0&&(y<0||y>=this.numberOfOutputs)||Mc(p)&&w!==void 0&&(w<0||w>=p.numberOfInputs))throw x();if(b=a1(this,k,p,y,w),b.length===0)throw f()}for(const E of b){const T=s([this],E);Ih(T,c)}}},u1=(D,r,g,t,x,f,u,c,s,d,m,v,i)=>(n,a,o,h=null,p=null)=>{const y=o.value,w=new _0(y),b=a?t(w):null,S={get defaultValue(){return y},get maxValue(){return h===null?o.maxValue:h},get minValue(){return p===null?o.minValue:p},get value(){return o.value},set value(k){o.value=k,S.setValueAtTime(k,n.context.currentTime)},cancelAndHoldAtTime(k){if(typeof o.cancelAndHoldAtTime=="function")b===null&&w.flush(n.context.currentTime),w.add(x(k)),o.cancelAndHoldAtTime(k);else{const E=Array.from(w).pop();b===null&&w.flush(n.context.currentTime),w.add(x(k));const T=Array.from(w).pop();o.cancelScheduledValues(k),E!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?o.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?o.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?o.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&o.setValueCurveAtTime(T.values,T.startTime,T.duration))}return S},cancelScheduledValues(k){return b===null&&w.flush(n.context.currentTime),w.add(f(k)),o.cancelScheduledValues(k),S},exponentialRampToValueAtTime(k,E){if(k===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const T=n.context.currentTime;return b===null&&w.flush(T),Array.from(w).length===0&&(w.add(d(y,T)),o.setValueAtTime(y,T)),w.add(u(k,E)),o.exponentialRampToValueAtTime(k,E),S},linearRampToValueAtTime(k,E){const T=n.context.currentTime;return b===null&&w.flush(T),Array.from(w).length===0&&(w.add(d(y,T)),o.setValueAtTime(y,T)),w.add(c(k,E)),o.linearRampToValueAtTime(k,E),S},setTargetAtTime(k,E,T){return b===null&&w.flush(n.context.currentTime),w.add(s(k,E,T)),o.setTargetAtTime(k,E,T),S},setValueAtTime(k,E){return b===null&&w.flush(n.context.currentTime),w.add(d(k,E)),o.setValueAtTime(k,E),S},setValueCurveAtTime(k,E,T){const R=k instanceof Float32Array?k:new Float32Array(k);if(v!==null&&v.name==="webkitAudioContext"){const O=E+T,M=n.context.sampleRate,L=Math.ceil(E*M),I=Math.floor(O*M),B=I-L,V=new Float32Array(B);for(let Y=0;Y<B;Y+=1){const H=(R.length-1)/T*((L+Y)/M-E),W=Math.floor(H),K=Math.ceil(H);V[Y]=W===K?R[W]:(1-(H-W))*R[W]+(1-(K-H))*R[K]}b===null&&w.flush(n.context.currentTime),w.add(m(V,E,T)),o.setValueCurveAtTime(V,E,T);const G=I/M;G<O&&i(S,V[V.length-1],G),i(S,R[R.length-1],O)}else b===null&&w.flush(n.context.currentTime),w.add(m(R,E,T)),o.setValueCurveAtTime(R,E,T);return S}};return g.set(S,o),r.set(S,n),D(S,b),S},c1=D=>({replay(r){for(const g of D)if(g.type==="exponentialRampToValue"){const{endTime:t,value:x}=g;r.exponentialRampToValueAtTime(x,t)}else if(g.type==="linearRampToValue"){const{endTime:t,value:x}=g;r.linearRampToValueAtTime(x,t)}else if(g.type==="setTarget"){const{startTime:t,target:x,timeConstant:f}=g;r.setTargetAtTime(x,t,f)}else if(g.type==="setValue"){const{startTime:t,value:x}=g;r.setValueAtTime(x,t)}else if(g.type==="setValueCurve"){const{duration:t,startTime:x,values:f}=g;r.setValueCurveAtTime(f,x,t)}else throw new Error("Can't apply an unknown automation.")}});class vg{constructor(r){this._map=new Map(r)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(r,g=null){return this._map.forEach((t,x)=>r.call(g,t,x,this))}get(r){return this._map.get(r)}has(r){return this._map.has(r)}keys(){return this._map.keys()}values(){return this._map.values()}}const d1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},h1=(D,r,g,t,x,f,u,c,s,d,m,v,i,n)=>class extends r{constructor(o,h,p){var y;const w=c(o),b=s(w),S=m({...d1,...p});i(S);const k=zh.get(w),E=k==null?void 0:k.get(h),T=b||w.state!=="closed"?w:(y=u(w))!==null&&y!==void 0?y:w,R=x(T,b?null:o.baseLatency,d,h,E,S),O=b?t(h,S,E):null;super(o,!0,R,O);const M=[];R.parameters.forEach((I,B)=>{const V=g(this,b,I);M.push([B,V])}),this._nativeAudioWorkletNode=R,this._onprocessorerror=null,this._parameters=new vg(M),b&&D(w,this);const{activeInputs:L}=f(this);v(R,L)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(o){const h=typeof o=="function"?n(this,o):null;this._nativeAudioWorkletNode.onprocessorerror=h;const p=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=p!==null&&p===h?o:p}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Rc(D,r,g,t,x){if(typeof D.copyFromChannel=="function")r[g].byteLength===0&&(r[g]=new Float32Array(128)),D.copyFromChannel(r[g],t,x);else{const f=D.getChannelData(t);if(r[g].byteLength===0)r[g]=f.slice(x,x+128);else{const u=new Float32Array(f.buffer,x*Float32Array.BYTES_PER_ELEMENT,128);r[g].set(u)}}}const _g=(D,r,g,t,x)=>{typeof D.copyToChannel=="function"?r[g].byteLength!==0&&D.copyToChannel(r[g],t,x):r[g].byteLength!==0&&D.getChannelData(t).set(r[g],x)},Dc=(D,r)=>{const g=[];for(let t=0;t<D;t+=1){const x=[],f=typeof r=="number"?r:r[t];for(let u=0;u<f;u+=1)x.push(new Float32Array(128));g.push(x)}return g},f1=(D,r)=>{const g=Ns(Gh,D),t=br(r);return Ns(g,t)},p1=async(D,r,g,t,x,f,u)=>{const c=r===null?Math.ceil(D.context.length/128)*128:r.length,s=t.channelCount*t.numberOfInputs,d=x.reduce((h,p)=>h+p,0),m=d===0?null:g.createBuffer(d,c,g.sampleRate);if(f===void 0)throw new Error("Missing the processor constructor.");const v=Pn(D),i=await f1(g,D),n=Dc(t.numberOfInputs,t.channelCount),a=Dc(t.numberOfOutputs,x),o=Array.from(D.parameters.keys()).reduce((h,p)=>({...h,[p]:new Float32Array(128)}),{});for(let h=0;h<c;h+=128){if(t.numberOfInputs>0&&r!==null)for(let p=0;p<t.numberOfInputs;p+=1)for(let y=0;y<t.channelCount;y+=1)Rc(r,n[p],y,y,h);f.parameterDescriptors!==void 0&&r!==null&&f.parameterDescriptors.forEach(({name:p},y)=>{Rc(r,o,p,s+y,h)});for(let p=0;p<t.numberOfInputs;p+=1)for(let y=0;y<x[p];y+=1)a[p][y].byteLength===0&&(a[p][y]=new Float32Array(128));try{const p=n.map((w,b)=>v.activeInputs[b].size===0?[]:w),y=u(h/g.sampleRate,g.sampleRate,()=>i.process(p,a,o));if(m!==null)for(let w=0,b=0;w<t.numberOfOutputs;w+=1){for(let S=0;S<x[w];S+=1)_g(m,a[w],S,b+S,h);b+=x[w]}if(!y)break}catch(p){D.dispatchEvent(new ErrorEvent("processorerror",{colno:p.colno,filename:p.filename,lineno:p.lineno,message:p.message}));break}}return m},m1=(D,r,g,t,x,f,u,c,s,d,m,v,i,n,a,o)=>(h,p,y)=>{const w=new WeakMap;let b=null;const S=async(k,E)=>{let T=m(k),R=null;const O=kn(T,E),M=Array.isArray(p.outputChannelCount)?p.outputChannelCount:Array.from(p.outputChannelCount);if(v===null){const L=M.reduce((G,Y)=>G+Y,0),I=x(E,{channelCount:Math.max(1,L),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,L)}),B=[];for(let G=0;G<k.numberOfOutputs;G+=1)B.push(t(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[G]}));const V=u(E,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1});V.connect=r.bind(null,B),V.disconnect=s.bind(null,B),R=[I,B,V]}else O||(T=new v(E,h));if(w.set(E,R===null?T:R[2]),R!==null){if(b===null){if(y===void 0)throw new Error("Missing the processor constructor.");if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Y=k.channelCount*k.numberOfInputs,H=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length,W=Y+H;b=p1(k,W===0?null:await(async()=>{const Q=new i(W,Math.ceil(k.context.length/128)*128,E.sampleRate),se=[],A=[];for(let $=0;$<p.numberOfInputs;$+=1)se.push(u(Q,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),A.push(x(Q,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));const z=await Promise.all(Array.from(k.parameters.values()).map(async $=>{const ie=f(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$.value});return await n(Q,$,ie.offset),ie})),q=t(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Y+H)});for(let $=0;$<p.numberOfInputs;$+=1){se[$].connect(A[$]);for(let ie=0;ie<p.channelCount;ie+=1)A[$].connect(q,ie,$*p.channelCount+ie)}for(const[$,ie]of z.entries())ie.connect(q,0,Y+$),ie.start(0);return q.connect(Q.destination),await Promise.all(se.map($=>a(k,Q,$))),o(Q)})(),E,p,M,y,d)}const L=await b,I=g(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[B,V,G]=R;L!==null&&(I.buffer=L,I.start(0)),I.connect(B);for(let Y=0,H=0;Y<k.numberOfOutputs;Y+=1){const W=V[Y];for(let K=0;K<M[Y];K+=1)B.connect(W,H+K,K);H+=M[Y]}return G}if(O)for(const[L,I]of k.parameters.entries())await D(E,I,T.parameters.get(L));else for(const[L,I]of k.parameters.entries())await n(E,I,T.parameters.get(L));return await a(k,E,T),T};return{render(k,E){c(E,k);const T=w.get(E);return T!==void 0?Promise.resolve(T):S(k,E)}}},y1=(D,r,g,t,x,f,u,c,s,d,m,v,i,n,a,o,h,p,y,w)=>class extends a{constructor(S,k){super(S,k),this._nativeContext=S,this._audioWorklet=D===void 0?void 0:{addModule:(E,T)=>D(this,E,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new r(this)}createBiquadFilter(){return new x(this)}createBuffer(S,k,E){return new g({length:k,numberOfChannels:S,sampleRate:E})}createBufferSource(){return new t(this)}createChannelMerger(S=6){return new f(this,{numberOfInputs:S})}createChannelSplitter(S=6){return new u(this,{numberOfOutputs:S})}createConstantSource(){return new c(this)}createConvolver(){return new s(this)}createDelay(S=1){return new m(this,{maxDelayTime:S})}createDynamicsCompressor(){return new v(this)}createGain(){return new i(this)}createIIRFilter(S,k){return new n(this,{feedback:k,feedforward:S})}createOscillator(){return new o(this)}createPanner(){return new h(this)}createPeriodicWave(S,k,E={disableNormalization:!1}){return new p(this,{...E,imag:k,real:S})}createStereoPanner(){return new y(this)}createWaveShaper(){return new w(this)}decodeAudioData(S,k,E){return d(this._nativeContext,S).then(T=>(typeof k=="function"&&k(T),T),T=>{throw typeof E=="function"&&E(T),T})}},g1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},v1=(D,r,g,t,x,f,u,c)=>class extends D{constructor(d,m){const v=f(d),i={...g1,...m},n=x(v,i),a=u(v),o=a?g():null;super(d,!1,n,o),this._Q=r(this,a,n.Q,On,os),this._detune=r(this,a,n.detune,1200*Math.log2(On),-1200*Math.log2(On)),this._frequency=r(this,a,n.frequency,d.sampleRate/2,0),this._gain=r(this,a,n.gain,40*Math.log10(On),os),this._nativeBiquadFilterNode=n,c(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(d){this._nativeBiquadFilterNode.type=d}getFrequencyResponse(d,m,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(d,m,v)}catch(i){throw i.code===11?t():i}if(d.length!==m.length||m.length!==v.length)throw t()}},_1=(D,r,g,t,x)=>()=>{const f=new WeakMap,u=async(c,s)=>{let d=g(c);const m=kn(d,s);if(!m){const v={Q:d.Q.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,gain:d.gain.value,type:d.type};d=r(s,v)}return f.set(s,d),m?(await D(s,c.Q,d.Q),await D(s,c.detune,d.detune),await D(s,c.frequency,d.frequency),await D(s,c.gain,d.gain)):(await t(s,c.Q,d.Q),await t(s,c.detune,d.detune),await t(s,c.frequency,d.frequency),await t(s,c.gain,d.gain)),await x(c,s,d),d};return{render(c,s){const d=f.get(s);return d!==void 0?Promise.resolve(d):u(c,s)}}},b1=(D,r)=>(g,t)=>{const x=r.get(g);if(x!==void 0)return x;const f=D.get(g);if(f!==void 0)return f;try{const u=t();return u instanceof Promise?(D.set(g,u),u.catch(()=>!1).then(c=>(D.delete(g),r.set(g,c),c))):(r.set(g,u),u)}catch{return r.set(g,!1),!1}},x1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},w1=(D,r,g,t,x)=>class extends D{constructor(u,c){const s=t(u),d={...x1,...c},m=g(s,d),v=x(s)?r():null;super(u,!1,m,v)}},S1=(D,r,g)=>()=>{const t=new WeakMap,x=async(f,u)=>{let c=r(f);if(!kn(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs};c=D(u,d)}return t.set(u,c),await g(f,u,c),c};return{render(f,u){const c=t.get(u);return c!==void 0?Promise.resolve(c):x(f,u)}}},j1={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},T1=(D,r,g,t,x,f)=>class extends D{constructor(c,s){const d=t(c),m=f({...j1,...s}),v=g(d,m),i=x(d)?r():null;super(c,!1,v,i)}},k1=(D,r,g)=>()=>{const t=new WeakMap,x=async(f,u)=>{let c=r(f);if(!kn(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs};c=D(u,d)}return t.set(u,c),await g(f,u,c),c};return{render(f,u){const c=t.get(u);return c!==void 0?Promise.resolve(c):x(f,u)}}},E1=D=>(r,g,t)=>D(g,r,t),C1=D=>(r,g,t=0,x=0)=>{const f=r[t];if(f===void 0)throw D();return Pc(g)?f.connect(g,0,x):f.connect(g,0)},M1=D=>(r,g)=>{const t=D(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),x=r.createBuffer(1,2,44100);return t.buffer=x,t.loop=!0,t.connect(g),t.start(),()=>{t.stop(),t.disconnect(g)}},O1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},A1=(D,r,g,t,x,f,u)=>class extends D{constructor(s,d){const m=x(s),v={...O1,...d},i=t(m,v),n=f(m),a=n?g():null;super(s,!1,i,a),this._constantSourceNodeRenderer=a,this._nativeConstantSourceNode=i,this._offset=r(this,n,i.offset,On,os),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(s){const d=typeof s=="function"?u(this,s):null;this._nativeConstantSourceNode.onended=d;const m=this._nativeConstantSourceNode.onended;this._onended=m!==null&&m===d?s:m}start(s=0){if(this._nativeConstantSourceNode.start(s),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=s),this.context.state!=="closed"){Da(this);const d=()=>{this._nativeConstantSourceNode.removeEventListener("ended",d),yi(this)&&Hl(this)};this._nativeConstantSourceNode.addEventListener("ended",d)}}stop(s=0){this._nativeConstantSourceNode.stop(s),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=s)}},P1=(D,r,g,t,x)=>()=>{const f=new WeakMap;let u=null,c=null;const s=async(d,m)=>{let v=g(d);const i=kn(v,m);if(!i){const n={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=r(m,n),u!==null&&v.start(u),c!==null&&v.stop(c)}return f.set(m,v),i?await D(m,d.offset,v.offset):await t(m,d.offset,v.offset),await x(d,m,v),v};return{set start(d){u=d},set stop(d){c=d},render(d,m){const v=f.get(m);return v!==void 0?Promise.resolve(v):s(d,m)}}},R1=D=>r=>(D[0]=r,D[0]),D1={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},I1=(D,r,g,t,x,f)=>class extends D{constructor(c,s){const d=t(c),m={...D1,...s},v=g(d,m),n=x(d)?r():null;super(c,!1,v,n),this._isBufferNullified=!1,this._nativeConvolverNode=v,m.buffer!==null&&f(this,m.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(c){if(this._nativeConvolverNode.buffer=c,c===null&&this._nativeConvolverNode.buffer!==null){const s=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=s.createBuffer(1,1,s.sampleRate),this._isBufferNullified=!0,f(this,0)}else this._isBufferNullified=!1,f(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(c){this._nativeConvolverNode.normalize=c}},L1=(D,r,g)=>()=>{const t=new WeakMap,x=async(f,u)=>{let c=r(f);if(!kn(c,u)){const d={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=D(u,d)}return t.set(u,c),Ga(c)?await g(f,u,c.inputs[0]):await g(f,u,c),c};return{render(f,u){const c=t.get(u);return c!==void 0?Promise.resolve(c):x(f,u)}}},N1=(D,r)=>(g,t,x)=>{if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new r(g,t,x)}catch(f){throw f.name==="SyntaxError"?D():f}},F1=()=>new DOMException("","DataCloneError"),Uy=D=>{const{port1:r,port2:g}=new MessageChannel;return new Promise(t=>{const x=()=>{g.onmessage=null,r.close(),g.close(),t()};g.onmessage=()=>x();try{r.postMessage(D,[D])}catch{}finally{x()}})},U1=(D,r,g,t,x,f,u,c,s,d,m)=>(v,i)=>{const n=u(v)?v:f(v);if(x.has(i)){const a=g();return Promise.reject(a)}try{x.add(i)}catch{}return r(s,()=>s(n))?n.decodeAudioData(i).then(a=>(Uy(i).catch(()=>{}),r(c,()=>c(a))||m(a),D.add(a),a)):new Promise((a,o)=>{const h=async()=>{try{await Uy(i)}catch{}},p=y=>{o(y),h()};try{n.decodeAudioData(i,y=>{typeof y.copyFromChannel!="function"&&(d(y),rf(y)),D.add(y),h().then(()=>a(y))},y=>{p(y===null?t():y)})}catch(y){p(y)}})},B1=(D,r,g,t,x,f,u,c)=>(s,d)=>{const m=r.get(s);if(m===void 0)throw new Error("Missing the expected cycle count.");const v=f(s.context),i=c(v);if(m===d){if(r.delete(s),!i&&u(s)){const n=t(s),{outputs:a}=g(s);for(const o of a)if(Yl(o)){const h=t(o[0]);D(n,h,o[1],o[2])}else{const h=x(o[0]);n.connect(h,o[1])}}}else r.set(s,m-d)},V1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},z1=(D,r,g,t,x,f,u)=>class extends D{constructor(s,d){const m=x(s),v={...V1,...d},i=t(m,v),n=f(m),a=n?g(v.maxDelayTime):null;super(s,!1,i,a),this._delayTime=r(this,n,i.delayTime),u(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},G1=(D,r,g,t,x)=>f=>{const u=new WeakMap,c=async(s,d)=>{let m=g(s);const v=kn(m,d);if(!v){const i={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,delayTime:m.delayTime.value,maxDelayTime:f};m=r(d,i)}return u.set(d,m),v?await D(d,s.delayTime,m.delayTime):await t(d,s.delayTime,m.delayTime),await x(s,d,m),m};return{render(s,d){const m=u.get(d);return m!==void 0?Promise.resolve(m):c(s,d)}}},q1=D=>(r,g,t,x)=>D(r[x],f=>f[0]===g&&f[1]===t),W1=D=>(r,g)=>{D(r).delete(g)},H1=D=>"delayTime"in D,X1=(D,r,g)=>function t(x,f){const u=Mc(f)?f:g(D,f);if(H1(u))return[];if(x[0]===u)return[x];if(x.includes(u))return[];const{outputs:c}=r(u);return Array.from(c).map(s=>t([...x,u],s[0])).reduce((s,d)=>s.concat(d),[])},gc=(D,r,g)=>{const t=r[g];if(t===void 0)throw D();return t},Y1=D=>(r,g=void 0,t=void 0,x=0)=>g===void 0?r.forEach(f=>f.disconnect()):typeof g=="number"?gc(D,r,g).disconnect():Pc(g)?t===void 0?r.forEach(f=>f.disconnect(g)):x===void 0?gc(D,r,t).disconnect(g,0):gc(D,r,t).disconnect(g,0,x):t===void 0?r.forEach(f=>f.disconnect(g)):gc(D,r,t).disconnect(g,0),Z1={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Q1=(D,r,g,t,x,f,u,c)=>class extends D{constructor(d,m){const v=f(d),i={...Z1,...m},n=t(v,i),a=u(v),o=a?g():null;super(d,!1,n,o),this._attack=r(this,a,n.attack),this._knee=r(this,a,n.knee),this._nativeDynamicsCompressorNode=n,this._ratio=r(this,a,n.ratio),this._release=r(this,a,n.release),this._threshold=r(this,a,n.threshold),c(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(d){const m=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=d,d>2)throw this._nativeDynamicsCompressorNode.channelCount=m,x()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(d){const m=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=d,d==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=m,x()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},$1=(D,r,g,t,x)=>()=>{const f=new WeakMap,u=async(c,s)=>{let d=g(c);const m=kn(d,s);if(!m){const v={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=r(s,v)}return f.set(s,d),m?(await D(s,c.attack,d.attack),await D(s,c.knee,d.knee),await D(s,c.ratio,d.ratio),await D(s,c.release,d.release),await D(s,c.threshold,d.threshold)):(await t(s,c.attack,d.attack),await t(s,c.knee,d.knee),await t(s,c.ratio,d.ratio),await t(s,c.release,d.release),await t(s,c.threshold,d.threshold)),await x(c,s,d),d};return{render(c,s){const d=f.get(s);return d!==void 0?Promise.resolve(d):u(c,s)}}},K1=()=>new DOMException("","EncodingError"),J1=D=>r=>new Promise((g,t)=>{if(D===null){t(new SyntaxError);return}const x=D.document.head;if(x===null)t(new SyntaxError);else{const f=D.document.createElement("script"),u=new Blob([r],{type:"application/javascript"}),c=URL.createObjectURL(u),s=D.onerror,d=()=>{D.onerror=s,URL.revokeObjectURL(c)};D.onerror=(m,v,i,n,a)=>{if(v===c||v===D.location.href&&i===1&&n===1)return d(),t(a),!1;if(s!==null)return s(m,v,i,n,a)},f.onerror=()=>{d(),t(new SyntaxError)},f.onload=()=>{d(),g()},f.src=c,f.type="module",x.appendChild(f)}}),e_=D=>class{constructor(g){this._nativeEventTarget=g,this._listeners=new WeakMap}addEventListener(g,t,x){if(t!==null){let f=this._listeners.get(t);f===void 0&&(f=D(this,t),typeof t=="function"&&this._listeners.set(t,f)),this._nativeEventTarget.addEventListener(g,f,x)}}dispatchEvent(g){return this._nativeEventTarget.dispatchEvent(g)}removeEventListener(g,t,x){const f=t===null?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(g,f===void 0?null:f,x)}},t_=D=>(r,g,t)=>{Object.defineProperties(D,{currentFrame:{configurable:!0,get(){return Math.round(r*g)}},currentTime:{configurable:!0,get(){return r}}});try{return t()}finally{D!==null&&(delete D.currentFrame,delete D.currentTime)}},r_=D=>async r=>{try{const g=await fetch(r);if(g.ok)return[await g.text(),g.url]}catch{}throw D()},n_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},s_=(D,r,g,t,x,f)=>class extends D{constructor(c,s){const d=x(c),m={...n_,...s},v=t(d,m),i=f(d),n=i?g():null;super(c,!1,v,n),this._gain=r(this,i,v.gain,On,os)}get gain(){return this._gain}},i_=(D,r,g,t,x)=>()=>{const f=new WeakMap,u=async(c,s)=>{let d=g(c);const m=kn(d,s);if(!m){const v={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,gain:d.gain.value};d=r(s,v)}return f.set(s,d),m?await D(s,c.gain,d.gain):await t(s,c.gain,d.gain),await x(c,s,d),d};return{render(c,s){const d=f.get(s);return d!==void 0?Promise.resolve(d):u(c,s)}}},o_=(D,r)=>g=>r(D,g),a_=D=>r=>{const g=D(r);if(g.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return g.renderer},l_=D=>r=>{var g;return(g=D.get(r))!==null&&g!==void 0?g:0},u_=D=>r=>{const g=D(r);if(g.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return g.renderer},c_=D=>r=>D.get(r),cn=()=>new DOMException("","InvalidStateError"),d_=D=>r=>{const g=D.get(r);if(g===void 0)throw cn();return g},h_=(D,r)=>g=>{let t=D.get(g);if(t!==void 0)return t;if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");return t=new r(1,1,44100),D.set(g,t),t},f_=D=>r=>{const g=D.get(r);if(g===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return g},zc=()=>new DOMException("","InvalidAccessError"),p_=D=>{D.getFrequencyResponse=(r=>(g,t,x)=>{if(g.length!==t.length||t.length!==x.length)throw zc();return r.call(D,g,t,x)})(D.getFrequencyResponse)},m_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},y_=(D,r,g,t,x,f)=>class extends D{constructor(c,s){const d=t(c),m=x(d),v={...m_,...s},i=r(d,m?null:c.baseLatency,v),n=m?g(v.feedback,v.feedforward):null;super(c,!1,i,n),p_(i),this._nativeIIRFilterNode=i,f(this,1)}getFrequencyResponse(c,s,d){return this._nativeIIRFilterNode.getFrequencyResponse(c,s,d)}},bg=(D,r,g,t,x,f,u,c,s,d,m)=>{const v=d.length;let i=c;for(let n=0;n<v;n+=1){let a=g[0]*d[n];for(let o=1;o<x;o+=1){const h=i-o&s-1;a+=g[o]*f[h],a-=D[o]*u[h]}for(let o=x;o<t;o+=1)a+=g[o]*f[i-o&s-1];for(let o=x;o<r;o+=1)a-=D[o]*u[i-o&s-1];f[i]=d[n],u[i]=a,i=i+1&s-1,m[n]=a}return i},g_=(D,r,g,t)=>{const x=g instanceof Float64Array?g:new Float64Array(g),f=t instanceof Float64Array?t:new Float64Array(t),u=x.length,c=f.length,s=Math.min(u,c);if(x[0]!==1){for(let a=0;a<u;a+=1)f[a]/=x[0];for(let a=1;a<c;a+=1)x[a]/=x[0]}const d=32,m=new Float32Array(d),v=new Float32Array(d),i=r.createBuffer(D.numberOfChannels,D.length,D.sampleRate),n=D.numberOfChannels;for(let a=0;a<n;a+=1){const o=D.getChannelData(a),h=i.getChannelData(a);m.fill(0),v.fill(0),bg(x,u,f,c,s,m,v,0,d,o,h)}return i},v_=(D,r,g,t,x)=>(f,u)=>{const c=new WeakMap;let s=null;const d=async(m,v)=>{let i=null,n=r(m);const a=kn(n,v);if(v.createIIRFilter===void 0?i=D(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):a||(n=v.createIIRFilter(u,f)),c.set(v,i===null?n:i),i!==null){if(s===null){if(g===null)throw new Error("Missing the native OfflineAudioContext constructor.");const h=new g(m.context.destination.channelCount,m.context.length,v.sampleRate);s=(async()=>{await t(m,h,h.destination);const p=await x(h);return g_(p,v,f,u)})()}const o=await s;return i.buffer=o,i.start(0),i}return await t(m,v,n),n};return{render(m,v){const i=c.get(v);return i!==void 0?Promise.resolve(i):d(m,v)}}},__=(D,r,g,t,x,f)=>u=>(c,s)=>{const d=D.get(c);if(d===void 0){if(!u&&f(c)){const m=t(c),{outputs:v}=g(c);for(const i of v)if(Yl(i)){const n=t(i[0]);r(m,n,i[1],i[2])}else{const n=x(i[0]);m.disconnect(n,i[1])}}D.set(c,s)}else D.set(c,d+s)},b_=(D,r)=>g=>{const t=D.get(g);return r(t)||r(g)},x_=(D,r)=>g=>D.has(g)||r(g),w_=(D,r)=>g=>D.has(g)||r(g),S_=(D,r)=>g=>{const t=D.get(g);return r(t)||r(g)},j_=D=>r=>D!==null&&r instanceof D,T_=D=>r=>D!==null&&typeof D.AudioNode=="function"&&r instanceof D.AudioNode,k_=D=>r=>D!==null&&typeof D.AudioParam=="function"&&r instanceof D.AudioParam,E_=(D,r)=>g=>D(g)||r(g),C_=D=>r=>D!==null&&r instanceof D,M_=D=>D!==null&&D.isSecureContext,O_=async(D,r,g,t,x,f,u,c,s,d,m,v,i,n,a,o)=>D(r,r)&&D(g,g)&&D(x,x)&&D(f,f)&&D(c,c)&&D(s,s)&&D(d,d)&&D(m,m)&&D(v,v)&&D(i,i)&&D(n,n)?(await Promise.all([D(t,t),D(u,u),D(a,a),D(o,o)])).every(p=>p):!1,A_=(D,r,g,t)=>class extends D{constructor(f,u){const c=g(f),s=r(c,u);if(t(c))throw TypeError();super(f,!0,s,null),this._nativeMediaElementAudioSourceNode=s}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},P_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},R_=(D,r,g,t)=>class extends D{constructor(f,u){const c=g(f);if(t(c))throw new TypeError;const s={...P_,...u},d=r(c,s);super(f,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},D_=(D,r,g,t)=>class extends D{constructor(f,u){const c=g(f),s=r(c,u);if(t(c))throw new TypeError;super(f,!0,s,null),this._nativeMediaStreamAudioSourceNode=s}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},I_=(D,r,g)=>class extends D{constructor(x,f){const u=g(x),c=r(u,f);super(x,!0,c,null)}},L_=(D,r,g,t,x,f)=>class extends g{constructor(c,s){super(c),this._nativeContext=c,Bc.set(this,c),t(c)&&x.set(c,new Set),this._destination=new D(this,s),this._listener=r(this,c),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(c){const s=typeof c=="function"?f(this,c):null;this._nativeContext.onstatechange=s;const d=this._nativeContext.onstatechange;this._onstatechange=d!==null&&d===s?c:d}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Vl=D=>{const r=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const g=D.decodeAudioData(r.buffer,()=>{});return g===void 0?!1:(g.catch(()=>{}),!0)}catch{}return!1},N_=(D,r)=>(g,t,x)=>{const f=new Set;return g.connect=(u=>(c,s=0,d=0)=>{const m=f.size===0;if(r(c))return u.call(g,c,s,d),D(f,[c,s,d],v=>v[0]===c&&v[1]===s&&v[2]===d,!0),m&&t(),c;u.call(g,c,s),D(f,[c,s],v=>v[0]===c&&v[1]===s,!0),m&&t()})(g.connect),g.disconnect=(u=>(c,s,d)=>{const m=f.size>0;if(c===void 0)u.apply(g),f.clear();else if(typeof c=="number"){u.call(g,c);for(const i of f)i[1]===c&&f.delete(i)}else{r(c)?u.call(g,c,s,d):u.call(g,c,s);for(const i of f)i[0]===c&&(s===void 0||i[1]===s)&&(d===void 0||i[2]===d)&&f.delete(i)}const v=f.size===0;m&&v&&x()})(g.disconnect),g},jr=(D,r,g)=>{const t=r[g];t!==void 0&&t!==D[g]&&(D[g]=t)},tn=(D,r)=>{jr(D,r,"channelCount"),jr(D,r,"channelCountMode"),jr(D,r,"channelInterpretation")},By=D=>typeof D.getFloatTimeDomainData=="function",F_=D=>{D.getFloatTimeDomainData=r=>{const g=new Uint8Array(r.length);D.getByteTimeDomainData(g);const t=Math.max(g.length,D.fftSize);for(let x=0;x<t;x+=1)r[x]=(g[x]-128)*.0078125;return r}},U_=(D,r)=>(g,t)=>{const x=g.createAnalyser();if(tn(x,t),!(t.maxDecibels>t.minDecibels))throw r();return jr(x,t,"fftSize"),jr(x,t,"maxDecibels"),jr(x,t,"minDecibels"),jr(x,t,"smoothingTimeConstant"),D(By,()=>By(x))||F_(x),x},B_=D=>D===null?null:D.hasOwnProperty("AudioBuffer")?D.AudioBuffer:null,Nr=(D,r,g)=>{const t=r[g];t!==void 0&&t!==D[g].value&&(D[g].value=t)},V_=D=>{D.start=(r=>{let g=!1;return(t=0,x=0,f)=>{if(g)throw cn();r.call(D,t,x,f),g=!0}})(D.start)},of=D=>{D.start=(r=>(g=0,t=0,x)=>{if(typeof x=="number"&&x<0||t<0||g<0)throw new RangeError("The parameters can't be negative.");r.call(D,g,t,x)})(D.start)},af=D=>{D.stop=(r=>(g=0)=>{if(g<0)throw new RangeError("The parameter can't be negative.");r.call(D,g)})(D.stop)},z_=(D,r,g,t,x,f,u,c,s,d,m)=>(v,i)=>{const n=v.createBufferSource();return tn(n,i),Nr(n,i,"playbackRate"),jr(n,i,"buffer"),jr(n,i,"loop"),jr(n,i,"loopEnd"),jr(n,i,"loopStart"),r(g,()=>g(v))||V_(n),r(t,()=>t(v))||s(n),r(x,()=>x(v))||d(n,v),r(f,()=>f(v))||of(n),r(u,()=>u(v))||m(n,v),r(c,()=>c(v))||af(n),D(v,n),n},G_=D=>D===null?null:D.hasOwnProperty("AudioContext")?D.AudioContext:D.hasOwnProperty("webkitAudioContext")?D.webkitAudioContext:null,q_=(D,r)=>(g,t,x)=>{const f=g.destination;if(f.channelCount!==t)try{f.channelCount=t}catch{}x&&f.channelCountMode!=="explicit"&&(f.channelCountMode="explicit"),f.maxChannelCount===0&&Object.defineProperty(f,"maxChannelCount",{value:t});const u=D(g,{channelCount:t,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1});return r(u,"channelCount",c=>()=>c.call(u),c=>s=>{c.call(u,s);try{f.channelCount=s}catch(d){if(s>f.maxChannelCount)throw d}}),r(u,"channelCountMode",c=>()=>c.call(u),c=>s=>{c.call(u,s),f.channelCountMode=s}),r(u,"channelInterpretation",c=>()=>c.call(u),c=>s=>{c.call(u,s),f.channelInterpretation=s}),Object.defineProperty(u,"maxChannelCount",{get:()=>f.maxChannelCount}),u.connect(f),u},W_=D=>D===null?null:D.hasOwnProperty("AudioWorkletNode")?D.AudioWorkletNode:null,H_=D=>{const{port1:r}=new MessageChannel;try{r.postMessage(D)}finally{r.close()}},X_=(D,r,g,t,x)=>(f,u,c,s,d,m)=>{if(c!==null)try{const v=new c(f,s,m),i=new Map;let n=null;if(Object.defineProperties(v,{channelCount:{get:()=>m.channelCount,set:()=>{throw D()}},channelCountMode:{get:()=>"explicit",set:()=>{throw D()}},onprocessorerror:{get:()=>n,set:a=>{typeof n=="function"&&v.removeEventListener("processorerror",n),n=typeof a=="function"?a:null,typeof n=="function"&&v.addEventListener("processorerror",n)}}}),v.addEventListener=(a=>(...o)=>{if(o[0]==="processorerror"){const h=typeof o[1]=="function"?o[1]:typeof o[1]=="object"&&o[1]!==null&&typeof o[1].handleEvent=="function"?o[1].handleEvent:null;if(h!==null){const p=i.get(o[1]);p!==void 0?o[1]=p:(o[1]=y=>{y.type==="error"?(Object.defineProperties(y,{type:{value:"processorerror"}}),h(y)):h(new ErrorEvent(o[0],{...y}))},i.set(h,o[1]))}}return a.call(v,"error",o[1],o[2]),a.call(v,...o)})(v.addEventListener),v.removeEventListener=(a=>(...o)=>{if(o[0]==="processorerror"){const h=i.get(o[1]);h!==void 0&&(i.delete(o[1]),o[1]=h)}return a.call(v,"error",o[1],o[2]),a.call(v,o[0],o[1],o[2])})(v.removeEventListener),m.numberOfOutputs!==0){const a=g(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return v.connect(a).connect(f.destination),x(v,()=>a.disconnect(),()=>a.connect(f.destination))}return v}catch(v){throw v.code===11?t():v}if(d===void 0)throw t();return H_(m),r(f,u,d,m)},xg=(D,r)=>D===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(D*r))))),Y_=D=>new Promise((r,g)=>{const{port1:t,port2:x}=new MessageChannel;t.onmessage=({data:f})=>{t.close(),x.close(),r(f)},t.onmessageerror=({data:f})=>{t.close(),x.close(),g(f)},x.postMessage(D)}),Z_=async(D,r)=>{const g=await Y_(r);return new D(g)},Q_=(D,r,g,t)=>{let x=Gh.get(D);x===void 0&&(x=new WeakMap,Gh.set(D,x));const f=Z_(g,t);return x.set(r,f),f},$_=(D,r,g,t,x,f,u,c,s,d,m,v,i)=>(n,a,o,h)=>{if(h.numberOfInputs===0&&h.numberOfOutputs===0)throw s();const p=Array.isArray(h.outputChannelCount)?h.outputChannelCount:Array.from(h.outputChannelCount);if(p.some(he=>he<1))throw s();if(p.length!==h.numberOfOutputs)throw r();if(h.channelCountMode!=="explicit")throw s();const y=h.channelCount*h.numberOfInputs,w=p.reduce((he,be)=>he+be,0),b=o.parameterDescriptors===void 0?0:o.parameterDescriptors.length;if(y+b>6||w>6)throw s();const S=new MessageChannel,k=[],E=[];for(let he=0;he<h.numberOfInputs;he+=1)k.push(u(n,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:1})),E.push(x(n,{channelCount:h.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:h.channelCount}));const T=[];if(o.parameterDescriptors!==void 0)for(const{defaultValue:he,maxValue:be,minValue:ke,name:xe}of o.parameterDescriptors){const we=f(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:h.parameterData[xe]!==void 0?h.parameterData[xe]:he===void 0?0:he});Object.defineProperties(we.offset,{defaultValue:{get:()=>he===void 0?0:he},maxValue:{get:()=>be===void 0?On:be},minValue:{get:()=>ke===void 0?os:ke}}),T.push(we)}const R=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+b)}),O=xg(a,n.sampleRate),M=c(n,O,y+b,Math.max(1,w)),L=x(n,{channelCount:Math.max(1,w),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,w)}),I=[];for(let he=0;he<h.numberOfOutputs;he+=1)I.push(t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:p[he]}));for(let he=0;he<h.numberOfInputs;he+=1){k[he].connect(E[he]);for(let be=0;be<h.channelCount;be+=1)E[he].connect(R,be,he*h.channelCount+be)}const B=new vg(o.parameterDescriptors===void 0?[]:o.parameterDescriptors.map(({name:he},be)=>{const ke=T[be];return ke.connect(R,0,y+be),ke.start(0),[he,ke.offset]}));R.connect(M);let V=h.channelInterpretation,G=null;const Y=h.numberOfOutputs===0?[M]:I,H={get bufferSize(){return O},get channelCount(){return h.channelCount},set channelCount(he){throw g()},get channelCountMode(){return h.channelCountMode},set channelCountMode(he){throw g()},get channelInterpretation(){return V},set channelInterpretation(he){for(const be of k)be.channelInterpretation=he;V=he},get context(){return M.context},get inputs(){return k},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get onprocessorerror(){return G},set onprocessorerror(he){typeof G=="function"&&H.removeEventListener("processorerror",G),G=typeof he=="function"?he:null,typeof G=="function"&&H.addEventListener("processorerror",G)},get parameters(){return B},get port(){return S.port2},addEventListener(...he){return M.addEventListener(he[0],he[1],he[2])},connect:D.bind(null,Y),disconnect:d.bind(null,Y),dispatchEvent(...he){return M.dispatchEvent(he[0])},removeEventListener(...he){return M.removeEventListener(he[0],he[1],he[2])}},W=new Map;S.port1.addEventListener=(he=>(...be)=>{if(be[0]==="message"){const ke=typeof be[1]=="function"?be[1]:typeof be[1]=="object"&&be[1]!==null&&typeof be[1].handleEvent=="function"?be[1].handleEvent:null;if(ke!==null){const xe=W.get(be[1]);xe!==void 0?be[1]=xe:(be[1]=we=>{m(n.currentTime,n.sampleRate,()=>ke(we))},W.set(ke,be[1]))}}return he.call(S.port1,be[0],be[1],be[2])})(S.port1.addEventListener),S.port1.removeEventListener=(he=>(...be)=>{if(be[0]==="message"){const ke=W.get(be[1]);ke!==void 0&&(W.delete(be[1]),be[1]=ke)}return he.call(S.port1,be[0],be[1],be[2])})(S.port1.removeEventListener);let K=null;Object.defineProperty(S.port1,"onmessage",{get:()=>K,set:he=>{typeof K=="function"&&S.port1.removeEventListener("message",K),K=typeof he=="function"?he:null,typeof K=="function"&&(S.port1.addEventListener("message",K),S.port1.start())}}),o.prototype.port=S.port1;let Q=null;Q_(n,H,o,h).then(he=>Q=he);const A=Dc(h.numberOfInputs,h.channelCount),z=Dc(h.numberOfOutputs,p),q=o.parameterDescriptors===void 0?[]:o.parameterDescriptors.reduce((he,{name:be})=>({...he,[be]:new Float32Array(128)}),{});let $=!0;const ie=()=>{h.numberOfOutputs>0&&M.disconnect(L);for(let he=0,be=0;he<h.numberOfOutputs;he+=1){const ke=I[he];for(let xe=0;xe<p[he];xe+=1)L.disconnect(ke,be+xe,xe);be+=p[he]}},re=new Map;M.onaudioprocess=({inputBuffer:he,outputBuffer:be})=>{if(Q!==null){const ke=v(H);for(let xe=0;xe<O;xe+=128){for(let we=0;we<h.numberOfInputs;we+=1)for(let Me=0;Me<h.channelCount;Me+=1)Rc(he,A[we],Me,Me,xe);o.parameterDescriptors!==void 0&&o.parameterDescriptors.forEach(({name:we},Me)=>{Rc(he,q,we,y+Me,xe)});for(let we=0;we<h.numberOfInputs;we+=1)for(let Me=0;Me<p[we];Me+=1)z[we][Me].byteLength===0&&(z[we][Me]=new Float32Array(128));try{const we=A.map((He,Ie)=>{if(ke[Ie].size>0)return re.set(Ie,O/128),He;const nt=re.get(Ie);return nt===void 0?[]:(He.every(ot=>ot.every(ut=>ut===0))&&(nt===1?re.delete(Ie):re.set(Ie,nt-1)),He)});$=m(n.currentTime+xe/n.sampleRate,n.sampleRate,()=>Q.process(we,z,q));for(let He=0,Ie=0;He<h.numberOfOutputs;He+=1){for(let dt=0;dt<p[He];dt+=1)_g(be,z[He],dt,Ie+dt,xe);Ie+=p[He]}}catch(we){$=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:we.colno,filename:we.filename,lineno:we.lineno,message:we.message}))}if(!$){for(let we=0;we<h.numberOfInputs;we+=1){k[we].disconnect(E[we]);for(let Me=0;Me<h.channelCount;Me+=1)E[xe].disconnect(R,Me,we*h.channelCount+Me)}if(o.parameterDescriptors!==void 0){const we=o.parameterDescriptors.length;for(let Me=0;Me<we;Me+=1){const He=T[Me];He.disconnect(R,0,y+Me),He.stop()}}R.disconnect(M),M.onaudioprocess=null,fe?ie():me();break}}}};let fe=!1;const ge=u(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),de=()=>M.connect(ge).connect(n.destination),me=()=>{M.disconnect(ge),ge.disconnect()},_e=()=>{if($){me(),h.numberOfOutputs>0&&M.connect(L);for(let he=0,be=0;he<h.numberOfOutputs;he+=1){const ke=I[he];for(let xe=0;xe<p[he];xe+=1)L.connect(ke,be+xe,xe);be+=p[he]}}fe=!0},ae=()=>{$&&(de(),ie()),fe=!1};return de(),i(H,_e,ae)},wg=(D,r)=>{const g=D.createBiquadFilter();return tn(g,r),Nr(g,r,"Q"),Nr(g,r,"detune"),Nr(g,r,"frequency"),Nr(g,r,"gain"),jr(g,r,"type"),g},K_=(D,r)=>(g,t)=>{const x=g.createChannelMerger(t.numberOfInputs);return D!==null&&D.name==="webkitAudioContext"&&r(g,x),tn(x,t),x},J_=D=>{const r=D.numberOfOutputs;Object.defineProperty(D,"channelCount",{get:()=>r,set:g=>{if(g!==r)throw cn()}}),Object.defineProperty(D,"channelCountMode",{get:()=>"explicit",set:g=>{if(g!=="explicit")throw cn()}}),Object.defineProperty(D,"channelInterpretation",{get:()=>"discrete",set:g=>{if(g!=="discrete")throw cn()}})},Zl=(D,r)=>{const g=D.createChannelSplitter(r.numberOfOutputs);return tn(g,r),J_(g),g},eb=(D,r,g,t,x)=>(f,u)=>{if(f.createConstantSource===void 0)return g(f,u);const c=f.createConstantSource();return tn(c,u),Nr(c,u,"offset"),r(t,()=>t(f))||of(c),r(x,()=>x(f))||af(c),D(f,c),c},qa=(D,r)=>(D.connect=r.connect.bind(r),D.disconnect=r.disconnect.bind(r),D),tb=(D,r,g,t)=>(x,{offset:f,...u})=>{const c=x.createBuffer(1,2,44100),s=r(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=g(x,{...u,gain:f}),m=c.getChannelData(0);m[0]=1,m[1]=1,s.buffer=c,s.loop=!0;const v={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(a){d.channelCount=a},get channelCountMode(){return d.channelCountMode},set channelCountMode(a){d.channelCountMode=a},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(a){d.channelInterpretation=a},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return s.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return s.onended},set onended(a){s.onended=a},addEventListener(...a){return s.addEventListener(a[0],a[1],a[2])},dispatchEvent(...a){return s.dispatchEvent(a[0])},removeEventListener(...a){return s.removeEventListener(a[0],a[1],a[2])},start(a=0){s.start.call(s,a)},stop(a=0){s.stop.call(s,a)}},i=()=>s.connect(d),n=()=>s.disconnect(d);return D(x,s),t(qa(v,d),i,n)},rb=(D,r)=>(g,t)=>{const x=g.createConvolver();if(tn(x,t),t.disableNormalization===x.normalize&&(x.normalize=!t.disableNormalization),jr(x,t,"buffer"),t.channelCount>2||(r(x,"channelCount",f=>()=>f.call(x),f=>u=>{if(u>2)throw D();return f.call(x,u)}),t.channelCountMode==="max"))throw D();return r(x,"channelCountMode",f=>()=>f.call(x),f=>u=>{if(u==="max")throw D();return f.call(x,u)}),x},Sg=(D,r)=>{const g=D.createDelay(r.maxDelayTime);return tn(g,r),Nr(g,r,"delayTime"),g},nb=D=>(r,g)=>{const t=r.createDynamicsCompressor();if(tn(t,g),g.channelCount>2||g.channelCountMode==="max")throw D();return Nr(t,g,"attack"),Nr(t,g,"knee"),Nr(t,g,"ratio"),Nr(t,g,"release"),Nr(t,g,"threshold"),t},Yn=(D,r)=>{const g=D.createGain();return tn(g,r),Nr(g,r,"gain"),g},sb=D=>(r,g,t)=>{if(r.createIIRFilter===void 0)return D(r,g,t);const x=r.createIIRFilter(t.feedforward,t.feedback);return tn(x,t),x};function ib(D,r){const g=r[0]*r[0]+r[1]*r[1];return[(D[0]*r[0]+D[1]*r[1])/g,(D[1]*r[0]-D[0]*r[1])/g]}function ob(D,r){return[D[0]*r[0]-D[1]*r[1],D[0]*r[1]+D[1]*r[0]]}function Vy(D,r){let g=[0,0];for(let t=D.length-1;t>=0;t-=1)g=ob(g,r),g[0]+=D[t];return g}const ab=(D,r,g,t)=>(x,f,{channelCount:u,channelCountMode:c,channelInterpretation:s,feedback:d,feedforward:m})=>{const v=xg(f,x.sampleRate),i=d instanceof Float64Array?d:new Float64Array(d),n=m instanceof Float64Array?m:new Float64Array(m),a=i.length,o=n.length,h=Math.min(a,o);if(a===0||a>20)throw t();if(i[0]===0)throw r();if(o===0||o>20)throw t();if(n[0]===0)throw r();if(i[0]!==1){for(let T=0;T<o;T+=1)n[T]/=i[0];for(let T=1;T<a;T+=1)i[T]/=i[0]}const p=g(x,v,u,u);p.channelCount=u,p.channelCountMode=c,p.channelInterpretation=s;const y=32,w=[],b=[],S=[];for(let T=0;T<u;T+=1){w.push(0);const R=new Float32Array(y),O=new Float32Array(y);R.fill(0),O.fill(0),b.push(R),S.push(O)}p.onaudioprocess=T=>{const R=T.inputBuffer,O=T.outputBuffer,M=R.numberOfChannels;for(let L=0;L<M;L+=1){const I=R.getChannelData(L),B=O.getChannelData(L);w[L]=bg(i,a,n,o,h,b[L],S[L],w[L],y,I,B)}};const k=x.sampleRate/2;return qa({get bufferSize(){return v},get channelCount(){return p.channelCount},set channelCount(T){p.channelCount=T},get channelCountMode(){return p.channelCountMode},set channelCountMode(T){p.channelCountMode=T},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(T){p.channelInterpretation=T},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},addEventListener(...T){return p.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return p.dispatchEvent(T[0])},getFrequencyResponse(T,R,O){if(T.length!==R.length||R.length!==O.length)throw D();const M=T.length;for(let L=0;L<M;L+=1){const I=-Math.PI*(T[L]/k),B=[Math.cos(I),Math.sin(I)],V=Vy(n,B),G=Vy(i,B),Y=ib(V,G);R[L]=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),O[L]=Math.atan2(Y[1],Y[0])}},removeEventListener(...T){return p.removeEventListener(T[0],T[1],T[2])}},p)},lb=(D,r)=>D.createMediaElementSource(r.mediaElement),ub=(D,r)=>{const g=D.createMediaStreamDestination();return tn(g,r),g.numberOfOutputs===1&&Object.defineProperty(g,"numberOfOutputs",{get:()=>0}),g},cb=(D,{mediaStream:r})=>{const g=r.getAudioTracks();g.sort((f,u)=>f.id<u.id?-1:f.id>u.id?1:0);const t=g.slice(0,1),x=D.createMediaStreamSource(new MediaStream(t));return Object.defineProperty(x,"mediaStream",{value:r}),x},db=(D,r)=>(g,{mediaStreamTrack:t})=>{if(typeof g.createMediaStreamTrackSource=="function")return g.createMediaStreamTrackSource(t);const x=new MediaStream([t]),f=g.createMediaStreamSource(x);if(t.kind!=="audio")throw D();if(r(g))throw new TypeError;return f},hb=D=>D===null?null:D.hasOwnProperty("OfflineAudioContext")?D.OfflineAudioContext:D.hasOwnProperty("webkitOfflineAudioContext")?D.webkitOfflineAudioContext:null,fb=(D,r,g,t,x,f)=>(u,c)=>{const s=u.createOscillator();return tn(s,c),Nr(s,c,"detune"),Nr(s,c,"frequency"),c.periodicWave!==void 0?s.setPeriodicWave(c.periodicWave):jr(s,c,"type"),r(g,()=>g(u))||of(s),r(t,()=>t(u))||f(s,u),r(x,()=>x(u))||af(s),D(u,s),s},pb=D=>(r,g)=>{const t=r.createPanner();return t.orientationX===void 0?D(r,g):(tn(t,g),Nr(t,g,"orientationX"),Nr(t,g,"orientationY"),Nr(t,g,"orientationZ"),Nr(t,g,"positionX"),Nr(t,g,"positionY"),Nr(t,g,"positionZ"),jr(t,g,"coneInnerAngle"),jr(t,g,"coneOuterAngle"),jr(t,g,"coneOuterGain"),jr(t,g,"distanceModel"),jr(t,g,"maxDistance"),jr(t,g,"panningModel"),jr(t,g,"refDistance"),jr(t,g,"rolloffFactor"),t)},mb=(D,r,g,t,x,f,u,c,s,d)=>(m,{coneInnerAngle:v,coneOuterAngle:i,coneOuterGain:n,distanceModel:a,maxDistance:o,orientationX:h,orientationY:p,orientationZ:y,panningModel:w,positionX:b,positionY:S,positionZ:k,refDistance:E,rolloffFactor:T,...R})=>{const O=m.createPanner();if(R.channelCount>2||R.channelCountMode==="max")throw u();tn(O,R);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},L=g(m,{...M,channelInterpretation:"speakers",numberOfInputs:6}),I=t(m,{...R,gain:1}),B=t(m,{...M,gain:1}),V=t(m,{...M,gain:0}),G=t(m,{...M,gain:0}),Y=t(m,{...M,gain:0}),H=t(m,{...M,gain:0}),W=t(m,{...M,gain:0}),K=x(m,256,6,1),Q=f(m,{...M,curve:new Float32Array([1,1]),oversample:"none"});let se=[h,p,y],A=[b,S,k];const z=new Float32Array(1);K.onaudioprocess=({inputBuffer:re})=>{const fe=[s(re,z,0),s(re,z,1),s(re,z,2)];fe.some((de,me)=>de!==se[me])&&(O.setOrientation(...fe),se=fe);const ge=[s(re,z,3),s(re,z,4),s(re,z,5)];ge.some((de,me)=>de!==A[me])&&(O.setPosition(...ge),A=ge)},Object.defineProperty(V.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(W.gain,"defaultValue",{get:()=>0});const q={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(re){if(re>2)throw u();I.channelCount=re,O.channelCount=re},get channelCountMode(){return O.channelCountMode},set channelCountMode(re){if(re==="max")throw u();I.channelCountMode=re,O.channelCountMode=re},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(re){I.channelInterpretation=re,O.channelInterpretation=re},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(re){O.coneInnerAngle=re},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(re){O.coneOuterAngle=re},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(re){if(re<0||re>1)throw r();O.coneOuterGain=re},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(re){O.distanceModel=re},get inputs(){return[I]},get maxDistance(){return O.maxDistance},set maxDistance(re){if(re<0)throw new RangeError;O.maxDistance=re},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return B.gain},get orientationY(){return V.gain},get orientationZ(){return G.gain},get panningModel(){return O.panningModel},set panningModel(re){O.panningModel=re},get positionX(){return Y.gain},get positionY(){return H.gain},get positionZ(){return W.gain},get refDistance(){return O.refDistance},set refDistance(re){if(re<0)throw new RangeError;O.refDistance=re},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(re){if(re<0)throw new RangeError;O.rolloffFactor=re},addEventListener(...re){return I.addEventListener(re[0],re[1],re[2])},dispatchEvent(...re){return I.dispatchEvent(re[0])},removeEventListener(...re){return I.removeEventListener(re[0],re[1],re[2])}};v!==q.coneInnerAngle&&(q.coneInnerAngle=v),i!==q.coneOuterAngle&&(q.coneOuterAngle=i),n!==q.coneOuterGain&&(q.coneOuterGain=n),a!==q.distanceModel&&(q.distanceModel=a),o!==q.maxDistance&&(q.maxDistance=o),h!==q.orientationX.value&&(q.orientationX.value=h),p!==q.orientationY.value&&(q.orientationY.value=p),y!==q.orientationZ.value&&(q.orientationZ.value=y),w!==q.panningModel&&(q.panningModel=w),b!==q.positionX.value&&(q.positionX.value=b),S!==q.positionY.value&&(q.positionY.value=S),k!==q.positionZ.value&&(q.positionZ.value=k),E!==q.refDistance&&(q.refDistance=E),T!==q.rolloffFactor&&(q.rolloffFactor=T),(se[0]!==1||se[1]!==0||se[2]!==0)&&O.setOrientation(...se),(A[0]!==0||A[1]!==0||A[2]!==0)&&O.setPosition(...A);const $=()=>{I.connect(O),D(I,Q,0,0),Q.connect(B).connect(L,0,0),Q.connect(V).connect(L,0,1),Q.connect(G).connect(L,0,2),Q.connect(Y).connect(L,0,3),Q.connect(H).connect(L,0,4),Q.connect(W).connect(L,0,5),L.connect(K).connect(m.destination)},ie=()=>{I.disconnect(O),c(I,Q,0,0),Q.disconnect(B),B.disconnect(L),Q.disconnect(V),V.disconnect(L),Q.disconnect(G),G.disconnect(L),Q.disconnect(Y),Y.disconnect(L),Q.disconnect(H),H.disconnect(L),Q.disconnect(W),W.disconnect(L),L.disconnect(K),K.disconnect(m.destination)};return d(qa(q,O),$,ie)},yb=D=>(r,{disableNormalization:g,imag:t,real:x})=>{const f=t instanceof Float32Array?t:new Float32Array(t),u=x instanceof Float32Array?x:new Float32Array(x),c=r.createPeriodicWave(u,f,{disableNormalization:g});if(Array.from(t).length<2)throw D();return c},Ql=(D,r,g,t)=>D.createScriptProcessor(r,g,t),gb=(D,r)=>(g,t)=>{const x=t.channelCountMode;if(x==="clamped-max")throw r();if(g.createStereoPanner===void 0)return D(g,t);const f=g.createStereoPanner();return tn(f,t),Nr(f,t,"pan"),Object.defineProperty(f,"channelCountMode",{get:()=>x,set:u=>{if(u!==x)throw r()}}),f},vb=(D,r,g,t,x,f)=>{const c=new Float32Array([1,1]),s=Math.PI/2,d={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},m={...d,oversample:"none"},v=(a,o,h,p)=>{const y=new Float32Array(16385),w=new Float32Array(16385);for(let R=0;R<16385;R+=1){const O=R/16384*s;y[R]=Math.cos(O),w[R]=Math.sin(O)}const b=g(a,{...d,gain:0}),S=t(a,{...m,curve:y}),k=t(a,{...m,curve:c}),E=g(a,{...d,gain:0}),T=t(a,{...m,curve:w});return{connectGraph(){o.connect(b),o.connect(k.inputs===void 0?k:k.inputs[0]),o.connect(E),k.connect(h),h.connect(S.inputs===void 0?S:S.inputs[0]),h.connect(T.inputs===void 0?T:T.inputs[0]),S.connect(b.gain),T.connect(E.gain),b.connect(p,0,0),E.connect(p,0,1)},disconnectGraph(){o.disconnect(b),o.disconnect(k.inputs===void 0?k:k.inputs[0]),o.disconnect(E),k.disconnect(h),h.disconnect(S.inputs===void 0?S:S.inputs[0]),h.disconnect(T.inputs===void 0?T:T.inputs[0]),S.disconnect(b.gain),T.disconnect(E.gain),b.disconnect(p,0,0),E.disconnect(p,0,1)}}},i=(a,o,h,p)=>{const y=new Float32Array(16385),w=new Float32Array(16385),b=new Float32Array(16385),S=new Float32Array(16385),k=Math.floor(16385/2);for(let Y=0;Y<16385;Y+=1)if(Y>k){const H=(Y-k)/(16384-k)*s;y[Y]=Math.cos(H),w[Y]=Math.sin(H),b[Y]=0,S[Y]=1}else{const H=Y/(16384-k)*s;y[Y]=1,w[Y]=0,b[Y]=Math.cos(H),S[Y]=Math.sin(H)}const E=r(a,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=g(a,{...d,gain:0}),R=t(a,{...m,curve:y}),O=g(a,{...d,gain:0}),M=t(a,{...m,curve:w}),L=t(a,{...m,curve:c}),I=g(a,{...d,gain:0}),B=t(a,{...m,curve:b}),V=g(a,{...d,gain:0}),G=t(a,{...m,curve:S});return{connectGraph(){o.connect(E),o.connect(L.inputs===void 0?L:L.inputs[0]),E.connect(T,0),E.connect(O,0),E.connect(I,1),E.connect(V,1),L.connect(h),h.connect(R.inputs===void 0?R:R.inputs[0]),h.connect(M.inputs===void 0?M:M.inputs[0]),h.connect(B.inputs===void 0?B:B.inputs[0]),h.connect(G.inputs===void 0?G:G.inputs[0]),R.connect(T.gain),M.connect(O.gain),B.connect(I.gain),G.connect(V.gain),T.connect(p,0,0),I.connect(p,0,0),O.connect(p,0,1),V.connect(p,0,1)},disconnectGraph(){o.disconnect(E),o.disconnect(L.inputs===void 0?L:L.inputs[0]),E.disconnect(T,0),E.disconnect(O,0),E.disconnect(I,1),E.disconnect(V,1),L.disconnect(h),h.disconnect(R.inputs===void 0?R:R.inputs[0]),h.disconnect(M.inputs===void 0?M:M.inputs[0]),h.disconnect(B.inputs===void 0?B:B.inputs[0]),h.disconnect(G.inputs===void 0?G:G.inputs[0]),R.disconnect(T.gain),M.disconnect(O.gain),B.disconnect(I.gain),G.disconnect(V.gain),T.disconnect(p,0,0),I.disconnect(p,0,0),O.disconnect(p,0,1),V.disconnect(p,0,1)}}},n=(a,o,h,p,y)=>{if(o===1)return v(a,h,p,y);if(o===2)return i(a,h,p,y);throw x()};return(a,{channelCount:o,channelCountMode:h,pan:p,...y})=>{if(h==="max")throw x();const w=D(a,{...y,channelCount:1,channelCountMode:h,numberOfInputs:2}),b=g(a,{...y,channelCount:o,channelCountMode:h,gain:1}),S=g(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:p});let{connectGraph:k,disconnectGraph:E}=n(a,o,b,S,w);Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(S.gain,"maxValue",{get:()=>1}),Object.defineProperty(S.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(L){b.channelCount!==L&&(R&&E(),{connectGraph:k,disconnectGraph:E}=n(a,L,b,S,w),R&&k()),b.channelCount=L},get channelCountMode(){return b.channelCountMode},set channelCountMode(L){if(L==="clamped-max"||L==="max")throw x();b.channelCountMode=L},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(L){b.channelInterpretation=L},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get pan(){return S.gain},addEventListener(...L){return b.addEventListener(L[0],L[1],L[2])},dispatchEvent(...L){return b.dispatchEvent(L[0])},removeEventListener(...L){return b.removeEventListener(L[0],L[1],L[2])}};let R=!1;const O=()=>{k(),R=!0},M=()=>{E(),R=!1};return f(qa(T,w),O,M)}},_b=(D,r,g,t,x,f,u)=>(c,s)=>{const d=c.createWaveShaper();if(f!==null&&f.name==="webkitAudioContext"&&c.createGain().gain.automationRate===void 0)return g(c,s);tn(d,s);const m=s.curve===null||s.curve instanceof Float32Array?s.curve:new Float32Array(s.curve);if(m!==null&&m.length<2)throw r();jr(d,{curve:m},"curve"),jr(d,s,"oversample");let v=null,i=!1;return u(d,"curve",o=>()=>o.call(d),o=>h=>(o.call(d,h),i&&(t(h)&&v===null?v=D(c,d):!t(h)&&v!==null&&(v(),v=null)),h)),x(d,()=>{i=!0,t(d.curve)&&(v=D(c,d))},()=>{i=!1,v!==null&&(v(),v=null)})},bb=(D,r,g,t,x)=>(f,{curve:u,oversample:c,...s})=>{const d=f.createWaveShaper(),m=f.createWaveShaper();tn(d,s),tn(m,s);const v=g(f,{...s,gain:1}),i=g(f,{...s,gain:-1}),n=g(f,{...s,gain:1}),a=g(f,{...s,gain:-1});let o=null,h=!1,p=null;const y={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(S){v.channelCount=S,i.channelCount=S,d.channelCount=S,n.channelCount=S,m.channelCount=S,a.channelCount=S},get channelCountMode(){return d.channelCountMode},set channelCountMode(S){v.channelCountMode=S,i.channelCountMode=S,d.channelCountMode=S,n.channelCountMode=S,m.channelCountMode=S,a.channelCountMode=S},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(S){v.channelInterpretation=S,i.channelInterpretation=S,d.channelInterpretation=S,n.channelInterpretation=S,m.channelInterpretation=S,a.channelInterpretation=S},get context(){return d.context},get curve(){return p},set curve(S){if(S!==null&&S.length<2)throw r();if(S===null)d.curve=S,m.curve=S;else{const k=S.length,E=new Float32Array(k+2-k%2),T=new Float32Array(k+2-k%2);E[0]=S[0],T[0]=-S[k-1];const R=Math.ceil((k+1)/2),O=(k+1)/2-1;for(let M=1;M<R;M+=1){const L=M/R*O,I=Math.floor(L),B=Math.ceil(L);E[M]=I===B?S[I]:(1-(L-I))*S[I]+(1-(B-L))*S[B],T[M]=I===B?-S[k-1-I]:-((1-(L-I))*S[k-1-I])-(1-(B-L))*S[k-1-B]}E[R]=k%2===1?S[R-1]:(S[R-2]+S[R-1])/2,d.curve=E,m.curve=T}p=S,h&&(t(p)&&o===null?o=D(f,v):o!==null&&(o(),o=null))},get inputs(){return[v]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(S){d.oversample=S,m.oversample=S},addEventListener(...S){return v.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return v.dispatchEvent(S[0])},removeEventListener(...S){return v.removeEventListener(S[0],S[1],S[2])}};u!==null&&(y.curve=u instanceof Float32Array?u:new Float32Array(u)),c!==y.oversample&&(y.oversample=c);const w=()=>{v.connect(d).connect(n),v.connect(i).connect(m).connect(a).connect(n),h=!0,t(p)&&(o=D(f,v))},b=()=>{v.disconnect(d),d.disconnect(n),v.disconnect(i),i.disconnect(m),m.disconnect(a),a.disconnect(n),h=!1,o!==null&&(o(),o=null)};return x(qa(y,n),w,b)},Ln=()=>new DOMException("","NotSupportedError"),xb={numberOfChannels:1},wb=(D,r,g,t,x)=>class extends D{constructor(u,c,s){let d;if(typeof u=="number"&&c!==void 0&&s!==void 0)d={length:c,numberOfChannels:u,sampleRate:s};else if(typeof u=="object")d=u;else throw new Error("The given parameters are not valid.");const{length:m,numberOfChannels:v,sampleRate:i}={...xb,...d},n=t(v,m,i);r(Vl,()=>Vl(n))||n.addEventListener("statechange",(()=>{let a=0;const o=h=>{this._state==="running"&&(a>0?(n.removeEventListener("statechange",o),h.stopImmediatePropagation(),this._waitForThePromiseToSettle(h)):a+=1)};return o})()),super(n,v),this._length=m,this._nativeOfflineAudioContext=n,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(g()):(this._state="running",x(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,pg(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},Sb={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},jb=(D,r,g,t,x,f,u)=>class extends D{constructor(s,d){const m=x(s),v={...Sb,...d},i=g(m,v),n=f(m),a=n?t():null,o=s.sampleRate/2;super(s,!1,i,a),this._detune=r(this,n,i.detune,153600,-153600),this._frequency=r(this,n,i.frequency,o,-o),this._nativeOscillatorNode=i,this._onended=null,this._oscillatorNodeRenderer=a,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(s){const d=typeof s=="function"?u(this,s):null;this._nativeOscillatorNode.onended=d;const m=this._nativeOscillatorNode.onended;this._onended=m!==null&&m===d?s:m}get type(){return this._nativeOscillatorNode.type}set type(s){this._nativeOscillatorNode.type=s,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(s){this._nativeOscillatorNode.setPeriodicWave(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=s)}start(s=0){if(this._nativeOscillatorNode.start(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=s),this.context.state!=="closed"){Da(this);const d=()=>{this._nativeOscillatorNode.removeEventListener("ended",d),yi(this)&&Hl(this)};this._nativeOscillatorNode.addEventListener("ended",d)}}stop(s=0){this._nativeOscillatorNode.stop(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=s)}},Tb=(D,r,g,t,x)=>()=>{const f=new WeakMap;let u=null,c=null,s=null;const d=async(m,v)=>{let i=g(m);const n=kn(i,v);if(!n){const a={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,detune:i.detune.value,frequency:i.frequency.value,periodicWave:u===null?void 0:u,type:i.type};i=r(v,a),c!==null&&i.start(c),s!==null&&i.stop(s)}return f.set(v,i),n?(await D(v,m.detune,i.detune),await D(v,m.frequency,i.frequency)):(await t(v,m.detune,i.detune),await t(v,m.frequency,i.frequency)),await x(m,v,i),i};return{set periodicWave(m){u=m},set start(m){c=m},set stop(m){s=m},render(m,v){const i=f.get(v);return i!==void 0?Promise.resolve(i):d(m,v)}}},kb={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Eb=(D,r,g,t,x,f,u)=>class extends D{constructor(s,d){const m=x(s),v={...kb,...d},i=g(m,v),n=f(m),a=n?t():null;super(s,!1,i,a),this._nativePannerNode=i,this._orientationX=r(this,n,i.orientationX,On,os),this._orientationY=r(this,n,i.orientationY,On,os),this._orientationZ=r(this,n,i.orientationZ,On,os),this._positionX=r(this,n,i.positionX,On,os),this._positionY=r(this,n,i.positionY,On,os),this._positionZ=r(this,n,i.positionZ,On,os),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(s){this._nativePannerNode.coneInnerAngle=s}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(s){this._nativePannerNode.coneOuterAngle=s}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(s){this._nativePannerNode.coneOuterGain=s}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(s){this._nativePannerNode.distanceModel=s}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(s){this._nativePannerNode.maxDistance=s}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(s){this._nativePannerNode.panningModel=s}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(s){this._nativePannerNode.refDistance=s}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(s){this._nativePannerNode.rolloffFactor=s}},Cb=(D,r,g,t,x,f,u,c,s,d)=>()=>{const m=new WeakMap;let v=null;const i=async(n,a)=>{let o=null,h=f(n);const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation},y={...p,coneInnerAngle:h.coneInnerAngle,coneOuterAngle:h.coneOuterAngle,coneOuterGain:h.coneOuterGain,distanceModel:h.distanceModel,maxDistance:h.maxDistance,panningModel:h.panningModel,refDistance:h.refDistance,rolloffFactor:h.rolloffFactor},w=kn(h,a);if("bufferSize"in h)o=t(a,{...p,gain:1});else if(!w){const b={...y,orientationX:h.orientationX.value,orientationY:h.orientationY.value,orientationZ:h.orientationZ.value,positionX:h.positionX.value,positionY:h.positionY.value,positionZ:h.positionZ.value};h=x(a,b)}if(m.set(a,o===null?h:o),o!==null){if(v===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new u(6,n.context.length,a.sampleRate),L=r(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});L.connect(M.destination),v=(async()=>{const I=await Promise.all([n.orientationX,n.orientationY,n.orientationZ,n.positionX,n.positionY,n.positionZ].map(async(B,V)=>{const G=g(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:V===0?1:0});return await c(M,B,G.offset),G}));for(let B=0;B<6;B+=1)I[B].connect(L,0,B),I[B].start(0);return d(M)})()}const b=await v,S=t(a,{...p,gain:1});await s(n,a,S);const k=[];for(let M=0;M<b.numberOfChannels;M+=1)k.push(b.getChannelData(M));let E=[k[0][0],k[1][0],k[2][0]],T=[k[3][0],k[4][0],k[5][0]],R=t(a,{...p,gain:1}),O=x(a,{...y,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:T[0],positionY:T[1],positionZ:T[2]});S.connect(R).connect(O.inputs[0]),O.connect(o);for(let M=128;M<b.length;M+=128){const L=[k[0][M],k[1][M],k[2][M]],I=[k[3][M],k[4][M],k[5][M]];if(L.some((B,V)=>B!==E[V])||I.some((B,V)=>B!==T[V])){E=L,T=I;const B=M/a.sampleRate;R.gain.setValueAtTime(0,B),R=t(a,{...p,gain:0}),O=x(a,{...y,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),R.gain.setValueAtTime(1,B),S.connect(R).connect(O.inputs[0]),O.connect(o)}}return o}return w?(await D(a,n.orientationX,h.orientationX),await D(a,n.orientationY,h.orientationY),await D(a,n.orientationZ,h.orientationZ),await D(a,n.positionX,h.positionX),await D(a,n.positionY,h.positionY),await D(a,n.positionZ,h.positionZ)):(await c(a,n.orientationX,h.orientationX),await c(a,n.orientationY,h.orientationY),await c(a,n.orientationZ,h.orientationZ),await c(a,n.positionX,h.positionX),await c(a,n.positionY,h.positionY),await c(a,n.positionZ,h.positionZ)),Ga(h)?await s(n,a,h.inputs[0]):await s(n,a,h),h};return{render(n,a){const o=m.get(a);return o!==void 0?Promise.resolve(o):i(n,a)}}},Mb={disableNormalization:!1},Ob=(D,r,g,t)=>class jg{constructor(f,u){const c=r(f),s=t({...Mb,...u}),d=D(c,s);return g.add(d),d}static[Symbol.hasInstance](f){return f!==null&&typeof f=="object"&&Object.getPrototypeOf(f)===jg.prototype||g.has(f)}},Ab=(D,r)=>(g,t,x)=>(D(t).replay(x),r(t,g,x)),Pb=(D,r,g)=>async(t,x,f)=>{const u=D(t);await Promise.all(u.activeInputs.map((c,s)=>Array.from(c).map(async([d,m])=>{const i=await r(d).render(d,x),n=t.context.destination;!g(d)&&(t!==n||!g(t))&&i.connect(f,m,s)})).reduce((c,s)=>[...c,...s],[]))},Rb=(D,r,g)=>async(t,x,f)=>{const u=r(t);await Promise.all(Array.from(u.activeInputs).map(async([c,s])=>{const m=await D(c).render(c,x);g(c)||m.connect(f,s)}))},Db=(D,r,g,t)=>x=>D(Vl,()=>Vl(x))?Promise.resolve(D(t,t)).then(f=>{if(!f){const u=g(x,512,0,1);x.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>x.currentTime,u.connect(x.destination)}return x.startRendering()}):new Promise(f=>{const u=r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});x.oncomplete=c=>{u.disconnect(),f(c.renderedBuffer)},u.connect(x.destination),x.startRendering()}),Ib=D=>(r,g)=>{D.set(r,g)},Lb=D=>(r,g)=>D.set(r,g),Nb=(D,r,g,t,x,f,u,c)=>(s,d)=>g(s).render(s,d).then(()=>Promise.all(Array.from(t(d)).map(m=>g(m).render(m,d)))).then(()=>x(d)).then(m=>(typeof m.copyFromChannel!="function"?(u(m),rf(m)):r(f,()=>f(m))||c(m),D.add(m),m)),Fb={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Ub=(D,r,g,t,x,f)=>class extends D{constructor(c,s){const d=x(c),m={...Fb,...s},v=g(d,m),i=f(d),n=i?t():null;super(c,!1,v,n),this._pan=r(this,i,v.pan)}get pan(){return this._pan}},Bb=(D,r,g,t,x)=>()=>{const f=new WeakMap,u=async(c,s)=>{let d=g(c);const m=kn(d,s);if(!m){const v={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,pan:d.pan.value};d=r(s,v)}return f.set(s,d),m?await D(s,c.pan,d.pan):await t(s,c.pan,d.pan),Ga(d)?await x(c,s,d.inputs[0]):await x(c,s,d),d};return{render(c,s){const d=f.get(s);return d!==void 0?Promise.resolve(d):u(c,s)}}},Vb=D=>()=>{if(D===null)return!1;try{new D({length:1,sampleRate:44100})}catch{return!1}return!0},zb=D=>()=>{if(D===null)return!1;const g=new D(1,1,44100).createBuffer(1,1,44100);if(g.copyToChannel===void 0)return!0;const t=new Float32Array(2);try{g.copyFromChannel(t,0,0)}catch{return!1}return!0},Gb=D=>()=>{if(D===null)return!1;if(D.prototype!==void 0&&D.prototype.close!==void 0)return!0;const r=new D,g=r.close!==void 0;try{r.close()}catch{}return g},qb=D=>()=>{if(D===null)return Promise.resolve(!1);const r=new D(1,1,44100);return new Promise(g=>{let t=!0;const x=u=>{t&&(t=!1,r.startRendering(),g(u instanceof TypeError))};let f;try{f=r.decodeAudioData(null,()=>{},x)}catch(u){x(u)}f!==void 0&&f.catch(x)})},Wb=D=>()=>{if(D===null)return!1;let r;try{r=new D({latencyHint:"balanced"})}catch{return!1}return r.close(),!0},Hb=D=>()=>{if(D===null)return!1;const g=new D(1,1,44100).createGain(),t=g.connect(g)===g;return g.disconnect(g),t},Xb=(D,r)=>async()=>{if(D===null)return!0;if(r===null)return!1;const g=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),t=new MessageChannel,x=new r(1,128,44100),f=URL.createObjectURL(g);let u=!1;try{await x.audioWorklet.addModule(f);const c=new D(x,"a",{numberOfOutputs:0}),s=x.createOscillator();await new Promise(d=>{c.port.onmessage=()=>d(),c.port.postMessage(t.port2,[t.port2])}),c.port.onmessage=()=>u=!0,s.connect(c),s.start(0),await x.startRendering(),u=await new Promise(d=>{t.port1.onmessage=({data:m})=>d(m===1),t.port1.postMessage(0)})}catch{}finally{t.port1.close(),URL.revokeObjectURL(f)}return u},Yb=(D,r)=>async()=>{if(D===null)return!0;if(r===null)return!1;const g=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),t=new r(1,128,44100),x=URL.createObjectURL(g);let f=!1,u=!1;try{await t.audioWorklet.addModule(x);const c=new D(t,"a",{numberOfOutputs:0}),s=t.createOscillator();c.port.onmessage=()=>f=!0,c.onprocessorerror=()=>u=!0,s.connect(c),s.start(0),await t.startRendering(),await new Promise(d=>setTimeout(d))}catch{}finally{URL.revokeObjectURL(x)}return f&&!u},Zb=D=>()=>{if(D===null)return!1;const g=new D(1,1,44100).createChannelMerger();if(g.channelCountMode==="max")return!0;try{g.channelCount=2}catch{return!0}return!1},Qb=D=>()=>{if(D===null)return!1;const r=new D(1,1,44100);return r.createConstantSource===void 0?!0:r.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},$b=D=>()=>{if(D===null)return!1;const r=new D(1,1,44100),g=r.createConvolver();g.buffer=r.createBuffer(1,1,r.sampleRate);try{g.buffer=r.createBuffer(1,1,r.sampleRate)}catch{return!1}return!0},Kb=D=>()=>{if(D===null)return!1;const g=new D(1,1,44100).createConvolver();try{g.channelCount=1}catch{return!1}return!0},Jb=D=>()=>D!==null&&D.hasOwnProperty("isSecureContext"),ex=D=>()=>{if(D===null)return!1;const r=new D;try{return r.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{r.close()}},tx=(D,r)=>()=>{if(r===null)return Promise.resolve(!1);const g=new r(1,1,44100),t=D(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(x=>{g.oncomplete=()=>{t.disconnect(),x(g.currentTime!==0)},g.startRendering()})},rx=D=>()=>{if(D===null)return Promise.resolve(!1);const r=new D(1,1,44100);if(r.createStereoPanner===void 0||r.createConstantSource===void 0)return Promise.resolve(!0);const g=r.createConstantSource(),t=r.createStereoPanner();return g.channelCount=1,g.offset.value=1,t.channelCount=1,g.start(),g.connect(t).connect(r.destination),r.startRendering().then(x=>x.getChannelData(0)[0]!==1)},nx=()=>new DOMException("","UnknownError"),sx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ix=(D,r,g,t,x,f,u)=>class extends D{constructor(s,d){const m=x(s),v={...sx,...d},i=g(m,v),a=f(m)?t():null;super(s,!0,i,a),this._isCurveNullified=!1,this._nativeWaveShaperNode=i,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(s){if(s===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(s.length<2)throw r();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=s}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(s){this._nativeWaveShaperNode.oversample=s}},ox=(D,r,g)=>()=>{const t=new WeakMap,x=async(f,u)=>{let c=r(f);if(!kn(c,u)){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample};c=D(u,d)}return t.set(u,c),Ga(c)?await g(f,u,c.inputs[0]):await g(f,u,c),c};return{render(f,u){const c=t.get(u);return c!==void 0?Promise.resolve(c):x(f,u)}}},ax=()=>typeof window>"u"?null:window,lx=(D,r)=>g=>{g.copyFromChannel=(t,x,f=0)=>{const u=D(f),c=D(x);if(c>=g.numberOfChannels)throw r();const s=g.length,d=g.getChannelData(c),m=t.length;for(let v=u<0?-u:0;v+u<s&&v<m;v+=1)t[v]=d[v+u]},g.copyToChannel=(t,x,f=0)=>{const u=D(f),c=D(x);if(c>=g.numberOfChannels)throw r();const s=g.length,d=g.getChannelData(c),m=t.length;for(let v=u<0?-u:0;v+u<s&&v<m;v+=1)d[v+u]=t[v]}},ux=D=>r=>{r.copyFromChannel=(g=>(t,x,f=0)=>{const u=D(f),c=D(x);if(u<r.length)return g.call(r,t,c,u)})(r.copyFromChannel),r.copyToChannel=(g=>(t,x,f=0)=>{const u=D(f),c=D(x);if(u<r.length)return g.call(r,t,c,u)})(r.copyToChannel)},cx=D=>(r,g)=>{const t=g.createBuffer(1,1,44100);r.buffer===null&&(r.buffer=t),D(r,"buffer",x=>()=>{const f=x.call(r);return f===t?null:f},x=>f=>x.call(r,f===null?t:f))},dx=(D,r)=>(g,t)=>{t.channelCount=1,t.channelCountMode="explicit",Object.defineProperty(t,"channelCount",{get:()=>1,set:()=>{throw D()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:()=>{throw D()}});const x=g.createBufferSource();r(t,()=>{const c=t.numberOfInputs;for(let s=0;s<c;s+=1)x.connect(t,0,s)},()=>x.disconnect(t))},Tg=(D,r,g)=>D.copyFromChannel===void 0?D.getChannelData(g)[0]:(D.copyFromChannel(r,g),r[0]),kg=D=>{if(D===null)return!1;const r=D.length;return r%2!==0?D[Math.floor(r/2)]!==0:D[r/2-1]+D[r/2]!==0},$l=(D,r,g,t)=>{let x=D;for(;!x.hasOwnProperty(r);)x=Object.getPrototypeOf(x);const{get:f,set:u}=Object.getOwnPropertyDescriptor(x,r);Object.defineProperty(D,r,{get:g(f),set:t(u)})},hx=D=>({...D,outputChannelCount:D.outputChannelCount!==void 0?D.outputChannelCount:D.numberOfInputs===1&&D.numberOfOutputs===1?[D.channelCount]:Array.from({length:D.numberOfOutputs},()=>1)}),fx=D=>({...D,channelCount:D.numberOfOutputs}),px=D=>{const{imag:r,real:g}=D;return r===void 0?g===void 0?{...D,imag:[0,0],real:[0,0]}:{...D,imag:Array.from(g,()=>0),real:g}:g===void 0?{...D,imag:r,real:Array.from(r,()=>0)}:{...D,imag:r,real:g}},Eg=(D,r,g)=>{try{D.setValueAtTime(r,g)}catch(t){if(t.code!==9)throw t;Eg(D,r,g+1e-7)}},mx=D=>{const r=D.createBufferSource();r.start();try{r.start()}catch{return!0}return!1},yx=D=>{const r=D.createBufferSource(),g=D.createBuffer(1,1,44100);r.buffer=g;try{r.start(0,1)}catch{return!1}return!0},gx=D=>{const r=D.createBufferSource();r.start();try{r.stop()}catch{return!1}return!0},lf=D=>{const r=D.createOscillator();try{r.start(-1)}catch(g){return g instanceof RangeError}return!1},Cg=D=>{const r=D.createBuffer(1,1,44100),g=D.createBufferSource();g.buffer=r,g.start(),g.stop();try{return g.stop(),!0}catch{return!1}},uf=D=>{const r=D.createOscillator();try{r.stop(-1)}catch(g){return g instanceof RangeError}return!1},vx=D=>{const{port1:r,port2:g}=new MessageChannel;try{r.postMessage(D)}finally{r.close(),g.close()}},_x=()=>{try{new DOMException}catch{return!1}return!0},bx=()=>new Promise(D=>{const r=new ArrayBuffer(0),{port1:g,port2:t}=new MessageChannel;g.onmessage=({data:x})=>D(x!==null),t.postMessage(r,[r])}),xx=D=>{D.start=(r=>(g=0,t=0,x)=>{const f=D.buffer,u=f===null?t:Math.min(f.duration,t);f!==null&&u>f.duration-.5/D.context.sampleRate?r.call(D,g,0,0):r.call(D,g,u,x)})(D.start)},Mg=(D,r)=>{const g=r.createGain();D.connect(g);const t=(x=>()=>{x.call(D,g),D.removeEventListener("ended",t)})(D.disconnect);D.addEventListener("ended",t),qa(D,g),D.stop=(x=>{let f=!1;return(u=0)=>{if(f)try{x.call(D,u)}catch{g.gain.setValueAtTime(0,u)}else x.call(D,u),f=!0}})(D.stop)},Wa=(D,r)=>g=>{const t={value:D};return Object.defineProperties(g,{currentTarget:t,target:t}),typeof r=="function"?r.call(D,g):r.handleEvent.call(D,g)},wx=k0(qo),Sx=P0(qo),jx=q1(Vc),Og=new WeakMap,Tx=l_(Og),js=b1(new Map,new WeakMap),Fs=ax(),Ag=U_(js,Ks),cf=a_(Pn),_n=Pb(Pn,cf,zo),kx=N0(Ag,br,_n),pr=d_(Bc),un=hb(Fs),ur=C_(un),Pg=new WeakMap,Rg=e_(Wa),eo=G_(Fs),df=j_(eo),hf=T_(Fs),Dg=k_(Fs),Ia=W_(Fs),zr=l1(E0(ag),A0(wx,Sx,Oc,jx,Ac,Pn,Tx,Wl,br,qo,yi,zo,xc),js,__(Vh,Ac,Pn,br,Bl,yi),Ks,zc,Ln,B1(Oc,Vh,Pn,br,Bl,pr,yi,ur),X1(Pg,Pn,Ns),Rg,pr,df,hf,Dg,ur,Ia),Ex=L0(zr,kx,Ks,Ag,pr,ur),ff=new WeakSet,zy=B_(Fs),Ig=R1(new Uint32Array(1)),pf=lx(Ig,Ks),mf=ux(Ig),Lg=U0(ff,js,Ln,zy,un,Vb(zy),pf,mf),Gc=R0(Yn),Ng=Rb(cf,Xl,zo),Js=E1(Ng),Ha=z_(Gc,js,mx,yx,gx,lf,Cg,uf,xx,cx($l),Mg),ei=Ab(u_(Xl),Ng),Cx=z0(Js,Ha,br,ei,_n),Bs=u1(C0(lg),Pg,tf,c1,b0,x0,w0,S0,j0,Fh,ig,eo,Eg),Mx=V0(zr,Cx,Bs,cn,Ha,pr,ur,Wa),Ox=$0(zr,K0,Ks,cn,q_(Yn,$l),pr,ur,_n),Ax=_1(Js,wg,br,ei,_n),Wo=Lb(Og),Px=v1(zr,Bs,Ax,zc,wg,pr,ur,Wo),oo=N_(qo,hf),Rx=dx(cn,oo),ao=K_(eo,Rx),Dx=S1(ao,br,_n),Ix=w1(zr,Dx,ao,pr,ur),Lx=k1(Zl,br,_n),Nx=T1(zr,Lx,Zl,pr,ur,fx),Fx=tb(Gc,Ha,Yn,oo),Xa=eb(Gc,js,Fx,lf,uf),Ux=P1(Js,Xa,br,ei,_n),Bx=A1(zr,Bs,Ux,Xa,pr,ur,Wa),Fg=rb(Ln,$l),Vx=L1(Fg,br,_n),zx=I1(zr,Vx,Fg,pr,ur,Wo),Gx=G1(Js,Sg,br,ei,_n),qx=z1(zr,Bs,Gx,Sg,pr,ur,Wo),Ug=nb(Ln),Wx=$1(Js,Ug,br,ei,_n),Hx=Q1(zr,Bs,Wx,Ug,Ln,pr,ur,Wo),Xx=i_(Js,Yn,br,ei,_n),Yx=s_(zr,Bs,Xx,Yn,pr,ur),Zx=ab(zc,cn,Ql,Ln),qc=Db(js,Yn,Ql,tx(Yn,un)),Qx=v_(Ha,br,un,_n,qc),$x=sb(Zx),Kx=y_(zr,$x,Qx,pr,ur,Wo),Jx=J0(Bs,ao,Xa,Ql,Ln,Tg,ur,$l),Bg=new WeakMap,ew=L_(Ox,Jx,Rg,ur,Bg,Wa),Vg=fb(Gc,js,lf,Cg,uf,Mg),tw=Tb(Js,Vg,br,ei,_n),rw=jb(zr,Bs,Vg,tw,pr,ur,Wa),zg=M1(Ha),nw=bb(zg,cn,Yn,kg,oo),Wc=_b(zg,cn,nw,kg,oo,eo,$l),sw=mb(Oc,cn,ao,Yn,Ql,Wc,Ln,Ac,Tg,oo),Gg=pb(sw),iw=Cb(Js,ao,Xa,Yn,Gg,br,un,ei,_n,qc),ow=Eb(zr,Bs,Gg,iw,pr,ur,Wo),aw=yb(Ks),lw=Ob(aw,pr,new WeakSet,px),uw=vb(ao,Zl,Yn,Wc,Ln,oo),qg=gb(uw,Ln),cw=Bb(Js,qg,br,ei,_n),dw=Ub(zr,Bs,qg,cw,pr,ur),hw=ox(Wc,br,_n),fw=ix(zr,cn,Wc,hw,pr,ur,Wo),Wg=M_(Fs),yf=t_(Fs),Hg=new WeakMap,pw=h_(Hg,un),mw=Wg?O0(js,Ln,J1(Fs),yf,r_(T0),pr,pw,ur,Ia,new WeakMap,new WeakMap,Yb(Ia,un),Fs):void 0,yw=E_(df,ur),gw=U1(ff,js,F1,K1,new WeakSet,pr,yw,Cc,Vl,pf,mf),Xg=y1(mw,Ex,Lg,Mx,Px,Ix,Nx,Bx,zx,gw,qx,Hx,Yx,Kx,ew,rw,ow,lw,dw,fw),vw=A_(zr,lb,pr,ur),_w=R_(zr,ub,pr,ur),bw=D_(zr,cb,pr,ur),xw=db(cn,ur),ww=I_(zr,xw,pr),Sw=Q0(Xg,cn,Ln,nx,vw,_w,bw,ww,eo),gf=f_(Bg),jw=D0(gf),Yg=C1(Ks),Tw=W1(gf),Zg=Y1(Ks),Qg=new WeakMap,kw=o_(Qg,Ns),Ew=$_(Yg,Ks,cn,ao,Zl,Xa,Yn,Ql,Ln,Zg,yf,kw,oo),Cw=X_(cn,Ew,Yn,Ln,oo),Mw=m1(Js,Yg,Ha,ao,Zl,Xa,Yn,Tw,Zg,yf,br,Ia,un,ei,_n,qc),Ow=c_(Hg),Aw=Ib(Qg),Gy=Wg?h1(jw,zr,Bs,Mw,Cw,Pn,Ow,pr,ur,Ia,hx,Aw,vx,Wa):void 0,Pw=N1(Ln,un),Rw=Nb(ff,js,cf,gf,qc,Cc,pf,mf),Dw=wb(Xg,js,cn,Pw,Rw),Iw=b_(Bc,df),Lw=x_(ef,hf),Nw=w_(tf,Dg),Fw=S_(Bc,ur),Uw=()=>O_(js,zb(un),Gb(eo),qb(un),Wb(eo),Hb(un),Xb(Ia,un),Zb(un),Qb(un),$b(un),Kb(un),_x,Jb(Fs),ex(eo),rx(un),bx);function Xn(D){return D===void 0}function Vt(D){return D!==void 0}function $g(D){return typeof D=="function"}function cs(D){return typeof D=="number"}function gi(D){return Object.prototype.toString.call(D)==="[object Object]"&&D.constructor===Object}function vf(D){return typeof D=="boolean"}function gn(D){return Array.isArray(D)}function Us(D){return typeof D=="string"}function Fl(D){return Us(D)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(D)}function Tt(D,r){if(!D)throw new Error(r)}function pn(D,r,g=1/0){if(!(r<=D&&D<=g))throw new RangeError(`Value must be within [${r}, ${g}], got: ${D}`)}function _f(D){!D.isOffline&&D.state!=="running"&&Ya('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Kg=!1,qy=!1;function Hh(D){Kg=D}function Jg(D){Xn(D)&&Kg&&!qy&&(qy=!0,Ya("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let bf=console;function Bw(D){bf=D}function ev(...D){bf.log(...D)}function Ya(...D){bf.warn(...D)}const Vw=Object.freeze(Object.defineProperty({__proto__:null,assert:Tt,assertContextRunning:_f,assertRange:pn,assertUsedScheduleTime:Jg,enterScheduledCallback:Hh,log:ev,setLogger:Bw,warn:Ya},Symbol.toStringTag,{value:"Module"}));function zw(D){return new Sw(D)}function Gw(D,r,g){return new Dw(D,r,g)}const An=typeof self=="object"?self:null,qw=An&&(An.hasOwnProperty("AudioContext")||An.hasOwnProperty("webkitAudioContext"));function Ww(D,r,g){return Tt(Vt(Gy),"AudioWorkletNode only works in a secure context (https or localhost)"),new(D instanceof(An==null?void 0:An.BaseAudioContext)?An==null?void 0:An.AudioWorkletNode:Gy)(D,r,g)}function Vs(D,r,g,t){var x=arguments.length,f=x<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,g):t,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(D,r,g,t);else for(var c=D.length-1;c>=0;c--)(u=D[c])&&(f=(x<3?u(f):x>3?u(r,g,f):u(r,g))||f);return x>3&&f&&Object.defineProperty(r,g,f),f}function hr(D,r,g,t){function x(f){return f instanceof g?f:new g(function(u){u(f)})}return new(g||(g=Promise))(function(f,u){function c(m){try{d(t.next(m))}catch(v){u(v)}}function s(m){try{d(t.throw(m))}catch(v){u(v)}}function d(m){m.done?f(m.value):x(m.value).then(c,s)}d((t=t.apply(D,r||[])).next())})}class Hw{constructor(r,g,t,x){this._callback=r,this._type=g,this._minimumUpdateInterval=Math.max(128/(x||44100),.001),this.updateInterval=t,this._createClock()}_createWorker(){const r=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),g=URL.createObjectURL(r),t=new Worker(g);t.onmessage=this._callback.bind(this),this._worker=t}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(r){var g;this._updateInterval=Math.max(r,this._minimumUpdateInterval),this._type==="worker"&&((g=this._worker)===null||g===void 0||g.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(r){this._disposeClock(),this._type=r,this._createClock()}dispose(){this._disposeClock()}}function Go(D){return Nw(D)}function to(D){return Lw(D)}function wc(D){return Fw(D)}function Ca(D){return Iw(D)}function Xw(D){return D instanceof Lg}function Yw(D,r){return D==="value"||Go(r)||to(r)||Xw(r)}function xs(D,...r){if(!r.length)return D;const g=r.shift();if(gi(D)&&gi(g))for(const t in g)Yw(t,g[t])?D[t]=g[t]:gi(g[t])?(D[t]||Object.assign(D,{[t]:{}}),xs(D[t],g[t])):Object.assign(D,{[t]:g[t]});return xs(D,...r)}function Zw(D,r){return D.length===r.length&&D.every((g,t)=>r[t]===g)}function Qe(D,r,g=[],t){const x={},f=Array.from(r);if(gi(f[0])&&t&&!Reflect.has(f[0],t)&&(Object.keys(f[0]).some(c=>Reflect.has(D,c))||(xs(x,{[t]:f[0]}),g.splice(g.indexOf(t),1),f.shift())),f.length===1&&gi(f[0]))xs(x,f[0]);else for(let u=0;u<g.length;u++)Vt(f[u])&&(x[g[u]]=f[u]);return xs(D,x)}function Qw(D){return D.constructor.getDefaults()}function ws(D,r){return Xn(D)?r:D}function mn(D,r){return r.forEach(g=>{Reflect.has(D,g)&&delete D[g]}),D}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */let wi=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...r){(this.debug||An&&this.toString()===An.TONE_DEBUG_CLASS)&&ev(this,...r)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};wi.version=Kh;const xf=1e-6;function La(D,r){return D>r+xf}function Xh(D,r){return La(D,r)||Ls(D,r)}function Ic(D,r){return D+xf<r}function Ls(D,r){return Math.abs(D-r)<xf}function Ho(D,r,g){return Math.max(Math.min(D,g),r)}class ls extends wi{constructor(){super(),this.name="Timeline",this._timeline=[];const r=Qe(ls.getDefaults(),arguments,["memory"]);this.memory=r.memory,this.increasing=r.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(r){if(Tt(Reflect.has(r,"time"),"Timeline: events must have a time attribute"),r.time=r.time.valueOf(),this.increasing&&this.length){const g=this._timeline[this.length-1];Tt(Xh(r.time,g.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(r)}else{const g=this._search(r.time);this._timeline.splice(g+1,0,r)}if(this.length>this.memory){const g=this.length-this.memory;this._timeline.splice(0,g)}return this}remove(r){const g=this._timeline.indexOf(r);return g!==-1&&this._timeline.splice(g,1),this}get(r,g="time"){const t=this._search(r,g);return t!==-1?this._timeline[t]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(r,g="time"){const t=this._search(r,g);return t+1<this._timeline.length?this._timeline[t+1]:null}getBefore(r){const g=this._timeline.length;if(g>0&&this._timeline[g-1].time<r)return this._timeline[g-1];const t=this._search(r);return t-1>=0?this._timeline[t-1]:null}cancel(r){if(this._timeline.length>1){let g=this._search(r);if(g>=0)if(Ls(this._timeline[g].time,r)){for(let t=g;t>=0&&Ls(this._timeline[t].time,r);t--)g=t;this._timeline=this._timeline.slice(0,g)}else this._timeline=this._timeline.slice(0,g+1);else this._timeline=[]}else this._timeline.length===1&&Xh(this._timeline[0].time,r)&&(this._timeline=[]);return this}cancelBefore(r){const g=this._search(r);return g>=0&&(this._timeline=this._timeline.slice(g+1)),this}previousEvent(r){const g=this._timeline.indexOf(r);return g>0?this._timeline[g-1]:null}_search(r,g="time"){if(this._timeline.length===0)return-1;let t=0;const x=this._timeline.length;let f=x;if(x>0&&this._timeline[x-1][g]<=r)return x-1;for(;t<f;){let u=Math.floor(t+(f-t)/2);const c=this._timeline[u],s=this._timeline[u+1];if(Ls(c[g],r)){for(let d=u;d<this._timeline.length;d++){const m=this._timeline[d];if(Ls(m[g],r))u=d;else break}return u}else{if(Ic(c[g],r)&&La(s[g],r))return u;La(c[g],r)?f=u:t=u+1}}return-1}_iterate(r,g=0,t=this._timeline.length-1){this._timeline.slice(g,t+1).forEach(r)}forEach(r){return this._iterate(r),this}forEachBefore(r,g){const t=this._search(r);return t!==-1&&this._iterate(g,0,t),this}forEachAfter(r,g){const t=this._search(r);return this._iterate(g,t+1),this}forEachBetween(r,g,t){let x=this._search(r),f=this._search(g);return x!==-1&&f!==-1?(this._timeline[x].time!==r&&(x+=1),this._timeline[f].time===g&&(f-=1),this._iterate(t,x,f)):x===-1&&this._iterate(t,0,f),this}forEachFrom(r,g){let t=this._search(r);for(;t>=0&&this._timeline[t].time>=r;)t--;return this._iterate(g,t+1),this}forEachAtTime(r,g){const t=this._search(r);if(t!==-1&&Ls(this._timeline[t].time,r)){let x=t;for(let f=t;f>=0&&Ls(this._timeline[f].time,r);f--)x=f;this._iterate(f=>{g(f)},x,t)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const tv=[];function Hc(D){tv.push(D)}function $w(D){tv.forEach(r=>r(D))}const rv=[];function Xc(D){rv.push(D)}function Kw(D){rv.forEach(r=>r(D))}class Za extends wi{constructor(){super(...arguments),this.name="Emitter"}on(r,g){return r.split(/\W+/).forEach(x=>{Xn(this._events)&&(this._events={}),this._events.hasOwnProperty(x)||(this._events[x]=[]),this._events[x].push(g)}),this}once(r,g){const t=(...x)=>{g(...x),this.off(r,t)};return this.on(r,t),this}off(r,g){return r.split(/\W+/).forEach(x=>{if(Xn(this._events)&&(this._events={}),this._events.hasOwnProperty(x))if(Xn(g))this._events[x]=[];else{const f=this._events[x];for(let u=f.length-1;u>=0;u--)f[u]===g&&f.splice(u,1)}}),this}emit(r,...g){if(this._events&&this._events.hasOwnProperty(r)){const t=this._events[r].slice(0);for(let x=0,f=t.length;x<f;x++)t[x].apply(this,g)}return this}static mixin(r){["on","once","off","emit"].forEach(g=>{const t=Object.getOwnPropertyDescriptor(Za.prototype,g);Object.defineProperty(r.prototype,g,t)})}dispose(){return super.dispose(),this._events=void 0,this}}class wf extends Za{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Qa extends wf{constructor(){var r,g;super(),this.name="Context",this._constants=new Map,this._timeouts=new ls,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const t=Qe(Qa.getDefaults(),arguments,["context"]);t.context?(this._context=t.context,this._latencyHint=((r=arguments[0])===null||r===void 0?void 0:r.latencyHint)||""):(this._context=zw({latencyHint:t.latencyHint}),this._latencyHint=t.latencyHint),this._ticker=new Hw(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((g=arguments[0])===null||g===void 0)&&g.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||($w(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(r,g,t){return this._context.createBuffer(r,g,t)}createChannelMerger(r){return this._context.createChannelMerger(r)}createChannelSplitter(r){return this._context.createChannelSplitter(r)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(r){return this._context.createDelay(r)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(r,g){return this._context.createIIRFilter(r,g)}createPanner(){return this._context.createPanner()}createPeriodicWave(r,g,t){return this._context.createPeriodicWave(r,g,t)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(r){return Tt(Ca(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(r)}createMediaElementSource(r){return Tt(Ca(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(r)}createMediaStreamDestination(){return Tt(Ca(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(r){return this._context.decodeAudioData(r)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(r){Tt(!this._initialized,"The listener cannot be set after initialization."),this._listener=r}get transport(){return this.initialize(),this._transport}set transport(r){Tt(!this._initialized,"The transport cannot be set after initialization."),this._transport=r}get draw(){return this.initialize(),this._draw}set draw(r){Tt(!this._initialized,"Draw cannot be set after initialization."),this._draw=r}get destination(){return this.initialize(),this._destination}set destination(r){Tt(!this._initialized,"The destination cannot be set after initialization."),this._destination=r}createAudioWorkletNode(r,g){return Ww(this.rawContext,r,g)}addAudioWorkletModule(r){return hr(this,void 0,void 0,function*(){Tt(Vt(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(r)),yield this._workletPromise})}workletsAreReady(){return hr(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(r){this._ticker.updateInterval=r}get clockSource(){return this._ticker.type}set clockSource(r){this._ticker.type=r}get lookAhead(){return this._lookAhead}set lookAhead(r){this._lookAhead=r,this.updateInterval=r?r/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Ca(this._context)?this._context.resume():Promise.resolve()}close(){return hr(this,void 0,void 0,function*(){Ca(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Kw(this)})}getConstant(r){if(this._constants.has(r))return this._constants.get(r);{const g=this._context.createBuffer(1,128,this._context.sampleRate),t=g.getChannelData(0);for(let f=0;f<t.length;f++)t[f]=r;const x=this._context.createBufferSource();return x.channelCount=1,x.channelCountMode="explicit",x.buffer=g,x.loop=!0,x.start(0),this._constants.set(r,x),x}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(r=>this._constants[r].disconnect()),this.close(),this}_timeoutLoop(){const r=this.now();let g=this._timeouts.peek();for(;this._timeouts.length&&g&&g.time<=r;)g.callback(),this._timeouts.shift(),g=this._timeouts.peek()}setTimeout(r,g){this._timeoutIds++;const t=this.now();return this._timeouts.add({callback:r,id:this._timeoutIds,time:t+g}),this._timeoutIds}clearTimeout(r){return this._timeouts.forEach(g=>{g.id===r&&this._timeouts.remove(g)}),this}clearInterval(r){return this.clearTimeout(r)}setInterval(r,g){const t=++this._timeoutIds,x=()=>{const f=this.now();this._timeouts.add({callback:()=>{r(),x()},id:t,time:f+g})};return x(),t}}class Jw extends wf{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(r,g,t){return{}}createChannelMerger(r){return{}}createChannelSplitter(r){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(r){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(r,g){return{}}createPanner(){return{}}createPeriodicWave(r,g,t){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(r){return{}}createMediaElementSource(r){return{}}createMediaStreamDestination(){return{}}decodeAudioData(r){return Promise.resolve({})}createAudioWorkletNode(r,g){return{}}get rawContext(){return{}}addAudioWorkletModule(r){return hr(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(r,g){return 0}clearTimeout(r){return this}setInterval(r,g){return 0}clearInterval(r){return this}getConstant(r){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(r){}get destination(){return{}}set destination(r){}now(){return 0}immediate(){return 0}}function At(D,r){gn(r)?r.forEach(g=>At(D,g)):Object.defineProperty(D,r,{enumerable:!0,writable:!1})}function Kl(D,r){gn(r)?r.forEach(g=>Kl(D,g)):Object.defineProperty(D,r,{writable:!0})}const Wt=()=>{};class Qt extends wi{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Wt;const r=Qe(Qt.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=r.reverse,this.onload=r.onload,Us(r.url)?this.load(r.url).catch(r.onerror):r.url&&this.set(r.url)}static getDefaults(){return{onerror:Wt,onload:Wt,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:_r().sampleRate}set(r){return r instanceof Qt?r.loaded?this._buffer=r.get():r.onload=()=>{this.set(r),this.onload(this)}:this._buffer=r,this._reversed&&this._reverse(),this}get(){return this._buffer}load(r){return hr(this,void 0,void 0,function*(){const g=Qt.load(r).then(t=>{this.set(t),this.onload(this)});Qt.downloads.push(g);try{yield g}finally{const t=Qt.downloads.indexOf(g);Qt.downloads.splice(t,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(r){const g=gn(r)&&r[0].length>0,t=g?r.length:1,x=g?r[0].length:r.length,f=_r(),u=f.createBuffer(t,x,f.sampleRate),c=!g&&t===1?[r]:r;for(let s=0;s<t;s++)u.copyToChannel(c[s],s);return this._buffer=u,this}toMono(r){if(cs(r))this.fromArray(this.toArray(r));else{let g=new Float32Array(this.length);const t=this.numberOfChannels;for(let x=0;x<t;x++){const f=this.toArray(x);for(let u=0;u<f.length;u++)g[u]+=f[u]}g=g.map(x=>x/t),this.fromArray(g)}return this}toArray(r){if(cs(r))return this.getChannelData(r);if(this.numberOfChannels===1)return this.toArray(0);{const g=[];for(let t=0;t<this.numberOfChannels;t++)g[t]=this.getChannelData(t);return g}}getChannelData(r){return this._buffer?this._buffer.getChannelData(r):new Float32Array(0)}slice(r,g=this.duration){Tt(this.loaded,"Buffer is not loaded");const t=Math.floor(r*this.sampleRate),x=Math.floor(g*this.sampleRate);Tt(t<x,"The start time must be less than the end time");const f=x-t,u=_r().createBuffer(this.numberOfChannels,f,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)u.copyToChannel(this.getChannelData(c).subarray(t,x),c);return new Qt(u)}_reverse(){if(this.loaded)for(let r=0;r<this.numberOfChannels;r++)this.getChannelData(r).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(r){this._reversed!==r&&(this._reversed=r,this._reverse())}static fromArray(r){return new Qt().fromArray(r)}static fromUrl(r){return hr(this,void 0,void 0,function*(){return yield new Qt().load(r)})}static load(r){return hr(this,void 0,void 0,function*(){const g=r.match(/\[([^\]\[]+\|.+)\]$/);if(g){const s=g[1].split("|");let d=s[0];for(const m of s)if(Qt.supportsType(m)){d=m;break}r=r.replace(g[0],d)}const t=Qt.baseUrl===""||Qt.baseUrl.endsWith("/")?Qt.baseUrl:Qt.baseUrl+"/",x=document.createElement("a");x.href=t+r,x.pathname=(x.pathname+x.hash).split("/").map(encodeURIComponent).join("/");const f=yield fetch(x.href);if(!f.ok)throw new Error(`could not load url: ${r}`);const u=yield f.arrayBuffer();return yield _r().decodeAudioData(u)})}static supportsType(r){const g=r.split("."),t=g[g.length-1];return document.createElement("audio").canPlayType("audio/"+t)!==""}static loaded(){return hr(this,void 0,void 0,function*(){for(yield Promise.resolve();Qt.downloads.length;)yield Qt.downloads[0]})}}Qt.baseUrl="";Qt.downloads=[];class $a extends Qa{constructor(){super({clockSource:"offline",context:wc(arguments[0])?arguments[0]:Gw(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:wc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=wc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(r){return hr(this,void 0,void 0,function*(){let g=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,g++;const t=Math.floor(this.sampleRate/128);r&&g%t===0&&(yield new Promise(x=>setTimeout(x,1)))}})}render(){return hr(this,arguments,void 0,function*(r=!0){yield this.workletsAreReady(),yield this._renderClock(r);const g=yield this._context.startRendering();return new Qt(g)})}close(){return Promise.resolve()}}const nv=new Jw;let Uo=nv;function _r(){return Uo===nv&&qw&&Lc(new Qa),Uo}function Lc(D,r=!1){r&&Uo.dispose(),Ca(D)?Uo=new Qa(D):wc(D)?Uo=new $a(D):Uo=D}function Aa(){return Uo.resume()}if(An&&!An.TONE_SILENCE_LOGGING){const r=` * Tone.js v${Kh} * `;console.log(`%c${r}`,"background: #000; color: #fff")}function Na(D){return Math.pow(10,D/20)}function Jl(D){return 20*(Math.log(D)/Math.LN10)}function Fa(D){return Math.pow(2,D/12)}let Yc=440;function e2(){return Yc}function t2(D){Yc=D}function Ji(D){return Math.round(sv(D))}function sv(D){return 69+12*Math.log2(D/Yc)}function Sf(D){return Yc*Math.pow(2,(D-69)/12)}class jf extends wi{constructor(r,g,t){super(),this.defaultUnits="s",this._val=g,this._units=t,this.context=r,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:r=>this._frequencyToUnits(parseFloat(r)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:r=>this._ticksToUnits(parseInt(r,10)),regexp:/^(\d+)i$/i},m:{method:r=>this._beatsToUnits(parseInt(r,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(r,g)=>{const t=parseInt(r,10),x=g==="."?1.5:1;return t===1?this._beatsToUnits(this._getTimeSignature())*x:this._beatsToUnits(4/t)*x},regexp:/^(\d+)n(\.?)$/i},number:{method:r=>this._expressions[this.defaultUnits].method.call(this,r),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:r=>this._secondsToUnits(parseFloat(r)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:r=>parseInt(r,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:r=>{const g=parseInt(r,10);return this._beatsToUnits(8/(Math.floor(g)*3))},regexp:/^(\d+)t$/i},tr:{method:(r,g,t)=>{let x=0;return r&&r!=="0"&&(x+=this._beatsToUnits(this._getTimeSignature()*parseFloat(r))),g&&g!=="0"&&(x+=this._beatsToUnits(parseFloat(g))),t&&t!=="0"&&(x+=this._beatsToUnits(parseFloat(t)/4)),x},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof jf&&this.fromType(this._val),Xn(this._val))return this._noArg();if(Us(this._val)&&Xn(this._units)){for(const r in this._expressions)if(this._expressions[r].regexp.test(this._val.trim())){this._units=r;break}}else if(gi(this._val)){let r=0;for(const g in this._val)if(Vt(this._val[g])){const t=this._val[g],x=new this.constructor(this.context,g).valueOf()*t;r+=x}return r}if(Vt(this._units)){const r=this._expressions[this._units],g=this._val.toString().trim().match(r.regexp);return g?r.method.apply(this,g.slice(1)):r.method.call(this,this._val)}else return Us(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(r){return 1/r}_beatsToUnits(r){return 60/this._getBpm()*r}_secondsToUnits(r){return r}_ticksToUnits(r){return r*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(r){switch(this._units=void 0,this.defaultUnits){case"s":this._val=r.toSeconds();break;case"i":this._val=r.toTicks();break;case"hz":this._val=r.toFrequency();break;case"midi":this._val=r.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class as extends jf{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:r=>this._now()+new this.constructor(this.context,r).valueOf(),regexp:/^\+(.+)/},quantize:{method:r=>{const g=new as(this.context,r).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(g))},regexp:/^@(.+)/}})}quantize(r,g=1){const t=new this.constructor(this.context,r).valueOf(),x=this.valueOf(),c=Math.round(x/t)*t-x;return x+c*g}toNotation(){const r=this.toSeconds(),g=["1m"];for(let f=1;f<9;f++){const u=Math.pow(2,f);g.push(u+"n."),g.push(u+"n"),g.push(u+"t")}g.push("0");let t=g[0],x=new as(this.context,g[0]).toSeconds();return g.forEach(f=>{const u=new as(this.context,f).toSeconds();Math.abs(u-r)<Math.abs(x-r)&&(t=f,x=u)}),t}toBarsBeatsSixteenths(){const r=this._beatsToUnits(1);let g=this.valueOf()/r;g=parseFloat(g.toFixed(4));const t=Math.floor(g/this._getTimeSignature());let x=g%1*4;g=Math.floor(g)%this._getTimeSignature();const f=x.toString();return f.length>3&&(x=parseFloat(parseFloat(f).toFixed(3))),[t,g,x].join(":")}toTicks(){const r=this._beatsToUnits(1);return this.valueOf()/r*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Ji(this.toFrequency())}_now(){return this.context.now()}}function iv(D,r){return new as(_r(),D,r)}class Rn extends as{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return e2()}static set A4(r){t2(r)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(r){return this.defaultUnits==="midi"?r:Rn.mtof(r)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(r,g){const x=r2[r.toLowerCase()]+(parseInt(g,10)+1)*12;return this.defaultUnits==="midi"?x:Rn.mtof(x)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(r,g,t){let x=1;return r&&r!=="0"&&(x*=this._beatsToUnits(this._getTimeSignature()*parseFloat(r))),g&&g!=="0"&&(x*=this._beatsToUnits(parseFloat(g))),t&&t!=="0"&&(x*=this._beatsToUnits(parseFloat(t)/4)),x}}})}transpose(r){return new Rn(this.context,this.valueOf()*Fa(r))}harmonize(r){return r.map(g=>this.transpose(g))}toMidi(){return Ji(this.valueOf())}toNote(){const r=this.toFrequency(),g=Math.log2(r/Rn.A4);let t=Math.round(12*g)+57;const x=Math.floor(t/12);return x<0&&(t+=-12*x),n2[t%12]+x.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const r=this._beatsToUnits(1),g=this.valueOf()/r;return Math.floor(g*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(r){return r}_ticksToUnits(r){return 1/(r*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(r){return 1/super._beatsToUnits(r)}_secondsToUnits(r){return 1/r}static mtof(r){return Sf(r)}static ftom(r){return Ji(r)}}const r2={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},n2=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Pa(D,r){return new Rn(_r(),D,r)}class Zr extends as{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function s2(D,r){return new Zr(_r(),D,r)}class dn extends wi{constructor(){super();const r=Qe(dn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=r.context}static getDefaults(){return{context:_r()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(r){return Jg(r),new as(this.context,r).toSeconds()}toFrequency(r){return new Rn(this.context,r).toFrequency()}toTicks(r){return new Zr(this.context,r).toTicks()}_getPartialProperties(r){const g=this.get();return Object.keys(g).forEach(t=>{Xn(r[t])&&delete g[t]}),g}get(){const r=Qw(this);return Object.keys(r).forEach(g=>{if(Reflect.has(this,g)){const t=this[g];Vt(t)&&Vt(t.value)&&Vt(t.setValueAtTime)?r[g]=t.value:t instanceof dn?r[g]=t._getPartialProperties(r[g]):gn(t)||cs(t)||Us(t)||vf(t)?r[g]=t:delete r[g]}}),r}set(r){return Object.keys(r).forEach(g=>{Reflect.has(this,g)&&Vt(this[g])&&(this[g]&&Vt(this[g].value)&&Vt(this[g].setValueAtTime)?this[g].value!==r[g]&&(this[g].value=r[g]):this[g]instanceof dn?this[g].set(r[g]):this[g]=r[g])}),this}}class Ka extends ls{constructor(r="stopped"){super(),this.name="StateTimeline",this._initial=r,this.setStateAtTime(this._initial,0)}getValueAtTime(r){const g=this.get(r);return g!==null?g.state:this._initial}setStateAtTime(r,g,t){return pn(g,0),this.add(Object.assign({},t,{state:r,time:g})),this}getLastState(r,g){const t=this._search(g);for(let x=t;x>=0;x--){const f=this._timeline[x];if(f.state===r)return f}}getNextState(r,g){const t=this._search(g);if(t!==-1)for(let x=t;x<this._timeline.length;x++){const f=this._timeline[x];if(f.state===r)return f}}}class Ft extends dn{constructor(){const r=Qe(Ft.getDefaults(),arguments,["param","units","convert"]);for(super(r),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Tt(Vt(r.param)&&(Go(r.param)||r.param instanceof Ft),"param must be an AudioParam");!Go(r.param);)r.param=r.param._param;this._swappable=Vt(r.swappable)?r.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=r.param,this.input.connect(this._param)):this._param=this.input=r.param,this._events=new ls(1e3),this._initialValue=this._param.defaultValue,this.units=r.units,this.convert=r.convert,this._minValue=r.minValue,this._maxValue=r.maxValue,Vt(r.value)&&r.value!==this._toType(this._initialValue)&&this.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(dn.getDefaults(),{convert:!0,units:"number"})}get value(){const r=this.now();return this.getValueAtTime(r)}set value(r){this.cancelScheduledValues(this.now()),this.setValueAtTime(r,this.now())}get minValue(){return Vt(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Vt(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(r,g){return this.units===g}_assertRange(r){return Vt(this.maxValue)&&Vt(this.minValue)&&pn(r,this._fromType(this.minValue),this._fromType(this.maxValue)),r}_fromType(r){return this.convert&&!this.overridden?this._is(r,"time")?this.toSeconds(r):this._is(r,"decibels")?Na(r):this._is(r,"frequency")?this.toFrequency(r):r:this.overridden?0:r}_toType(r){return this.convert&&this.units==="decibels"?Jl(r):r}setValueAtTime(r,g){const t=this.toSeconds(g),x=this._fromType(r);return Tt(isFinite(x)&&isFinite(t),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(g)}`),this._assertRange(x),this.log(this.units,"setValueAtTime",r,t),this._events.add({time:t,type:"setValueAtTime",value:x}),this._param.setValueAtTime(x,t),this}getValueAtTime(r){const g=Math.max(this.toSeconds(r),0),t=this._events.getAfter(g),x=this._events.get(g);let f=this._initialValue;if(x===null)f=this._initialValue;else if(x.type==="setTargetAtTime"&&(t===null||t.type==="setValueAtTime")){const u=this._events.getBefore(x.time);let c;u===null?c=this._initialValue:c=u.value,x.type==="setTargetAtTime"&&(f=this._exponentialApproach(x.time,c,x.value,x.constant,g))}else if(t===null)f=x.value;else if(t.type==="linearRampToValueAtTime"||t.type==="exponentialRampToValueAtTime"){let u=x.value;if(x.type==="setTargetAtTime"){const c=this._events.getBefore(x.time);c===null?u=this._initialValue:u=c.value}t.type==="linearRampToValueAtTime"?f=this._linearInterpolate(x.time,u,t.time,t.value,g):f=this._exponentialInterpolate(x.time,u,t.time,t.value,g)}else f=x.value;return this._toType(f)}setRampPoint(r){r=this.toSeconds(r);let g=this.getValueAtTime(r);return this.cancelAndHoldAtTime(r),this._fromType(g)===0&&(g=this._toType(this._minOutput)),this.setValueAtTime(g,r),this}linearRampToValueAtTime(r,g){const t=this._fromType(r),x=this.toSeconds(g);return Tt(isFinite(t)&&isFinite(x),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(g)}`),this._assertRange(t),this._events.add({time:x,type:"linearRampToValueAtTime",value:t}),this.log(this.units,"linearRampToValueAtTime",r,x),this._param.linearRampToValueAtTime(t,x),this}exponentialRampToValueAtTime(r,g){let t=this._fromType(r);t=Ls(t,0)?this._minOutput:t,this._assertRange(t);const x=this.toSeconds(g);return Tt(isFinite(t)&&isFinite(x),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(r)}, ${JSON.stringify(g)}`),this._events.add({time:x,type:"exponentialRampToValueAtTime",value:t}),this.log(this.units,"exponentialRampToValueAtTime",r,x),this._param.exponentialRampToValueAtTime(t,x),this}exponentialRampTo(r,g,t){return t=this.toSeconds(t),this.setRampPoint(t),this.exponentialRampToValueAtTime(r,t+this.toSeconds(g)),this}linearRampTo(r,g,t){return t=this.toSeconds(t),this.setRampPoint(t),this.linearRampToValueAtTime(r,t+this.toSeconds(g)),this}targetRampTo(r,g,t){return t=this.toSeconds(t),this.setRampPoint(t),this.exponentialApproachValueAtTime(r,t,g),this}exponentialApproachValueAtTime(r,g,t){g=this.toSeconds(g),t=this.toSeconds(t);const x=Math.log(t+1)/Math.log(200);return this.setTargetAtTime(r,g,x),this.cancelAndHoldAtTime(g+t*.9),this.linearRampToValueAtTime(r,g+t),this}setTargetAtTime(r,g,t){const x=this._fromType(r);Tt(isFinite(t)&&t>0,"timeConstant must be a number greater than 0");const f=this.toSeconds(g);return this._assertRange(x),Tt(isFinite(x)&&isFinite(f),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(r)}, ${JSON.stringify(g)}`),this._events.add({constant:t,time:f,type:"setTargetAtTime",value:x}),this.log(this.units,"setTargetAtTime",r,f,t),this._param.setTargetAtTime(x,f,t),this}setValueCurveAtTime(r,g,t,x=1){t=this.toSeconds(t),g=this.toSeconds(g);const f=this._fromType(r[0])*x;this.setValueAtTime(this._toType(f),g);const u=t/(r.length-1);for(let c=1;c<r.length;c++){const s=this._fromType(r[c])*x;this.linearRampToValueAtTime(this._toType(s),g+c*u)}return this}cancelScheduledValues(r){const g=this.toSeconds(r);return Tt(isFinite(g),`Invalid argument to cancelScheduledValues: ${JSON.stringify(r)}`),this._events.cancel(g),this._param.cancelScheduledValues(g),this.log(this.units,"cancelScheduledValues",g),this}cancelAndHoldAtTime(r){const g=this.toSeconds(r),t=this._fromType(this.getValueAtTime(g));Tt(isFinite(g),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(r)}`),this.log(this.units,"cancelAndHoldAtTime",g,"value="+t);const x=this._events.get(g),f=this._events.getAfter(g);return x&&Ls(x.time,g)?f?(this._param.cancelScheduledValues(f.time),this._events.cancel(f.time)):(this._param.cancelAndHoldAtTime(g),this._events.cancel(g+this.sampleTime)):f&&(this._param.cancelScheduledValues(f.time),this._events.cancel(f.time),f.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(t),g):f.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(t),g)),this._events.add({time:g,type:"setValueAtTime",value:t}),this._param.setValueAtTime(t,g),this}rampTo(r,g=.1,t){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(r,g,t):this.linearRampTo(r,g,t),this}apply(r){const g=this.context.currentTime;r.setValueAtTime(this.getValueAtTime(g),g);const t=this._events.get(g);if(t&&t.type==="setTargetAtTime"){const x=this._events.getAfter(t.time),f=x?x.time:g+2,u=(f-g)/10;for(let c=g;c<f;c+=u)r.linearRampToValueAtTime(this.getValueAtTime(c),c)}return this._events.forEachAfter(this.context.currentTime,x=>{x.type==="cancelScheduledValues"?r.cancelScheduledValues(x.time):x.type==="setTargetAtTime"?r.setTargetAtTime(x.value,x.time,x.constant):r[x.type](x.value,x.time)}),this}setParam(r){Tt(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const g=this.input;return g.disconnect(this._param),this.apply(r),this._param=r,g.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(r,g,t,x,f){return t+(g-t)*Math.exp(-(f-r)/x)}_linearInterpolate(r,g,t,x,f){return g+(x-g)*((f-r)/(t-r))}_exponentialInterpolate(r,g,t,x,f){return g*Math.pow(x/g,(f-r)/(t-r))}}class rt extends dn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Vt(this.input)?Go(this.input)||this.input instanceof Ft?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Vt(this.output)?this.output.numberOfOutputs:0}_isAudioNode(r){return Vt(r)&&(r instanceof rt||to(r))}_getInternalNodes(){const r=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&r.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&r.push(this.output),r}_setChannelProperties(r){this._getInternalNodes().forEach(t=>{t.channelCount=r.channelCount,t.channelCountMode=r.channelCountMode,t.channelInterpretation=r.channelInterpretation})}_getChannelProperties(){const r=this._getInternalNodes();Tt(r.length>0,"ToneAudioNode does not have any internal nodes");const g=r[0];return{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(r){const g=this._getChannelProperties();this._setChannelProperties(Object.assign(g,{channelCount:r}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(r){const g=this._getChannelProperties();this._setChannelProperties(Object.assign(g,{channelCountMode:r}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(r){const g=this._getChannelProperties();this._setChannelProperties(Object.assign(g,{channelInterpretation:r}))}connect(r,g=0,t=0){return In(this,r,g,t),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ya("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(r,g=0,t=0){return Tf(this,r,g,t),this}chain(...r){return ds(this,...r),this}fan(...r){return r.forEach(g=>this.connect(g)),this}dispose(){return super.dispose(),Vt(this.input)&&(this.input instanceof rt?this.input.dispose():to(this.input)&&this.input.disconnect()),Vt(this.output)&&(this.output instanceof rt?this.output.dispose():to(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ds(...D){const r=D.shift();D.reduce((g,t)=>(g instanceof rt?g.connect(t):to(g)&&In(g,t),t),r)}function In(D,r,g=0,t=0){for(Tt(Vt(D),"Cannot connect from undefined node"),Tt(Vt(r),"Cannot connect to undefined node"),(r instanceof rt||to(r))&&Tt(r.numberOfInputs>0,"Cannot connect to node with no inputs"),Tt(D.numberOfOutputs>0,"Cannot connect from node with no outputs");r instanceof rt||r instanceof Ft;)Vt(r.input)&&(r=r.input);for(;D instanceof rt;)Vt(D.output)&&(D=D.output);Go(r)?D.connect(r,g):D.connect(r,g,t)}function Tf(D,r,g=0,t=0){if(Vt(r))for(;r instanceof rt;)r=r.input;for(;!to(D);)Vt(D.output)&&(D=D.output);Go(r)?D.disconnect(r,g):to(r)?D.disconnect(r,g,t):D.disconnect()}function i2(...D){const r=D.pop();Vt(r)&&D.forEach(g=>In(g,r))}class jt extends rt{constructor(){const r=Qe(jt.getDefaults(),arguments,["gain","units"]);super(r),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ft({context:this.context,convert:r.convert,param:this._gainNode.gain,units:r.units,value:r.gain,minValue:r.minValue,maxValue:r.maxValue}),At(this,"gain")}static getDefaults(){return Object.assign(rt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ua extends rt{constructor(r){super(r),this.onended=Wt,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new jt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(g){const t=this.toSeconds(g);return this._startTime!==-1&&t>=this._startTime&&(this._stopTime===-1||t<=this._stopTime)?"started":"stopped"},this._fadeIn=r.fadeIn,this._fadeOut=r.fadeOut,this._curve=r.curve,this.onended=r.onended}static getDefaults(){return Object.assign(rt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Wt})}_startGain(r,g=1){Tt(this._startTime===-1,"Source cannot be started more than once");const t=this.toSeconds(this._fadeIn);return this._startTime=r+t,this._startTime=Math.max(this._startTime,this.context.currentTime),t>0?(this._gainNode.gain.setValueAtTime(0,r),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(g,r+t):this._gainNode.gain.exponentialApproachValueAtTime(g,r,t)):this._gainNode.gain.setValueAtTime(g,r),this}stop(r){return this.log("stop",r),this._stopGain(this.toSeconds(r)),this}_stopGain(r){Tt(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const g=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(r)+g,this._stopTime=Math.max(this._stopTime,this.now()),g>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,g,r):this._gainNode.gain.targetRampTo(0,g,r):(this._gainNode.gain.cancelAndHoldAtTime(r),this._gainNode.gain.setValueAtTime(0,r)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const t=this._curve==="exponential"?g*2:0;this._stopSource(this.now()+t),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Wt&&(this.onended(this),this.onended=Wt,!this.context.isOffline)){const r=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(r):setTimeout(r,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Tt(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Wt,this}}class Zc extends Ua{constructor(){const r=Qe(Zc.getDefaults(),arguments,["offset"]);super(r),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),In(this._source,this._gainNode),this.offset=new Ft({context:this.context,convert:r.convert,param:this._source.offset,units:r.units,value:r.offset,minValue:r.minValue,maxValue:r.maxValue})}static getDefaults(){return Object.assign(Ua.getDefaults(),{convert:!0,offset:1,units:"number"})}start(r){const g=this.toSeconds(r);return this.log("start",g),this._startGain(g),this._source.start(g),this}_stopSource(r){this._source.stop(r)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Rt extends rt{constructor(){const r=Qe(Rt.getDefaults(),arguments,["value","units"]);super(r),this.name="Signal",this.override=!0,this.output=this._constantSource=new Zc({context:this.context,convert:r.convert,offset:r.value,units:r.units,minValue:r.minValue,maxValue:r.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(rt.getDefaults(),{convert:!0,units:"number",value:0})}connect(r,g=0,t=0){return eu(this,r,g,t),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(r,g){return this._param.setValueAtTime(r,g),this}getValueAtTime(r){return this._param.getValueAtTime(r)}setRampPoint(r){return this._param.setRampPoint(r),this}linearRampToValueAtTime(r,g){return this._param.linearRampToValueAtTime(r,g),this}exponentialRampToValueAtTime(r,g){return this._param.exponentialRampToValueAtTime(r,g),this}exponentialRampTo(r,g,t){return this._param.exponentialRampTo(r,g,t),this}linearRampTo(r,g,t){return this._param.linearRampTo(r,g,t),this}targetRampTo(r,g,t){return this._param.targetRampTo(r,g,t),this}exponentialApproachValueAtTime(r,g,t){return this._param.exponentialApproachValueAtTime(r,g,t),this}setTargetAtTime(r,g,t){return this._param.setTargetAtTime(r,g,t),this}setValueCurveAtTime(r,g,t,x){return this._param.setValueCurveAtTime(r,g,t,x),this}cancelScheduledValues(r){return this._param.cancelScheduledValues(r),this}cancelAndHoldAtTime(r){return this._param.cancelAndHoldAtTime(r),this}rampTo(r,g,t){return this._param.rampTo(r,g,t),this}get value(){return this._param.value}set value(r){this._param.value=r}get convert(){return this._param.convert}set convert(r){this._param.convert=r}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(r){this._param.overridden=r}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(r){return this._param.apply(r),this}}function eu(D,r,g,t){(r instanceof Ft||Go(r)||r instanceof Rt&&r.override)&&(r.cancelScheduledValues(0),r.setValueAtTime(0,0),r instanceof Rt&&(r.overridden=!0)),In(D,r,g,t)}class kf extends Ft{constructor(){const r=Qe(kf.getDefaults(),arguments,["value"]);super(r),this.name="TickParam",this._events=new ls(1/0),this._multiplier=1,this._multiplier=r.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(r.value)}),this.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(Ft.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(r,g,t){g=this.toSeconds(g),this.setRampPoint(g);const x=this._fromType(r),f=this._events.get(g),u=Math.round(Math.max(1/t,1));for(let c=0;c<=u;c++){const s=t*c+g,d=this._exponentialApproach(f.time,f.value,x,t,s);this.linearRampToValueAtTime(this._toType(d),s)}return this}setValueAtTime(r,g){const t=this.toSeconds(g);super.setValueAtTime(r,g);const x=this._events.get(t),f=this._events.previousEvent(x),u=this._getTicksUntilEvent(f,t);return x.ticks=Math.max(u,0),this}linearRampToValueAtTime(r,g){const t=this.toSeconds(g);super.linearRampToValueAtTime(r,g);const x=this._events.get(t),f=this._events.previousEvent(x),u=this._getTicksUntilEvent(f,t);return x.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(r,g){g=this.toSeconds(g);const t=this._fromType(r),x=this._events.get(g),f=Math.round(Math.max((g-x.time)*10,1)),u=(g-x.time)/f;for(let c=0;c<=f;c++){const s=u*c+x.time,d=this._exponentialInterpolate(x.time,x.value,g,t,s);this.linearRampToValueAtTime(this._toType(d),s)}return this}_getTicksUntilEvent(r,g){if(r===null)r={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Xn(r.ticks)){const u=this._events.previousEvent(r);r.ticks=this._getTicksUntilEvent(u,r.time)}const t=this._fromType(this.getValueAtTime(r.time));let x=this._fromType(this.getValueAtTime(g));const f=this._events.get(g);return f&&f.time===g&&f.type==="setValueAtTime"&&(x=this._fromType(this.getValueAtTime(g-this.sampleTime))),.5*(g-r.time)*(t+x)+r.ticks}getTicksAtTime(r){const g=this.toSeconds(r),t=this._events.get(g);return Math.max(this._getTicksUntilEvent(t,g),0)}getDurationOfTicks(r,g){const t=this.toSeconds(g),x=this.getTicksAtTime(g);return this.getTimeOfTick(x+r)-t}getTimeOfTick(r){const g=this._events.get(r,"ticks"),t=this._events.getAfter(r,"ticks");if(g&&g.ticks===r)return g.time;if(g&&t&&t.type==="linearRampToValueAtTime"&&g.value!==t.value){const x=this._fromType(this.getValueAtTime(g.time)),u=(this._fromType(this.getValueAtTime(t.time))-x)/(t.time-g.time),c=Math.sqrt(Math.pow(x,2)-2*u*(g.ticks-r)),s=(-x+c)/u,d=(-x-c)/u;return(s>0?s:d)+g.time}else return g?g.value===0?1/0:g.time+(r-g.ticks)/g.value:r/this._initialValue}ticksToTime(r,g){return this.getDurationOfTicks(r,g)}timeToTicks(r,g){const t=this.toSeconds(g),x=this.toSeconds(r),f=this.getTicksAtTime(t);return this.getTicksAtTime(t+x)-f}_fromType(r){return this.units==="bpm"&&this.multiplier?1/(60/r/this.multiplier):super._fromType(r)}_toType(r){return this.units==="bpm"&&this.multiplier?r/this.multiplier*60:super._toType(r)}get multiplier(){return this._multiplier}set multiplier(r){const g=this.value;this._multiplier=r,this.cancelScheduledValues(0),this.setValueAtTime(g,0)}}class Ef extends Rt{constructor(){const r=Qe(Ef.getDefaults(),arguments,["value"]);super(r),this.name="TickSignal",this.input=this._param=new kf({context:this.context,convert:r.convert,multiplier:r.multiplier,param:this._constantSource.offset,units:r.units,value:r.value})}static getDefaults(){return Object.assign(Rt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(r,g){return this._param.ticksToTime(r,g)}timeToTicks(r,g){return this._param.timeToTicks(r,g)}getTimeOfTick(r){return this._param.getTimeOfTick(r)}getDurationOfTicks(r,g){return this._param.getDurationOfTicks(r,g)}getTicksAtTime(r){return this._param.getTicksAtTime(r)}get multiplier(){return this._param.multiplier}set multiplier(r){this._param.multiplier=r}dispose(){return super.dispose(),this._param.dispose(),this}}class Cf extends dn{constructor(){const r=Qe(Cf.getDefaults(),arguments,["frequency"]);super(r),this.name="TickSource",this._state=new Ka,this._tickOffset=new ls,this._ticksAtTime=new ls,this._secondsAtTime=new ls,this.frequency=new Ef({context:this.context,units:r.units,value:r.frequency}),At(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},dn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(r,g){const t=this.toSeconds(r);return this._state.getValueAtTime(t)!=="started"&&(this._state.setStateAtTime("started",t),Vt(g)&&this.setTicksAtTime(g,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}stop(r){const g=this.toSeconds(r);if(this._state.getValueAtTime(g)==="stopped"){const t=this._state.get(g);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(g),this._state.setStateAtTime("stopped",g),this.setTicksAtTime(0,g),this._ticksAtTime.cancel(g),this._secondsAtTime.cancel(g),this}pause(r){const g=this.toSeconds(r);return this._state.getValueAtTime(g)==="started"&&(this._state.setStateAtTime("paused",g),this._ticksAtTime.cancel(g),this._secondsAtTime.cancel(g)),this}cancel(r){return r=this.toSeconds(r),this._state.cancel(r),this._tickOffset.cancel(r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r),this}getTicksAtTime(r){const g=this.toSeconds(r),t=this._state.getLastState("stopped",g),x=this._ticksAtTime.get(g),f={state:"paused",time:g};this._state.add(f);let u=x||t,c=x?x.ticks:0,s=null;return this._state.forEachBetween(u.time,g+this.sampleTime,d=>{let m=u.time;const v=this._tickOffset.get(d.time);v&&v.time>=u.time&&(c=v.ticks,m=v.time),u.state==="started"&&d.state!=="started"&&(c+=this.frequency.getTicksAtTime(d.time)-this.frequency.getTicksAtTime(m),d.time!==f.time&&(s={state:d.state,time:d.time,ticks:c})),u=d}),this._state.remove(f),s&&this._ticksAtTime.add(s),c}get ticks(){return this.getTicksAtTime(this.now())}set ticks(r){this.setTicksAtTime(r,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(r){const g=this.now(),t=this.frequency.timeToTicks(r,g);this.setTicksAtTime(t,g)}getSecondsAtTime(r){r=this.toSeconds(r);const g=this._state.getLastState("stopped",r),t={state:"paused",time:r};this._state.add(t);const x=this._secondsAtTime.get(r);let f=x||g,u=x?x.seconds:0,c=null;return this._state.forEachBetween(f.time,r+this.sampleTime,s=>{let d=f.time;const m=this._tickOffset.get(s.time);m&&m.time>=f.time&&(u=m.seconds,d=m.time),f.state==="started"&&s.state!=="started"&&(u+=s.time-d,s.time!==t.time&&(c={state:s.state,time:s.time,seconds:u})),f=s}),this._state.remove(t),c&&this._secondsAtTime.add(c),u}setTicksAtTime(r,g){return g=this.toSeconds(g),this._tickOffset.cancel(g),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(r,g),ticks:r,time:g}),this._ticksAtTime.cancel(g),this._secondsAtTime.cancel(g),this}getStateAtTime(r){return r=this.toSeconds(r),this._state.getValueAtTime(r)}getTimeOfTick(r,g=this.now()){const t=this._tickOffset.get(g),x=this._state.get(g),f=Math.max(t.time,x.time),u=this.frequency.getTicksAtTime(f)+r-t.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(r,g,t){let x=this._state.get(r);this._state.forEachBetween(r,g,u=>{x&&x.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(x.time,r),u.time-this.sampleTime,t),x=u});let f=null;if(x&&x.state==="started"){const u=Math.max(x.time,r),c=this.frequency.getTicksAtTime(u),s=this.frequency.getTicksAtTime(x.time),d=c-s;let m=Math.ceil(d)-d;m=Ls(m,1)?0:m;let v=this.frequency.getTimeOfTick(c+m);for(;v<g;){try{t(v,Math.round(this.getTicksAtTime(v)))}catch(i){f=i;break}v+=this.frequency.getDurationOfTicks(1,v)}}if(f)throw f;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ja extends dn{constructor(){const r=Qe(Ja.getDefaults(),arguments,["callback","frequency"]);super(r),this.name="Clock",this.callback=Wt,this._lastUpdate=0,this._state=new Ka("stopped"),this._boundLoop=this._loop.bind(this),this.callback=r.callback,this._tickSource=new Cf({context:this.context,frequency:r.frequency,units:r.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,At(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(dn.getDefaults(),{callback:Wt,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(r,g){_f(this.context);const t=this.toSeconds(r);return this.log("start",t),this._state.getValueAtTime(t)!=="started"&&(this._state.setStateAtTime("started",t),this._tickSource.start(t,g),t<this._lastUpdate&&this.emit("start",t,g)),this}stop(r){const g=this.toSeconds(r);return this.log("stop",g),this._state.cancel(g),this._state.setStateAtTime("stopped",g),this._tickSource.stop(g),g<this._lastUpdate&&this.emit("stop",g),this}pause(r){const g=this.toSeconds(r);return this._state.getValueAtTime(g)==="started"&&(this._state.setStateAtTime("paused",g),this._tickSource.pause(g),g<this._lastUpdate&&this.emit("pause",g)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(r){this._tickSource.ticks=r}get seconds(){return this._tickSource.seconds}set seconds(r){this._tickSource.seconds=r}getSecondsAtTime(r){return this._tickSource.getSecondsAtTime(r)}setTicksAtTime(r,g){return this._tickSource.setTicksAtTime(r,g),this}getTimeOfTick(r,g=this.now()){return this._tickSource.getTimeOfTick(r,g)}getTicksAtTime(r){return this._tickSource.getTicksAtTime(r)}nextTickTime(r,g){const t=this.toSeconds(g),x=this.getTicksAtTime(t);return this._tickSource.getTimeOfTick(x+r,t)}_loop(){const r=this._lastUpdate,g=this.now();this._lastUpdate=g,this.log("loop",r,g),r!==g&&(this._state.forEachBetween(r,g,t=>{switch(t.state){case"started":const x=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,x);break;case"stopped":t.time!==0&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time);break}}),this._tickSource.forEachTickBetween(r,g,(t,x)=>{this.callback(t,x)}))}getStateAtTime(r){const g=this.toSeconds(r);return this._state.getValueAtTime(g)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Za.mixin(Ja);class us extends rt{constructor(){const r=Qe(us.getDefaults(),arguments,["delayTime","maxDelay"]);super(r),this.name="Delay";const g=this.toSeconds(r.maxDelay);this._maxDelay=Math.max(g,this.toSeconds(r.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(g),this.delayTime=new Ft({context:this.context,param:this._delayNode.delayTime,units:"time",value:r.delayTime,minValue:0,maxValue:this.maxDelay}),At(this,"delayTime")}static getDefaults(){return Object.assign(rt.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Si extends rt{constructor(){const r=Qe(Si.getDefaults(),arguments,["volume"]);super(r),this.name="Volume",this.input=this.output=new jt({context:this.context,gain:r.volume,units:"decibels"}),this.volume=this.output.gain,At(this,"volume"),this._unmutedVolume=r.volume,this.mute=r.mute}static getDefaults(){return Object.assign(rt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(r){!this.mute&&r?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!r&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Mf extends rt{constructor(){const r=Qe(Mf.getDefaults(),arguments);super(r),this.name="Destination",this.input=new Si({context:this.context}),this.output=new jt({context:this.context}),this.volume=this.input.volume,ds(this.input,this.output,this.context.rawContext.destination),this.mute=r.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(rt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(r){this.input.mute=r}chain(...r){return this.input.disconnect(),r.unshift(this.input),r.push(this.output),ds(...r),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Hc(D=>{D.destination=new Mf({context:D})});Xc(D=>{D.destination.dispose()});class o2 extends rt{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ft({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ft({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ft({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ft({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ft({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ft({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ft({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ft({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ft({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(rt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Hc(D=>{D.listener=new o2({context:D})});Xc(D=>{D.listener.dispose()});function a2(D,r){return hr(this,arguments,void 0,function*(g,t,x=2,f=_r().sampleRate){const u=_r(),c=new $a(x,t,f);Lc(c),yield g(c);const s=c.render();Lc(u);const d=yield s;return new Qt(d)})}class el extends wi{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const r=Qe(el.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=r.baseUrl,Object.keys(r.urls).forEach(g=>{this._loadingCount++;const t=r.urls[g];this.add(g,t,this._bufferLoaded.bind(this,r.onload),r.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Wt,onload:Wt,urls:{}}}has(r){return this._buffers.has(r.toString())}get(r){return Tt(this.has(r),`ToneAudioBuffers has no buffer named: ${r}`),this._buffers.get(r.toString())}_bufferLoaded(r){this._loadingCount--,this._loadingCount===0&&r&&r()}get loaded(){return Array.from(this._buffers).every(([r,g])=>g.loaded)}add(r,g,t=Wt,x=Wt){return Us(g)?(this.baseUrl&&g.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(r.toString(),new Qt(this.baseUrl+g,t,x))):this._buffers.set(r.toString(),new Qt(g,t,x)),this}dispose(){return super.dispose(),this._buffers.forEach(r=>r.dispose()),this._buffers.clear(),this}}class Ba extends Rn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(r){return Ji(super._frequencyToUnits(r))}_ticksToUnits(r){return Ji(super._ticksToUnits(r))}_beatsToUnits(r){return Ji(super._beatsToUnits(r))}_secondsToUnits(r){return Ji(super._secondsToUnits(r))}toMidi(){return this.valueOf()}toFrequency(){return Sf(this.toMidi())}transpose(r){return new Ba(this.context,this.toMidi()+r)}}function l2(D,r){return new Ba(_r(),D,r)}class Tr extends Zr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(r){return this._getPPQ()*r}_secondsToUnits(r){return Math.floor(r/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(r){return r}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function u2(D,r){return new Tr(_r(),D,r)}class c2 extends dn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new ls,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(r,g){return this._events.add({callback:r,time:this.toSeconds(g)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(r){return this._events.cancel(this.toSeconds(r)),this}_drawLoop(){const r=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=r;){const g=this._events.shift();g&&r-g.time<=this.expiration&&g.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Hc(D=>{D.draw=new c2({context:D})});Xc(D=>{D.draw.dispose()});class ov extends wi{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(r){Tt(Vt(r.time),"Events must have a time property"),Tt(Vt(r.duration),"Events must have a duration parameter"),r.time=r.time.valueOf();let g=new d2(r.time,r.time+r.duration,r);for(this._root===null?this._root=g:this._root.insert(g),this._length++;g!==null;)g.updateHeight(),g.updateMax(),this._rebalance(g),g=g.parent;return this}remove(r){if(this._root!==null){const g=[];this._root.search(r.time,g);for(const t of g)if(t.event===r){this._removeNode(t),this._length--;break}}return this}get length(){return this._length}cancel(r){return this.forEachFrom(r,g=>this.remove(g)),this}_setRoot(r){this._root=r,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(r,g){r.parent!==null?(r.isLeftChild()?r.parent.left=g:r.parent.right=g,this._rebalance(r.parent)):this._setRoot(g)}_removeNode(r){if(r.left===null&&r.right===null)this._replaceNodeInParent(r,null);else if(r.right===null)this._replaceNodeInParent(r,r.left);else if(r.left===null)this._replaceNodeInParent(r,r.right);else{const g=r.getBalance();let t,x=null;if(g>0)if(r.left.right===null)t=r.left,t.right=r.right,x=t;else{for(t=r.left.right;t.right!==null;)t=t.right;t.parent&&(t.parent.right=t.left,x=t.parent,t.left=r.left,t.right=r.right)}else if(r.right.left===null)t=r.right,t.left=r.left,x=t;else{for(t=r.right.left;t.left!==null;)t=t.left;t.parent&&(t.parent.left=t.right,x=t.parent,t.left=r.left,t.right=r.right)}r.parent!==null?r.isLeftChild()?r.parent.left=t:r.parent.right=t:this._setRoot(t),x&&this._rebalance(x)}r.dispose()}_rotateLeft(r){const g=r.parent,t=r.isLeftChild(),x=r.right;x&&(r.right=x.left,x.left=r),g!==null?t?g.left=x:g.right=x:this._setRoot(x)}_rotateRight(r){const g=r.parent,t=r.isLeftChild(),x=r.left;x&&(r.left=x.right,x.right=r),g!==null?t?g.left=x:g.right=x:this._setRoot(x)}_rebalance(r){const g=r.getBalance();g>1&&r.left?r.left.getBalance()<0?this._rotateLeft(r.left):this._rotateRight(r):g<-1&&r.right&&(r.right.getBalance()>0?this._rotateRight(r.right):this._rotateLeft(r))}get(r){if(this._root!==null){const g=[];if(this._root.search(r,g),g.length>0){let t=g[0];for(let x=1;x<g.length;x++)g[x].low>t.low&&(t=g[x]);return t.event}}return null}forEach(r){if(this._root!==null){const g=[];this._root.traverse(t=>g.push(t)),g.forEach(t=>{t.event&&r(t.event)})}return this}forEachAtTime(r,g){if(this._root!==null){const t=[];this._root.search(r,t),t.forEach(x=>{x.event&&g(x.event)})}return this}forEachFrom(r,g){if(this._root!==null){const t=[];this._root.searchAfter(r,t),t.forEach(x=>{x.event&&g(x.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(r=>r.dispose()),this._root=null,this}}class d2{constructor(r,g,t){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=t,this.low=r,this.high=g,this.max=this.high}insert(r){r.low<=this.low?this.left===null?this.left=r:this.left.insert(r):this.right===null?this.right=r:this.right.insert(r)}search(r,g){r>this.max||(this.left!==null&&this.left.search(r,g),this.low<=r&&this.high>r&&g.push(this),!(this.low>r)&&this.right!==null&&this.right.search(r,g))}searchAfter(r,g){this.low>=r&&(g.push(this),this.left!==null&&this.left.searchAfter(r,g)),this.right!==null&&this.right.searchAfter(r,g)}traverse(r){r(this),this.left!==null&&this.left.traverse(r),this.right!==null&&this.right.traverse(r)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let r=0;return this.left!==null&&this.right!==null?r=this.left.height-this.right.height:this.left!==null?r=this.left.height+1:this.right!==null&&(r=-(this.right.height+1)),r}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(r){this._left=r,r!==null&&(r.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(r){this._right=r,r!==null&&(r.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const h2=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class f2 extends wi{constructor(r){super(),this.name="TimelineValue",this._timeline=new ls({memory:10}),this._initialValue=r}set(r,g){return this._timeline.add({value:r,time:g}),this}get(r){const g=this._timeline.get(r);return g?g.value:this._initialValue}}class hs extends rt{constructor(){super(Qe(hs.getDefaults(),arguments,["context"]))}connect(r,g=0,t=0){return eu(this,r,g,t),this}}class zs extends hs{constructor(){const r=Qe(zs.getDefaults(),arguments,["mapping","length"]);super(r),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,gn(r.mapping)||r.mapping instanceof Float32Array?this.curve=Float32Array.from(r.mapping):$g(r.mapping)&&this.setMap(r.mapping,r.length)}static getDefaults(){return Object.assign(Rt.getDefaults(),{length:1024})}setMap(r,g=1024){const t=new Float32Array(g);for(let x=0,f=g;x<f;x++){const u=x/(f-1)*2-1;t[x]=r(u,x)}return this.curve=t,this}get curve(){return this._shaper.curve}set curve(r){this._shaper.curve=r}get oversample(){return this._shaper.oversample}set oversample(r){const g=["none","2x","4x"].some(t=>t.includes(r));Tt(g,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=r}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class tl extends hs{constructor(){const r=Qe(tl.getDefaults(),arguments,["value"]);super(r),this.name="Pow",this._exponentScaler=this.input=this.output=new zs({context:this.context,mapping:this._expFunc(r.value),length:8192}),this._exponent=r.value}static getDefaults(){return Object.assign(hs.getDefaults(),{value:1})}_expFunc(r){return g=>Math.pow(Math.abs(g),r)}get value(){return this._exponent}set value(r){this._exponent=r,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class no{constructor(r,g){this.id=no._eventId++,this._remainderTime=0;const t=Object.assign(no.getDefaults(),g);this.transport=r,this.callback=t.callback,this._once=t.once,this.time=Math.floor(t.time),this._remainderTime=t.time-this.time}static getDefaults(){return{callback:Wt,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(r){if(this.callback){const g=this.transport.bpm.getDurationOfTicks(1,r);this.callback(r+this._remainderTime*g),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}no._eventId=0;class Of extends no{constructor(r,g){super(r,g),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const t=Object.assign(Of.getDefaults(),g);this.duration=t.duration,this._interval=t.interval,this._nextTick=t.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},no.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(r){this._createEvents(r),super.invoke(r)}_createEvent(){return Ic(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Tr(this.context,this._nextTick).toSeconds()):-1}_createEvents(r){Ic(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Tr(this.context,this._nextTick).toSeconds()))}_restart(r){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const g=this.transport.getTicksAtTime(r);La(g,this.time)&&(this._nextTick=this.floatTime+Math.ceil((g-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Qc extends dn{constructor(){const r=Qe(Qc.getDefaults(),arguments);super(r),this.name="Transport",this._loop=new f2(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new ls,this._repeatedEvents=new ov,this._syncedSignals=[],this._swingAmount=0,this._ppq=r.ppq,this._clock=new Ja({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=r.ppq,this.bpm.setValueAtTime(r.bpm,0),At(this,"bpm"),this._timeSignature=r.timeSignature,this._swingTicks=r.ppq/2}static getDefaults(){return Object.assign(dn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(r,g){if(this._loop.get(r)&&g>=this._loopEnd&&(this.emit("loopEnd",r),this._clock.setTicksAtTime(this._loopStart,r),g=this._loopStart,this.emit("loopStart",r,this._clock.getSecondsAtTime(r)),this.emit("loop",r)),this._swingAmount>0&&g%this._ppq!==0&&g%(this._swingTicks*2)!==0){const t=g%(this._swingTicks*2)/(this._swingTicks*2),x=Math.sin(t*Math.PI)*this._swingAmount;r+=new Tr(this.context,this._swingTicks*2/3).toSeconds()*x}Hh(!0),this._timeline.forEachAtTime(g,t=>t.invoke(r)),Hh(!1)}schedule(r,g){const t=new no(this,{callback:r,time:new Zr(this.context,g).toTicks()});return this._addEvent(t,this._timeline)}scheduleRepeat(r,g,t,x=1/0){const f=new Of(this,{callback:r,duration:new as(this.context,x).toTicks(),interval:new as(this.context,g).toTicks(),time:new Zr(this.context,t).toTicks()});return this._addEvent(f,this._repeatedEvents)}scheduleOnce(r,g){const t=new no(this,{callback:r,once:!0,time:new Zr(this.context,g).toTicks()});return this._addEvent(t,this._timeline)}clear(r){if(this._scheduledEvents.hasOwnProperty(r)){const g=this._scheduledEvents[r.toString()];g.timeline.remove(g.event),g.event.dispose(),delete this._scheduledEvents[r.toString()]}return this}_addEvent(r,g){return this._scheduledEvents[r.id.toString()]={event:r,timeline:g},g.add(r),r.id}cancel(r=0){const g=this.toTicks(r);return this._timeline.forEachFrom(g,t=>this.clear(t.id)),this._repeatedEvents.forEachFrom(g,t=>this.clear(t.id)),this}_bindClockEvents(){this._clock.on("start",(r,g)=>{g=new Tr(this.context,g).toSeconds(),this.emit("start",r,g)}),this._clock.on("stop",r=>{this.emit("stop",r)}),this._clock.on("pause",r=>{this.emit("pause",r)})}get state(){return this._clock.getStateAtTime(this.now())}start(r,g){this.context.resume();let t;return Vt(g)&&(t=this.toTicks(g)),this._clock.start(r,t),this}stop(r){return this._clock.stop(r),this}pause(r){return this._clock.pause(r),this}toggle(r){return r=this.toSeconds(r),this._clock.getStateAtTime(r)!=="started"?this.start(r):this.stop(r),this}get timeSignature(){return this._timeSignature}set timeSignature(r){gn(r)&&(r=r[0]/r[1]*4),this._timeSignature=r}get loopStart(){return new as(this.context,this._loopStart,"i").toSeconds()}set loopStart(r){this._loopStart=this.toTicks(r)}get loopEnd(){return new as(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(r){this._loopEnd=this.toTicks(r)}get loop(){return this._loop.get(this.now())}set loop(r){this._loop.set(r,this.now())}setLoopPoints(r,g){return this.loopStart=r,this.loopEnd=g,this}get swing(){return this._swingAmount}set swing(r){this._swingAmount=r}get swingSubdivision(){return new Tr(this.context,this._swingTicks).toNotation()}set swingSubdivision(r){this._swingTicks=this.toTicks(r)}get position(){const r=this.now(),g=this._clock.getTicksAtTime(r);return new Tr(this.context,g).toBarsBeatsSixteenths()}set position(r){const g=this.toTicks(r);this.ticks=g}get seconds(){return this._clock.seconds}set seconds(r){const g=this.now(),t=this._clock.frequency.timeToTicks(r,g);this.ticks=t}get progress(){if(this.loop){const r=this.now();return(this._clock.getTicksAtTime(r)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(r){if(this._clock.ticks!==r){const g=this.now();if(this.state==="started"){const t=this._clock.getTicksAtTime(g),x=this._clock.frequency.getDurationOfTicks(Math.ceil(t)-t,g),f=g+x;this.emit("stop",f),this._clock.setTicksAtTime(r,f),this.emit("start",f,this._clock.getSecondsAtTime(f))}else this.emit("ticks",g),this._clock.setTicksAtTime(r,g)}}getTicksAtTime(r){return this._clock.getTicksAtTime(r)}getSecondsAtTime(r){return this._clock.getSecondsAtTime(r)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(r){this._clock.frequency.multiplier=r}nextSubdivision(r){if(r=this.toTicks(r),this.state!=="started")return 0;{const g=this.now(),t=this.getTicksAtTime(g),x=r-t%r;return this._clock.nextTickTime(x,g)}}syncSignal(r,g){const t=this.now();let x=this.bpm,f=1/(60/x.getValueAtTime(t)/this.PPQ),u=[];if(r.units==="time"){const s=.015625/f,d=new jt(s),m=new tl(-1),v=new jt(s);x.chain(d,m,v),x=v,f=1/f,u=[d,m,v]}g||(r.getValueAtTime(t)!==0?g=r.getValueAtTime(t)/f:g=0);const c=new jt(g);return x.connect(c),c.connect(r._param),u.push(c),this._syncedSignals.push({initial:r.value,nodes:u,signal:r}),r.value=0,this}unsyncSignal(r){for(let g=this._syncedSignals.length-1;g>=0;g--){const t=this._syncedSignals[g];t.signal===r&&(t.nodes.forEach(x=>x.dispose()),t.signal.value=t.initial,this._syncedSignals.splice(g,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Kl(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Za.mixin(Qc);Hc(D=>{D.transport=new Qc({context:D})});Xc(D=>{D.transport.dispose()});class Fr extends rt{constructor(r){super(r),this.input=void 0,this._state=new Ka("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Wt,this._syncedStop=Wt,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Si({context:this.context,mute:r.mute,volume:r.volume}),this.volume=this._volume.volume,At(this,"volume"),this.onstop=r.onstop}static getDefaults(){return Object.assign(rt.getDefaults(),{mute:!1,onstop:Wt,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}_clampToCurrentTime(r){return this._synced?r:Math.max(r,this.context.currentTime)}start(r,g,t){let x=Xn(r)&&this._synced?this.context.transport.seconds:this.toSeconds(r);if(x=this._clampToCurrentTime(x),!this._synced&&this._state.getValueAtTime(x)==="started")Tt(La(x,this._state.get(x).time),"Start time must be strictly greater than previous start time"),this._state.cancel(x),this._state.setStateAtTime("started",x),this.log("restart",x),this.restart(x,g,t);else if(this.log("start",x),this._state.setStateAtTime("started",x),this._synced){const f=this._state.get(x);f&&(f.offset=this.toSeconds(ws(g,0)),f.duration=t?this.toSeconds(t):void 0);const u=this.context.transport.schedule(c=>{this._start(c,g,t)},x);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>x&&this._syncedStart(this.now(),this.context.transport.seconds)}else _f(this.context),this._start(x,g,t);return this}stop(r){let g=Xn(r)&&this._synced?this.context.transport.seconds:this.toSeconds(r);if(g=this._clampToCurrentTime(g),this._state.getValueAtTime(g)==="started"||Vt(this._state.getNextState("started",g))){if(this.log("stop",g),!this._synced)this._stop(g);else{const t=this.context.transport.schedule(this._stop.bind(this),g);this._scheduled.push(t)}this._state.cancel(g),this._state.setStateAtTime("stopped",g)}return this}restart(r,g,t){return r=this.toSeconds(r),this._state.getValueAtTime(r)==="started"&&(this._state.cancel(r),this._restart(r,g,t)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(r,g)=>{if(La(g,0)){const t=this._state.get(g);if(t&&t.state==="started"&&t.time!==g){const x=g-this.toSeconds(t.time);let f;t.duration&&(f=this.toSeconds(t.duration)-x),this._start(r,this.toSeconds(t.offset)+x,f)}}},this._syncedStop=r=>{const g=this.context.transport.getSecondsAtTime(Math.max(r-this.sampleTime,0));this._state.getValueAtTime(g)==="started"&&this._stop(r)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(r=>this.context.transport.clear(r)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Wt,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class lo extends Ua{constructor(){const r=Qe(lo.getDefaults(),arguments,["url","onload"]);super(r),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,In(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ft({context:this.context,param:this._source.playbackRate,units:"positive",value:r.playbackRate}),this.loop=r.loop,this.loopStart=r.loopStart,this.loopEnd=r.loopEnd,this._buffer=new Qt(r.url,r.onload,r.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ua.getDefaults(),{url:new Qt,loop:!1,loopEnd:0,loopStart:0,onload:Wt,onerror:Wt,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(r){this._fadeIn=r}get fadeOut(){return this._fadeOut}set fadeOut(r){this._fadeOut=r}get curve(){return this._curve}set curve(r){this._curve=r}start(r,g,t,x=1){Tt(this.buffer.loaded,"buffer is either not set or not loaded");const f=this.toSeconds(r);this._startGain(f,x),this.loop?g=ws(g,this.loopStart):g=ws(g,0);let u=Math.max(this.toSeconds(g),0);if(this.loop){const c=this.toSeconds(this.loopEnd)||this.buffer.duration,s=this.toSeconds(this.loopStart),d=c-s;Xh(u,c)&&(u=(u-s)%d+s),Ls(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ic(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(f,u)),Vt(t)){let c=this.toSeconds(t);c=Math.max(c,0),this.stop(f+c)}return this}_stopSource(r){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(r)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(r){this._source.loopStart=this.toSeconds(r)}get loopEnd(){return this._source.loopEnd}set loopEnd(r){this._source.loopEnd=this.toSeconds(r)}get buffer(){return this._buffer}set buffer(r){this._buffer.set(r)}get loop(){return this._source.loop}set loop(r){this._source.loop=r,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class _i extends Fr{constructor(){const r=Qe(_i.getDefaults(),arguments,["type"]);super(r),this.name="Noise",this._source=null,this._playbackRate=r.playbackRate,this.type=r.type,this._fadeIn=r.fadeIn,this._fadeOut=r.fadeOut}static getDefaults(){return Object.assign(Fr.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(r){if(Tt(r in Wy,"Noise: invalid type: "+r),this._type!==r&&(this._type=r,this.state==="started")){const g=this.now();this._stop(g),this._start(g)}}get playbackRate(){return this._playbackRate}set playbackRate(r){this._playbackRate=r,this._source&&(this._source.playbackRate.value=r)}_start(r){const g=Wy[this._type];this._source=new lo({url:g,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(r),Math.random()*(g.duration-.001))}_stop(r){this._source&&(this._source.stop(this.toSeconds(r)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(r){this._fadeIn=r,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(r){this._fadeOut=r,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(r){this._stop(r),this._start(r)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Ea=44100*5,Lh=2,fi={brown:null,pink:null,white:null},Wy={get brown(){if(!fi.brown){const D=[];for(let r=0;r<Lh;r++){const g=new Float32Array(Ea);D[r]=g;let t=0;for(let x=0;x<Ea;x++){const f=Math.random()*2-1;g[x]=(t+.02*f)/1.02,t=g[x],g[x]*=3.5}}fi.brown=new Qt().fromArray(D)}return fi.brown},get pink(){if(!fi.pink){const D=[];for(let r=0;r<Lh;r++){const g=new Float32Array(Ea);D[r]=g;let t,x,f,u,c,s,d;t=x=f=u=c=s=d=0;for(let m=0;m<Ea;m++){const v=Math.random()*2-1;t=.99886*t+v*.0555179,x=.99332*x+v*.0750759,f=.969*f+v*.153852,u=.8665*u+v*.3104856,c=.55*c+v*.5329522,s=-.7616*s-v*.016898,g[m]=t+x+f+u+c+s+d+v*.5362,g[m]*=.11,d=v*.115926}}fi.pink=new Qt().fromArray(D)}return fi.pink},get white(){if(!fi.white){const D=[];for(let r=0;r<Lh;r++){const g=new Float32Array(Ea);D[r]=g;for(let t=0;t<Ea;t++)g[t]=Math.random()*2-1}fi.white=new Qt().fromArray(D)}return fi.white}};class Ul extends rt{constructor(){const r=Qe(Ul.getDefaults(),arguments,["volume"]);super(r),this.name="UserMedia",this._volume=this.output=new Si({context:this.context,volume:r.volume}),this.volume=this._volume.volume,At(this,"volume"),this.mute=r.mute}static getDefaults(){return Object.assign(rt.getDefaults(),{mute:!1,volume:0})}open(r){return hr(this,void 0,void 0,function*(){Tt(Ul.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const g=yield Ul.enumerateDevices();cs(r)?this._device=g[r]:(this._device=g.find(f=>f.label===r||f.deviceId===r),!this._device&&g.length>0&&(this._device=g[0]),Tt(Vt(this._device),`No matching device ${r}`));const t={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(t.audio.deviceId=this._device.deviceId);const x=yield navigator.mediaDevices.getUserMedia(t);if(!this._stream){this._stream=x;const f=this.context.createMediaStreamSource(x);In(f,this.output),this._mediaStream=f}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(r=>{r.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return hr(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(g=>g.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Vt(navigator.mediaDevices)&&Vt(navigator.mediaDevices.getUserMedia)}}function Xo(D,r){return hr(this,void 0,void 0,function*(){const g=r/D.context.sampleRate,t=new $a(1,g,D.context.sampleRate);return new D.constructor(Object.assign(D.get(),{frequency:2/g,detune:0,context:t})).toDestination().start(0),(yield t.render()).getChannelData(0)})}class tu extends Ua{constructor(){const r=Qe(tu.getDefaults(),arguments,["frequency","type"]);super(r),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],In(this._oscillator,this._gainNode),this.type=r.type,this.frequency=new Ft({context:this.context,param:this._oscillator.frequency,units:"frequency",value:r.frequency}),this.detune=new Ft({context:this.context,param:this._oscillator.detune,units:"cents",value:r.detune}),At(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ua.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(r){const g=this.toSeconds(r);return this.log("start",g),this._startGain(g),this._oscillator.start(g),this}_stopSource(r){this._oscillator.stop(r)}setPeriodicWave(r){return this._oscillator.setPeriodicWave(r),this}get type(){return this._oscillator.type}set type(r){this._oscillator.type=r}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class kr extends Fr{constructor(){const r=Qe(kr.getDefaults(),arguments,["frequency","type"]);super(r),this.name="Oscillator",this._oscillator=null,this.frequency=new Rt({context:this.context,units:"frequency",value:r.frequency}),At(this,"frequency"),this.detune=new Rt({context:this.context,units:"cents",value:r.detune}),At(this,"detune"),this._partials=r.partials,this._partialCount=r.partialCount,this._type=r.type,r.partialCount&&r.type!=="custom"&&(this._type=this.baseType+r.partialCount.toString()),this.phase=r.phase}static getDefaults(){return Object.assign(Fr.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(r){const g=this.toSeconds(r),t=new tu({context:this.context,onended:()=>this.onstop(this)});this._oscillator=t,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(g)}_stop(r){const g=this.toSeconds(r);this._oscillator&&this._oscillator.stop(g)}_restart(r){const g=this.toSeconds(r);return this.log("restart",g),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(g),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return kr._periodicWaveCache.find(g=>g.phase===this._phase&&Zw(g.partials,this._partials));{const r=kr._periodicWaveCache.find(g=>g.type===this._type&&g.phase===this._phase);return this._partialCount=r?r.partialCount:this._partialCount,r}}get type(){return this._type}set type(r){this._type=r;const g=["sine","square","sawtooth","triangle"].indexOf(r)!==-1;if(this._phase===0&&g)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=r);else{const t=this._getCachedPeriodicWave();if(Vt(t)){const{partials:x,wave:f}=t;this._wave=f,this._partials=x,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[x,f]=this._getRealImaginary(r,this._phase),u=this.context.createPeriodicWave(x,f);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),kr._periodicWaveCache.push({imag:f,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:x,type:this._type,wave:this._wave}),kr._periodicWaveCache.length>100&&kr._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(r){this.partialCount&&this._type!=="custom"&&r!=="custom"?this.type=r+this.partialCount:this.type=r}get partialCount(){return this._partialCount}set partialCount(r){pn(r,0);let g=this._type;const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(t&&(g=t[1]),this._type!=="custom")r===0?this.type=g:this.type=g+r.toString();else{const x=new Float32Array(r);this._partials.forEach((f,u)=>x[u]=f),this._partials=Array.from(x),this.type=this._type}}_getRealImaginary(r,g){let x=2048;const f=new Float32Array(x),u=new Float32Array(x);let c=1;if(r==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,x=c,this._partials.length===0)return[f,u]}else{const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(r);s?(c=parseInt(s[2],10)+1,this._partialCount=parseInt(s[2],10),r=s[1],c=Math.max(c,2),x=c):this._partialCount=0,this._partials=[]}for(let s=1;s<x;++s){const d=2/(s*Math.PI);let m;switch(r){case"sine":m=s<=c?1:0,this._partials[s-1]=m;break;case"square":m=s&1?2*d:0,this._partials[s-1]=m;break;case"sawtooth":m=d*(s&1?1:-1),this._partials[s-1]=m;break;case"triangle":s&1?m=2*(d*d)*(s-1>>1&1?-1:1):m=0,this._partials[s-1]=m;break;case"custom":m=this._partials[s-1];break;default:throw new TypeError("Oscillator: invalid type: "+r)}m!==0?(f[s]=-m*Math.sin(g*s),u[s]=m*Math.cos(g*s)):(f[s]=0,u[s]=0)}return[f,u]}_inverseFFT(r,g,t){let x=0;const f=r.length;for(let u=0;u<f;u++)x+=r[u]*Math.cos(u*t)+g[u]*Math.sin(u*t);return x}getInitialValue(){const[r,g]=this._getRealImaginary(this._type,0);let t=0;const x=Math.PI*2,f=32;for(let u=0;u<f;u++)t=Math.max(this._inverseFFT(r,g,u/f*x),t);return Ho(-this._inverseFFT(r,g,this._phase)/t,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(r){this._partials=r,this._partialCount=this._partials.length,r.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(r){this._phase=r*Math.PI/180,this.type=this._type}asArray(){return hr(this,arguments,void 0,function*(r=1024){return Xo(this,r)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}kr._periodicWaveCache=[];class $c extends hs{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new zs({context:this.context,mapping:r=>(r+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Er extends Rt{constructor(){const r=Qe(Er.getDefaults(),arguments,["value"]);super(r),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new jt({context:this.context,minValue:r.minValue,maxValue:r.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(r.value,0)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class ru extends Fr{constructor(){const r=Qe(ru.getDefaults(),arguments,["frequency","type","modulationType"]);super(r),this.name="AMOscillator",this._modulationScale=new $c({context:this.context}),this._modulationNode=new jt({context:this.context}),this._carrier=new kr({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase,type:r.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new kr({context:this.context,phase:r.phase,type:r.modulationType}),this.harmonicity=new Er({context:this.context,units:"positive",value:r.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),At(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(kr.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(r){this._modulator.start(r),this._carrier.start(r)}_stop(r){this._modulator.stop(r),this._carrier.stop(r)}_restart(r){this._modulator.restart(r),this._carrier.restart(r)}get type(){return this._carrier.type}set type(r){this._carrier.type=r}get baseType(){return this._carrier.baseType}set baseType(r){this._carrier.baseType=r}get partialCount(){return this._carrier.partialCount}set partialCount(r){this._carrier.partialCount=r}get modulationType(){return this._modulator.type}set modulationType(r){this._modulator.type=r}get phase(){return this._carrier.phase}set phase(r){this._carrier.phase=r,this._modulator.phase=r}get partials(){return this._carrier.partials}set partials(r){this._carrier.partials=r}asArray(){return hr(this,arguments,void 0,function*(r=1024){return Xo(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class rl extends Fr{constructor(){const r=Qe(rl.getDefaults(),arguments,["frequency","type","modulationType"]);super(r),this.name="FMOscillator",this._modulationNode=new jt({context:this.context,gain:0}),this._carrier=new kr({context:this.context,detune:r.detune,frequency:0,onstop:()=>this.onstop(this),phase:r.phase,type:r.type}),this.detune=this._carrier.detune,this.frequency=new Rt({context:this.context,units:"frequency",value:r.frequency}),this._modulator=new kr({context:this.context,phase:r.phase,type:r.modulationType}),this.harmonicity=new Er({context:this.context,units:"positive",value:r.harmonicity}),this.modulationIndex=new Er({context:this.context,units:"positive",value:r.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),At(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(kr.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(r){this._modulator.start(r),this._carrier.start(r)}_stop(r){this._modulator.stop(r),this._carrier.stop(r)}_restart(r){return this._modulator.restart(r),this._carrier.restart(r),this}get type(){return this._carrier.type}set type(r){this._carrier.type=r}get baseType(){return this._carrier.baseType}set baseType(r){this._carrier.baseType=r}get partialCount(){return this._carrier.partialCount}set partialCount(r){this._carrier.partialCount=r}get modulationType(){return this._modulator.type}set modulationType(r){this._modulator.type=r}get phase(){return this._carrier.phase}set phase(r){this._carrier.phase=r,this._modulator.phase=r}get partials(){return this._carrier.partials}set partials(r){this._carrier.partials=r}asArray(){return hr(this,arguments,void 0,function*(r=1024){return Xo(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class nl extends Fr{constructor(){const r=Qe(nl.getDefaults(),arguments,["frequency","width"]);super(r),this.name="PulseOscillator",this._widthGate=new jt({context:this.context,gain:0}),this._thresh=new zs({context:this.context,mapping:g=>g<=0?-1:1}),this.width=new Rt({context:this.context,units:"audioRange",value:r.width}),this._triangle=new kr({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),At(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Fr.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(r){r=this.toSeconds(r),this._triangle.start(r),this._widthGate.gain.setValueAtTime(1,r)}_stop(r){r=this.toSeconds(r),this._triangle.stop(r),this._widthGate.gain.cancelScheduledValues(r),this._widthGate.gain.setValueAtTime(0,r)}_restart(r){this._triangle.restart(r),this._widthGate.gain.cancelScheduledValues(r),this._widthGate.gain.setValueAtTime(1,r)}get phase(){return this._triangle.phase}set phase(r){this._triangle.phase=r}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(r){this._triangle.type=r}asArray(){return hr(this,arguments,void 0,function*(r=1024){return Xo(this,r)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class nu extends Fr{constructor(){const r=Qe(nu.getDefaults(),arguments,["frequency","type","spread"]);super(r),this.name="FatOscillator",this._oscillators=[],this.frequency=new Rt({context:this.context,units:"frequency",value:r.frequency}),this.detune=new Rt({context:this.context,units:"cents",value:r.detune}),this._spread=r.spread,this._type=r.type,this._phase=r.phase,this._partials=r.partials,this._partialCount=r.partialCount,this.count=r.count,At(this,["frequency","detune"])}static getDefaults(){return Object.assign(kr.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(r){r=this.toSeconds(r),this._forEach(g=>g.start(r))}_stop(r){r=this.toSeconds(r),this._forEach(g=>g.stop(r))}_restart(r){this._forEach(g=>g.restart(r))}_forEach(r){for(let g=0;g<this._oscillators.length;g++)r(this._oscillators[g],g)}get type(){return this._type}set type(r){this._type=r,this._forEach(g=>g.type=r)}get spread(){return this._spread}set spread(r){if(this._spread=r,this._oscillators.length>1){const g=-r/2,t=r/(this._oscillators.length-1);this._forEach((x,f)=>x.detune.value=g+t*f)}}get count(){return this._oscillators.length}set count(r){if(pn(r,1),this._oscillators.length!==r){this._forEach(g=>g.dispose()),this._oscillators=[];for(let g=0;g<r;g++){const t=new kr({context:this.context,volume:-6-r*1.1,type:this._type,phase:this._phase+g/r*360,partialCount:this._partialCount,onstop:g===0?()=>this.onstop(this):Wt});this.type==="custom"&&(t.partials=this._partials),this.frequency.connect(t.frequency),this.detune.connect(t.detune),t.detune.overridden=!1,t.connect(this.output),this._oscillators[g]=t}this.spread=this._spread,this.state==="started"&&this._forEach(g=>g.start())}}get phase(){return this._phase}set phase(r){this._phase=r,this._forEach((g,t)=>g.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(r){this._forEach(g=>g.baseType=r),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(r){this._partials=r,this._partialCount=this._partials.length,r.length&&(this._type="custom",this._forEach(g=>g.partials=r))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(r){this._partialCount=r,this._forEach(g=>g.partialCount=r),this._type=this._oscillators[0].type}asArray(){return hr(this,arguments,void 0,function*(r=1024){return Xo(this,r)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(r=>r.dispose()),this}}class su extends Fr{constructor(){const r=Qe(su.getDefaults(),arguments,["frequency","modulationFrequency"]);super(r),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Er({context:this.context,value:2}),this._pulse=new nl({context:this.context,frequency:r.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new kr({context:this.context,detune:r.detune,frequency:r.frequency,onstop:()=>this.onstop(this),phase:r.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),At(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Fr.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(r){r=this.toSeconds(r),this._modulator.start(r),this._pulse.start(r)}_stop(r){r=this.toSeconds(r),this._modulator.stop(r),this._pulse.stop(r)}_restart(r){this._modulator.restart(r),this._pulse.restart(r)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(r){this._modulator.phase=r}asArray(){return hr(this,arguments,void 0,function*(r=1024){return Xo(this,r)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Hy={am:ru,fat:nu,fm:rl,oscillator:kr,pulse:nl,pwm:su};class bi extends Fr{constructor(){const r=Qe(bi.getDefaults(),arguments,["frequency","type"]);super(r),this.name="OmniOscillator",this.frequency=new Rt({context:this.context,units:"frequency",value:r.frequency}),this.detune=new Rt({context:this.context,units:"cents",value:r.detune}),At(this,["frequency","detune"]),this.set(r)}static getDefaults(){return Object.assign(kr.getDefaults(),rl.getDefaults(),ru.getDefaults(),nu.getDefaults(),nl.getDefaults(),su.getDefaults())}_start(r){this._oscillator.start(r)}_stop(r){this._oscillator.stop(r)}_restart(r){return this._oscillator.restart(r),this}get type(){let r="";return["am","fm","fat"].some(g=>this._sourceType===g)&&(r=this._sourceType),r+this._oscillator.type}set type(r){r.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(2)):r.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(2)):r.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=r.substr(3)):r==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):r==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=r)}get partials(){return this._oscillator.partials}set partials(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=r)}get partialCount(){return this._oscillator.partialCount}set partialCount(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=r)}set(r){return Reflect.has(r,"type")&&r.type&&(this.type=r.type),super.set(r),this}_createNewOscillator(r){if(r!==this._sourceType){this._sourceType=r;const g=Hy[r],t=this.now();if(this._oscillator){const x=this._oscillator;x.stop(t),this.context.setTimeout(()=>x.dispose(),this.blockTime)}this._oscillator=new g({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(t)}}get phase(){return this._oscillator.phase}set phase(r){this._oscillator.phase=r}get sourceType(){return this._sourceType}set sourceType(r){let g="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(g=this._oscillator.type),r==="fm"?this.type="fm"+g:r==="am"?this.type="am"+g:r==="fat"?this.type="fat"+g:r==="oscillator"?this.type=g:r==="pulse"?this.type="pulse":r==="pwm"&&(this.type="pwm")}_getOscType(r,g){return r instanceof Hy[g]}get baseType(){return this._oscillator.baseType}set baseType(r){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&r!=="pulse"&&r!=="pwm"&&(this._oscillator.baseType=r)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(r){this._getOscType(this._oscillator,"fat")&&cs(r)&&(this._oscillator.count=r)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(r){this._getOscType(this._oscillator,"fat")&&cs(r)&&(this._oscillator.spread=r)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(r){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Us(r)&&(this._oscillator.modulationType=r)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return hr(this,arguments,void 0,function*(r=1024){return Xo(this,r)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Yo extends Rt{constructor(){super(Qe(Yo.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new jt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ds(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class xi extends hs{constructor(){const r=Qe(xi.getDefaults(),arguments,["min","max"]);super(r),this.name="Scale",this._mult=this.input=new Er({context:this.context,value:r.max-r.min}),this._add=this.output=new Yo({context:this.context,value:r.min}),this._min=r.min,this._max=r.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(hs.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(r){this._min=r,this._setRange()}get max(){return this._max}set max(r){this._max=r,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Kc extends hs{constructor(){super(Qe(Kc.getDefaults(),arguments)),this.name="Zero",this._gain=new jt({context:this.context}),this.output=this._gain,this.input=void 0,In(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Tf(this.context.getConstant(0),this._gain),this}}class Dn extends rt{constructor(){const r=Qe(Dn.getDefaults(),arguments,["frequency","min","max"]);super(r),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Ft.prototype._fromType,this._toType=Ft.prototype._toType,this._is=Ft.prototype._is,this._clampValue=Ft.prototype._clampValue,this._oscillator=new kr(r),this.frequency=this._oscillator.frequency,this._amplitudeGain=new jt({context:this.context,gain:r.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Rt({context:this.context,units:"audioRange",value:0}),this._zeros=new Kc({context:this.context}),this._a2g=new $c({context:this.context}),this._scaler=this.output=new xi({context:this.context,max:r.max,min:r.min}),this.units=r.units,this.min=r.min,this.max=r.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),At(this,["amplitude","frequency"]),this.phase=r.phase}static getDefaults(){return Object.assign(kr.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(r){return r=this.toSeconds(r),this._stoppedSignal.setValueAtTime(0,r),this._oscillator.start(r),this}stop(r){return r=this.toSeconds(r),this._stoppedSignal.setValueAtTime(this._stoppedValue,r),this._oscillator.stop(r),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(r){r=this._fromType(r),this._scaler.min=r}get max(){return this._toType(this._scaler.max)}set max(r){r=this._fromType(r),this._scaler.max=r}get type(){return this._oscillator.type}set type(r){this._oscillator.type=r,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(r){this._oscillator.partials=r,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(r){this._oscillator.phase=r,this._setStoppedValue()}get units(){return this._units}set units(r){const g=this.min,t=this.max;this._units=r,this.min=g,this.max=t}get state(){return this._oscillator.state}connect(r,g,t){return(r instanceof Ft||r instanceof Rt)&&(this.convert=r.convert,this.units=r.units),eu(this,r,g,t),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function av(D,r=1/0){const g=new WeakMap;return function(t,x){Reflect.defineProperty(t,x,{configurable:!0,enumerable:!0,get:function(){return g.get(this)},set:function(f){pn(f,D,r),g.set(this,f)}})}}function ji(D,r=1/0){const g=new WeakMap;return function(t,x){Reflect.defineProperty(t,x,{configurable:!0,enumerable:!0,get:function(){return g.get(this)},set:function(f){pn(this.toSeconds(f),D,r),g.set(this,f)}})}}class sl extends Fr{constructor(){const r=Qe(sl.getDefaults(),arguments,["url","onload"]);super(r),this.name="Player",this._activeSources=new Set,this._buffer=new Qt({onload:this._onload.bind(this,r.onload),onerror:r.onerror,reverse:r.reverse,url:r.url}),this.autostart=r.autostart,this._loop=r.loop,this._loopStart=r.loopStart,this._loopEnd=r.loopEnd,this._playbackRate=r.playbackRate,this.fadeIn=r.fadeIn,this.fadeOut=r.fadeOut}static getDefaults(){return Object.assign(Fr.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Wt,onerror:Wt,playbackRate:1,reverse:!1})}load(r){return hr(this,void 0,void 0,function*(){return yield this._buffer.load(r),this._onload(),this})}_onload(r=Wt){r(),this.autostart&&this.start()}_onSourceEnd(r){this.onstop(this),this._activeSources.delete(r),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(r,g,t){return super.start(r,g,t),this}_start(r,g,t){this._loop?g=ws(g,this._loopStart):g=ws(g,0);const x=this.toSeconds(g),f=t;t=ws(t,Math.max(this._buffer.duration-x,0));let u=this.toSeconds(t);u=u/this._playbackRate,r=this.toSeconds(r);const c=new lo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(r+u),this._state.setStateAtTime("stopped",r+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&Xn(f)?c.start(r,x):c.start(r,x,u-this.toSeconds(this.fadeOut))}_stop(r){const g=this.toSeconds(r);this._activeSources.forEach(t=>t.stop(g))}restart(r,g,t){return super.restart(r,g,t),this}_restart(r,g,t){var x;(x=[...this._activeSources].pop())===null||x===void 0||x.stop(r),this._start(r,g,t)}seek(r,g){const t=this.toSeconds(g);if(this._state.getValueAtTime(t)==="started"){const x=this.toSeconds(r);this._stop(t),this._start(t,x)}return this}setLoopPoints(r,g){return this.loopStart=r,this.loopEnd=g,this}get loopStart(){return this._loopStart}set loopStart(r){this._loopStart=r,this.buffer.loaded&&pn(this.toSeconds(r),0,this.buffer.duration),this._activeSources.forEach(g=>{g.loopStart=r})}get loopEnd(){return this._loopEnd}set loopEnd(r){this._loopEnd=r,this.buffer.loaded&&pn(this.toSeconds(r),0,this.buffer.duration),this._activeSources.forEach(g=>{g.loopEnd=r})}get buffer(){return this._buffer}set buffer(r){this._buffer.set(r)}get loop(){return this._loop}set loop(r){if(this._loop!==r&&(this._loop=r,this._activeSources.forEach(g=>{g.loop=r}),r)){const g=this._state.getNextState("stopped",this.now());g&&this._state.cancel(g.time)}}get playbackRate(){return this._playbackRate}set playbackRate(r){this._playbackRate=r;const g=this.now(),t=this._state.getNextState("stopped",g);t&&t.implicitEnd&&(this._state.cancel(t.time),this._activeSources.forEach(x=>x.cancelStop())),this._activeSources.forEach(x=>{x.playbackRate.setValueAtTime(r,g)})}get reverse(){return this._buffer.reverse}set reverse(r){this._buffer.reverse=r}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(r=>r.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Vs([ji(0)],sl.prototype,"fadeIn",void 0);Vs([ji(0)],sl.prototype,"fadeOut",void 0);class Af extends rt{constructor(){const r=Qe(Af.getDefaults(),arguments,["urls","onload"],"urls");super(r),this.name="Players",this.input=void 0,this._players=new Map,this._volume=this.output=new Si({context:this.context,volume:r.volume}),this.volume=this._volume.volume,At(this,"volume"),this._buffers=new el({urls:r.urls,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),this.mute=r.mute,this._fadeIn=r.fadeIn,this._fadeOut=r.fadeOut}static getDefaults(){return Object.assign(Fr.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Wt,onerror:Wt,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}get fadeIn(){return this._fadeIn}set fadeIn(r){this._fadeIn=r,this._players.forEach(g=>{g.fadeIn=r})}get fadeOut(){return this._fadeOut}set fadeOut(r){this._fadeOut=r,this._players.forEach(g=>{g.fadeOut=r})}get state(){return Array.from(this._players).some(([g,t])=>t.state==="started")?"started":"stopped"}has(r){return this._buffers.has(r)}player(r){if(Tt(this.has(r),`No Player with the name ${r} exists on this object`),!this._players.has(r)){const g=new sl({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(r)}).connect(this.output);this._players.set(r,g)}return this._players.get(r)}get loaded(){return this._buffers.loaded}add(r,g,t){return Tt(!this._buffers.has(r),"A buffer with that name already exists on this object"),this._buffers.add(r,g,t),this}stopAll(r){return this._players.forEach(g=>g.stop(r)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(r=>r.dispose()),this._buffers.dispose(),this}}class Pf extends Fr{constructor(){const r=Qe(Pf.getDefaults(),arguments,["url","onload"]);super(r),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[],this.buffer=new Qt({onload:r.onload,onerror:r.onerror,reverse:r.reverse,url:r.url}),this._clock=new Ja({context:this.context,callback:this._tick.bind(this),frequency:1/r.grainSize}),this._playbackRate=r.playbackRate,this._grainSize=r.grainSize,this._overlap=r.overlap,this.detune=r.detune,this.overlap=r.overlap,this.loop=r.loop,this.playbackRate=r.playbackRate,this.grainSize=r.grainSize,this.loopStart=r.loopStart,this.loopEnd=r.loopEnd,this.reverse=r.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Fr.getDefaults(),{onload:Wt,onerror:Wt,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(r,g,t){g=ws(g,0),g=this.toSeconds(g),r=this.toSeconds(r);const x=1/this._clock.frequency.getValueAtTime(r);this._clock.start(r,g/x),t&&this.stop(r+this.toSeconds(t))}restart(r,g,t){return super.restart(r,g,t),this}_restart(r,g,t){this._stop(r),this._start(r,g,t)}_stop(r){this._clock.stop(r)}_onstop(r){this._activeSources.forEach(g=>{g.fadeOut=0,g.stop(r)}),this.onstop(this)}_tick(r){const g=this._clock.getTicksAtTime(r),t=g*this._grainSize;if(this.log("offset",t),!this.loop&&t>this.buffer.duration){this.stop(r);return}const x=t<this._overlap?0:this._overlap,f=new lo({context:this.context,url:this.buffer,fadeIn:x,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Fa(this.detune/100)}).connect(this.output);f.start(r,this._grainSize*g),f.stop(r+this._grainSize/this.playbackRate),this._activeSources.push(f),f.onended=()=>{const u=this._activeSources.indexOf(f);u!==-1&&this._activeSources.splice(u,1)}}get playbackRate(){return this._playbackRate}set playbackRate(r){pn(r,.001),this._playbackRate=r,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(r){this.buffer.loaded&&pn(this.toSeconds(r),0,this.buffer.duration),this._loopStart=this.toSeconds(r)}get loopEnd(){return this._loopEnd}set loopEnd(r){this.buffer.loaded&&pn(this.toSeconds(r),0,this.buffer.duration),this._loopEnd=this.toSeconds(r)}get reverse(){return this.buffer.reverse}set reverse(r){this.buffer.reverse=r}get grainSize(){return this._grainSize}set grainSize(r){this._grainSize=this.toSeconds(r),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(r){const g=this.toSeconds(r);pn(g,0),this._overlap=g}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(r=>r.dispose()),this}}class lv extends hs{constructor(){super(...arguments),this.name="Abs",this._abs=new zs({context:this.context,mapping:r=>Math.abs(r)<.001?0:Math.abs(r)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class uv extends hs{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new zs({context:this.context,mapping:r=>Math.abs(r)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Rf extends hs{constructor(){super(...arguments),this.name="Negate",this._multiply=new Er({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Zo extends Rt{constructor(){super(Qe(Zo.getDefaults(),arguments,["value"])),this.override=!1,this.name="Subtract",this._sum=new jt({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Rf({context:this.context}),this.subtrahend=this._param,ds(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class Jc extends hs{constructor(){super(Qe(Jc.getDefaults(),arguments)),this.name="GreaterThanZero",this._thresh=this.output=new zs({context:this.context,length:127,mapping:r=>r<=0?0:1}),this._scale=this.input=new Er({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class ed extends Rt{constructor(){const r=Qe(ed.getDefaults(),arguments,["value"]);super(r),this.name="GreaterThan",this.override=!1,this._subtract=this.input=new Zo({context:this.context,value:r.value}),this._gtz=this.output=new Jc({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,At(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Rt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class td extends xi{constructor(){const r=Qe(td.getDefaults(),arguments,["min","max","exponent"]);super(r),this.name="ScaleExp",this.input=this._exp=new tl({context:this.context,value:r.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(xi.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(r){this._exp.value=r}dispose(){return super.dispose(),this._exp.dispose(),this}}class p2 extends Rt{constructor(){const r=Qe(Rt.getDefaults(),arguments,["value","units"]);super(r),this.name="SyncedSignal",this.override=!1,this._lastVal=r.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new Zc({context:this.context,offset:r.value,units:r.units}).start(0),this.setValueAtTime(r.value,0)}_onTick(r){const g=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==g&&(this._lastVal=g,this._constantSource.offset.setValueAtTime(g,r))}_anchorValue(r){const g=super.getValueAtTime(this.context.transport.seconds);this._lastVal=g,this._constantSource.offset.cancelAndHoldAtTime(r),this._constantSource.offset.setValueAtTime(g,r)}getValueAtTime(r){const g=new Zr(this.context,r).toSeconds();return super.getValueAtTime(g)}setValueAtTime(r,g){const t=new Zr(this.context,g).toSeconds();return super.setValueAtTime(r,t),this}linearRampToValueAtTime(r,g){const t=new Zr(this.context,g).toSeconds();return super.linearRampToValueAtTime(r,t),this}exponentialRampToValueAtTime(r,g){const t=new Zr(this.context,g).toSeconds();return super.exponentialRampToValueAtTime(r,t),this}setTargetAtTime(r,g,t){const x=new Zr(this.context,g).toSeconds();return super.setTargetAtTime(r,x,t),this}cancelScheduledValues(r){const g=new Zr(this.context,r).toSeconds();return super.cancelScheduledValues(g),this}setValueCurveAtTime(r,g,t,x){const f=new Zr(this.context,g).toSeconds();return t=this.toSeconds(t),super.setValueCurveAtTime(r,f,t,x),this}cancelAndHoldAtTime(r){const g=new Zr(this.context,r).toSeconds();return super.cancelAndHoldAtTime(g),this}setRampPoint(r){const g=new Zr(this.context,r).toSeconds();return super.setRampPoint(g),this}exponentialRampTo(r,g,t){const x=new Zr(this.context,t).toSeconds();return super.exponentialRampTo(r,g,x),this}linearRampTo(r,g,t){const x=new Zr(this.context,t).toSeconds();return super.linearRampTo(r,g,x),this}targetRampTo(r,g,t){const x=new Zr(this.context,t).toSeconds();return super.targetRampTo(r,g,x),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class vn extends rt{constructor(){const r=Qe(vn.getDefaults(),arguments,["attack","decay","sustain","release"]);super(r),this.name="Envelope",this._sig=new Rt({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=r.attack,this.decay=r.decay,this.sustain=r.sustain,this.release=r.release,this.attackCurve=r.attackCurve,this.releaseCurve=r.releaseCurve,this.decayCurve=r.decayCurve}static getDefaults(){return Object.assign(rt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(r,g){if(Us(r))return r;{let t;for(t in vc)if(vc[t][g]===r)return t;return r}}_setCurve(r,g,t){if(Us(t)&&Reflect.has(vc,t)){const x=vc[t];gi(x)?r!=="_decayCurve"&&(this[r]=x[g]):this[r]=x}else if(gn(t)&&r!=="_decayCurve")this[r]=t;else throw new Error("Envelope: invalid curve: "+t)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(r){this._setCurve("_attackCurve","In",r)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(r){this._setCurve("_releaseCurve","Out",r)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(r){this._setCurve("_decayCurve","Out",r)}triggerAttack(r,g=1){this.log("triggerAttack",r,g),r=this.toSeconds(r);let x=this.toSeconds(this.attack);const f=this.toSeconds(this.decay),u=this.getValueAtTime(r);if(u>0){const c=1/x;x=(1-u)/c}if(x<this.sampleTime)this._sig.cancelScheduledValues(r),this._sig.setValueAtTime(g,r);else if(this._attackCurve==="linear")this._sig.linearRampTo(g,x,r);else if(this._attackCurve==="exponential")this._sig.targetRampTo(g,x,r);else{this._sig.cancelAndHoldAtTime(r);let c=this._attackCurve;for(let s=1;s<c.length;s++)if(c[s-1]<=u&&u<=c[s]){c=this._attackCurve.slice(s),c[0]=u;break}this._sig.setValueCurveAtTime(c,r,x,g)}if(f&&this.sustain<1){const c=g*this.sustain,s=r+x;this.log("decay",s),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(c,f+s):this._sig.exponentialApproachValueAtTime(c,s,f)}return this}triggerRelease(r){this.log("triggerRelease",r),r=this.toSeconds(r);const g=this.getValueAtTime(r);if(g>0){const t=this.toSeconds(this.release);t<this.sampleTime?this._sig.setValueAtTime(0,r):this._releaseCurve==="linear"?this._sig.linearRampTo(0,t,r):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,t,r):(Tt(gn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(r),this._sig.setValueCurveAtTime(this._releaseCurve,r,t,g))}return this}getValueAtTime(r){return this._sig.getValueAtTime(r)}triggerAttackRelease(r,g,t=1){return g=this.toSeconds(g),this.triggerAttack(g,t),this.triggerRelease(g+this.toSeconds(r)),this}cancel(r){return this._sig.cancelScheduledValues(this.toSeconds(r)),this}connect(r,g=0,t=0){return eu(this,r,g,t),this}asArray(){return hr(this,arguments,void 0,function*(r=1024){const g=r/this.context.sampleRate,t=new $a(1,g,this.context.sampleRate),x=this.toSeconds(this.attack)+this.toSeconds(this.decay),f=x+this.toSeconds(this.release),u=f*.1,c=f+u,s=new this.constructor(Object.assign(this.get(),{attack:g*this.toSeconds(this.attack)/c,decay:g*this.toSeconds(this.decay)/c,release:g*this.toSeconds(this.release)/c,context:t}));return s._sig.toDestination(),s.triggerAttackRelease(g*(x+u)/c,0),(yield t.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Vs([ji(0)],vn.prototype,"attack",void 0);Vs([ji(0)],vn.prototype,"decay",void 0);Vs([av(0,1)],vn.prototype,"sustain",void 0);Vs([ji(0)],vn.prototype,"release",void 0);const vc=(()=>{let r,g;const t=[];for(r=0;r<128;r++)t[r]=Math.sin(r/127*(Math.PI/2));const x=[],f=6.4;for(r=0;r<127;r++){g=r/127;const i=Math.sin(g*(Math.PI*2)*f-Math.PI/2)+1;x[r]=i/10+g*.83}x[127]=1;const u=[],c=5;for(r=0;r<128;r++)u[r]=Math.ceil(r/127*c)/c;const s=[];for(r=0;r<128;r++)g=r/127,s[r]=.5*(1-Math.cos(Math.PI*g));const d=[];for(r=0;r<128;r++){g=r/127;const i=Math.pow(g,3)*4+.2,n=Math.cos(i*Math.PI*2*g);d[r]=Math.abs(n*(1-g))}function m(i){const n=new Array(i.length);for(let a=0;a<i.length;a++)n[a]=1-i[a];return n}function v(i){return i.slice(0).reverse()}return{bounce:{In:m(d),Out:d},cosine:{In:t,Out:v(t)},exponential:"exponential",linear:"linear",ripple:{In:x,Out:m(x)},sine:{In:s,Out:m(s)},step:{In:u,Out:m(u)}}})();class Ss extends rt{constructor(){const r=Qe(Ss.getDefaults(),arguments);super(r),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=g=>this._original_triggerRelease(g),this._volume=this.output=new Si({context:this.context,volume:r.volume}),this.volume=this._volume.volume,At(this,"volume")}static getDefaults(){return Object.assign(rt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let r=!1;return this._synced||(this._synced=!0,r=!0),r}_syncMethod(r,g){const t=this["_original_"+r]=this[r];this[r]=(...x)=>{const f=x[g],u=this.context.transport.schedule(c=>{x[g]=c,t.apply(this,x)},f);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(r=>this.context.transport.clear(r)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(r,g,t,x){const f=this.toSeconds(t),u=this.toSeconds(g);return this.triggerAttack(r,f,x),this.triggerRelease(f+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class yn extends Ss{constructor(){const r=Qe(yn.getDefaults(),arguments);super(r),this.portamento=r.portamento,this.onsilence=r.onsilence}static getDefaults(){return Object.assign(Ss.getDefaults(),{detune:0,onsilence:Wt,portamento:0})}triggerAttack(r,g,t=1){this.log("triggerAttack",r,g,t);const x=this.toSeconds(g);return this._triggerEnvelopeAttack(x,t),this.setNote(r,x),this}triggerRelease(r){this.log("triggerRelease",r);const g=this.toSeconds(r);return this._triggerEnvelopeRelease(g),this}setNote(r,g){const t=this.toSeconds(g),x=r instanceof Rn?r.toFrequency():r;if(this.portamento>0&&this.getLevelAtTime(t)>.05){const f=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(x,f,t)}else this.frequency.setValueAtTime(x,t);return this}}Vs([ji(0)],yn.prototype,"portamento",void 0);class Qo extends vn{constructor(){super(Qe(Qo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new jt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class so extends yn{constructor(){const r=Qe(so.getDefaults(),arguments);super(r),this.name="Synth",this.oscillator=new bi(Object.assign({context:this.context,detune:r.detune,onstop:()=>this.onsilence(this)},r.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Qo(Object.assign({context:this.context},r.envelope)),this.oscillator.chain(this.envelope,this.output),At(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(yn.getDefaults(),{envelope:Object.assign(mn(vn.getDefaults(),Object.keys(rt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(mn(bi.getDefaults(),[...Object.keys(Fr.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(r,g){if(this.envelope.triggerAttack(r,g),this.oscillator.start(r),this.envelope.sustain===0){const t=this.toSeconds(this.envelope.attack),x=this.toSeconds(this.envelope.decay);this.oscillator.stop(r+t+x)}}_triggerEnvelopeRelease(r){this.envelope.triggerRelease(r),this.oscillator.stop(r+this.toSeconds(this.envelope.release))}getLevelAtTime(r){return r=this.toSeconds(r),this.envelope.getValueAtTime(r)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class zl extends yn{constructor(){const r=Qe(zl.getDefaults(),arguments);super(r),this.name="ModulationSynth",this._carrier=new so({context:this.context,oscillator:r.oscillator,envelope:r.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new so({context:this.context,oscillator:r.modulation,envelope:r.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Rt({context:this.context,units:"frequency"}),this.detune=new Rt({context:this.context,value:r.detune,units:"cents"}),this.harmonicity=new Er({context:this.context,value:r.harmonicity,minValue:0}),this._modulationNode=new jt({context:this.context,gain:0}),At(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(yn.getDefaults(),{harmonicity:3,oscillator:Object.assign(mn(bi.getDefaults(),[...Object.keys(Fr.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(mn(vn.getDefaults(),Object.keys(rt.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(mn(bi.getDefaults(),[...Object.keys(Fr.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(mn(vn.getDefaults(),Object.keys(rt.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(r,g){this._carrier._triggerEnvelopeAttack(r,g),this._modulator._triggerEnvelopeAttack(r,g)}_triggerEnvelopeRelease(r){return this._carrier._triggerEnvelopeRelease(r),this._modulator._triggerEnvelopeRelease(r),this}getLevelAtTime(r){return r=this.toSeconds(r),this.envelope.getValueAtTime(r)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Df extends zl{constructor(){super(Qe(Df.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new $c({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Gl extends rt{constructor(){const r=Qe(Gl.getDefaults(),arguments,["frequency","type"]);super(r),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Ft({context:this.context,units:"number",value:r.Q,param:this._filter.Q}),this.frequency=new Ft({context:this.context,units:"frequency",value:r.frequency,param:this._filter.frequency}),this.detune=new Ft({context:this.context,units:"cents",value:r.detune,param:this._filter.detune}),this.gain=new Ft({context:this.context,units:"decibels",convert:!1,value:r.gain,param:this._filter.gain}),this.type=r.type}static getDefaults(){return Object.assign(rt.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(r){Tt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(r)!==-1,`Invalid filter type: ${r}`),this._filter.type=r}getFrequencyResponse(r=128){const g=new Float32Array(r);for(let u=0;u<r;u++){const s=Math.pow(u/r,2)*19980+20;g[u]=s}const t=new Float32Array(r),x=new Float32Array(r),f=this.context.createBiquadFilter();return f.type=this.type,f.Q.value=this.Q.value,f.frequency.value=this.frequency.value,f.gain.value=this.gain.value,f.getFrequencyResponse(g,t,x),t}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Tn extends rt{constructor(){const r=Qe(Tn.getDefaults(),arguments,["frequency","type","rolloff"]);super(r),this.name="Filter",this.input=new jt({context:this.context}),this.output=new jt({context:this.context}),this._filters=[],this._filters=[],this.Q=new Rt({context:this.context,units:"positive",value:r.Q}),this.frequency=new Rt({context:this.context,units:"frequency",value:r.frequency}),this.detune=new Rt({context:this.context,units:"cents",value:r.detune}),this.gain=new Rt({context:this.context,units:"decibels",convert:!1,value:r.gain}),this._type=r.type,this.rolloff=r.rolloff,At(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(rt.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(r){Tt(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(r)!==-1,`Invalid filter type: ${r}`),this._type=r,this._filters.forEach(t=>t.type=r)}get rolloff(){return this._rolloff}set rolloff(r){const g=cs(r)?r:parseInt(r,10),t=[-12,-24,-48,-96];let x=t.indexOf(g);Tt(x!==-1,`rolloff can only be ${t.join(", ")}`),x+=1,this._rolloff=g,this.input.disconnect(),this._filters.forEach(f=>f.disconnect()),this._filters=new Array(x);for(let f=0;f<x;f++){const u=new Gl({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[f]=u}this._internalChannels=this._filters,ds(this.input,...this._internalChannels,this.output)}getFrequencyResponse(r=128){const g=new Gl({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),t=new Float32Array(r).map(()=>1);return this._filters.forEach(()=>{g.getFrequencyResponse(r).forEach((f,u)=>t[u]*=f)}),g.dispose(),t}dispose(){return super.dispose(),this._filters.forEach(r=>{r.dispose()}),Kl(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class ql extends vn{constructor(){const r=Qe(ql.getDefaults(),arguments,["attack","decay","sustain","release"]);super(r),this.name="FrequencyEnvelope",this._octaves=r.octaves,this._baseFrequency=this.toFrequency(r.baseFrequency),this._exponent=this.input=new tl({context:this.context,value:r.exponent}),this._scale=this.output=new xi({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(vn.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(r){const g=this.toFrequency(r);pn(g,0),this._baseFrequency=g,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(r){this._octaves=r,this._scale.max=this._baseFrequency*Math.pow(2,r)}get exponent(){return this._exponent.value}set exponent(r){this._exponent.value=r}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Bo extends yn{constructor(){const r=Qe(Bo.getDefaults(),arguments);super(r),this.name="MonoSynth",this.oscillator=new bi(Object.assign(r.oscillator,{context:this.context,detune:r.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Tn(Object.assign(r.filter,{context:this.context})),this.filterEnvelope=new ql(Object.assign(r.filterEnvelope,{context:this.context})),this.envelope=new Qo(Object.assign(r.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),At(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(yn.getDefaults(),{envelope:Object.assign(mn(vn.getDefaults(),Object.keys(rt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(mn(Tn.getDefaults(),Object.keys(rt.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(mn(ql.getDefaults(),Object.keys(rt.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(mn(bi.getDefaults(),Object.keys(Fr.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(r,g=1){if(this.envelope.triggerAttack(r,g),this.filterEnvelope.triggerAttack(r),this.oscillator.start(r),this.envelope.sustain===0){const t=this.toSeconds(this.envelope.attack),x=this.toSeconds(this.envelope.decay);this.oscillator.stop(r+t+x)}}_triggerEnvelopeRelease(r){this.envelope.triggerRelease(r),this.filterEnvelope.triggerRelease(r),this.oscillator.stop(r+this.toSeconds(this.envelope.release))}getLevelAtTime(r){return r=this.toSeconds(r),this.envelope.getValueAtTime(r)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class If extends yn{constructor(){const r=Qe(If.getDefaults(),arguments);super(r),this.name="DuoSynth",this.voice0=new Bo(Object.assign(r.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Bo(Object.assign(r.voice1,{context:this.context})),this.harmonicity=new Er({context:this.context,units:"positive",value:r.harmonicity}),this._vibrato=new Dn({frequency:r.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new jt({context:this.context,units:"normalRange",gain:r.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Rt({context:this.context,units:"frequency",value:440}),this.detune=new Rt({context:this.context,units:"cents",value:r.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),At(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(r){return r=this.toSeconds(r),this.voice0.envelope.getValueAtTime(r)+this.voice1.envelope.getValueAtTime(r)}static getDefaults(){return xs(yn.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:xs(mn(Bo.getDefaults(),Object.keys(yn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:xs(mn(Bo.getDefaults(),Object.keys(yn.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(r,g){this.voice0._triggerEnvelopeAttack(r,g),this.voice1._triggerEnvelopeAttack(r,g)}_triggerEnvelopeRelease(r){return this.voice0._triggerEnvelopeRelease(r),this.voice1._triggerEnvelopeRelease(r),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Lf extends zl{constructor(){const r=Qe(Lf.getDefaults(),arguments);super(r),this.name="FMSynth",this.modulationIndex=new Er({context:this.context,value:r.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(zl.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const Xy=[1,1.483,1.932,2.546,2.63,3.897];class Nf extends yn{constructor(){const r=Qe(Nf.getDefaults(),arguments);super(r),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new Rt({context:this.context,units:"cents",value:r.detune}),this.frequency=new Rt({context:this.context,units:"frequency"}),this._amplitude=new jt({context:this.context,gain:0}).connect(this.output),this._highpass=new Tn({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let g=0;g<Xy.length;g++){const t=new rl({context:this.context,harmonicity:r.harmonicity,modulationIndex:r.modulationIndex,modulationType:"square",onstop:g===0?()=>this.onsilence(this):Wt,type:"square"});t.connect(this._highpass),this._oscillators[g]=t;const x=new Er({context:this.context,value:Xy[g]});this._freqMultipliers[g]=x,this.frequency.chain(x,t.frequency),this.detune.connect(t.detune)}this._filterFreqScaler=new xi({context:this.context,max:7e3,min:this.toFrequency(r.resonance)}),this.envelope=new vn({attack:r.envelope.attack,attackCurve:"linear",context:this.context,decay:r.envelope.decay,release:r.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=r.octaves,this.octaves=r.octaves}static getDefaults(){return xs(yn.getDefaults(),{envelope:Object.assign(mn(vn.getDefaults(),Object.keys(rt.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(r,g=1){return this.envelope.triggerAttack(r,g),this._oscillators.forEach(t=>t.start(r)),this.envelope.sustain===0&&this._oscillators.forEach(t=>{t.stop(r+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(r){return this.envelope.triggerRelease(r),this._oscillators.forEach(g=>g.stop(r+this.toSeconds(this.envelope.release))),this}getLevelAtTime(r){return r=this.toSeconds(r),this.envelope.getValueAtTime(r)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(r){this._oscillators.forEach(g=>g.modulationIndex.value=r)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(r){this._oscillators.forEach(g=>g.harmonicity.value=r)}get resonance(){return this._filterFreqScaler.min}set resonance(r){this._filterFreqScaler.min=this.toFrequency(r),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(r){this._octaves=r,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,r)}dispose(){return super.dispose(),this._oscillators.forEach(r=>r.dispose()),this._freqMultipliers.forEach(r=>r.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class il extends so{constructor(){const r=Qe(il.getDefaults(),arguments);super(r),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=r.pitchDecay,this.octaves=r.octaves,At(this,["oscillator","envelope"])}static getDefaults(){return xs(yn.getDefaults(),so.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(r,g){const t=this.toSeconds(g),x=this.toFrequency(r instanceof Rn?r.toFrequency():r),f=x*this.octaves;return this.oscillator.frequency.setValueAtTime(f,t),this.oscillator.frequency.exponentialRampToValueAtTime(x,t+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Vs([av(0)],il.prototype,"octaves",void 0);Vs([ji(0)],il.prototype,"pitchDecay",void 0);class Ff extends Ss{constructor(){const r=Qe(Ff.getDefaults(),arguments);super(r),this.name="NoiseSynth",this.noise=new _i(Object.assign({context:this.context},r.noise)),this.envelope=new Qo(Object.assign({context:this.context},r.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Ss.getDefaults(),{envelope:Object.assign(mn(vn.getDefaults(),Object.keys(rt.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(mn(_i.getDefaults(),Object.keys(Fr.getDefaults())),{type:"white"})})}triggerAttack(r,g=1){return r=this.toSeconds(r),this.envelope.triggerAttack(r,g),this.noise.start(r),this.envelope.sustain===0&&this.noise.stop(r+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(r){return r=this.toSeconds(r),this.envelope.triggerRelease(r),this.noise.stop(r+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(r,g,t=1){return g=this.toSeconds(g),r=this.toSeconds(r),this.triggerAttack(g,t),this.triggerRelease(g+r),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const Uf=new Set;function Bf(D){Uf.add(D)}function cv(D,r){const g=`registerProcessor("${D}", ${r})`;Uf.add(g)}function m2(){return Array.from(Uf).join(`
`)}class Yh extends rt{constructor(r){super(r),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Wt;const g=URL.createObjectURL(new Blob([m2()],{type:"text/javascript"})),t=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(g).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(t,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const y2=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Bf(y2);const g2=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Bf(g2);const v2=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Bf(v2);const dv="feedback-comb-filter",_2=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;cv(dv,_2);class iu extends Yh{constructor(){const r=Qe(iu.getDefaults(),arguments,["delayTime","resonance"]);super(r),this.name="FeedbackCombFilter",this.input=new jt({context:this.context}),this.output=new jt({context:this.context}),this.delayTime=new Ft({context:this.context,value:r.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Ft({context:this.context,value:r.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),At(this,["resonance","delayTime"])}_audioWorkletName(){return dv}static getDefaults(){return Object.assign(rt.getDefaults(),{delayTime:.1,resonance:.5})}onReady(r){ds(this.input,r,this.output);const g=r.parameters.get("delayTime");this.delayTime.setParam(g);const t=r.parameters.get("feedback");this.resonance.setParam(t)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class ou extends rt{constructor(){const r=Qe(ou.getDefaults(),arguments,["frequency","type"]);super(r),this.name="OnePoleFilter",this._frequency=r.frequency,this._type=r.type,this.input=new jt({context:this.context}),this.output=new jt({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(rt.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const r=this._filter,g=this.toFrequency(this._frequency),t=1/(2*Math.PI*g);if(this._type==="lowpass"){const x=1/(t*this.context.sampleRate),f=x-1;this._filter=this.context.createIIRFilter([x,0],[1,f])}else{const x=1/(t*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,x])}this.input.chain(this._filter,this.output),r&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(r),r.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(r){this._frequency=r,this._createFilter()}get type(){return this._type}set type(r){this._type=r,this._createFilter()}getFrequencyResponse(r=128){const g=new Float32Array(r);for(let f=0;f<r;f++){const c=Math.pow(f/r,2)*19980+20;g[f]=c}const t=new Float32Array(r),x=new Float32Array(r);return this._filter.getFrequencyResponse(g,t,x),t}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class au extends rt{constructor(){const r=Qe(au.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(r),this.name="LowpassCombFilter",this._combFilter=this.output=new iu({context:this.context,delayTime:r.delayTime,resonance:r.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new ou({context:this.context,frequency:r.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(rt.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(r){this._lowpass.frequency=r}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Vf extends Ss{constructor(){const r=Qe(Vf.getDefaults(),arguments);super(r),this.name="PluckSynth",this._noise=new _i({context:this.context,type:"pink"}),this.attackNoise=r.attackNoise,this._lfcf=new au({context:this.context,dampening:r.dampening,resonance:r.resonance}),this.resonance=r.resonance,this.release=r.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return xs(Ss.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(r){this._lfcf.dampening=r}triggerAttack(r,g){const t=this.toFrequency(r);g=this.toSeconds(g);const x=1/t;return this._lfcf.delayTime.setValueAtTime(x,g),this._noise.start(g),this._noise.stop(g+x*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(g),this._lfcf.resonance.setValueAtTime(this.resonance,g),this}triggerRelease(r){return this._lfcf.resonance.linearRampTo(0,this.release,r),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class zf extends Ss{constructor(){const r=Qe(zf.getDefaults(),arguments,["voice","options"]);super(r),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=x=>this.releaseAll(x),Tt(!cs(r.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const g=r.voice.getDefaults();this.options=Object.assign(g,r.options),this.voice=r.voice,this.maxPolyphony=r.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const t=this._voices.indexOf(this._dummyVoice);this._voices.splice(t,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Ss.getDefaults(),{maxPolyphony:32,options:{},voice:so})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(r){this._availableVoices.push(r);const g=this._activeVoices.findIndex(t=>t.voice===r);this._activeVoices.splice(g,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const r=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Tt(r instanceof yn,"Voice must extend Monophonic class"),r.connect(this.output),this._voices.push(r),r}else Ya("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const r=this._availableVoices.shift(),g=this._voices.indexOf(r);this._voices.splice(g,1),this.context.isOffline||r.dispose()}}_triggerAttack(r,g,t){r.forEach(x=>{const f=new Ba(this.context,x).toMidi(),u=this._getNextAvailableVoice();u&&(u.triggerAttack(x,g,t),this._activeVoices.push({midi:f,voice:u,released:!1}),this.log("triggerAttack",x,g))})}_triggerRelease(r,g){r.forEach(t=>{const x=new Ba(this.context,t).toMidi(),f=this._activeVoices.find(({midi:u,released:c})=>u===x&&!c);f&&(f.voice.triggerRelease(g),f.released=!0,this.log("triggerRelease",t,g))})}_scheduleEvent(r,g,t,x){Tt(!this.disposed,"Synth was already disposed"),t<=this.now()?r==="attack"?this._triggerAttack(g,t,x):this._triggerRelease(g,t):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(r,g,t,x)},t-this.now())}triggerAttack(r,g,t){Array.isArray(r)||(r=[r]);const x=this.toSeconds(g);return this._scheduleEvent("attack",r,x,t),this}triggerRelease(r,g){Array.isArray(r)||(r=[r]);const t=this.toSeconds(g);return this._scheduleEvent("release",r,t),this}triggerAttackRelease(r,g,t,x){const f=this.toSeconds(t);if(this.triggerAttack(r,f,x),gn(g)){Tt(gn(r),"If the duration is an array, the notes must also be an array"),r=r;for(let u=0;u<r.length;u++){const c=g[Math.min(u,g.length-1)],s=this.toSeconds(c);Tt(s>0,"The duration must be greater than 0"),this.triggerRelease(r[u],f+s)}}else{const u=this.toSeconds(g);Tt(u>0,"The duration must be greater than 0"),this.triggerRelease(r,f+u)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(r){const g=mn(r,["onsilence","context"]);return this.options=xs(this.options,g),this._voices.forEach(t=>t.set(g)),this._dummyVoice.set(g),this}get(){return this._dummyVoice.get()}releaseAll(r){const g=this.toSeconds(r);return this._activeVoices.forEach(({voice:t})=>{t.triggerRelease(g)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(r=>r.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class $o extends Ss{constructor(){const r=Qe($o.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(r),this.name="Sampler",this._activeSources=new Map;const g={};Object.keys(r.urls).forEach(t=>{const x=parseInt(t,10);if(Tt(Fl(t)||cs(x)&&isFinite(x),`url key is neither a note or midi pitch: ${t}`),Fl(t)){const f=new Rn(this.context,t).toMidi();g[f]=r.urls[t]}else cs(x)&&isFinite(x)&&(g[x]=r.urls[x])}),this._buffers=new el({urls:g,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),this.attack=r.attack,this.release=r.release,this.curve=r.curve,this._buffers.loaded&&Promise.resolve().then(r.onload)}static getDefaults(){return Object.assign(Ss.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Wt,onerror:Wt,release:.1,urls:{}})}_findClosest(r){let t=0;for(;t<96;){if(this._buffers.has(r+t))return-t;if(this._buffers.has(r-t))return t;t++}throw new Error(`No available buffers for note: ${r}`)}triggerAttack(r,g,t=1){return this.log("triggerAttack",r,g,t),Array.isArray(r)||(r=[r]),r.forEach(x=>{const f=sv(new Rn(this.context,x).toFrequency()),u=Math.round(f),c=f-u,s=this._findClosest(u),d=u-s,m=this._buffers.get(d),v=Fa(s+c),i=new lo({url:m,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:v}).connect(this.output);i.start(g,0,m.duration/v,t),gn(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(i),i.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const n=this._activeSources.get(u),a=n.indexOf(i);a!==-1&&n.splice(a,1)}}}),this}triggerRelease(r,g){return this.log("triggerRelease",r,g),Array.isArray(r)||(r=[r]),r.forEach(t=>{const x=new Rn(this.context,t).toMidi();if(this._activeSources.has(x)&&this._activeSources.get(x).length){const f=this._activeSources.get(x);g=this.toSeconds(g),f.forEach(u=>{u.stop(g)}),this._activeSources.set(x,[])}}),this}releaseAll(r){const g=this.toSeconds(r);return this._activeSources.forEach(t=>{for(;t.length;)t.shift().stop(g)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(r,g,t,x=1){const f=this.toSeconds(t);return this.triggerAttack(r,f,x),gn(g)?(Tt(gn(r),"notes must be an array when duration is array"),r.forEach((u,c)=>{const s=g[Math.min(c,g.length-1)];this.triggerRelease(u,f+this.toSeconds(s))})):this.triggerRelease(r,f+this.toSeconds(g)),this}add(r,g,t){if(Tt(Fl(r)||isFinite(r),`note must be a pitch or midi: ${r}`),Fl(r)){const x=new Rn(this.context,r).toMidi();this._buffers.add(x,g,t)}else this._buffers.add(r,g,t);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(r=>{r.forEach(g=>g.dispose())}),this._activeSources.clear(),this}}Vs([ji(0)],$o.prototype,"attack",void 0);Vs([ji(0)],$o.prototype,"release",void 0);class Qs extends dn{constructor(){const r=Qe(Qs.getDefaults(),arguments,["callback","value"]);super(r),this.name="ToneEvent",this._state=new Ka("stopped"),this._startOffset=0,this._loop=r.loop,this.callback=r.callback,this.value=r.value,this._loopStart=this.toTicks(r.loopStart),this._loopEnd=this.toTicks(r.loopEnd),this._playbackRate=r.playbackRate,this._probability=r.probability,this._humanize=r.humanize,this.mute=r.mute,this._playbackRate=r.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(dn.getDefaults(),{callback:Wt,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(r=-1){this._state.forEachFrom(r,g=>{let t;if(g.state==="started"){g.id!==-1&&this.context.transport.clear(g.id);const x=g.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||cs(this._loop)&&this._loop>1){t=1/0,cs(this._loop)&&(t=this._loop*this._getLoopDuration());const f=this._state.getAfter(x);f!==null&&(t=Math.min(t,f.time-x)),t!==1/0&&(t=new Tr(this.context,t));const u=new Tr(this.context,this._getLoopDuration());g.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new Tr(this.context,x),t)}else g.id=this.context.transport.schedule(this._tick.bind(this),new Tr(this.context,x))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(r){this._startOffset=r}get probability(){return this._probability}set probability(r){this._probability=r}get humanize(){return this._humanize}set humanize(r){this._humanize=r}start(r){const g=this.toTicks(r);return this._state.getValueAtTime(g)==="stopped"&&(this._state.add({id:-1,state:"started",time:g}),this._rescheduleEvents(g)),this}stop(r){this.cancel(r);const g=this.toTicks(r);if(this._state.getValueAtTime(g)==="started"){this._state.setStateAtTime("stopped",g,{id:-1});const t=this._state.getBefore(g);let x=g;t!==null&&(x=t.time),this._rescheduleEvents(x)}return this}cancel(r){r=ws(r,-1/0);const g=this.toTicks(r);return this._state.forEachFrom(g,t=>{this.context.transport.clear(t.id)}),this._state.cancel(g),this}_tick(r){const g=this.context.transport.getTicksAtTime(r);if(!this.mute&&this._state.getValueAtTime(g)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let t=.02;vf(this.humanize)||(t=this.toSeconds(this.humanize)),r+=(Math.random()*2-1)*t}this.callback(r,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(r){this._loop=r,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(r){this._playbackRate=r,this._rescheduleEvents()}get loopEnd(){return new Tr(this.context,this._loopEnd).toSeconds()}set loopEnd(r){this._loopEnd=this.toTicks(r),this._loop&&this._rescheduleEvents()}get loopStart(){return new Tr(this.context,this._loopStart).toSeconds()}set loopStart(r){this._loopStart=this.toTicks(r),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const r=this.context.transport.ticks,g=this._state.get(r);if(g!==null&&g.state==="started"){const t=this._getLoopDuration();return(r-g.time)%t/t}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Va extends dn{constructor(){const r=Qe(Va.getDefaults(),arguments,["callback","interval"]);super(r),this.name="Loop",this._event=new Qs({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:r.interval,playbackRate:r.playbackRate,probability:r.probability,humanize:r.humanize}),this.callback=r.callback,this.iterations=r.iterations}static getDefaults(){return Object.assign(dn.getDefaults(),{interval:"4n",callback:Wt,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(r){return this._event.start(r),this}stop(r){return this._event.stop(r),this}cancel(r){return this._event.cancel(r),this}_tick(r){this.callback(r)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(r){this._event.loopEnd=r}get playbackRate(){return this._event.playbackRate}set playbackRate(r){this._event.playbackRate=r}get humanize(){return this._event.humanize}set humanize(r){this._event.humanize=r}get probability(){return this._event.probability}set probability(r){this._event.probability=r}get mute(){return this._event.mute}set mute(r){this._event.mute=r}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(r){r===1/0?this._event.loop=!0:this._event.loop=r}dispose(){return super.dispose(),this._event.dispose(),this}}class za extends Qs{constructor(){const r=Qe(za.getDefaults(),arguments,["callback","events"]);super(r),this.name="Part",this._state=new Ka("stopped"),this._events=new Set,this._state.increasing=!0,r.events.forEach(g=>{gn(g)?this.add(g[0],g[1]):this.add(g)})}static getDefaults(){return Object.assign(Qs.getDefaults(),{events:[]})}start(r,g){const t=this.toTicks(r);if(this._state.getValueAtTime(t)!=="started"){g=ws(g,this._loop?this._loopStart:0),this._loop?g=ws(g,this._loopStart):g=ws(g,0);const x=this.toTicks(g);this._state.add({id:-1,offset:x,state:"started",time:t}),this._forEach(f=>{this._startNote(f,t,x)})}return this}_startNote(r,g,t){g-=t,this._loop?r.startOffset>=this._loopStart&&r.startOffset<this._loopEnd?(r.startOffset<t&&(g+=this._getLoopDuration()),r.start(new Tr(this.context,g))):r.startOffset<this._loopStart&&r.startOffset>=t&&(r.loop=!1,r.start(new Tr(this.context,g))):r.startOffset>=t&&r.start(new Tr(this.context,g))}get startOffset(){return this._startOffset}set startOffset(r){this._startOffset=r,this._forEach(g=>{g.startOffset+=this._startOffset})}stop(r){const g=this.toTicks(r);return this._state.cancel(g),this._state.setStateAtTime("stopped",g),this._forEach(t=>{t.stop(r)}),this}at(r,g){const t=new Zr(this.context,r).toTicks(),x=new Tr(this.context,1).toSeconds(),f=this._events.values();let u=f.next();for(;!u.done;){const c=u.value;if(Math.abs(t-c.startOffset)<x)return Vt(g)&&(c.value=g),c;u=f.next()}return Vt(g)?(this.add(r,g),this.at(r)):null}add(r,g){r instanceof Object&&Reflect.has(r,"time")&&(g=r,r=g.time);const t=this.toTicks(r);let x;return g instanceof Qs?(x=g,x.callback=this._tick.bind(this)):x=new Qs({callback:this._tick.bind(this),context:this.context,value:g}),x.startOffset=t,x.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(x),this._restartEvent(x),this}_restartEvent(r){this._state.forEach(g=>{g.state==="started"?this._startNote(r,g.time,g.offset):r.stop(new Tr(this.context,g.time))})}remove(r,g){return gi(r)&&r.hasOwnProperty("time")&&(g=r,r=g.time),r=this.toTicks(r),this._events.forEach(t=>{t.startOffset===r&&(Xn(g)||Vt(g)&&t.value===g)&&(this._events.delete(t),t.dispose())}),this}clear(){return this._forEach(r=>r.dispose()),this._events.clear(),this}cancel(r){return this._forEach(g=>g.cancel(r)),this._state.cancel(this.toTicks(r)),this}_forEach(r){return this._events&&this._events.forEach(g=>{g instanceof za?g._forEach(r):r(g)}),this}_setAll(r,g){this._forEach(t=>{t[r]=g})}_tick(r,g){this.mute||this.callback(r,g)}_testLoopBoundries(r){this._loop&&(r.startOffset<this._loopStart||r.startOffset>=this._loopEnd)?r.cancel(0):r.state==="stopped"&&this._restartEvent(r)}get probability(){return this._probability}set probability(r){this._probability=r,this._setAll("probability",r)}get humanize(){return this._humanize}set humanize(r){this._humanize=r,this._setAll("humanize",r)}get loop(){return this._loop}set loop(r){this._loop=r,this._forEach(g=>{g.loopStart=this.loopStart,g.loopEnd=this.loopEnd,g.loop=r,this._testLoopBoundries(g)})}get loopEnd(){return new Tr(this.context,this._loopEnd).toSeconds()}set loopEnd(r){this._loopEnd=this.toTicks(r),this._loop&&this._forEach(g=>{g.loopEnd=r,this._testLoopBoundries(g)})}get loopStart(){return new Tr(this.context,this._loopStart).toSeconds()}set loopStart(r){this._loopStart=this.toTicks(r),this._loop&&this._forEach(g=>{g.loopStart=this.loopStart,this._testLoopBoundries(g)})}get playbackRate(){return this._playbackRate}set playbackRate(r){this._playbackRate=r,this._setAll("playbackRate",r)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*b2(D){let r=0;for(;r<D;)r=Ho(r,0,D-1),yield r,r++}function*x2(D){let r=D-1;for(;r>=0;)r=Ho(r,0,D-1),yield r,r--}function*Ll(D,r){for(;;)yield*r(D)}function*Yy(D,r){let g=r?0:D-1;for(;;)g=Ho(g,0,D-1),yield g,r?(g++,g>=D-1&&(r=!1)):(g--,g<=0&&(r=!0))}function*w2(D){let r=0,g=0;for(;r<D;)r=Ho(r,0,D-1),yield r,g++,r+=g%2?2:-1}function*S2(D){let r=D-1,g=0;for(;r>=0;)r=Ho(r,0,D-1),yield r,g++,r+=g%2?-2:1}function*j2(D){for(;;)yield Math.floor(Math.random()*D)}function*T2(D){const r=[];for(let g=0;g<D;g++)r.push(g);for(;r.length>0;){const g=r.splice(Math.floor(r.length*Math.random()),1);yield Ho(g[0],0,D-1)}}function*k2(D){let r=Math.floor(Math.random()*D);for(;;)r===0?r++:r===D-1||Math.random()<.5?r--:r++,yield r}function*Zy(D,r="up",g=0){switch(Tt(D>=1,"The number of values must be at least one"),r){case"up":yield*Ll(D,b2);case"down":yield*Ll(D,x2);case"upDown":yield*Yy(D,!0);case"downUp":yield*Yy(D,!1);case"alternateUp":yield*Ll(D,w2);case"alternateDown":yield*Ll(D,S2);case"random":yield*j2(D);case"randomOnce":yield*Ll(D,T2);case"randomWalk":yield*k2(D)}}class Gf extends Va{constructor(){const r=Qe(Gf.getDefaults(),arguments,["callback","values","pattern"]);super(r),this.name="Pattern",this.callback=r.callback,this._values=r.values,this._pattern=Zy(r.values.length,r.pattern),this._type=r.pattern}static getDefaults(){return Object.assign(Va.getDefaults(),{pattern:"up",values:[],callback:Wt})}_tick(r){const g=this._pattern.next();this._index=g.value,this._value=this._values[g.value],this.callback(r,this._value)}get values(){return this._values}set values(r){this._values=r,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(r){this._type=r,this._pattern=Zy(this._values.length,this._type)}}class qf extends Qs{constructor(){const r=Qe(qf.getDefaults(),arguments,["callback","events","subdivision"]);super(r),this.name="Sequence",this._part=new za({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[],this._subdivision=this.toTicks(r.subdivision),this.events=r.events,this.loop=r.loop,this.loopStart=r.loopStart,this.loopEnd=r.loopEnd,this.playbackRate=r.playbackRate,this.probability=r.probability,this.humanize=r.humanize,this.mute=r.mute,this.playbackRate=r.playbackRate}static getDefaults(){return Object.assign(mn(Qs.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(r,g){g!==null&&!this.mute&&this.callback(r,g)}get events(){return this._events}set events(r){this.clear(),this._eventsArray=r,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(r,g){return this._part.start(r,g&&this._indexTime(g)),this}stop(r){return this._part.stop(r),this}get subdivision(){return new Tr(this.context,this._subdivision).toSeconds()}_createSequence(r){return new Proxy(r,{get:(g,t)=>g[t],set:(g,t,x)=>(Us(t)&&isFinite(parseInt(t,10))&&gn(x)?g[t]=this._createSequence(x):g[t]=x,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(r,g,t){r.forEach((x,f)=>{const u=f*g+t;if(gn(x))this._rescheduleSequence(x,g/x.length,u);else{const c=new Tr(this.context,u,"i").toSeconds();this._part.add(c,x)}})}_indexTime(r){return new Tr(this.context,r*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(r){this._part.loop=r}get loopStart(){return this._loopStart}set loopStart(r){this._loopStart=r,this._part.loopStart=this._indexTime(r)}get loopEnd(){return this._loopEnd}set loopEnd(r){this._loopEnd=r,r===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(r)}get startOffset(){return this._part.startOffset}set startOffset(r){this._part.startOffset=r}get playbackRate(){return this._part.playbackRate}set playbackRate(r){this._part.playbackRate=r}get probability(){return this._part.probability}set probability(r){this._part.probability=r}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(r){this._part.humanize=r}get length(){return this._part.length}}class ol extends rt{constructor(){const r=Qe(ol.getDefaults(),arguments,["fade"]);super(r),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new uv({context:this.context}),this.a=new jt({context:this.context,gain:0}),this.b=new jt({context:this.context,gain:0}),this.output=new jt({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Rt({context:this.context,units:"normalRange",value:r.fade}),At(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",In(this._split,this.a.gain,0),In(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(rt.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class rn extends rt{constructor(r){super(r),this.name="Effect",this._dryWet=new ol({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new jt({context:this.context}),this.effectReturn=new jt({context:this.context}),this.input=new jt({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(r.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],At(this,"wet")}static getDefaults(){return Object.assign(rt.getDefaults(),{wet:1})}connectEffect(r){return this._internalChannels.push(r),this.effectSend.chain(r,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Nc extends rn{constructor(r){super(r),this.name="LFOEffect",this._lfo=new Dn({context:this.context,frequency:r.frequency,amplitude:r.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=r.type,At(this,["frequency","depth"])}static getDefaults(){return Object.assign(rn.getDefaults(),{frequency:1,type:"sine",depth:1})}start(r){return this._lfo.start(r),this}stop(r){return this._lfo.stop(r),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(r){this._lfo.type=r}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Wf extends Nc{constructor(){const r=Qe(Wf.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(r),this.name="AutoFilter",this.filter=new Tn(Object.assign(r.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=r.octaves,this.baseFrequency=r.baseFrequency}static getDefaults(){return Object.assign(Nc.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(r){this._lfo.min=this.toFrequency(r),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(r){this._octaves=r,this._lfo.max=this._lfo.min*Math.pow(2,r)}dispose(){return super.dispose(),this.filter.dispose(),this}}class ro extends rt{constructor(){const r=Qe(ro.getDefaults(),arguments,["pan"]);super(r),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ft({context:this.context,param:this._panner.pan,value:r.pan,minValue:-1,maxValue:1}),this._panner.channelCount=r.channelCount,this._panner.channelCountMode="explicit",At(this,"pan")}static getDefaults(){return Object.assign(rt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class Hf extends Nc{constructor(){const r=Qe(Hf.getDefaults(),arguments,["frequency"]);super(r),this.name="AutoPanner",this._panner=new ro({context:this.context,channelCount:r.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(Nc.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class lu extends rt{constructor(){const r=Qe(lu.getDefaults(),arguments,["smoothing"]);super(r),this.name="Follower",this._abs=this.input=new lv({context:this.context}),this._lowpass=this.output=new ou({context:this.context,frequency:1/this.toSeconds(r.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=r.smoothing}static getDefaults(){return Object.assign(rt.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(r){this._smoothing=r,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class Xf extends rn{constructor(){const r=Qe(Xf.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);super(r),this.name="AutoWah",this._follower=new lu({context:this.context,smoothing:r.follower}),this._sweepRange=new td({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(r.baseFrequency),this._octaves=r.octaves,this._inputBoost=new jt({context:this.context}),this._bandpass=new Tn({context:this.context,rolloff:-48,frequency:0,Q:r.Q}),this._peaking=new Tn({context:this.context,type:"peaking"}),this._peaking.gain.value=r.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=r.sensitivity,At(this,["gain","Q"])}static getDefaults(){return Object.assign(rn.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(r){this._octaves=r,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(r){this._follower.smoothing=r}get baseFrequency(){return this._baseFrequency}set baseFrequency(r){this._baseFrequency=this.toFrequency(r),this._setSweepRange()}get sensitivity(){return Jl(1/this._inputBoost.gain.value)}set sensitivity(r){this._inputBoost.gain.value=1/Na(r)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const hv="bit-crusher",E2=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;cv(hv,E2);class Yf extends rn{constructor(){const r=Qe(Yf.getDefaults(),arguments,["bits"]);super(r),this.name="BitCrusher",this._bitCrusherWorklet=new Zf({context:this.context,bits:r.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(rn.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class Zf extends Yh{constructor(){const r=Qe(Zf.getDefaults(),arguments);super(r),this.name="BitCrusherWorklet",this.input=new jt({context:this.context}),this.output=new jt({context:this.context}),this.bits=new Ft({context:this.context,value:r.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(Yh.getDefaults(),{bits:12})}_audioWorkletName(){return hv}onReady(r){ds(this.input,r,this.output);const g=r.parameters.get("bits");this.bits.setParam(g)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Qf extends rn{constructor(){const r=Qe(Qf.getDefaults(),arguments,["order"]);super(r),this.name="Chebyshev",this._shaper=new zs({context:this.context,length:4096}),this._order=r.order,this.connectEffect(this._shaper),this.order=r.order,this.oversample=r.oversample}static getDefaults(){return Object.assign(rn.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(r,g,t){return t.has(g)||(g===0?t.set(g,0):g===1?t.set(g,r):t.set(g,2*r*this._getCoefficient(r,g-1,t)-this._getCoefficient(r,g-2,t))),t.get(g)}get order(){return this._order}set order(r){Tt(Number.isInteger(r),"'order' must be an integer"),this._order=r,this._shaper.setMap(g=>this._getCoefficient(g,r,new Map))}get oversample(){return this._shaper.oversample}set oversample(r){this._shaper.oversample=r}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ko extends rt{constructor(){const r=Qe(Ko.getDefaults(),arguments,["channels"]);super(r),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(r.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(rt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class uo extends rt{constructor(){const r=Qe(uo.getDefaults(),arguments,["channels"]);super(r),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(r.channels)}static getDefaults(){return Object.assign(rt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class $s extends rt{constructor(r){super(r),this.name="StereoEffect",this.input=new jt({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new ol({context:this.context,fade:r.wet}),this.wet=this._dryWet.fade,this._split=new Ko({context:this.context,channels:2}),this._merge=new uo({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),At(this,["wet"])}connectEffectLeft(...r){this._split.connect(r[0],0,0),ds(...r),In(r[r.length-1],this._merge,0,0)}connectEffectRight(...r){this._split.connect(r[0],1,0),ds(...r),In(r[r.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(rt.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Zh extends $s{constructor(r){super(r),this.feedback=new Rt({context:this.context,value:r.feedback,units:"normalRange"}),this._feedbackL=new jt({context:this.context}),this._feedbackR=new jt({context:this.context}),this._feedbackSplit=new Ko({context:this.context,channels:2}),this._feedbackMerge=new uo({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),At(this,["feedback"])}static getDefaults(){return Object.assign($s.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class $f extends Zh{constructor(){const r=Qe($f.getDefaults(),arguments,["frequency","delayTime","depth"]);super(r),this.name="Chorus",this._depth=r.depth,this._delayTime=r.delayTime/1e3,this._lfoL=new Dn({context:this.context,frequency:r.frequency,min:0,max:1}),this._lfoR=new Dn({context:this.context,frequency:r.frequency,min:0,max:1,phase:180}),this._delayNodeL=new us({context:this.context}),this._delayNodeR=new us({context:this.context}),this.frequency=this._lfoL.frequency,At(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=r.type,this.spread=r.spread}static getDefaults(){return Object.assign(Zh.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(r){this._depth=r;const g=this._delayTime*r;this._lfoL.min=Math.max(this._delayTime-g,0),this._lfoL.max=this._delayTime+g,this._lfoR.min=Math.max(this._delayTime-g,0),this._lfoR.max=this._delayTime+g}get delayTime(){return this._delayTime*1e3}set delayTime(r){this._delayTime=r/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(r){this._lfoL.type=r,this._lfoR.type=r}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(r){this._lfoL.phase=90-r/2,this._lfoR.phase=r/2+90}start(r){return this._lfoL.start(r),this._lfoR.start(r),this}stop(r){return this._lfoL.stop(r),this._lfoR.stop(r),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Kf extends rn{constructor(){const r=Qe(Kf.getDefaults(),arguments,["distortion"]);super(r),this.name="Distortion",this._shaper=new zs({context:this.context,length:4096}),this._distortion=r.distortion,this.connectEffect(this._shaper),this.distortion=r.distortion,this.oversample=r.oversample}static getDefaults(){return Object.assign(rn.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(r){this._distortion=r;const g=r*100,t=Math.PI/180;this._shaper.setMap(x=>Math.abs(x)<.001?0:(3+g)*x*20*t/(Math.PI+g*Math.abs(x)))}get oversample(){return this._shaper.oversample}set oversample(r){this._shaper.oversample=r}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Fc extends rn{constructor(r){super(r),this.name="FeedbackEffect",this._feedbackGain=new jt({context:this.context,gain:r.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,At(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(rn.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Jf extends Fc{constructor(){const r=Qe(Jf.getDefaults(),arguments,["delayTime","feedback"]);super(r),this.name="FeedbackDelay",this._delayNode=new us({context:this.context,delayTime:r.delayTime,maxDelay:r.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),At(this,"delayTime")}static getDefaults(){return Object.assign(Fc.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class C2 extends rt{constructor(r){super(r),this.name="PhaseShiftAllpass",this.input=new jt({context:this.context}),this.output=new jt({context:this.context}),this.offset90=new jt({context:this.context});const g=[.6923878,.9360654322959,.988229522686,.9987488452737],t=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(g),this._bank1=this._createAllPassFilterBank(t),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),ds(this.input,...this._bank0,this._oneSampleDelay,this.output),ds(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(r){return r.map(t=>{const x=[[t*t,0,-1],[1,0,-(t*t)]];return this.context.createIIRFilter(x[0],x[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(r=>r.disconnect()),this._bank1.forEach(r=>r.disconnect()),this._oneSampleDelay.disconnect(),this}}class ep extends rn{constructor(){const r=Qe(ep.getDefaults(),arguments,["frequency"]);super(r),this.name="FrequencyShifter",this.frequency=new Rt({context:this.context,units:"frequency",value:r.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new tu({context:this.context,type:"sine"}),this._cosine=new kr({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Er({context:this.context}),this._cosineMultiply=new Er({context:this.context}),this._negate=new Rf({context:this.context}),this._add=new Yo({context:this.context}),this._phaseShifter=new C2({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const g=this.immediate();this._sine.start(g),this._cosine.start(g)}static getDefaults(){return Object.assign(rn.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const Qy=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],$y=[225,556,441,341];class tp extends $s{constructor(){const r=Qe(tp.getDefaults(),arguments,["roomSize","dampening"]);super(r),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[],this.roomSize=new Rt({context:this.context,value:r.roomSize,units:"normalRange"}),this._allpassFiltersL=$y.map(g=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=g,t}),this._allpassFiltersR=$y.map(g=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=g,t}),this._combFilters=Qy.map((g,t)=>{const x=new au({context:this.context,dampening:r.dampening,delayTime:g});return t<Qy.length/2?this.connectEffectLeft(x,...this._allpassFiltersL):this.connectEffectRight(x,...this._allpassFiltersR),this.roomSize.connect(x.resonance),x}),At(this,["roomSize"])}static getDefaults(){return Object.assign($s.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(r){this._combFilters.forEach(g=>g.dampening=r)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(r=>r.disconnect()),this._allpassFiltersR.forEach(r=>r.disconnect()),this._combFilters.forEach(r=>r.dispose()),this.roomSize.dispose(),this}}const Ky=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],M2=[.773,.802,.753,.733],O2=[347,113,37];class rp extends $s{constructor(){const r=Qe(rp.getDefaults(),arguments,["roomSize"]);super(r),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[],this.roomSize=new Rt({context:this.context,value:r.roomSize,units:"normalRange"}),this._scaleRoomSize=new xi({context:this.context,min:-.733,max:.197}),this._allpassFilters=O2.map(g=>{const t=this.context.createBiquadFilter();return t.type="allpass",t.frequency.value=g,t}),this._feedbackCombFilters=Ky.map((g,t)=>{const x=new iu({context:this.context,delayTime:g});return this._scaleRoomSize.connect(x.resonance),x.resonance.value=M2[t],t<Ky.length/2?this.connectEffectLeft(...this._allpassFilters,x):this.connectEffectRight(...this._allpassFilters,x),x}),this.roomSize.connect(this._scaleRoomSize),At(this,["roomSize"])}static getDefaults(){return Object.assign($s.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(r=>r.disconnect()),this._feedbackCombFilters.forEach(r=>r.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class Jy extends Zh{constructor(r){super(r),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),At(this,["feedback"])}}class np extends Jy{constructor(){const r=Qe(np.getDefaults(),arguments,["delayTime","feedback"]);super(r),this.name="PingPongDelay",this._leftDelay=new us({context:this.context,maxDelay:r.maxDelay}),this._rightDelay=new us({context:this.context,maxDelay:r.maxDelay}),this._rightPreDelay=new us({context:this.context,maxDelay:r.maxDelay}),this.delayTime=new Rt({context:this.context,units:"time",value:r.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),At(this,["delayTime"])}static getDefaults(){return Object.assign(Jy.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class sp extends Fc{constructor(){const r=Qe(sp.getDefaults(),arguments,["pitch"]);super(r),this.name="PitchShift",this._frequency=new Rt({context:this.context}),this._delayA=new us({maxDelay:1,context:this.context}),this._lfoA=new Dn({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new us({maxDelay:1,context:this.context}),this._lfoB=new Dn({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new ol({context:this.context}),this._crossFadeLFO=new Dn({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new us({delayTime:r.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,At(this,"delayTime"),this._pitch=r.pitch,this._windowSize=r.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const g=this.now();this._lfoA.start(g),this._lfoB.start(g),this._crossFadeLFO.start(g),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Fc.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(r){this._pitch=r;let g=0;r<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,g=Fa(r-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,g=Fa(r)-1),this._frequency.value=g*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(r){this._windowSize=this.toSeconds(r),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class ip extends $s{constructor(){const r=Qe(ip.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(r),this.name="Phaser",this._lfoL=new Dn({context:this.context,frequency:r.frequency,min:0,max:1}),this._lfoR=new Dn({context:this.context,frequency:r.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(r.baseFrequency),this._octaves=r.octaves,this.Q=new Rt({context:this.context,value:r.Q,units:"positive"}),this._filtersL=this._makeFilters(r.stages,this._lfoL),this._filtersR=this._makeFilters(r.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=r.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=r.baseFrequency,this.octaves=r.octaves,this._lfoL.start(),this._lfoR.start(),At(this,["frequency","Q"])}static getDefaults(){return Object.assign($s.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(r,g){const t=[];for(let x=0;x<r;x++){const f=this.context.createBiquadFilter();f.type="allpass",this.Q.connect(f.Q),g.connect(f.frequency),t.push(f)}return t}get octaves(){return this._octaves}set octaves(r){this._octaves=r;const g=this._baseFrequency*Math.pow(2,r);this._lfoL.max=g,this._lfoR.max=g}get baseFrequency(){return this._baseFrequency}set baseFrequency(r){this._baseFrequency=this.toFrequency(r),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(r=>r.disconnect()),this._filtersR.forEach(r=>r.disconnect()),this.frequency.dispose(),this}}class op extends rn{constructor(){const r=Qe(op.getDefaults(),arguments,["decay"]);super(r),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve(),this._decay=r.decay,this._preDelay=r.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(rn.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(r){r=this.toSeconds(r),pn(r,.001),this._decay=r,this.generate()}get preDelay(){return this._preDelay}set preDelay(r){r=this.toSeconds(r),pn(r,0),this._preDelay=r,this.generate()}generate(){return hr(this,void 0,void 0,function*(){const r=this.ready,g=new $a(2,this._decay+this._preDelay,this.context.sampleRate),t=new _i({context:g}),x=new _i({context:g}),f=new uo({context:g});t.connect(f,0,0),x.connect(f,0,1);const u=new jt({context:g}).toDestination();f.connect(u),t.start(0),x.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const c=g.render();return this.ready=c.then(Wt),yield r,this._convolver.buffer=(yield c).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class uu extends rt{constructor(){super(Qe(uu.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Ko({channels:2,context:this.context}),this._midAdd=new Yo({context:this.context}),this.mid=new Er({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Zo({context:this.context}),this.side=new Er({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class cu extends rt{constructor(){super(Qe(cu.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new jt({context:this.context}),this.side=new jt({context:this.context}),this._left=new Yo({context:this.context}),this._leftMult=new Er({context:this.context,value:Math.SQRT1_2}),this._right=new Zo({context:this.context}),this._rightMult=new Er({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new uo({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class eg extends rn{constructor(r){super(r),this.name="MidSideEffect",this._midSideMerge=new cu({context:this.context}),this._midSideSplit=new uu({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...r){this._midSend.chain(...r,this._midReturn)}connectEffectSide(...r){this._sideSend.chain(...r,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class ap extends eg{constructor(){const r=Qe(ap.getDefaults(),arguments,["width"]);super(r),this.name="StereoWidener",this.width=new Rt({context:this.context,value:r.width,units:"normalRange"}),At(this,["width"]),this._twoTimesWidthMid=new Er({context:this.context,value:2}),this._twoTimesWidthSide=new Er({context:this.context,value:2}),this._midMult=new Er({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Zo({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),In(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Er({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(eg.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class lp extends $s{constructor(){const r=Qe(lp.getDefaults(),arguments,["frequency","depth"]);super(r),this.name="Tremolo",this._lfoL=new Dn({context:this.context,type:r.type,min:1,max:0}),this._lfoR=new Dn({context:this.context,type:r.type,min:1,max:0}),this._amplitudeL=new jt({context:this.context}),this._amplitudeR=new jt({context:this.context}),this.frequency=new Rt({context:this.context,value:r.frequency,units:"frequency"}),this.depth=new Rt({context:this.context,value:r.depth,units:"normalRange"}),At(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=r.spread}static getDefaults(){return Object.assign($s.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(r){return this._lfoL.start(r),this._lfoR.start(r),this}stop(r){return this._lfoL.stop(r),this._lfoR.stop(r),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(r){this._lfoL.type=r,this._lfoR.type=r}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(r){this._lfoL.phase=90-r/2,this._lfoR.phase=r/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class up extends rn{constructor(){const r=Qe(up.getDefaults(),arguments,["frequency","depth"]);super(r),this.name="Vibrato",this._delayNode=new us({context:this.context,delayTime:0,maxDelay:r.maxDelay}),this._lfo=new Dn({context:this.context,type:r.type,min:0,max:r.maxDelay,frequency:r.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=r.depth,At(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(rn.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(r){this._lfo.type=r}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class du extends rt{constructor(){const r=Qe(du.getDefaults(),arguments,["type","size"]);super(r),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new jt({context:this.context}),this._split=new Ko({context:this.context,channels:r.channels}),this.input.connect(this._split),pn(r.channels,1);for(let g=0;g<r.channels;g++)this._analysers[g]=this.context.createAnalyser(),this._split.connect(this._analysers[g],g,0);this.size=r.size,this.type=r.type,this.smoothing=r.smoothing}static getDefaults(){return Object.assign(rt.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((r,g)=>{const t=this._buffers[g];this._type==="fft"?r.getFloatFrequencyData(t):this._type==="waveform"&&r.getFloatTimeDomainData(t)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(r){this._analysers.forEach((g,t)=>{g.fftSize=r*2,this._buffers[t]=new Float32Array(r)})}get channels(){return this._analysers.length}get type(){return this._type}set type(r){Tt(r==="waveform"||r==="fft",`Analyser: invalid type: ${r}`),this._type=r}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(r){this._analysers.forEach(g=>g.smoothingTimeConstant=r)}dispose(){return super.dispose(),this._analysers.forEach(r=>r.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class io extends rt{constructor(){super(Qe(io.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new du({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class cp extends io{constructor(){const r=Qe(cp.getDefaults(),arguments,["smoothing"]);super(r),this.name="Meter",this.input=this.output=this._analyser=new du({context:this.context,size:256,type:"waveform",channels:r.channelCount}),this.smoothing=r.smoothing,this.normalRange=r.normalRange,this._rms=new Array(r.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(io.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return Ya("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const r=this._analyser.getValue(),t=(this.channels===1?[r]:r).map((x,f)=>{const u=x.reduce((s,d)=>s+d*d,0),c=Math.sqrt(u/x.length);return this._rms[f]=Math.max(c,this._rms[f]*this.smoothing),this.normalRange?this._rms[f]:Jl(this._rms[f])});return this.channels===1?t[0]:t}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class dp extends io{constructor(){const r=Qe(dp.getDefaults(),arguments,["size"]);super(r),this.name="FFT",this.normalRange=r.normalRange,this._analyser.type="fft",this.size=r.size}static getDefaults(){return Object.assign(rt.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(g=>this.normalRange?Na(g):g)}get size(){return this._analyser.size}set size(r){this._analyser.size=r}get smoothing(){return this._analyser.smoothing}set smoothing(r){this._analyser.smoothing=r}getFrequencyOfIndex(r){return Tt(0<=r&&r<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),r*this.context.sampleRate/(this.size*2)}}class hp extends io{constructor(){super(Qe(hp.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class fp extends io{constructor(){const r=Qe(fp.getDefaults(),arguments,["size"]);super(r),this.name="Waveform",this._analyser.type="waveform",this.size=r.size}static getDefaults(){return Object.assign(io.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(r){this._analyser.size=r}}class Vr extends rt{constructor(){const r=Qe(Vr.getDefaults(),arguments,["solo"]);super(r),this.name="Solo",this.input=this.output=new jt({context:this.context}),Vr._allSolos.has(this.context)||Vr._allSolos.set(this.context,new Set),Vr._allSolos.get(this.context).add(this),this.solo=r.solo}static getDefaults(){return Object.assign(rt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(r){r?this._addSolo():this._removeSolo(),Vr._allSolos.get(this.context).forEach(g=>g._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Vr._soloed.has(this.context)||Vr._soloed.set(this.context,new Set),Vr._soloed.get(this.context).add(this)}_removeSolo(){Vr._soloed.has(this.context)&&Vr._soloed.get(this.context).delete(this)}_isSoloed(){return Vr._soloed.has(this.context)&&Vr._soloed.get(this.context).has(this)}_noSolos(){return!Vr._soloed.has(this.context)||Vr._soloed.has(this.context)&&Vr._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Vr._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Vr._allSolos=new Map;Vr._soloed=new Map;class rd extends rt{constructor(){const r=Qe(rd.getDefaults(),arguments,["pan","volume"]);super(r),this.name="PanVol",this._panner=this.input=new ro({context:this.context,pan:r.pan,channelCount:r.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Si({context:this.context,volume:r.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=r.mute,At(this,["pan","volume"])}static getDefaults(){return Object.assign(rt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(r){this._volume.mute=r}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Vo extends rt{constructor(){const r=Qe(Vo.getDefaults(),arguments,["volume","pan"]);super(r),this.name="Channel",this._solo=this.input=new Vr({solo:r.solo,context:this.context}),this._panVol=this.output=new rd({context:this.context,pan:r.pan,volume:r.volume,mute:r.mute,channelCount:r.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),At(this,["pan","volume"])}static getDefaults(){return Object.assign(rt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(r){this._solo.solo=r}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(r){this._panVol.mute=r}_getBus(r){return Vo.buses.has(r)||Vo.buses.set(r,new jt({context:this.context})),Vo.buses.get(r)}send(r,g=0){const t=this._getBus(r),x=new jt({context:this.context,units:"decibels",gain:g});return this.connect(x),x.connect(t),x}receive(r){return this._getBus(r).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Vo.buses=new Map;class pp extends rt{constructor(){super(Qe(pp.getDefaults(),arguments)),this.name="Mono",this.input=new jt({context:this.context}),this._merge=this.output=new uo({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class hu extends rt{constructor(){const r=Qe(hu.getDefaults(),arguments,["lowFrequency","highFrequency"]);super(r),this.name="MultibandSplit",this.input=new jt({context:this.context}),this.output=void 0,this.low=new Tn({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Tn({context:this.context,frequency:0,type:"highpass"}),this.mid=new Tn({context:this.context,frequency:0,type:"lowpass"}),this.high=new Tn({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high],this.lowFrequency=new Rt({context:this.context,units:"frequency",value:r.lowFrequency}),this.highFrequency=new Rt({context:this.context,units:"frequency",value:r.highFrequency}),this.Q=new Rt({context:this.context,units:"positive",value:r.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),At(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(rt.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),Kl(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class mp extends rt{constructor(){const r=Qe(mp.getDefaults(),arguments,["positionX","positionY","positionZ"]);super(r),this.name="Panner3D",this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=r.panningModel,this.maxDistance=r.maxDistance,this.distanceModel=r.distanceModel,this.coneOuterGain=r.coneOuterGain,this.coneOuterAngle=r.coneOuterAngle,this.coneInnerAngle=r.coneInnerAngle,this.refDistance=r.refDistance,this.rolloffFactor=r.rolloffFactor,this.positionX=new Ft({context:this.context,param:this._panner.positionX,value:r.positionX}),this.positionY=new Ft({context:this.context,param:this._panner.positionY,value:r.positionY}),this.positionZ=new Ft({context:this.context,param:this._panner.positionZ,value:r.positionZ}),this.orientationX=new Ft({context:this.context,param:this._panner.orientationX,value:r.orientationX}),this.orientationY=new Ft({context:this.context,param:this._panner.orientationY,value:r.orientationY}),this.orientationZ=new Ft({context:this.context,param:this._panner.orientationZ,value:r.orientationZ})}static getDefaults(){return Object.assign(rt.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(r,g,t){return this.positionX.value=r,this.positionY.value=g,this.positionZ.value=t,this}setOrientation(r,g,t){return this.orientationX.value=r,this.orientationY.value=g,this.orientationZ.value=t,this}get panningModel(){return this._panner.panningModel}set panningModel(r){this._panner.panningModel=r}get refDistance(){return this._panner.refDistance}set refDistance(r){this._panner.refDistance=r}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(r){this._panner.rolloffFactor=r}get distanceModel(){return this._panner.distanceModel}set distanceModel(r){this._panner.distanceModel=r}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(r){this._panner.coneInnerAngle=r}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(r){this._panner.coneOuterAngle=r}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(r){this._panner.coneOuterGain=r}get maxDistance(){return this._panner.maxDistance}set maxDistance(r){this._panner.maxDistance=r}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Uc extends rt{constructor(){const r=Qe(Uc.getDefaults(),arguments);super(r),this.name="Recorder",this.input=new jt({context:this.context}),Tt(Uc.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:r.mimeType})}static getDefaults(){return rt.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return An!==null&&Reflect.has(An,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return hr(this,void 0,void 0,function*(){Tt(this.state!=="started","Recorder is already started");const r=new Promise(g=>{const t=()=>{this._recorder.removeEventListener("start",t,!1),g()};this._recorder.addEventListener("start",t,!1)});return this._recorder.start(),yield r})}stop(){return hr(this,void 0,void 0,function*(){Tt(this.state!=="stopped","Recorder is not started");const r=new Promise(g=>{const t=x=>{this._recorder.removeEventListener("dataavailable",t,!1),g(x.data)};this._recorder.addEventListener("dataavailable",t,!1)});return this._recorder.stop(),yield r})}pause(){return Tt(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class vi extends rt{constructor(){const r=Qe(vi.getDefaults(),arguments,["threshold","ratio"]);super(r),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new Ft({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:r.threshold}),this.attack=new Ft({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:r.attack}),this.release=new Ft({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:r.release}),this.knee=new Ft({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:r.knee}),this.ratio=new Ft({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:r.ratio}),At(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(rt.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class yp extends rt{constructor(){const r=Qe(yp.getDefaults(),arguments,["threshold","smoothing"]);super(r),this.name="Gate",this._follower=new lu({context:this.context,smoothing:r.smoothing}),this._gt=new ed({context:this.context,value:Na(r.threshold)}),this.input=new jt({context:this.context}),this._gate=this.output=new jt({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(rt.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return Jl(this._gt.value)}set threshold(r){this._gt.value=Na(r)}get smoothing(){return this._follower.smoothing}set smoothing(r){this._follower.smoothing=r}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class gp extends rt{constructor(){const r=Qe(gp.getDefaults(),arguments,["threshold"]);super(r),this.name="Limiter",this._compressor=this.input=this.output=new vi({context:this.context,ratio:20,attack:.003,release:.01,threshold:r.threshold}),this.threshold=this._compressor.threshold,At(this,"threshold")}static getDefaults(){return Object.assign(rt.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class vp extends rt{constructor(){const r=Qe(vp.getDefaults(),arguments);super(r),this.name="MidSideCompressor",this._midSideSplit=this.input=new uu({context:this.context}),this._midSideMerge=this.output=new cu({context:this.context}),this.mid=new vi(Object.assign(r.mid,{context:this.context})),this.side=new vi(Object.assign(r.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),At(this,["mid","side"])}static getDefaults(){return Object.assign(rt.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class _p extends rt{constructor(){const r=Qe(_p.getDefaults(),arguments);super(r),this.name="MultibandCompressor",this._splitter=this.input=new hu({context:this.context,lowFrequency:r.lowFrequency,highFrequency:r.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new jt({context:this.context}),this.low=new vi(Object.assign(r.low,{context:this.context})),this.mid=new vi(Object.assign(r.mid,{context:this.context})),this.high=new vi(Object.assign(r.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),At(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(rt.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class bp extends rt{constructor(){const r=Qe(bp.getDefaults(),arguments,["low","mid","high"]);super(r),this.name="EQ3",this.output=new jt({context:this.context}),this._internalChannels=[],this.input=this._multibandSplit=new hu({context:this.context,highFrequency:r.highFrequency,lowFrequency:r.lowFrequency}),this._lowGain=new jt({context:this.context,gain:r.low,units:"decibels"}),this._midGain=new jt({context:this.context,gain:r.mid,units:"decibels"}),this._highGain=new jt({context:this.context,gain:r.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),At(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(rt.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),Kl(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class xp extends rt{constructor(){const r=Qe(xp.getDefaults(),arguments,["url","onload"]);super(r),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new Qt(r.url,g=>{this.buffer=g,r.onload()}),this.input=new jt({context:this.context}),this.output=new jt({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=r.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(rt.getDefaults(),{normalize:!0,onload:Wt})}load(r){return hr(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(r)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(r){r&&this._buffer.set(r),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const g=this._buffer.get();this._convolver.buffer=g||null}get normalize(){return this._convolver.normalize}set normalize(r){this._convolver.normalize=r}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function A2(){return _r().now()}function P2(){return _r().immediate()}const mi=_r().transport;function R2(){return _r().transport}const Sc=_r().destination,D2=_r().destination;function I2(){return _r().destination}const L2=_r().listener;function N2(){return _r().listener}const fv=_r().draw;function F2(){return _r().draw}const pv=_r();function U2(){return Qt.loaded()}const B2=Qt,V2=el,z2=lo,_c=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator:ru,AMSynth:Df,Abs:lv,Add:Yo,AmplitudeEnvelope:Qo,Analyser:du,AudioToGain:$c,AutoFilter:Wf,AutoPanner:Hf,AutoWah:Xf,BaseContext:wf,BiquadFilter:Gl,BitCrusher:Yf,Buffer:B2,BufferSource:z2,Buffers:V2,Channel:Vo,Chebyshev:Qf,Chorus:$f,Clock:Ja,Compressor:vi,Context:Qa,Convolver:xp,CrossFade:ol,DCMeter:hp,Delay:us,Destination:Sc,Distortion:Kf,Draw:fv,DuoSynth:If,EQ3:bp,Emitter:Za,Envelope:vn,FFT:dp,FMOscillator:rl,FMSynth:Lf,FatOscillator:nu,FeedbackCombFilter:iu,FeedbackDelay:Jf,Filter:Tn,Follower:lu,Freeverb:tp,Frequency:Pa,FrequencyClass:Rn,FrequencyEnvelope:ql,FrequencyShifter:ep,Gain:jt,GainToAudio:uv,Gate:yp,GrainPlayer:Pf,GreaterThan:ed,GreaterThanZero:Jc,IntervalTimeline:ov,JCReverb:rp,LFO:Dn,Limiter:gp,Listener:L2,Loop:Va,LowpassCombFilter:au,Master:D2,MembraneSynth:il,Merge:uo,MetalSynth:Nf,Meter:cp,MidSideCompressor:vp,MidSideMerge:cu,MidSideSplit:uu,Midi:l2,MidiClass:Ba,Mono:pp,MonoSynth:Bo,MultibandCompressor:_p,MultibandSplit:hu,Multiply:Er,Negate:Rf,Noise:_i,NoiseSynth:Ff,Offline:a2,OfflineContext:$a,OmniOscillator:bi,OnePoleFilter:ou,Oscillator:kr,PWMOscillator:su,PanVol:rd,Panner:ro,Panner3D:mp,Param:Ft,Part:za,Pattern:Gf,Phaser:ip,PingPongDelay:np,PitchShift:sp,Player:sl,Players:Af,PluckSynth:Vf,PolySynth:zf,Pow:tl,PulseOscillator:nl,Recorder:Uc,Reverb:op,Sampler:$o,Scale:xi,ScaleExp:td,Sequence:qf,Signal:Rt,Solo:Vr,Split:Ko,StateTimeline:Ka,StereoWidener:ap,Subtract:Zo,SyncedSignal:p2,Synth:so,Ticks:u2,TicksClass:Tr,Time:iv,TimeClass:as,Timeline:ls,ToneAudioBuffer:Qt,ToneAudioBuffers:el,ToneAudioNode:rt,ToneBufferSource:lo,ToneEvent:Qs,ToneOscillatorNode:tu,Transport:mi,TransportTime:s2,TransportTimeClass:Zr,Tremolo:lp,Unit:h2,UserMedia:Ul,Vibrato:up,Volume:Si,WaveShaper:zs,Waveform:fp,Zero:Kc,connect:In,connectSeries:ds,connectSignal:eu,context:pv,dbToGain:Na,debug:Vw,defaultArg:ws,disconnect:Tf,fanIn:i2,ftom:Ji,gainToDb:Jl,getContext:_r,getDestination:I2,getDraw:F2,getListener:N2,getTransport:R2,immediate:P2,intervalToFrequencyRatio:Fa,isArray:gn,isBoolean:vf,isDefined:Vt,isFunction:$g,isNote:Fl,isNumber:cs,isObject:gi,isString:Us,isUndef:Xn,loaded:U2,mtof:Sf,now:A2,optionsFromArguments:Qe,setContext:Lc,start:Aa,supported:Uw,version:Kh},Symbol.toStringTag,{value:"Module"})),tg=D=>{let r;const g=new Set,t=(d,m)=>{const v=typeof d=="function"?d(r):d;if(!Object.is(v,r)){const i=r;r=m??(typeof v!="object"||v===null)?v:Object.assign({},r,v),g.forEach(n=>n(r,i))}},x=()=>r,c={setState:t,getState:x,getInitialState:()=>s,subscribe:d=>(g.add(d),()=>g.delete(d))},s=r=D(t,x,c);return c},G2=D=>D?tg(D):tg,q2=D=>D;function W2(D,r=q2){const g=xy.useSyncExternalStore(D.subscribe,()=>r(D.getState()),()=>r(D.getInitialState()));return xy.useDebugValue(g),g}const H2=D=>{const r=G2(D),g=t=>W2(r,t);return Object.assign(g,r),g},X2=D=>H2(D),jc=[{name:"Kick",volume:-6,synth:{type:"MembraneSynth",options:{pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.05,decay:.2,sustain:0,release:1,attackCurve:"exponential"}}},effects:[{type:"Filter",options:{frequency:600,type:"lowpass",rolloff:-24}}],keyRange:{low:"C1",high:"C2"}},{name:"Drums",volume:-6,sampler:{options:{urls:{C2:"CR-78Kit_0.wav",D2:"CR-78Kit_2.wav",E2:"CR-78Kit_4.wav",F2:"CR-78Kit_6.wav"},baseUrl:"src/store/samples/CR-78-samples/",release:1,attack:0}},effects:[{type:"Compressor",options:{threshold:-20,ratio:4}}],keyRange:{low:"C2",high:"F2"}},{name:"Lead",volume:-4,synth:{type:"FMSynth",options:{harmonicity:2,modulationIndex:3,envelope:{attack:.01,decay:.2,sustain:.8,release:.1}}},effects:[{type:"Filter",options:{frequency:2e3,type:"lowpass"}},{type:"Reverb",options:{decay:1.5,wet:.3}}],keyRange:{low:"C4",high:"C6"}},{name:"Pad",volume:-0,synth:{type:"PolySynth",options:{polyphony:6,oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:0,release:.2}}},effects:[{type:"Chorus",options:{frequency:4,delayTime:2.5,depth:.7,wet:.5}},{type:"Reverb",options:{decay:4,wet:.6}}],keyRange:{low:"C3",high:"C5"}},{name:"Arp",volume:-6,synth:{type:"MonoSynth",options:{oscillator:{type:"square"},envelope:{attack:.01,decay:.1,sustain:.3,release:.1}}},effects:[{type:"PingPongDelay",options:{delayTime:"8n",feedback:.3,wet:.3}}],keyRange:{low:"C4",high:"C6"}},{name:"Noise",volume:-12,synth:{type:"Noise",options:{type:"white",playbackRate:1},envelope:{attack:.005,decay:.1,sustain:.1,release:.5}},effects:[{type:"Filter",options:{frequency:1e3,type:"bandpass",Q:2}}],keyRange:{low:"C1",high:"C2"}},{name:"Noise2",volume:-12,synth:{type:"Noise",options:{type:"white",playbackRate:1},envelope:{attack:.005,decay:.1,sustain:.1,release:.5}},effects:[{type:"Filter",options:{frequency:1e3,type:"bandpass",Q:2}}],keyRange:{low:"C1",high:"C2"}}],rg=()=>{const D=new il({envelope:{attack:.001,decay:.1,sustain:0,release:.1},pitchDecay:.01,octaves:2,volume:-12}).toDestination(),r=new Va(g=>{D.triggerAttackRelease("C4","16n",g)},"4n");return{start:()=>{mi.state==="started"&&r.start()},stop:()=>r.stop(),dispose:()=>{r.stop(),r.dispose(),D.dispose()}}},Y2=D=>new Promise((r,g)=>{const t=new $o({...D.sampler.options,onload:()=>r(t),onerror:x=>g(x)}).toDestination()}),Z2=async D=>{var x;const r=jc[D];let g,t=[];if(r.synth)if(r.synth.type==="Noise"){const f=new _i({type:r.synth.options.type,volume:r.volume,playbackRate:r.synth.options.playbackRate}),u=new Qo({attack:r.synth.envelope.attack,decay:r.synth.envelope.decay,sustain:r.synth.envelope.sustain,release:r.synth.envelope.release}),c=new Tn(1e3,"lowpass"),s=new ro(0);t.push(c,s),r.effects.forEach(m=>{const v=new _c[m.type](m.options);t.push(v)}),f.connect(u).connect(c).connect(s);let d=s;t.slice(2).forEach(m=>{d.connect(m),d=m}),d.connect(Sc),g={noise:f,envelope:u,loaded:!0,trigger:(m,v)=>{f.start(m),u.triggerAttackRelease(v,m),f.stop(m+v)}}}else{g=new _c[r.synth.type](r.synth.options),g.loaded=!0,g.volume.value=r.volume,r.effects.forEach(c=>{const s=new _c[c.type](c.options);t.push(s)});const f=new ro(0),u=new Tn(1e3,"lowpass");t.push(f,u),g.chain(...t,Sc)}else if(r.sampler){g=await Y2(r),g.volume.value=r.volume,r.effects.forEach(c=>{const s=new _c[c.type](c.options);t.push(s)});const f=new ro(0),u=new Tn(1e3,"lowpass");t.push(f,u),g.chain(...t,Sc)}return{id:D,name:r.name,x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,instrument:g,effects:t,panner:t[t.length-2],filter:t[t.length-1],sequence:[],isMuted:!1,isPlaying:!1,toneSequence:null,keyRange:r.keyRange,isNoiseTrack:((x=r.synth)==null?void 0:x.type)==="Noise",midiNoteToFrequency:f=>{const u=Pa(f).toFrequency();return Math.max(100,Math.min(8e3,u))},get isLoaded(){return this.instrument instanceof $o?this.instrument.loaded:!0}}},Lr=X2((D,r)=>{let g=null;return console.log("Initializing Tone.js..."),Aa().then(()=>{console.log("Tone.js started successfully.")}).catch(t=>{console.error("Error starting Tone.js:",t)}),{isPlaying:!1,bpm:120,playbackPosition:0,metronomeEnabled:!1,selectedTrackId:null,tracks:[],isWelcomeModalOpen:!0,isPianoRollOpen:!1,initializeTracks:async()=>{console.log("TRACK_CONFIGS length:",jc.length),console.log("TRACK_CONFIGS:",jc),console.log("Starting initializeTracks...");try{await Aa(),console.log("Tone.js started, creating tracks...");const t=[];for(let x=0;x<jc.length;x++){console.log(`Creating track ${x}...`);const f=await Z2(x);console.log(`Track ${x} created:`,f),t.push(f)}console.log("All tracks created, updating state:",t),D({tracks:t})}catch(t){console.error("Error initializing tracks:",t)}},updateTrackPosition:(t,x,f)=>{D(u=>({tracks:u.tracks.map(s=>{if(s.id===t){const d=x/window.innerWidth*2-1,m=1-f/window.innerHeight;return s.panner.pan.value=d,s.filter.frequency.value=m*1e4+100,{...s,x,y:f}}return s})}))},setTrackSequence:(t,x)=>{console.log(`Setting sequence for track ${t}:`,x),console.log("Current Transport state:",mi.state),console.log("Animation system available:",!!window.animationSystem),D(f=>({tracks:f.tracks.map(u=>{if(u.id===t){u.toneSequence&&(console.log("Disposing existing sequence"),u.toneSequence.dispose());const c=iv("16n").toSeconds();console.log("Sixteenth note duration:",c);try{const s=x.map(m=>({time:`0:${Math.floor(m.time/4)}:${m.time%4}`,note:m.note,duration:m.duration,velocity:.7}));console.log(`Created ${s.length} events for track ${t}`);const d=new za((m,v)=>{if(console.log(`Part callback triggered for track ${t}:`,{time:m,note:v.note,isMuted:u.isMuted}),!u.isMuted)try{const i=c*v.duration;u.isNoiseTrack?(console.log(`Triggering noise track ${t}`),u.instrument.trigger(m,i)):(console.log(`Triggering melodic track ${t}`),u.instrument.triggerAttackRelease(v.note,i,m,v.velocity)),fv.schedule(()=>{console.log(`Draw.schedule callback triggered for track ${t}`);const n=r().tracks.find(o=>o.id===t);console.log("Current track position:",n?{x:n.x,y:n.y}:"not found");const a=window.animationSystem;if(console.log("Animation system check:",{exists:!!a,hasMethod:!!(a!=null&&a.triggerAnimation)}),n&&(a!=null&&a.triggerAnimation)){const o=typeof v.note=="string"?Pa(v.note).toMidi():v.note;console.log("Preparing animation trigger:",{trackId:u.id,position:{x:n.x,y:n.y},note:{original:v.note,midi:o,velocity:v.velocity,duration:i*1e3}});try{a.triggerAnimation(u.id,n.x,n.y,{pitch:o,velocity:v.velocity,duration:i*1e3}),console.log(`Animation successfully triggered for track ${t}`)}catch(h){console.error("Error triggering animation:",h)}}else console.warn(`Could not trigger animation for track ${t}:`,{trackExists:!!n,animationSystemExists:!!a,hasMethod:!!(a!=null&&a.triggerAnimation)})},m)}catch(i){console.error(`Error in Part callback for track ${t}:`,i)}},s);return d.loop=!0,d.loopEnd="2:0:0",r().isPlaying?(console.log(`Starting sequence immediately for track ${t}`),d.start(0)):console.log(`Sequence created but not started for track ${t} (playback is stopped)`),{...u,sequence:x,toneSequence:d}}catch(s){return console.error(`Error creating sequence for track ${t}:`,s),u}}return u})}))},togglePlay:()=>{const t=!r().isPlaying;if(console.log("Toggling playback. Currently playing:",t),t){console.log("Starting playback..."),r().tracks.forEach(f=>{f.sequence&&f.sequence.length>0&&(f.toneSequence?(console.log(`Starting existing sequence for track ${f.id}`),f.toneSequence.start(0)):(console.log(`Creating new sequence for track ${f.id}`),r().setTrackSequence(f.id,f.sequence)))}),console.log("Starting Tone.Transport..."),mi.start(),r().metronomeEnabled&&g&&(console.log("Starting metronome..."),g.start());const x=setInterval(()=>{const f=mi.PPQ/4,u=mi.ticks,c=Math.floor(u/f)%32;D({playbackPosition:c})},16);D({isPlaying:!0,playbackIntervalId:x})}else console.log("Stopping playback..."),r().playbackIntervalId&&clearInterval(r().playbackIntervalId),g&&g.stop(),mi.stop(),D({isPlaying:!1,playbackPosition:0})},setBpm:t=>{mi.bpm.value=t,D({bpm:t})},initializeMetronome:async()=>{console.log("Initializing metronome...");try{g&&g.cleanup(),await Aa(),g=rg(),r().metronomeEnabled?(g.setVolume(!0),r().isPlaying&&g.start()):g.setVolume(!1),console.log("Metronome initialized successfully")}catch(t){console.error("Error initializing metronome:",t)}},toggleMetronome:()=>{const t=!r().metronomeEnabled;g||(g=rg()),t&&r().isPlaying?g.start():g.stop(),D({metronomeEnabled:t})},selectTrack:t=>{D({selectedTrackId:t,isPianoRollOpen:!0})},closeWelcomeModal:()=>{D({isWelcomeModalOpen:!1})},closePianoRoll:()=>{D({isPianoRollOpen:!1,selectedTrackId:null})},cleanup:()=>{r().tracks.forEach(t=>{t.toneSequence&&t.toneSequence.dispose(),t.instrument.dispose(),t.filter.dispose(),t.panner.dispose()}),g&&(g.cleanup(),g=null),D({tracks:[]})}}});function bc(D){throw new Error('Could not dynamically require "'+D+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Nh={exports:{}};/*! p5.js v1.11.2 November 28, 2024 */var ng;function Q2(){return ng||(ng=1,function(D,r){(function(g){D.exports=g()})(function(){var g;return function t(x,f,u){function c(m,v){if(!f[m]){if(!x[m]){var i=typeof bc=="function"&&bc;if(!v&&i)return i(m,!0);if(s)return s(m,!0);throw(v=new Error("Cannot find module '"+m+"'")).code="MODULE_NOT_FOUND",v}i=f[m]={exports:{}},x[m][0].call(i.exports,function(n){return c(x[m][1][n]||n)},i,i.exports,t,x,f,u)}return f[m].exports}for(var s=typeof bc=="function"&&bc,d=0;d<u.length;d++)c(u[d]);return c}({1:[function(t,x,f){f.byteLength=function(o){var o=i(o),a=o[0],o=o[1];return 3*(a+o)/4-o},f.toByteArray=function(n){var a,o,p=i(n),h=p[0],p=p[1],y=new s(function(S,k){return 3*(S+k)/4-k}(h,p)),w=0,b=0<p?h-4:h;for(o=0;o<b;o+=4)a=c[n.charCodeAt(o)]<<18|c[n.charCodeAt(o+1)]<<12|c[n.charCodeAt(o+2)]<<6|c[n.charCodeAt(o+3)],y[w++]=a>>16&255,y[w++]=a>>8&255,y[w++]=255&a;return p===2&&(a=c[n.charCodeAt(o)]<<2|c[n.charCodeAt(o+1)]>>4,y[w++]=255&a),p===1&&(a=c[n.charCodeAt(o)]<<10|c[n.charCodeAt(o+1)]<<4|c[n.charCodeAt(o+2)]>>2,y[w++]=a>>8&255,y[w++]=255&a),y},f.fromByteArray=function(n){for(var a,o=n.length,h=o%3,p=[],y=0,w=o-h;y<w;y+=16383)p.push(function(b,S,k){for(var E,T=[],R=S;R<k;R+=3)E=(b[R]<<16&16711680)+(b[R+1]<<8&65280)+(255&b[R+2]),T.push(function(O){return u[O>>18&63]+u[O>>12&63]+u[O>>6&63]+u[63&O]}(E));return T.join("")}(n,y,w<y+16383?w:y+16383));return h==1?(a=n[o-1],p.push(u[a>>2]+u[a<<4&63]+"==")):h==2&&(a=(n[o-2]<<8)+n[o-1],p.push(u[a>>10]+u[a>>4&63]+u[a<<2&63]+"=")),p.join("")};for(var u=[],c=[],s=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,v=d.length;m<v;++m)u[m]=d[m],c[d.charCodeAt(m)]=m;function i(n){var a=n.length;if(0<a%4)throw new Error("Invalid string. Length must be a multiple of 4");return n=n.indexOf("="),a=(n=n===-1?a:n)===a?0:4-n%4,[n,a]}c[45]=62,c[95]=63},{}],2:[function(t,x,f){},{}],3:[function(t,x,f){},{}],4:[function(t,x,f){(function(i){var c=t("base64-js"),s=t("ieee754"),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,m=(f.Buffer=i,f.SlowBuffer=function(A){return+A!=A&&(A=0),i.alloc(+A)},f.INSPECT_MAX_BYTES=50,2147483647);function v(A){if(m<A)throw new RangeError('The value "'+A+'" is invalid for option "size"');return A=new Uint8Array(A),Object.setPrototypeOf(A,i.prototype),A}function i(A,z,q){if(typeof A!="number")return n(A,z,q);if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(A)}function n(A,z,q){if(typeof A=="string"){var $=A,ie=z;if(i.isEncoding(ie=typeof ie=="string"&&ie!==""?ie:"utf8"))return re=0|y($,ie),fe=v(re),fe=($=fe.write($,ie))!==re?fe.slice(0,$):fe;throw new TypeError("Unknown encoding: "+ie)}if(ArrayBuffer.isView(A))return h(A);if(A!=null){if(K(A,ArrayBuffer)||A&&K(A.buffer,ArrayBuffer)){var re=A,$=z,fe=q;if($<0||re.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(re.byteLength<$+(fe||0))throw new RangeError('"length" is outside of buffer bounds');return re=$===void 0&&fe===void 0?new Uint8Array(re):fe===void 0?new Uint8Array(re,$):new Uint8Array(re,$,fe),Object.setPrototypeOf(re,i.prototype),re}if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(ie=A.valueOf&&A.valueOf(),ie!=null&&ie!==A)return i.from(ie,z,q);var ge=function(de){{var me,_e;if(i.isBuffer(de))return me=0|p(de.length),(_e=v(me)).length!==0&&de.copy(_e,0,0,me),_e}if(de.length!==void 0)return typeof de.length!="number"||Q(de.length)?v(0):h(de);if(de.type==="Buffer"&&Array.isArray(de.data))return h(de.data)}(A);if(ge)return ge;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return i.from(A[Symbol.toPrimitive]("string"),z,q)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}function a(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function o(A){return a(A),v(A<0?0:0|p(A))}function h(A){for(var z=A.length<0?0:0|p(A.length),q=v(z),$=0;$<z;$+=1)q[$]=255&A[$];return q}function p(A){if(m<=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m.toString(16)+" bytes");return 0|A}function y(A,z){if(i.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||K(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);var q=A.length,$=2<arguments.length&&arguments[2]===!0;if(!$&&q===0)return 0;for(var ie=!1;;)switch(z){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return Y(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return H(A).length;default:if(ie)return $?-1:Y(A).length;z=(""+z).toLowerCase(),ie=!0}}function w(A,z,q){var $,ie=!1;if((z=z===void 0||z<0?0:z)>this.length||(q=q===void 0||q>this.length?this.length:q)<=0||(q>>>=0)<=(z>>>=0))return"";for(A=A||"utf8";;)switch(A){case"hex":var re=this,xe=z,fe=q,_e=re.length;(!fe||fe<0||_e<fe)&&(fe=_e);for(var ge="",de=xe=!xe||xe<0?0:xe;de<fe;++de)ge+=se[re[de]];return ge;case"utf8":case"utf-8":return R(this,z,q);case"ascii":var me=this,_e=z,ae=q,he="";ae=Math.min(me.length,ae);for(var be=_e;be<ae;++be)he+=String.fromCharCode(127&me[be]);return he;case"latin1":case"binary":var ke=this,xe=z,we=q,Me="";we=Math.min(ke.length,we);for(var He=xe;He<we;++He)Me+=String.fromCharCode(ke[He]);return Me;case"base64":return Ie=this,$=q,(dt=z)===0&&$===Ie.length?c.fromByteArray(Ie):c.fromByteArray(Ie.slice(dt,$));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var Ie=z,dt=q,nt=this.slice(Ie,dt),ot="",ut=0;ut<nt.length;ut+=2)ot+=String.fromCharCode(nt[ut]+256*nt[ut+1]);return ot;default:if(ie)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),ie=!0}}function b(A,z,q){var $=A[z];A[z]=A[q],A[q]=$}function S(A,z,q,$,ie){if(A.length===0)return-1;if(typeof q=="string"?($=q,q=0):2147483647<q?q=2147483647:q<-2147483648&&(q=-2147483648),(q=(q=Q(q=+q)?ie?0:A.length-1:q)<0?A.length+q:q)>=A.length){if(ie)return-1;q=A.length-1}else if(q<0){if(!ie)return-1;q=0}if(typeof z=="string"&&(z=i.from(z,$)),i.isBuffer(z))return z.length===0?-1:k(A,z,q,$,ie);if(typeof z=="number")return z&=255,typeof Uint8Array.prototype.indexOf=="function"?(ie?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(A,z,q):k(A,[z],q,$,ie);throw new TypeError("val must be string, number or Buffer")}function k(A,z,q,$,ie){var re=1,fe=A.length,ge=z.length;if($!==void 0&&(($=String($).toLowerCase())==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(A.length<2||z.length<2)return-1;fe/=re=2,ge/=2,q/=2}function de(be,ke){return re===1?be[ke]:be.readUInt16BE(ke*re)}if(ie)for(var me=-1,_e=q;_e<fe;_e++)if(de(A,_e)===de(z,me===-1?0:_e-me)){if(_e-(me=me===-1?_e:me)+1===ge)return me*re}else me!==-1&&(_e-=_e-me),me=-1;else for(_e=q=fe<q+ge?fe-ge:q;0<=_e;_e--){for(var ae=!0,he=0;he<ge;he++)if(de(A,_e+he)!==de(z,he)){ae=!1;break}if(ae)return _e}return-1}function E(A,z,q,$){return W(function(ie){for(var re=[],fe=0;fe<ie.length;++fe)re.push(255&ie.charCodeAt(fe));return re}(z),A,q,$)}function T(A,z,q,$){return W(function(ie,re){for(var fe,ge,de=[],me=0;me<ie.length&&!((re-=2)<0);++me)ge=ie.charCodeAt(me),fe=ge>>8,ge=ge%256,de.push(ge),de.push(fe);return de}(z,A.length-q),A,q,$)}function R(A,z,q){q=Math.min(A.length,q);for(var $=[],ie=z;ie<q;){var re,fe,ge,de,me=A[ie],_e=null,ae=239<me?4:223<me?3:191<me?2:1;if(ie+ae<=q)switch(ae){case 1:me<128&&(_e=me);break;case 2:(192&(re=A[ie+1]))==128&&127<(de=(31&me)<<6|63&re)&&(_e=de);break;case 3:re=A[ie+1],fe=A[ie+2],(192&re)==128&&(192&fe)==128&&2047<(de=(15&me)<<12|(63&re)<<6|63&fe)&&(de<55296||57343<de)&&(_e=de);break;case 4:re=A[ie+1],fe=A[ie+2],ge=A[ie+3],(192&re)==128&&(192&fe)==128&&(192&ge)==128&&65535<(de=(15&me)<<18|(63&re)<<12|(63&fe)<<6|63&ge)&&de<1114112&&(_e=de)}_e===null?(_e=65533,ae=1):65535<_e&&(_e-=65536,$.push(_e>>>10&1023|55296),_e=56320|1023&_e),$.push(_e),ie+=ae}var he=$,be=he.length;if(be<=O)return String.fromCharCode.apply(String,he);for(var ke="",xe=0;xe<be;)ke+=String.fromCharCode.apply(String,he.slice(xe,xe+=O));return ke}f.kMaxLength=m,(i.TYPED_ARRAY_SUPPORT=function(){try{var A=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(A,z),A.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=n,Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(A,z,q){return z=z,q=q,a(A=A),!(A<=0)&&z!==void 0?typeof q=="string"?v(A).fill(z,q):v(A).fill(z):v(A)},i.allocUnsafe=o,i.allocUnsafeSlow=o,i.isBuffer=function(A){return A!=null&&A._isBuffer===!0&&A!==i.prototype},i.compare=function(A,z){if(K(A,Uint8Array)&&(A=i.from(A,A.offset,A.byteLength)),K(z,Uint8Array)&&(z=i.from(z,z.offset,z.byteLength)),!i.isBuffer(A)||!i.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===z)return 0;for(var q=A.length,$=z.length,ie=0,re=Math.min(q,$);ie<re;++ie)if(A[ie]!==z[ie]){q=A[ie],$=z[ie];break}return q<$?-1:$<q?1:0},i.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(A,z){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return i.alloc(0);if(z===void 0)for(ie=z=0;ie<A.length;++ie)z+=A[ie].length;for(var q=i.allocUnsafe(z),$=0,ie=0;ie<A.length;++ie){var re=A[ie];if(K(re,Uint8Array)&&(re=i.from(re)),!i.isBuffer(re))throw new TypeError('"list" argument must be an Array of Buffers');re.copy(q,$),$+=re.length}return q},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var A=this.length;if(A%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<A;z+=2)b(this,z,z+1);return this},i.prototype.swap32=function(){var A=this.length;if(A%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<A;z+=4)b(this,z,z+3),b(this,z+1,z+2);return this},i.prototype.swap64=function(){var A=this.length;if(A%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<A;z+=8)b(this,z,z+7),b(this,z+1,z+6),b(this,z+2,z+5),b(this,z+3,z+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var A=this.length;return A===0?"":arguments.length===0?R(this,0,A):w.apply(this,arguments)},i.prototype.equals=function(A){if(i.isBuffer(A))return this===A||i.compare(this,A)===0;throw new TypeError("Argument must be a Buffer")},i.prototype.inspect=function(){var z="",A=f.INSPECT_MAX_BYTES,z=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim();return this.length>A&&(z+=" ... "),"<Buffer "+z+">"},d&&(i.prototype[d]=i.prototype.inspect),i.prototype.compare=function(A,z,q,$,ie){if(K(A,Uint8Array)&&(A=i.from(A,A.offset,A.byteLength)),!i.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(q===void 0&&(q=A?A.length:0),$===void 0&&($=0),ie===void 0&&(ie=this.length),(z=z===void 0?0:z)<0||q>A.length||$<0||ie>this.length)throw new RangeError("out of range index");if(ie<=$&&q<=z)return 0;if(ie<=$)return-1;if(q<=z)return 1;if(this===A)return 0;for(var re=(ie>>>=0)-($>>>=0),fe=(q>>>=0)-(z>>>=0),ge=Math.min(re,fe),de=this.slice($,ie),me=A.slice(z,q),_e=0;_e<ge;++_e)if(de[_e]!==me[_e]){re=de[_e],fe=me[_e];break}return re<fe?-1:fe<re?1:0},i.prototype.includes=function(A,z,q){return this.indexOf(A,z,q)!==-1},i.prototype.indexOf=function(A,z,q){return S(this,A,z,q,!0)},i.prototype.lastIndexOf=function(A,z,q){return S(this,A,z,q,!1)},i.prototype.write=function(A,z,q,$){if(z===void 0)$="utf8",q=this.length,z=0;else if(q===void 0&&typeof z=="string")$=z,q=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite(q)?(q>>>=0,$===void 0&&($="utf8")):($=q,q=void 0)}var ie=this.length-z;if((q===void 0||ie<q)&&(q=ie),0<A.length&&(q<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");$=$||"utf8";for(var re,fe,ge,de=!1;;)switch($){case"hex":var me=this,_e=A,ae=z,he=q,be=(ae=Number(ae)||0,me.length-ae);(!he||be<(he=Number(he)))&&(he=be),(be=_e.length)/2<he&&(he=be/2);for(var ke=0;ke<he;++ke){var xe=parseInt(_e.substr(2*ke,2),16);if(Q(xe))return ke;me[ae+ke]=xe}return ke;case"utf8":case"utf-8":return be=z,ge=q,W(Y(A,(fe=this).length-be),fe,be,ge);case"ascii":return E(this,A,z,q);case"latin1":case"binary":return E(this,A,z,q);case"base64":return fe=this,ge=z,re=q,W(H(A),fe,ge,re);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,A,z,q);default:if(de)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),de=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function M(A,z,q){if(A%1!=0||A<0)throw new RangeError("offset is not uint");if(q<A+z)throw new RangeError("Trying to access beyond buffer length")}function L(A,z,q,$,ie,re){if(!i.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie<z||z<re)throw new RangeError('"value" argument is out of bounds');if(q+$>A.length)throw new RangeError("Index out of range")}function I(A,z,q,$){if(q+$>A.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function B(A,z,q,$,ie){return z=+z,q>>>=0,ie||I(A,0,q,4),s.write(A,z,q,$,23,4),q+4}function V(A,z,q,$,ie){return z=+z,q>>>=0,ie||I(A,0,q,8),s.write(A,z,q,$,52,8),q+8}i.prototype.slice=function(A,z){var q=this.length,q=((A=~~A)<0?(A+=q)<0&&(A=0):q<A&&(A=q),(z=z===void 0?q:~~z)<0?(z+=q)<0&&(z=0):q<z&&(z=q),z<A&&(z=A),this.subarray(A,z));return Object.setPrototypeOf(q,i.prototype),q},i.prototype.readUIntLE=function(A,z,q){A>>>=0,z>>>=0,q||M(A,z,this.length);for(var $=this[A],ie=1,re=0;++re<z&&(ie*=256);)$+=this[A+re]*ie;return $},i.prototype.readUIntBE=function(A,z,q){A>>>=0,z>>>=0,q||M(A,z,this.length);for(var $=this[A+--z],ie=1;0<z&&(ie*=256);)$+=this[A+--z]*ie;return $},i.prototype.readUInt8=function(A,z){return A>>>=0,z||M(A,1,this.length),this[A]},i.prototype.readUInt16LE=function(A,z){return A>>>=0,z||M(A,2,this.length),this[A]|this[A+1]<<8},i.prototype.readUInt16BE=function(A,z){return A>>>=0,z||M(A,2,this.length),this[A]<<8|this[A+1]},i.prototype.readUInt32LE=function(A,z){return A>>>=0,z||M(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+16777216*this[A+3]},i.prototype.readUInt32BE=function(A,z){return A>>>=0,z||M(A,4,this.length),16777216*this[A]+(this[A+1]<<16|this[A+2]<<8|this[A+3])},i.prototype.readIntLE=function(A,z,q){A>>>=0,z>>>=0,q||M(A,z,this.length);for(var $=this[A],ie=1,re=0;++re<z&&(ie*=256);)$+=this[A+re]*ie;return(ie*=128)<=$&&($-=Math.pow(2,8*z)),$},i.prototype.readIntBE=function(A,z,q){A>>>=0,z>>>=0,q||M(A,z,this.length);for(var $=z,ie=1,re=this[A+--$];0<$&&(ie*=256);)re+=this[A+--$]*ie;return(ie*=128)<=re&&(re-=Math.pow(2,8*z)),re},i.prototype.readInt8=function(A,z){return A>>>=0,z||M(A,1,this.length),128&this[A]?-1*(255-this[A]+1):this[A]},i.prototype.readInt16LE=function(A,z){return A>>>=0,z||M(A,2,this.length),z=this[A]|this[A+1]<<8,32768&z?4294901760|z:z},i.prototype.readInt16BE=function(A,z){return A>>>=0,z||M(A,2,this.length),z=this[A+1]|this[A]<<8,32768&z?4294901760|z:z},i.prototype.readInt32LE=function(A,z){return A>>>=0,z||M(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},i.prototype.readInt32BE=function(A,z){return A>>>=0,z||M(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},i.prototype.readFloatLE=function(A,z){return A>>>=0,z||M(A,4,this.length),s.read(this,A,!0,23,4)},i.prototype.readFloatBE=function(A,z){return A>>>=0,z||M(A,4,this.length),s.read(this,A,!1,23,4)},i.prototype.readDoubleLE=function(A,z){return A>>>=0,z||M(A,8,this.length),s.read(this,A,!0,52,8)},i.prototype.readDoubleBE=function(A,z){return A>>>=0,z||M(A,8,this.length),s.read(this,A,!1,52,8)},i.prototype.writeUIntLE=function(A,z,q,$){A=+A,z>>>=0,q>>>=0,$||L(this,A,z,q,Math.pow(2,8*q)-1,0);var ie=1,re=0;for(this[z]=255&A;++re<q&&(ie*=256);)this[z+re]=A/ie&255;return z+q},i.prototype.writeUIntBE=function(A,z,q,$){A=+A,z>>>=0,q>>>=0,$||L(this,A,z,q,Math.pow(2,8*q)-1,0);var ie=q-1,re=1;for(this[z+ie]=255&A;0<=--ie&&(re*=256);)this[z+ie]=A/re&255;return z+q},i.prototype.writeUInt8=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,1,255,0),this[z]=255&A,z+1},i.prototype.writeUInt16LE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,2,65535,0),this[z]=255&A,this[z+1]=A>>>8,z+2},i.prototype.writeUInt16BE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,2,65535,0),this[z]=A>>>8,this[z+1]=255&A,z+2},i.prototype.writeUInt32LE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,4,4294967295,0),this[z+3]=A>>>24,this[z+2]=A>>>16,this[z+1]=A>>>8,this[z]=255&A,z+4},i.prototype.writeUInt32BE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,4,4294967295,0),this[z]=A>>>24,this[z+1]=A>>>16,this[z+2]=A>>>8,this[z+3]=255&A,z+4},i.prototype.writeIntLE=function(A,z,q,$){A=+A,z>>>=0,$||L(this,A,z,q,($=Math.pow(2,8*q-1))-1,-$);var ie=0,re=1,fe=0;for(this[z]=255&A;++ie<q&&(re*=256);)A<0&&fe===0&&this[z+ie-1]!==0&&(fe=1),this[z+ie]=(A/re>>0)-fe&255;return z+q},i.prototype.writeIntBE=function(A,z,q,$){A=+A,z>>>=0,$||L(this,A,z,q,($=Math.pow(2,8*q-1))-1,-$);var ie=q-1,re=1,fe=0;for(this[z+ie]=255&A;0<=--ie&&(re*=256);)A<0&&fe===0&&this[z+ie+1]!==0&&(fe=1),this[z+ie]=(A/re>>0)-fe&255;return z+q},i.prototype.writeInt8=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,1,127,-128),this[z]=255&(A=A<0?255+A+1:A),z+1},i.prototype.writeInt16LE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,2,32767,-32768),this[z]=255&A,this[z+1]=A>>>8,z+2},i.prototype.writeInt16BE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,2,32767,-32768),this[z]=A>>>8,this[z+1]=255&A,z+2},i.prototype.writeInt32LE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,4,2147483647,-2147483648),this[z]=255&A,this[z+1]=A>>>8,this[z+2]=A>>>16,this[z+3]=A>>>24,z+4},i.prototype.writeInt32BE=function(A,z,q){return A=+A,z>>>=0,q||L(this,A,z,4,2147483647,-2147483648),this[z]=(A=A<0?4294967295+A+1:A)>>>24,this[z+1]=A>>>16,this[z+2]=A>>>8,this[z+3]=255&A,z+4},i.prototype.writeFloatLE=function(A,z,q){return B(this,A,z,!0,q)},i.prototype.writeFloatBE=function(A,z,q){return B(this,A,z,!1,q)},i.prototype.writeDoubleLE=function(A,z,q){return V(this,A,z,!0,q)},i.prototype.writeDoubleBE=function(A,z,q){return V(this,A,z,!1,q)},i.prototype.copy=function(A,z,q,$){if(!i.isBuffer(A))throw new TypeError("argument should be a Buffer");if(q=q||0,$||$===0||($=this.length),z>=A.length&&(z=A.length),($=0<$&&$<q?q:$)===q||A.length===0||this.length===0)return 0;if((z=z||0)<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length);var ie=($=A.length-z<$-q?A.length-z+q:$)-q;if(this===A&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(z,q,$);else if(this===A&&q<z&&z<$)for(var re=ie-1;0<=re;--re)A[re+z]=this[re+q];else Uint8Array.prototype.set.call(A,this.subarray(q,$),z);return ie},i.prototype.fill=function(A,z,q,$){if(typeof A=="string"){if(typeof z=="string"?($=z,z=0,q=this.length):typeof q=="string"&&($=q,q=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!i.isEncoding($))throw new TypeError("Unknown encoding: "+$);var ie;A.length===1&&(ie=A.charCodeAt(0),($==="utf8"&&ie<128||$==="latin1")&&(A=ie))}else typeof A=="number"?A&=255:typeof A=="boolean"&&(A=Number(A));if(z<0||this.length<z||this.length<q)throw new RangeError("Out of range index");var re;if(!(q<=z))if(z>>>=0,q=q===void 0?this.length:q>>>0,typeof(A=A||0)=="number")for(re=z;re<q;++re)this[re]=A;else{var fe=i.isBuffer(A)?A:i.from(A,$),ge=fe.length;if(ge===0)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(re=0;re<q-z;++re)this[re+z]=fe[re%ge]}return this};var G=/[^+/0-9A-Za-z-_]/g;function Y(A,z){z=z||1/0;for(var q,$=A.length,ie=null,re=[],fe=0;fe<$;++fe){if(55295<(q=A.charCodeAt(fe))&&q<57344){if(!ie){if(56319<q){-1<(z-=3)&&re.push(239,191,189);continue}if(fe+1===$){-1<(z-=3)&&re.push(239,191,189);continue}ie=q;continue}if(q<56320){-1<(z-=3)&&re.push(239,191,189),ie=q;continue}q=65536+(ie-55296<<10|q-56320)}else ie&&-1<(z-=3)&&re.push(239,191,189);if(ie=null,q<128){if(--z<0)break;re.push(q)}else if(q<2048){if((z-=2)<0)break;re.push(q>>6|192,63&q|128)}else if(q<65536){if((z-=3)<0)break;re.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;re.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return re}function H(A){return c.toByteArray(function(z){if((z=(z=z.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;z.length%4!=0;)z+="=";return z}(A))}function W(A,z,q,$){for(var ie=0;ie<$&&!(ie+q>=z.length||ie>=A.length);++ie)z[ie+q]=A[ie];return ie}function K(A,z){return A instanceof z||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===z.name}function Q(A){return A!=A}var se=function(){for(var A="0123456789abcdef",z=new Array(256),q=0;q<16;++q)for(var $=16*q,ie=0;ie<16;++ie)z[$+ie]=A[q]+A[ie];return z}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(t,x,f){x.exports=function(u){if(typeof u!="function")throw TypeError(String(u)+" is not a function");return u}},{}],6:[function(t,x,f){var u=t("../internals/is-object");x.exports=function(c){if(u(c)||c===null)return c;throw TypeError("Can't set "+String(c)+" as a prototype")}},{"../internals/is-object":75}],7:[function(s,x,f){var u=s("../internals/well-known-symbol"),c=s("../internals/object-create"),s=s("../internals/object-define-property"),d=u("unscopables"),m=Array.prototype;m[d]==null&&s.f(m,d,{configurable:!0,value:c(null)}),x.exports=function(v){m[d][v]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(t,x,f){var u=t("../internals/string-multibyte").charAt;x.exports=function(c,s,d){return s+(d?u(c,s).length:1)}},{"../internals/string-multibyte":125}],9:[function(t,x,f){x.exports=function(u,c,s){if(u instanceof c)return u;throw TypeError("Incorrect "+(s?s+" ":"")+"invocation")}},{}],10:[function(t,x,f){var u=t("../internals/is-object");x.exports=function(c){if(u(c))return c;throw TypeError(String(c)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,x,f){x.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(I,x,f){function u(V){return v(V)&&i(B,n(V))}var c,s=I("../internals/array-buffer-native"),d=I("../internals/descriptors"),m=I("../internals/global"),v=I("../internals/is-object"),i=I("../internals/has"),n=I("../internals/classof"),a=I("../internals/create-non-enumerable-property"),o=I("../internals/redefine"),h=I("../internals/object-define-property").f,p=I("../internals/object-get-prototype-of"),y=I("../internals/object-set-prototype-of"),O=I("../internals/well-known-symbol"),I=I("../internals/uid"),w=m.Int8Array,b=w&&w.prototype,S=m.Uint8ClampedArray,S=S&&S.prototype,k=w&&p(w),E=b&&p(b),T=Object.prototype,R=T.isPrototypeOf,O=O("toStringTag"),M=I("TYPED_ARRAY_TAG"),L=s&&!!y&&n(m.opera)!=="Opera",I=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(c in B)m[c]||(L=!1);if((!L||typeof k!="function"||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},L))for(c in B)m[c]&&y(m[c],k);if((!L||!E||E===T)&&(E=k.prototype,L))for(c in B)m[c]&&y(m[c].prototype,E);if(L&&p(S)!==E&&y(S,E),d&&!i(E,O))for(c in I=!0,h(E,O,{get:function(){return v(this)?this[M]:void 0}}),B)m[c]&&a(m[c],M,c);x.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:I&&M,aTypedArray:function(V){if(u(V))return V;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(V){if(y){if(R.call(k,V))return V}else for(var G in B)if(i(B,c)&&(G=m[G],G&&(V===G||R.call(G,V))))return V;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(V,G,Y){if(d){if(Y)for(var H in B)H=m[H],H&&i(H.prototype,V)&&delete H.prototype[V];E[V]&&!Y||o(E,V,!Y&&L&&b[V]||G)}},exportTypedArrayStaticMethod:function(V,G,Y){var H,W;if(d){if(y){if(Y)for(H in B)(W=m[H])&&i(W,V)&&delete W[V];if(k[V]&&!Y)return;try{return o(k,V,!Y&&L&&w[V]||G)}catch{}}for(H in B)!(W=m[H])||W[V]&&!Y||o(W,V,G)}},isView:function(V){return V=n(V),V==="DataView"||i(B,V)},isTypedArray:u,TypedArray:k,TypedArrayPrototype:E}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(q,x,f){function u(ae){return[255&ae]}function c(ae){return[255&ae,ae>>8&255]}function s(ae){return[255&ae,ae>>8&255,ae>>16&255,ae>>24&255]}function d(ae){return ae[3]<<24|ae[2]<<16|ae[1]<<8|ae[0]}function m(ae){return re(ae,23,4)}function v(ae){return re(ae,52,8)}function i(ae,he){I(ae[K],he,{get:function(){return G(this)[he]}})}function n(Me,he,we,ke){if(we=T(we),Me=G(Me),we+he>Me.byteLength)throw ie(Q);var xe=G(Me.buffer).bytes,we=we+Me.byteOffset,Me=xe.slice(we,we+he);return ke?Me:Me.reverse()}function a(ae,he,be,ke,xe,we){if(be=T(be),ae=G(ae),be+he>ae.byteLength)throw ie(Q);for(var Me=G(ae.buffer).bytes,He=be+ae.byteOffset,Ie=ke(+xe),dt=0;dt<he;dt++)Me[He+dt]=Ie[we?dt:he-dt-1]}var o=q("../internals/global"),h=q("../internals/descriptors"),p=q("../internals/array-buffer-native"),y=q("../internals/create-non-enumerable-property"),w=q("../internals/redefine-all"),b=q("../internals/fails"),S=q("../internals/an-instance"),k=q("../internals/to-integer"),E=q("../internals/to-length"),T=q("../internals/to-index"),R=q("../internals/ieee754"),O=q("../internals/object-get-prototype-of"),M=q("../internals/object-set-prototype-of"),L=q("../internals/object-get-own-property-names").f,I=q("../internals/object-define-property").f,B=q("../internals/array-fill"),V=q("../internals/set-to-string-tag"),q=q("../internals/internal-state"),G=q.get,Y=q.set,H="ArrayBuffer",W="DataView",K="prototype",Q="Wrong index",se=o[H],A=se,z=o[W],q=z&&z[K],$=Object.prototype,ie=o.RangeError,re=R.pack,fe=R.unpack;if(p){if(!b(function(){se(1)})||!b(function(){new se(-1)})||b(function(){return new se,new se(1.5),new se(NaN),se.name!=H})){for(var ge,o=(A=function(be){return S(this,A),new se(T(be))})[K]=se[K],de=L(se),me=0;de.length>me;)(ge=de[me++])in A||y(A,ge,se[ge]);o.constructor=A}M&&O(q)!==$&&M(q,$);var R=new z(new A(2)),_e=q.setInt8;R.setInt8(0,2147483648),R.setInt8(1,2147483649),!R.getInt8(0)&&R.getInt8(1)||w(q,{setInt8:function(he,be){_e.call(this,he,be<<24>>24)},setUint8:function(he,be){_e.call(this,he,be<<24>>24)}},{unsafe:!0})}else A=function(ae){S(this,A,H),ae=T(ae),Y(this,{bytes:B.call(new Array(ae),0),byteLength:ae}),h||(this.byteLength=ae)},z=function(ae,xe,be){S(this,z,W),S(ae,A,W);var ke=G(ae).byteLength,xe=k(xe);if(xe<0||ke<xe)throw ie("Wrong offset");if(ke<xe+(be=be===void 0?ke-xe:E(be)))throw ie("Wrong length");Y(this,{buffer:ae,byteLength:be,byteOffset:xe}),h||(this.buffer=ae,this.byteLength=be,this.byteOffset=xe)},h&&(i(A,"byteLength"),i(z,"buffer"),i(z,"byteLength"),i(z,"byteOffset")),w(z[K],{getInt8:function(ae){return n(this,1,ae)[0]<<24>>24},getUint8:function(ae){return n(this,1,ae)[0]},getInt16:function(ae){return ae=n(this,2,ae,1<arguments.length?arguments[1]:void 0),(ae[1]<<8|ae[0])<<16>>16},getUint16:function(ae){return ae=n(this,2,ae,1<arguments.length?arguments[1]:void 0),ae[1]<<8|ae[0]},getInt32:function(ae){return d(n(this,4,ae,1<arguments.length?arguments[1]:void 0))},getUint32:function(ae){return d(n(this,4,ae,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(ae){return fe(n(this,4,ae,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(ae){return fe(n(this,8,ae,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(ae,he){a(this,1,ae,u,he)},setUint8:function(ae,he){a(this,1,ae,u,he)},setInt16:function(ae,he){a(this,2,ae,c,he,2<arguments.length?arguments[2]:void 0)},setUint16:function(ae,he){a(this,2,ae,c,he,2<arguments.length?arguments[2]:void 0)},setInt32:function(ae,he){a(this,4,ae,s,he,2<arguments.length?arguments[2]:void 0)},setUint32:function(ae,he){a(this,4,ae,s,he,2<arguments.length?arguments[2]:void 0)},setFloat32:function(ae,he){a(this,4,ae,m,he,2<arguments.length?arguments[2]:void 0)},setFloat64:function(ae,he){a(this,8,ae,v,he,2<arguments.length?arguments[2]:void 0)}});V(A,H),V(z,W),x.exports={ArrayBuffer:A,DataView:z}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(t,x,f){var u=t("../internals/to-object"),c=t("../internals/to-absolute-index"),s=t("../internals/to-length"),d=Math.min;x.exports=[].copyWithin||function(h,v){var i=u(this),n=s(i.length),a=c(h,n),o=c(v,n),h=2<arguments.length?arguments[2]:void 0,p=d((h===void 0?n:c(h,n))-o,n-a),y=1;for(o<a&&a<o+p&&(y=-1,o+=p-1,a+=p-1);0<p--;)o in i?i[a]=i[o]:delete i[a],a+=y,o+=y;return i}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(t,x,f){var u=t("../internals/to-object"),c=t("../internals/to-absolute-index"),s=t("../internals/to-length");x.exports=function(d){for(var m=u(this),v=s(m.length),n=arguments.length,i=c(1<n?arguments[1]:void 0,v),n=2<n?arguments[2]:void 0,a=n===void 0?v:c(n,v);i<a;)m[i++]=d;return m}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(s,x,f){var u=s("../internals/array-iteration").forEach,c=s("../internals/array-method-is-strict"),s=s("../internals/array-method-uses-to-length"),c=c("forEach"),s=s("forEach");x.exports=c&&s?[].forEach:function(d){return u(this,d,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,x,f){var u=t("../internals/function-bind-context"),c=t("../internals/to-object"),s=t("../internals/call-with-safe-iteration-closing"),d=t("../internals/is-array-iterator-method"),m=t("../internals/to-length"),v=t("../internals/create-property"),i=t("../internals/get-iterator-method");x.exports=function(S){var a,o,h,p,y,w,b=c(S),S=typeof this=="function"?this:Array,k=arguments.length,E=1<k?arguments[1]:void 0,T=E!==void 0,R=i(b),O=0;if(T&&(E=u(E,2<k?arguments[2]:void 0,2)),R==null||S==Array&&d(R))for(o=new S(a=m(b.length));O<a;O++)w=T?E(b[O],O):b[O],v(o,O,w);else for(y=(p=R.call(b)).next,o=new S;!(h=y.call(p)).done;O++)w=T?s(p,E,[h.value,O],!0):h.value,v(o,O,w);return o.length=O,o}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(t,x,f){function u(m){return function(v,i,n){var a,o=c(v),h=s(o.length),p=d(n,h);if(m&&i!=i){for(;p<h;)if((a=o[p++])!=a)return!0}else for(;p<h;p++)if((m||p in o)&&o[p]===i)return m||p||0;return!m&&-1}}var c=t("../internals/to-indexed-object"),s=t("../internals/to-length"),d=t("../internals/to-absolute-index");x.exports={includes:u(!0),indexOf:u(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(t,x,f){function u(n){var a=n==1,o=n==2,h=n==3,p=n==4,y=n==6,w=n==5||y;return function(b,S,k,E){for(var T,R,O=d(b),M=s(O),L=c(S,k,3),I=m(M.length),B=0,S=E||v,V=a?S(b,I):o?S(b,0):void 0;B<I;B++)if((w||B in M)&&(R=L(T=M[B],B,O),n)){if(a)V[B]=R;else if(R)switch(n){case 3:return!0;case 5:return T;case 6:return B;case 2:i.call(V,T)}else if(p)return!1}return y?-1:h||p?p:V}}var c=t("../internals/function-bind-context"),s=t("../internals/indexed-object"),d=t("../internals/to-object"),m=t("../internals/to-length"),v=t("../internals/array-species-create"),i=[].push;x.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(n,x,f){var u=n("../internals/to-indexed-object"),c=n("../internals/to-integer"),s=n("../internals/to-length"),i=n("../internals/array-method-is-strict"),n=n("../internals/array-method-uses-to-length"),d=Math.min,m=[].lastIndexOf,v=!!m&&1/[1].lastIndexOf(1,-0)<0,i=i("lastIndexOf"),n=n("indexOf",{ACCESSORS:!0,1:0});x.exports=v||!i||!n?function(a){if(v)return m.apply(this,arguments)||0;var o=u(this),h=s(o.length),p=h-1;for((p=1<arguments.length?d(p,c(arguments[1])):p)<0&&(p=h+p);0<=p;p--)if(p in o&&o[p]===a)return p||0;return-1}:m},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(t,x,f){var u=t("../internals/fails"),c=t("../internals/well-known-symbol"),s=t("../internals/engine-v8-version"),d=c("species");x.exports=function(m){return 51<=s||!u(function(){var v=[];return(v.constructor={})[d]=function(){return{foo:1}},v[m](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(t,x,f){var u=t("../internals/fails");x.exports=function(c,s){var d=[][c];return!!d&&u(function(){d.call(null,s||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,x,f){function u(i){throw i}var c=t("../internals/descriptors"),s=t("../internals/fails"),d=t("../internals/has"),m=Object.defineProperty,v={};x.exports=function(i,n){var a,o,h,p;return d(v,i)?v[i]:(a=[][i],o=!!d(n=n||{},"ACCESSORS")&&n.ACCESSORS,h=d(n,0)?n[0]:u,p=d(n,1)?n[1]:void 0,v[i]=!!a&&!s(function(){if(o&&!c)return!0;var y={length:-1};o?m(y,1,{enumerable:!0,get:u}):y[1]=1,a.call(y,h,p)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,x,f){function u(v){return function(i,n,a,o){c(n);var h=s(i),p=d(h),y=m(h.length),w=v?y-1:0,b=v?-1:1;if(a<2)for(;;){if(w in p){o=p[w],w+=b;break}if(w+=b,v?w<0:y<=w)throw TypeError("Reduce of empty array with no initial value")}for(;v?0<=w:w<y;w+=b)w in p&&(o=n(o,p[w],w,h));return o}}var c=t("../internals/a-function"),s=t("../internals/to-object"),d=t("../internals/indexed-object"),m=t("../internals/to-length");x.exports={left:u(!1),right:u(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(t,x,f){var u=t("../internals/is-object"),c=t("../internals/is-array"),s=t("../internals/well-known-symbol")("species");x.exports=function(d,m){var v;return new((v=c(d)&&(typeof(v=d.constructor)=="function"&&(v===Array||c(v.prototype))||u(v)&&(v=v[s])===null)?void 0:v)===void 0?Array:v)(m===0?0:m)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(t,x,f){var u=t("../internals/an-object");x.exports=function(c,s,d,m){try{return m?s(u(d)[0],d[1]):s(d)}catch(v){throw m=c.return,m!==void 0&&u(m.call(c)),v}}},{"../internals/an-object":10}],27:[function(t,x,f){var u=t("../internals/well-known-symbol")("iterator"),c=!1;try{var s=0,d={next:function(){return{done:!!s++}},return:function(){c=!0}};d[u]=function(){return this},Array.from(d,function(){throw 2})}catch{}x.exports=function(m,v){if(!v&&!c)return!1;var i=!1;try{var n={};n[u]=function(){return{next:function(){return{done:i=!0}}}},m(n)}catch{}return i}},{"../internals/well-known-symbol":150}],28:[function(t,x,f){var u={}.toString;x.exports=function(c){return u.call(c).slice(8,-1)}},{}],29:[function(t,x,f){var u=t("../internals/to-string-tag-support"),c=t("../internals/classof-raw"),s=t("../internals/well-known-symbol")("toStringTag"),d=c(function(){return arguments}())=="Arguments";x.exports=u?c:function(m){var v;return m===void 0?"Undefined":m===null?"Null":typeof(v=function(i,n){try{return i[n]}catch{}}(m=Object(m),s))=="string"?v:d?c(m):(v=c(m))=="Object"&&typeof m.callee=="function"?"Arguments":v}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(h,x,f){var u=h("../internals/object-define-property").f,c=h("../internals/object-create"),s=h("../internals/redefine-all"),d=h("../internals/function-bind-context"),m=h("../internals/an-instance"),v=h("../internals/iterate"),i=h("../internals/define-iterator"),n=h("../internals/set-species"),a=h("../internals/descriptors"),o=h("../internals/internal-metadata").fastKey,h=h("../internals/internal-state"),p=h.set,y=h.getterFor;x.exports={getConstructor:function(w,b,S,k){function E(M,L,I){var B,V=O(M),G=T(M,L);return G?G.value=I:(V.last=G={index:B=o(L,!0),key:L,value:I,previous:L=V.last,next:void 0,removed:!1},V.first||(V.first=G),L&&(L.next=G),a?V.size++:M.size++,B!=="F"&&(V.index[B]=G)),M}function T(B,L){var I,B=O(B),V=o(L);if(V!=="F")return B.index[V];for(I=B.first;I;I=I.next)if(I.key==L)return I}var R=w(function(M,L){m(M,R,b),p(M,{type:b,index:c(null),first:void 0,last:void 0,size:0}),a||(M.size=0),L!=null&&v(L,M[k],M,S)}),O=y(b);return s(R.prototype,{clear:function(){for(var M=O(this),L=M.index,I=M.first;I;)I.removed=!0,I.previous&&(I.previous=I.previous.next=void 0),delete L[I.index],I=I.next;M.first=M.last=void 0,a?M.size=0:this.size=0},delete:function(V){var L,I,B=O(this),V=T(this,V);return V&&(L=V.next,I=V.previous,delete B.index[V.index],V.removed=!0,I&&(I.next=L),L&&(L.previous=I),B.first==V&&(B.first=L),B.last==V&&(B.last=I),a?B.size--:this.size--),!!V},forEach:function(M){for(var L,I=O(this),B=d(M,1<arguments.length?arguments[1]:void 0,3);L=L?L.next:I.first;)for(B(L.value,L.key,this);L&&L.removed;)L=L.previous},has:function(M){return!!T(this,M)}}),s(R.prototype,S?{get:function(M){return M=T(this,M),M&&M.value},set:function(M,L){return E(this,M===0?0:M,L)}}:{add:function(M){return E(this,M=M===0?0:M,M)}}),a&&u(R.prototype,"size",{get:function(){return O(this).size}}),R},setStrong:function(w,b,S){var k=b+" Iterator",E=y(b),T=y(k);i(w,b,function(R,O){p(this,{type:k,target:R,state:E(R),kind:O,last:void 0})},function(){for(var R=T(this),O=R.kind,M=R.last;M&&M.removed;)M=M.previous;return R.target&&(R.last=M=M?M.next:R.state.first)?O=="keys"?{value:M.key,done:!1}:O=="values"?{value:M.value,done:!1}:{value:[M.key,M.value],done:!1}:{value:R.target=void 0,done:!0}},S?"entries":"values",!S,!0),n(b)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(p,x,f){function u(E){return E.frozen||(E.frozen=new c)}function c(){this.entries=[]}function s(E,T){return b(E.entries,function(R){return R[0]===T})}var d=p("../internals/redefine-all"),m=p("../internals/internal-metadata").getWeakData,v=p("../internals/an-object"),i=p("../internals/is-object"),n=p("../internals/an-instance"),a=p("../internals/iterate"),o=p("../internals/array-iteration"),h=p("../internals/has"),p=p("../internals/internal-state"),y=p.set,w=p.getterFor,b=o.find,S=o.findIndex,k=0;c.prototype={get:function(E){if(E=s(this,E),E)return E[1]},has:function(E){return!!s(this,E)},set:function(E,T){var R=s(this,E);R?R[1]=T:this.entries.push([E,T])},delete:function(E){var T=S(this.entries,function(R){return R[0]===E});return~T&&this.entries.splice(T,1),!!~T}},x.exports={getConstructor:function(E,T,R,O){function M(B,V,G){var Y=I(B),H=m(v(V),!0);return H===!0?u(Y).set(V,G):H[Y.id]=G,B}var L=E(function(B,V){n(B,L,T),y(B,{type:T,id:k++,frozen:void 0}),V!=null&&a(V,B[O],B,R)}),I=w(T);return d(L.prototype,{delete:function(B){var V,G=I(this);return!!i(B)&&((V=m(B))===!0?u(G).delete(B):V&&h(V,G.id)&&delete V[G.id])},has:function(B){var V,G=I(this);return!!i(B)&&((V=m(B))===!0?u(G).has(B):V&&h(V,G.id))}}),d(L.prototype,R?{get:function(B){var V,G=I(this);if(i(B))return(V=m(B))===!0?u(G).get(B):V?V[G.id]:void 0},set:function(B,V){return M(this,B,V)}}:{add:function(B){return M(this,B,!0)}}),L}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/global"),s=t("../internals/is-forced"),d=t("../internals/redefine"),m=t("../internals/internal-metadata"),v=t("../internals/iterate"),i=t("../internals/an-instance"),n=t("../internals/is-object"),a=t("../internals/fails"),o=t("../internals/check-correctness-of-iteration"),h=t("../internals/set-to-string-tag"),p=t("../internals/inherit-if-required");x.exports=function(y,w,b){function S(H){var W=V[H];d(V,H,H=="add"?function(K){return W.call(this,K===0?0:K),this}:H=="delete"?function(K){return!(L&&!n(K))&&W.call(this,K===0?0:K)}:H=="get"?function(K){return L&&!n(K)?void 0:W.call(this,K===0?0:K)}:H=="has"?function(K){return!(L&&!n(K))&&W.call(this,K===0?0:K)}:function(K,Q){return W.call(this,K===0?0:K,Q),this})}var k,E,T,R,O,M=y.indexOf("Map")!==-1,L=y.indexOf("Weak")!==-1,I=M?"set":"add",B=c[y],V=B&&B.prototype,G=B,Y={};return s(y,typeof B!="function"||!(L||V.forEach&&!a(function(){new B().entries().next()})))?(G=b.getConstructor(w,y,M,I),m.REQUIRED=!0):s(y,!0)&&(E=(k=new G)[I](L?{}:-0,1)!=k,T=a(function(){k.has(1)}),R=o(function(H){new B(H)}),O=!L&&a(function(){for(var H=new B,W=5;W--;)H[I](W,W);return!H.has(-0)}),R||(((G=w(function(H,W){return i(H,G,y),H=p(new B,H,G),W!=null&&v(W,H[I],H,M),H})).prototype=V).constructor=G),(T||O)&&(S("delete"),S("has"),M&&S("get")),(O||E)&&S(I),L&&V.clear&&delete V.clear),Y[y]=G,u({global:!0,forced:G!=B},Y),h(G,y),L||b.setStrong(G,y,M),G}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(t,x,f){var u=t("../internals/has"),c=t("../internals/own-keys"),s=t("../internals/object-get-own-property-descriptor"),d=t("../internals/object-define-property");x.exports=function(m,v){for(var i=c(v),n=d.f,a=s.f,o=0;o<i.length;o++){var h=i[o];u(m,h)||n(m,h,a(v,h))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(t,x,f){var u=t("../internals/well-known-symbol")("match");x.exports=function(c){var s=/./;try{"/./"[c](s)}catch{try{return s[u]=!1,"/./"[c](s)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(t,x,f){t=t("../internals/fails"),x.exports=!t(function(){function u(){}return u.prototype.constructor=null,Object.getPrototypeOf(new u)!==u.prototype})},{"../internals/fails":51}],36:[function(t,x,f){var u=t("../internals/require-object-coercible"),c=/"/g;x.exports=function(i,d,m,v){var i=String(u(i)),n="<"+d;return m!==""&&(n+=" "+m+'="'+String(v).replace(c,"&quot;")+'"'),n+">"+i+"</"+d+">"}},{"../internals/require-object-coercible":115}],37:[function(t,x,f){function u(){return this}var c=t("../internals/iterators-core").IteratorPrototype,s=t("../internals/object-create"),d=t("../internals/create-property-descriptor"),m=t("../internals/set-to-string-tag"),v=t("../internals/iterators");x.exports=function(i,n,a){return n+=" Iterator",i.prototype=s(c,{next:d(1,a)}),m(i,n,!1,!0),v[n]=u,i}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(t,x,f){var u=t("../internals/descriptors"),c=t("../internals/object-define-property"),s=t("../internals/create-property-descriptor");x.exports=u?function(d,m,v){return c.f(d,m,s(1,v))}:function(d,m,v){return d[m]=v,d}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,x,f){x.exports=function(u,c){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:c}}},{}],40:[function(t,x,f){var u=t("../internals/to-primitive"),c=t("../internals/object-define-property"),s=t("../internals/create-property-descriptor");x.exports=function(d,m,v){m=u(m),m in d?c.f(d,m,s(0,v)):d[m]=v}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(p,x,f){function u(){return this}var c=p("../internals/export"),s=p("../internals/create-iterator-constructor"),d=p("../internals/object-get-prototype-of"),m=p("../internals/object-set-prototype-of"),v=p("../internals/set-to-string-tag"),i=p("../internals/create-non-enumerable-property"),n=p("../internals/redefine"),a=p("../internals/well-known-symbol"),o=p("../internals/is-pure"),h=p("../internals/iterators"),p=p("../internals/iterators-core"),y=p.IteratorPrototype,w=p.BUGGY_SAFARI_ITERATORS,b=a("iterator"),S="values",k="entries";x.exports=function(E,T,R,Y,M,L,I){s(R,T,Y);function B(A){if(A===M&&Q)return Q;if(!w&&A in W)return W[A];switch(A){case"keys":case S:case k:return function(){return new R(this,A)}}return function(){return new R(this)}}var V,G,Y=T+" Iterator",H=!1,W=E.prototype,K=W[b]||W["@@iterator"]||M&&W[M],Q=!w&&K||B(M),se=T=="Array"&&W.entries||K;if(se&&(se=d(se.call(new E)),y!==Object.prototype&&se.next&&(o||d(se)===y||(m?m(se,y):typeof se[b]!="function"&&i(se,b,u)),v(se,Y,!0,!0),o&&(h[Y]=u))),M==S&&K&&K.name!==S&&(H=!0,Q=function(){return K.call(this)}),o&&!I||W[b]===Q||i(W,b,Q),h[T]=Q,M)if(V={values:B(S),keys:L?Q:B("keys"),entries:B(k)},I)for(G in V)!w&&!H&&G in W||n(W,G,V[G]);else c({target:T,proto:!0,forced:w||H},V);return V}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(t,x,f){var u=t("../internals/path"),c=t("../internals/has"),s=t("../internals/well-known-symbol-wrapped"),d=t("../internals/object-define-property").f;x.exports=function(m){var v=u.Symbol||(u.Symbol={});c(v,m)||d(v,m,{value:s.f(m)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(t,x,f){t=t("../internals/fails"),x.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(c,x,f){var u=c("../internals/global"),c=c("../internals/is-object"),s=u.document,d=c(s)&&c(s.createElement);x.exports=function(m){return d?s.createElement(m):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,x,f){x.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,x,f){t=t("../internals/engine-user-agent"),x.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,x,f){t=t("../internals/get-built-in"),x.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(s,x,f){var u,c,d=s("../internals/global"),s=s("../internals/engine-user-agent"),d=d.process,d=d&&d.versions,d=d&&d.v8;d?c=(u=d.split("."))[0]+u[1]:s&&(!(u=s.match(/Edge\/(\d+)/))||74<=u[1])&&(u=s.match(/Chrome\/(\d+)/))&&(c=u[1]),x.exports=c&&+c},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,x,f){x.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,x,f){var u=t("../internals/global"),c=t("../internals/object-get-own-property-descriptor").f,s=t("../internals/create-non-enumerable-property"),d=t("../internals/redefine"),m=t("../internals/set-global"),v=t("../internals/copy-constructor-properties"),i=t("../internals/is-forced");x.exports=function(n,a){var o,h,p,y=n.target,w=n.global,b=n.stat,S=w?u:b?u[y]||m(y,{}):(u[y]||{}).prototype;if(S)for(o in a){if(h=a[o],p=n.noTargetGet?(p=c(S,o))&&p.value:S[o],!i(w?o:y+(b?".":"#")+o,n.forced)&&p!==void 0){if(typeof h==typeof p)continue;v(h,p)}(n.sham||p&&p.sham)&&s(h,"sham",!0),d(S,o,h,n)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(t,x,f){x.exports=function(u){try{return!!u()}catch{return!0}}},{}],52:[function(a,x,f){a("../modules/es.regexp.exec");var u=a("../internals/redefine"),c=a("../internals/fails"),s=a("../internals/well-known-symbol"),d=a("../internals/regexp-exec"),m=a("../internals/create-non-enumerable-property"),v=s("species"),i=!c(function(){var p=/./;return p.exec=function(){var y=[];return y.groups={a:"7"},y},"".replace(p,"$<a>")!=="7"}),n="a".replace(/./,"$0")==="$0",a=s("replace"),o=!!/./[a]&&/./[a]("a","$0")==="",h=!c(function(){var y=/(?:)/,p=y.exec,y=(y.exec=function(){return p.apply(this,arguments)},"ab".split(y));return y.length!==2||y[0]!=="a"||y[1]!=="b"});x.exports=function(p,y,w,b){var S,k,E=s(p),T=!c(function(){var O={};return O[E]=function(){return 7},""[p](O)!=7}),R=T&&!c(function(){var O=!1,M=/a/;return p==="split"&&((M={constructor:{}}).constructor[v]=function(){return M},M.flags="",M[E]=/./[E]),M.exec=function(){return O=!0,null},M[E](""),!O});T&&R&&(p!=="replace"||i&&n&&!o)&&(p!=="split"||h)||(S=/./[E],w=(R=w(E,""[p],function(O,M,L,I,B){return M.exec===d?T&&!B?{done:!0,value:S.call(M,L,I)}:{done:!0,value:O.call(L,M,I)}:{done:!1}},{REPLACE_KEEPS_$0:n,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:o}))[0],k=R[1],u(String.prototype,p,w),u(RegExp.prototype,E,y==2?function(O,M){return k.call(O,this,M)}:function(O){return k.call(O,this)})),b&&m(RegExp.prototype[E],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(t,x,f){function u(m,v,i,n,a,o,h,p){for(var y,w=a,b=0,S=!!h&&d(h,p,3);b<n;){if(b in i){if(y=S?S(i[b],b,v):i[b],0<o&&c(y))w=u(m,v,y,s(y.length),w,o-1)-1;else{if(9007199254740991<=w)throw TypeError("Exceed the acceptable array length");m[w]=y}w++}b++}return w}var c=t("../internals/is-array"),s=t("../internals/to-length"),d=t("../internals/function-bind-context");x.exports=u},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(t,x,f){t=t("../internals/fails"),x.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,x,f){var u=t("../internals/a-function");x.exports=function(c,s,d){if(u(c),s===void 0)return c;switch(d){case 0:return function(){return c.call(s)};case 1:return function(m){return c.call(s,m)};case 2:return function(m,v){return c.call(s,m,v)};case 3:return function(m,v,i){return c.call(s,m,v,i)}}return function(){return c.apply(s,arguments)}}},{"../internals/a-function":5}],56:[function(t,x,f){var u=t("../internals/a-function"),c=t("../internals/is-object"),s=[].slice,d={};x.exports=Function.bind||function(m){var v=u(this),i=s.call(arguments,1),n=function(){var a=i.concat(s.call(arguments));if(this instanceof n){var o=v,h=a.length,p=a;if(!(h in d)){for(var y=[],w=0;w<h;w++)y[w]="a["+w+"]";d[h]=Function("C,a","return new C("+y.join(",")+")")}return d[h](o,p)}return v.apply(m,a)};return c(v.prototype)&&(n.prototype=v.prototype),n}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,x,f){function u(d){return typeof d=="function"?d:void 0}var c=t("../internals/path"),s=t("../internals/global");x.exports=function(d,m){return arguments.length<2?u(c[d])||u(s[d]):c[d]&&c[d][m]||s[d]&&s[d][m]}},{"../internals/global":60,"../internals/path":106}],58:[function(t,x,f){var u=t("../internals/classof"),c=t("../internals/iterators"),s=t("../internals/well-known-symbol")("iterator");x.exports=function(d){if(d!=null)return d[s]||d["@@iterator"]||c[u(d)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(t,x,f){var u=t("../internals/an-object"),c=t("../internals/get-iterator-method");x.exports=function(s){var d=c(s);if(typeof d!="function")throw TypeError(String(s)+" is not iterable");return u(d.call(s))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,x,f){(function(u){function c(s){return s&&s.Math==Math&&s}x.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof u=="object"&&u)||Function("return this")()}).call(this,typeof Ma<"u"?Ma:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,x,f){var u={}.hasOwnProperty;x.exports=function(c,s){return u.call(c,s)}},{}],62:[function(t,x,f){x.exports={}},{}],63:[function(t,x,f){var u=t("../internals/global");x.exports=function(c,s){var d=u.console;d&&d.error&&(arguments.length===1?d.error(c):d.error(c,s))}},{"../internals/global":60}],64:[function(t,x,f){t=t("../internals/get-built-in"),x.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,x,f){var u=t("../internals/descriptors"),c=t("../internals/fails"),s=t("../internals/document-create-element");x.exports=!u&&!c(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,x,f){var u=Math.abs,c=Math.pow,s=Math.floor,d=Math.log,m=Math.LN2;x.exports={pack:function(v,i,w){var a,o,h,p=new Array(w),y=8*w-i-1,w=(1<<y)-1,b=w>>1,S=i===23?c(2,-24)-c(2,-77):0,k=v<0||v===0&&1/v<0?1:0,E=0;for((v=u(v))!=v||v===1/0?(o=v!=v?1:0,a=w):(a=s(d(v)/m),v*(h=c(2,-a))<1&&(a--,h*=2),2<=(v+=1<=a+b?S/h:S*c(2,1-b))*h&&(a++,h/=2),w<=a+b?(o=0,a=w):1<=a+b?(o=(v*h-1)*c(2,i),a+=b):(o=v*c(2,b-1)*c(2,i),a=0));8<=i;p[E++]=255&o,o/=256,i-=8);for(a=a<<i|o,y+=i;0<y;p[E++]=255&a,a/=256,y-=8);return p[--E]|=128*k,p},unpack:function(v,i){var n,a=v.length,w=8*a-i-1,o=(1<<w)-1,h=o>>1,p=w-7,y=a-1,w=v[y--],b=127&w;for(w>>=7;0<p;b=256*b+v[y],y--,p-=8);for(n=b&(1<<-p)-1,b>>=-p,p+=i;0<p;n=256*n+v[y],y--,p-=8);if(b===0)b=1-h;else{if(b===o)return n?NaN:w?-1/0:1/0;n+=c(2,i),b-=h}return(w?-1:1)*n*c(2,b-i)}}},{}],67:[function(t,x,f){var u=t("../internals/fails"),c=t("../internals/classof-raw"),s="".split;x.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return c(d)=="String"?s.call(d,""):Object(d)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,x,f){var u=t("../internals/is-object"),c=t("../internals/object-set-prototype-of");x.exports=function(s,d,m){return c&&typeof(d=d.constructor)=="function"&&d!==m&&u(d=d.prototype)&&d!==m.prototype&&c(s,d),s}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(u,x,f){var u=u("../internals/shared-store"),c=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(s){return c.call(s)}),x.exports=u.inspectSource},{"../internals/shared-store":121}],70:[function(t,x,f){function u(p){m(p,n,{value:{objectID:"O"+ ++a,weakData:{}}})}var c=t("../internals/hidden-keys"),s=t("../internals/is-object"),d=t("../internals/has"),m=t("../internals/object-define-property").f,v=t("../internals/uid"),i=t("../internals/freezing"),n=v("meta"),a=0,o=Object.isExtensible||function(){return!0},h=x.exports={REQUIRED:!1,fastKey:function(p,y){if(!s(p))return typeof p=="symbol"?p:(typeof p=="string"?"S":"P")+p;if(!d(p,n)){if(!o(p))return"F";if(!y)return"E";u(p)}return p[n].objectID},getWeakData:function(p,y){if(!d(p,n)){if(!o(p))return!0;if(!y)return!1;u(p)}return p[n].weakData},onFreeze:function(p){return i&&h.REQUIRED&&o(p)&&!d(p,n)&&u(p),p}};c[n]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(w,x,f){var u,c,s,d,m,v,i,n,a=w("../internals/native-weak-map"),b=w("../internals/global"),o=w("../internals/is-object"),h=w("../internals/create-non-enumerable-property"),p=w("../internals/has"),y=w("../internals/shared-key"),w=w("../internals/hidden-keys"),b=b.WeakMap;i=a?(u=new b,c=u.get,s=u.has,d=u.set,m=function(S,k){return d.call(u,S,k),k},v=function(S){return c.call(u,S)||{}},function(S){return s.call(u,S)}):(w[n=y("state")]=!0,m=function(S,k){return h(S,n,k),k},v=function(S){return p(S,n)?S[n]:{}},function(S){return p(S,n)}),x.exports={set:m,get:v,has:i,enforce:function(S){return i(S)?v(S):m(S,{})},getterFor:function(S){return function(k){if(o(k)&&(k=v(k)).type===S)return k;throw TypeError("Incompatible receiver, "+S+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(t,x,f){var u=t("../internals/well-known-symbol"),c=t("../internals/iterators"),s=u("iterator"),d=Array.prototype;x.exports=function(m){return m!==void 0&&(c.Array===m||d[s]===m)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(t,x,f){var u=t("../internals/classof-raw");x.exports=Array.isArray||function(c){return u(c)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,x,f){function u(n,a){return(n=m[d(n)])==i||n!=v&&(typeof a=="function"?c(a):!!a)}var c=t("../internals/fails"),s=/#|\.prototype\./,d=u.normalize=function(n){return String(n).replace(s,".").toLowerCase()},m=u.data={},v=u.NATIVE="N",i=u.POLYFILL="P";x.exports=u},{"../internals/fails":51}],75:[function(t,x,f){x.exports=function(u){return typeof u=="object"?u!==null:typeof u=="function"}},{}],76:[function(t,x,f){x.exports=!1},{}],77:[function(t,x,f){var u=t("../internals/is-object"),c=t("../internals/classof-raw"),s=t("../internals/well-known-symbol")("match");x.exports=function(d){var m;return u(d)&&((m=d[s])!==void 0?!!m:c(d)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(t,x,f){function u(n,a){this.stopped=n,this.result=a}var c=t("../internals/an-object"),s=t("../internals/is-array-iterator-method"),d=t("../internals/to-length"),m=t("../internals/function-bind-context"),v=t("../internals/get-iterator-method"),i=t("../internals/call-with-safe-iteration-closing");(x.exports=function(n,a,o,h,p){var y,w,b,S,k,E,T=m(a,o,h?2:1);if(p)y=n;else{if(typeof(a=v(n))!="function")throw TypeError("Target is not iterable");if(s(a)){for(w=0,b=d(n.length);w<b;w++)if((S=h?T(c(E=n[w])[0],E[1]):T(n[w]))&&S instanceof u)return S;return new u(!1)}y=a.call(n)}for(k=y.next;!(E=k.call(y)).done;)if(typeof(S=i(y,T,E.value,h))=="object"&&S&&S instanceof u)return S;return new u(!1)}).stop=function(n){return new u(!0,n)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(v,x,f){var u,c,s=v("../internals/object-get-prototype-of"),d=v("../internals/create-non-enumerable-property"),m=v("../internals/has"),i=v("../internals/well-known-symbol"),v=v("../internals/is-pure"),i=i("iterator"),n=!1;[].keys&&("next"in(c=[].keys())?(s=s(s(c)))!==Object.prototype&&(u=s):n=!0),u==null&&(u={}),v||m(u,i)||d(u,i,function(){return this}),x.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:n}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(t,x,f){x.exports={}},{}],81:[function(t,x,f){x.exports=Math.sign||function(u){return(u=+u)==0||u!=u?u:u<0?-1:1}},{}],82:[function(h,x,f){var u,c,s,d,m,v,i,n,a=h("../internals/global"),k=h("../internals/object-get-own-property-descriptor").f,S=h("../internals/classof-raw"),o=h("../internals/task").set,h=h("../internals/engine-is-ios"),p=a.MutationObserver||a.WebKitMutationObserver,y=a.process,w=a.Promise,b=S(y)=="process",S=k(a,"queueMicrotask"),k=S&&S.value;k||(u=function(){var E,T;for(b&&(E=y.domain)&&E.exit();c;){T=c.fn,c=c.next;try{T()}catch(R){throw c?d():s=void 0,R}}s=void 0,E&&E.enter()},d=b?function(){y.nextTick(u)}:p&&!h?(m=!0,v=document.createTextNode(""),new p(u).observe(v,{characterData:!0}),function(){v.data=m=!m}):w&&w.resolve?(i=w.resolve(void 0),n=i.then,function(){n.call(i,u)}):function(){o.call(a,u)}),x.exports=k||function(E){E={fn:E,next:void 0},s&&(s.next=E),c||(c=E,d()),s=E}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(t,x,f){t=t("../internals/global"),x.exports=t.Promise},{"../internals/global":60}],84:[function(t,x,f){t=t("../internals/fails"),x.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,x,f){var u=t("../internals/fails"),c=t("../internals/well-known-symbol"),s=t("../internals/is-pure"),d=c("iterator");x.exports=!u(function(){var m=new URL("b?a=1&b=2&c=3","http://a"),v=m.searchParams,i="";return m.pathname="c%20d",v.forEach(function(n,a){v.delete("b"),i+=a+n}),s&&!m.toJSON||!v.sort||m.href!=="http://a/c%20d?a=1&c=3"||v.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!v[d]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://тест").host!=="xn--e1aybc"||new URL("http://a#б").hash!=="#%D0%B1"||i!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(u,x,f){var c=u("../internals/global"),u=u("../internals/inspect-source"),c=c.WeakMap;x.exports=typeof c=="function"&&/native code/.test(u(c))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,x,f){function u(s){var d,m;this.promise=new s(function(v,i){if(d!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");d=v,m=i}),this.resolve=c(d),this.reject=c(m)}var c=t("../internals/a-function");x.exports.f=function(s){return new u(s)}},{"../internals/a-function":5}],88:[function(t,x,f){var u=t("../internals/is-regexp");x.exports=function(c){if(u(c))throw TypeError("The method doesn't accept regular expressions");return c}},{"../internals/is-regexp":77}],89:[function(t,x,f){var u=t("../internals/global").isFinite;x.exports=Number.isFinite||function(c){return typeof c=="number"&&u(c)}},{"../internals/global":60}],90:[function(t,x,f){var u=t("../internals/descriptors"),c=t("../internals/fails"),s=t("../internals/object-keys"),d=t("../internals/object-get-own-property-symbols"),m=t("../internals/object-property-is-enumerable"),v=t("../internals/to-object"),i=t("../internals/indexed-object"),n=Object.assign,a=Object.defineProperty;x.exports=!n||c(function(){var o,h,p,y;return!(!u||n({b:1},n(a({},"a",{enumerable:!0,get:function(){a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(h={},y="abcdefghijklmnopqrst",(o={})[p=Symbol()]=7,y.split("").forEach(function(w){h[w]=w}),n({},o)[p]!=7||s(n({},h)).join("")!=y)})?function(o,h){for(var p=v(o),y=arguments.length,w=1,b=d.f,S=m.f;w<y;)for(var k,E=i(arguments[w++]),T=b?s(E).concat(b(E)):s(E),R=T.length,O=0;O<R;)k=T[O++],u&&!S.call(E,k)||(p[k]=E[k]);return p}:n},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(a,x,f){function u(){}var c,s=a("../internals/an-object"),d=a("../internals/object-define-properties"),m=a("../internals/enum-bug-keys"),v=a("../internals/hidden-keys"),i=a("../internals/html"),n=a("../internals/document-create-element"),a=a("../internals/shared-key"),o="prototype",h="script",p=a("IE_PROTO"),y=function(b){return"<"+h+">"+b+"</"+h+">"},w=function(){try{c=document.domain&&new ActiveXObject("htmlfile")}catch{}w=c?((b=c).write(y("")),b.close(),S=b.parentWindow.Object,b=null,S):(b=n("iframe"),S="java"+h+":",b.style.display="none",i.appendChild(b),b.src=String(S),(S=b.contentWindow.document).open(),S.write(y("document.F=Object")),S.close(),S.F);for(var b,S,k=m.length;k--;)delete w[o][m[k]];return w()};v[p]=!0,x.exports=Object.create||function(b,S){var k;return b!==null?(u[o]=s(b),k=new u,u[o]=null,k[p]=b):k=w(),S===void 0?k:d(k,S)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(t,x,f){var u=t("../internals/descriptors"),c=t("../internals/object-define-property"),s=t("../internals/an-object"),d=t("../internals/object-keys");x.exports=u?Object.defineProperties:function(m,v){s(m);for(var i,n=d(v),a=n.length,o=0;o<a;)c.f(m,i=n[o++],v[i]);return m}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,x,f){var u=t("../internals/descriptors"),c=t("../internals/ie8-dom-define"),s=t("../internals/an-object"),d=t("../internals/to-primitive"),m=Object.defineProperty;f.f=u?m:function(v,i,n){if(s(v),i=d(i,!0),s(n),c)try{return m(v,i,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(v[i]=n.value),v}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(t,x,f){var u=t("../internals/descriptors"),c=t("../internals/object-property-is-enumerable"),s=t("../internals/create-property-descriptor"),d=t("../internals/to-indexed-object"),m=t("../internals/to-primitive"),v=t("../internals/has"),i=t("../internals/ie8-dom-define"),n=Object.getOwnPropertyDescriptor;f.f=u?n:function(a,o){if(a=d(a),o=m(o,!0),i)try{return n(a,o)}catch{}if(v(a,o))return s(!c.f.call(a,o),a[o])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(t,x,f){var u=t("../internals/to-indexed-object"),c=t("../internals/object-get-own-property-names").f,s={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];x.exports.f=function(m){if(!d||s.call(m)!="[object Window]")return c(u(m));try{return c(m)}catch{return d.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(t,x,f){var u=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys").concat("length","prototype");f.f=Object.getOwnPropertyNames||function(s){return u(s,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,x,f){f.f=Object.getOwnPropertySymbols},{}],98:[function(d,x,f){var u=d("../internals/has"),c=d("../internals/to-object"),s=d("../internals/shared-key"),d=d("../internals/correct-prototype-getter"),m=s("IE_PROTO"),v=Object.prototype;x.exports=d?Object.getPrototypeOf:function(i){return i=c(i),u(i,m)?i[m]:typeof i.constructor=="function"&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?v:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(t,x,f){var u=t("../internals/has"),c=t("../internals/to-indexed-object"),s=t("../internals/array-includes").indexOf,d=t("../internals/hidden-keys");x.exports=function(m,v){var i,n=c(m),a=0,o=[];for(i in n)!u(d,i)&&u(n,i)&&o.push(i);for(;v.length>a;)!u(n,i=v[a++])||~s(o,i)||o.push(i);return o}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(t,x,f){var u=t("../internals/object-keys-internal"),c=t("../internals/enum-bug-keys");x.exports=Object.keys||function(s){return u(s,c)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,x,f){var u={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,s=c&&!u.call({1:2},1);f.f=s?function(d){return d=c(this,d),!!d&&d.enumerable}:u},{}],102:[function(t,x,f){var u=t("../internals/an-object"),c=t("../internals/a-possible-prototype");x.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,d=!1,m={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(m,[]),d=m instanceof Array}catch{}return function(v,i){return u(v),c(i),d?s.call(v,i):v.__proto__=i,v}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,x,f){function u(v){return function(i){for(var n,a=d(i),o=s(a),h=o.length,p=0,y=[];p<h;)n=o[p++],c&&!m.call(a,n)||y.push(v?[n,a[n]]:a[n]);return y}}var c=t("../internals/descriptors"),s=t("../internals/object-keys"),d=t("../internals/to-indexed-object"),m=t("../internals/object-property-is-enumerable").f;x.exports={entries:u(!0),values:u(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(t,x,f){var u=t("../internals/to-string-tag-support"),c=t("../internals/classof");x.exports=u?{}.toString:function(){return"[object "+c(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(t,x,f){var u=t("../internals/get-built-in"),c=t("../internals/object-get-own-property-names"),s=t("../internals/object-get-own-property-symbols"),d=t("../internals/an-object");x.exports=u("Reflect","ownKeys")||function(m){var v=c.f(d(m)),i=s.f;return i?v.concat(i(m)):v}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(t,x,f){t=t("../internals/global"),x.exports=t},{"../internals/global":60}],107:[function(t,x,f){x.exports=function(u){try{return{error:!1,value:u()}}catch(c){return{error:!0,value:c}}}},{}],108:[function(t,x,f){var u=t("../internals/an-object"),c=t("../internals/is-object"),s=t("../internals/new-promise-capability");x.exports=function(d,m){return u(d),c(m)&&m.constructor===d?m:((0,(d=s.f(d)).resolve)(m),d.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(t,x,f){var u=t("../internals/redefine");x.exports=function(c,s,d){for(var m in s)u(c,m,s[m],d);return c}},{"../internals/redefine":110}],110:[function(v,x,f){var u=v("../internals/global"),c=v("../internals/create-non-enumerable-property"),s=v("../internals/has"),d=v("../internals/set-global"),m=v("../internals/inspect-source"),v=v("../internals/internal-state"),i=v.get,n=v.enforce,a=String(String).split("String");(x.exports=function(o,h,p,S){var w=!!S&&!!S.unsafe,b=!!S&&!!S.enumerable,S=!!S&&!!S.noTargetGet;typeof p=="function"&&(typeof h!="string"||s(p,"name")||c(p,"name",h),n(p).source=a.join(typeof h=="string"?h:"")),o===u?b?o[h]=p:d(h,p):(w?!S&&o[h]&&(b=!0):delete o[h],b?o[h]=p:c(o,h,p))})(Function.prototype,"toString",function(){return typeof this=="function"&&i(this).source||m(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(t,x,f){var u=t("./classof-raw"),c=t("./regexp-exec");x.exports=function(s,d){var m=s.exec;if(typeof m=="function"){if(m=m.call(s,d),typeof m!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return m}if(u(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return c.call(s,d)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(d,x,f){var u,c,s=d("./regexp-flags"),d=d("./regexp-sticky-helpers"),m=RegExp.prototype.exec,v=String.prototype.replace,i=m,n=(u=/a/,c=/b*/g,m.call(u,"a"),m.call(c,"a"),u.lastIndex!==0||c.lastIndex!==0),a=d.UNSUPPORTED_Y||d.BROKEN_CARET,o=/()??/.exec("")[1]!==void 0;x.exports=i=n||o||a?function(h){var p,y,w,b,S=this,k=a&&S.sticky,E=s.call(S),T=S.source,R=0,O=h;return k&&((E=E.replace("y","")).indexOf("g")===-1&&(E+="g"),O=String(h).slice(S.lastIndex),0<S.lastIndex&&(!S.multiline||S.multiline&&h[S.lastIndex-1]!==`
`)&&(T="(?: "+T+")",O=" "+O,R++),y=new RegExp("^(?:"+T+")",E)),o&&(y=new RegExp("^"+T+"$(?!\\s)",E)),n&&(p=S.lastIndex),w=m.call(k?y:S,O),k?w?(w.input=w.input.slice(R),w[0]=w[0].slice(R),w.index=S.lastIndex,S.lastIndex+=w[0].length):S.lastIndex=0:n&&w&&(S.lastIndex=S.global?w.index+w[0].length:p),o&&w&&1<w.length&&v.call(w[0],y,function(){for(b=1;b<arguments.length-2;b++)arguments[b]===void 0&&(w[b]=void 0)}),w}:i},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(t,x,f){var u=t("../internals/an-object");x.exports=function(){var c=u(this),s="";return c.global&&(s+="g"),c.ignoreCase&&(s+="i"),c.multiline&&(s+="m"),c.dotAll&&(s+="s"),c.unicode&&(s+="u"),c.sticky&&(s+="y"),s}},{"../internals/an-object":10}],114:[function(t,x,f){t=t("./fails");function u(c,s){return RegExp(c,s)}f.UNSUPPORTED_Y=t(function(){var c=u("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),f.BROKEN_CARET=t(function(){var c=u("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},{"./fails":51}],115:[function(t,x,f){x.exports=function(u){if(u==null)throw TypeError("Can't call method on "+u);return u}},{}],116:[function(t,x,f){x.exports=Object.is||function(u,c){return u===c?u!==0||1/u==1/c:u!=u&&c!=c}},{}],117:[function(t,x,f){var u=t("../internals/global"),c=t("../internals/create-non-enumerable-property");x.exports=function(s,d){try{c(u,s,d)}catch{u[s]=d}return d}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(t,x,f){var u=t("../internals/get-built-in"),c=t("../internals/object-define-property"),s=t("../internals/well-known-symbol"),d=t("../internals/descriptors"),m=s("species");x.exports=function(i){var i=u(i),n=c.f;d&&i&&!i[m]&&n(i,m,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(t,x,f){var u=t("../internals/object-define-property").f,c=t("../internals/has"),s=t("../internals/well-known-symbol")("toStringTag");x.exports=function(d,m,v){d&&!c(d=v?d:d.prototype,s)&&u(d,s,{configurable:!0,value:m})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(t,x,f){var u=t("../internals/shared"),c=t("../internals/uid"),s=u("keys");x.exports=function(d){return s[d]||(s[d]=c(d))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(u,x,f){var s=u("../internals/global"),u=u("../internals/set-global"),c="__core-js_shared__",s=s[c]||u(c,{});x.exports=s},{"../internals/global":60,"../internals/set-global":117}],122:[function(t,x,f){var u=t("../internals/is-pure"),c=t("../internals/shared-store");(x.exports=function(s,d){return c[s]||(c[s]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(t,x,f){var u=t("../internals/an-object"),c=t("../internals/a-function"),s=t("../internals/well-known-symbol")("species");x.exports=function(v,m){var v=u(v).constructor;return v===void 0||(v=u(v)[s])==null?m:c(v)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(t,x,f){var u=t("../internals/fails");x.exports=function(c){return u(function(){var s=""[c]('"');return s!==s.toLowerCase()||3<s.split('"').length})}},{"../internals/fails":51}],125:[function(t,x,f){function u(d){return function(n,a){var i,n=String(s(n)),a=c(a),o=n.length;return a<0||o<=a?d?"":void 0:(i=n.charCodeAt(a))<55296||56319<i||a+1===o||(o=n.charCodeAt(a+1))<56320||57343<o?d?n.charAt(a):i:d?n.slice(a,a+2):o-56320+(i-55296<<10)+65536}}var c=t("../internals/to-integer"),s=t("../internals/require-object-coercible");x.exports={codeAt:u(!1),charAt:u(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(t,x,f){t=t("../internals/engine-user-agent"),x.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],127:[function(t,x,f){function u(v){return function(o,y,p){var o=String(d(o)),h=o.length,p=p===void 0?" ":String(p),y=c(y);return y<=h||p==""?o:((h=s.call(p,m((y=y-h)/p.length))).length>y&&(h=h.slice(0,y)),v?o+h:h+o)}}var c=t("../internals/to-length"),s=t("../internals/string-repeat"),d=t("../internals/require-object-coercible"),m=Math.ceil;x.exports={start:u(!1),end:u(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(t,x,f){function u(w){return w+22+75*(w<26)}function c(w){var b,S=[],k=(w=function(K){for(var Q=[],se=0,A=K.length;se<A;){var z,q=K.charCodeAt(se++);55296<=q&&q<=56319&&se<A?(64512&(z=K.charCodeAt(se++)))==56320?Q.push(((1023&q)<<10)+(1023&z)+65536):(Q.push(q),se--):Q.push(q)}return Q}(w)).length,E=128,T=0,R=72;for(I=0;I<w.length;I++)(b=w[I])<128&&S.push(y(b));var O=S.length,M=O;for(O&&S.push("-");M<k;){for(var L=s,I=0;I<w.length;I++)E<=(b=w[I])&&b<L&&(L=b);var B=M+1;if(L-E>p((s-T)/B))throw RangeError(o);for(T+=(L-E)*B,E=L,I=0;I<w.length;I++){if((b=w[I])<E&&++T>s)throw RangeError(o);if(b==E){for(var V=T,G=d;;G+=d){var Y=G<=R?1:R+m<=G?m:G-R;if(V<Y)break;var H=V-Y,W=d-Y;S.push(y(u(Y+H%W))),V=p(H/W)}S.push(y(u(V))),R=function(K,Q,se){var A=0;for(K=se?p(K/i):K>>1,K+=p(K/Q);h*m>>1<K;A+=d)K=p(K/h);return p(A+(h+1)*K/(K+v))}(T,B,M==O),T=0,++M}}++T,++E}return S.join("")}var s=2147483647,d=36,m=26,v=38,i=700,n=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",h=d-1,p=Math.floor,y=String.fromCharCode;x.exports=function(w){for(var b,S=[],k=w.toLowerCase().replace(a,".").split("."),E=0;E<k.length;E++)b=k[E],S.push(n.test(b)?"xn--"+c(b):b);return S.join(".")}},{}],129:[function(t,x,f){var u=t("../internals/to-integer"),c=t("../internals/require-object-coercible");x.exports="".repeat||function(s){var d=String(c(this)),m="",v=u(s);if(v<0||v==1/0)throw RangeError("Wrong number of repetitions");for(;0<v;(v>>>=1)&&(d+=d))1&v&&(m+=d);return m}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(t,x,f){var u=t("../internals/fails"),c=t("../internals/whitespaces");x.exports=function(s){return u(function(){return!!c[s]()||"​᠎"[s]()!="​᠎"||c[s].name!==s})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(s,x,f){function u(v){return function(i){return i=String(c(i)),1&v&&(i=i.replace(d,"")),i=2&v?i.replace(m,""):i}}var c=s("../internals/require-object-coercible"),s="["+s("../internals/whitespaces")+"]",d=RegExp("^"+s+s+"*"),m=RegExp(s+s+"*$");x.exports={start:u(1),end:u(2),trim:u(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(h,x,f){function u(M){return function(){O(M)}}function c(M){O(M.data)}function s(M){m.postMessage(M+"",p.protocol+"//"+p.host)}var d,m=h("../internals/global"),v=h("../internals/fails"),i=h("../internals/classof-raw"),n=h("../internals/function-bind-context"),a=h("../internals/html"),o=h("../internals/document-create-element"),h=h("../internals/engine-is-ios"),p=m.location,y=m.setImmediate,w=m.clearImmediate,b=m.process,S=m.MessageChannel,k=m.Dispatch,E=0,T={},R="onreadystatechange",O=function(M){var L;T.hasOwnProperty(M)&&(L=T[M],delete T[M],L())};y&&w||(y=function(M){for(var L=[],I=1;I<arguments.length;)L.push(arguments[I++]);return T[++E]=function(){(typeof M=="function"?M:Function(M)).apply(void 0,L)},d(E),E},w=function(M){delete T[M]},i(b)=="process"?d=function(M){b.nextTick(u(M))}:k&&k.now?d=function(M){k.now(u(M))}:S&&!h?(h=(i=new S).port2,i.port1.onmessage=c,d=n(h.postMessage,h,1)):!m.addEventListener||typeof postMessage!="function"||m.importScripts||v(s)||p.protocol==="file:"?d=R in o("script")?function(M){a.appendChild(o("script"))[R]=function(){a.removeChild(this),O(M)}}:function(M){setTimeout(u(M),0)}:(d=s,m.addEventListener("message",c,!1))),x.exports={set:y,clear:w}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(t,x,f){var u=t("../internals/classof-raw");x.exports=function(c){if(typeof c!="number"&&u(c)!="Number")throw TypeError("Incorrect invocation");return+c}},{"../internals/classof-raw":28}],134:[function(t,x,f){var u=t("../internals/to-integer"),c=Math.max,s=Math.min;x.exports=function(d,m){return d=u(d),d<0?c(d+m,0):s(d,m)}},{"../internals/to-integer":137}],135:[function(t,x,f){var u=t("../internals/to-integer"),c=t("../internals/to-length");x.exports=function(d){if(d===void 0)return 0;var d=u(d),m=c(d);if(d!==m)throw RangeError("Wrong length or index");return m}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(t,x,f){var u=t("../internals/indexed-object"),c=t("../internals/require-object-coercible");x.exports=function(s){return u(c(s))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(t,x,f){var u=Math.ceil,c=Math.floor;x.exports=function(s){return isNaN(s=+s)?0:(0<s?c:u)(s)}},{}],138:[function(t,x,f){var u=t("../internals/to-integer"),c=Math.min;x.exports=function(s){return 0<s?c(u(s),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(t,x,f){var u=t("../internals/require-object-coercible");x.exports=function(c){return Object(u(c))}},{"../internals/require-object-coercible":115}],140:[function(t,x,f){var u=t("../internals/to-positive-integer");x.exports=function(c,s){if(c=u(c),c%s)throw RangeError("Wrong offset");return c}},{"../internals/to-positive-integer":141}],141:[function(t,x,f){var u=t("../internals/to-integer");x.exports=function(c){if(c=u(c),c<0)throw RangeError("The argument can't be less than 0");return c}},{"../internals/to-integer":137}],142:[function(t,x,f){var u=t("../internals/is-object");x.exports=function(c,s){if(!u(c))return c;var d,m;if(s&&typeof(d=c.toString)=="function"&&!u(m=d.call(c))||typeof(d=c.valueOf)=="function"&&!u(m=d.call(c))||!s&&typeof(d=c.toString)=="function"&&!u(m=d.call(c)))return m;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(t,x,f){var u={};u[t("../internals/well-known-symbol")("toStringTag")]="z",x.exports=String(u)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(t,x,f){function u(xe,we){for(var Me=0,He=we.length,Ie=new(ae(xe))(He);Me<He;)Ie[Me]=we[Me++];return Ie}function c(xe,we){z(xe,we,{get:function(){return se(this)[we]}})}function s(xe){return xe instanceof re||(xe=O(xe))=="ArrayBuffer"||xe=="SharedArrayBuffer"}function d(xe,we){return he(xe)&&typeof we!="symbol"&&we in xe&&String(+we)==String(we)}function m(xe,we){return d(xe,we=T(we,!0))?w(2,xe[we]):q(xe,we)}function v(xe,we,Me){return!(d(xe,we=T(we,!0))&&M(Me)&&R(Me,"value"))||R(Me,"get")||R(Me,"set")||Me.configurable||R(Me,"writable")&&!Me.writable||R(Me,"enumerable")&&!Me.enumerable?z(xe,we,Me):(xe[we]=Me.value,xe)}var i=t("../internals/export"),n=t("../internals/global"),a=t("../internals/descriptors"),o=t("../internals/typed-array-constructors-require-wrappers"),h=t("../internals/array-buffer-view-core"),p=t("../internals/array-buffer"),y=t("../internals/an-instance"),w=t("../internals/create-property-descriptor"),b=t("../internals/create-non-enumerable-property"),S=t("../internals/to-length"),k=t("../internals/to-index"),E=t("../internals/to-offset"),T=t("../internals/to-primitive"),R=t("../internals/has"),O=t("../internals/classof"),M=t("../internals/is-object"),L=t("../internals/object-create"),I=t("../internals/object-set-prototype-of"),B=t("../internals/object-get-own-property-names").f,V=t("../internals/typed-array-from"),G=t("../internals/array-iteration").forEach,Y=t("../internals/set-species"),H=t("../internals/object-define-property"),W=t("../internals/object-get-own-property-descriptor"),K=t("../internals/internal-state"),Q=t("../internals/inherit-if-required"),se=K.get,A=K.set,z=H.f,q=W.f,$=Math.round,ie=n.RangeError,re=p.ArrayBuffer,fe=p.DataView,ge=h.NATIVE_ARRAY_BUFFER_VIEWS,de=h.TYPED_ARRAY_TAG,me=h.TypedArray,_e=h.TypedArrayPrototype,ae=h.aTypedArrayConstructor,he=h.isTypedArray,be="BYTES_PER_ELEMENT",ke="Wrong length";a?(ge||(W.f=m,H.f=v,c(_e,"buffer"),c(_e,"byteOffset"),c(_e,"byteLength"),c(_e,"length")),i({target:"Object",stat:!0,forced:!ge},{getOwnPropertyDescriptor:m,defineProperty:v}),x.exports=function(Ae,we,Me){function He(Le,oe){z(Le,oe,{get:function(){var ce=this,ne=oe;return(ce=se(ce)).view[nt](ne*Ie+ce.byteOffset,!0)},set:function(ce){var ne=this,pe=oe;ne=se(ne),Me&&(ce=(ce=$(ce))<0?0:255<ce?255:255&ce),ne.view[ot](pe*Ie+ne.byteOffset,ce,!0)},enumerable:!0})}var Ie=Ae.match(/\d+$/)[0]/8,dt=Ae+(Me?"Clamped":"")+"Array",nt="get"+Ae,ot="set"+Ae,ut=n[dt],ct=ut,Ae=ct&&ct.prototype,Xe={};ge?o&&(ct=we(function(Le,oe,ce,ne){return y(Le,ct,dt),Q(M(oe)?s(oe)?ne!==void 0?new ut(oe,E(ce,Ie),ne):ce!==void 0?new ut(oe,E(ce,Ie)):new ut(oe):he(oe)?u(ct,oe):V.call(ct,oe):new ut(k(oe)),Le,ct)}),I&&I(ct,me),G(B(ut),function(Le){Le in ct||b(ct,Le,ut[Le])}),ct.prototype=Ae):(ct=we(function(Le,oe,ce,ne){y(Le,ct,dt);var pe,Ee,De=0,Ge=0;if(M(oe)){if(!s(oe))return he(oe)?u(ct,oe):V.call(ct,oe);var Ke=oe,Ge=E(ce,Ie),ce=oe.byteLength;if(ne===void 0){if(ce%Ie||(pe=ce-Ge)<0)throw ie(ke)}else if(ce<(pe=S(ne)*Ie)+Ge)throw ie(ke);Ee=pe/Ie}else Ee=k(oe),Ke=new re(pe=Ee*Ie);for(A(Le,{buffer:Ke,byteOffset:Ge,byteLength:pe,length:Ee,view:new fe(Ke)});De<Ee;)He(Le,De++)}),I&&I(ct,me),Ae=ct.prototype=L(_e)),Ae.constructor!==ct&&b(Ae,"constructor",ct),de&&b(Ae,de,dt),Xe[dt]=ct,i({global:!0,forced:ct!=ut,sham:!ge},Xe),be in ct||b(ct,be,Ie),be in Ae||b(Ae,be,Ie),Y(dt)}):x.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(d,x,f){var u=d("../internals/global"),c=d("../internals/fails"),s=d("../internals/check-correctness-of-iteration"),d=d("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,m=u.ArrayBuffer,v=u.Int8Array;x.exports=!d||!c(function(){v(1)})||!c(function(){new v(-1)})||!s(function(i){new v,new v(null),new v(1.5),new v(i)},!0)||c(function(){return new v(new m(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(t,x,f){var u=t("../internals/to-object"),c=t("../internals/to-length"),s=t("../internals/get-iterator-method"),d=t("../internals/is-array-iterator-method"),m=t("../internals/function-bind-context"),v=t("../internals/array-buffer-view-core").aTypedArrayConstructor;x.exports=function(i){var n,a,o,h,p,y,w=u(i),b=arguments.length,S=1<b?arguments[1]:void 0,k=S!==void 0,E=s(w);if(E!=null&&!d(E))for(y=(p=E.call(w)).next,w=[];!(h=y.call(p)).done;)w.push(h.value);for(k&&2<b&&(S=m(S,arguments[2],2)),a=c(w.length),o=new(v(this))(a),n=0;n<a;n++)o[n]=k?S(w[n],n):w[n];return o}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(t,x,f){var u=0,c=Math.random();x.exports=function(s){return"Symbol("+String(s===void 0?"":s)+")_"+(++u+c).toString(36)}},{}],148:[function(t,x,f){t=t("../internals/native-symbol"),x.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(t,x,f){t=t("../internals/well-known-symbol"),f.f=t},{"../internals/well-known-symbol":150}],150:[function(v,x,f){var u=v("../internals/global"),c=v("../internals/shared"),s=v("../internals/has"),d=v("../internals/uid"),m=v("../internals/native-symbol"),v=v("../internals/use-symbol-as-uid"),i=c("wks"),n=u.Symbol,a=v?n:n&&n.withoutSetter||d;x.exports=function(o){return s(i,o)||(m&&s(n,o)?i[o]=n[o]:i[o]=a("Symbol."+o)),i[o]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(t,x,f){x.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},{}],152:[function(s,x,f){var u=s("../internals/export"),c=s("../internals/global"),m=s("../internals/array-buffer"),s=s("../internals/set-species"),d="ArrayBuffer",m=m[d];u({global:!0,forced:c[d]!==m},{ArrayBuffer:m}),s(d)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(w,x,f){var u=w("../internals/export"),c=w("../internals/fails"),s=w("../internals/is-array"),d=w("../internals/is-object"),m=w("../internals/to-object"),v=w("../internals/to-length"),i=w("../internals/create-property"),n=w("../internals/array-species-create"),a=w("../internals/array-method-has-species-support"),y=w("../internals/well-known-symbol"),w=w("../internals/engine-v8-version"),o=y("isConcatSpreadable"),h=9007199254740991,p="Maximum allowed index exceeded",y=51<=w||!c(function(){var b=[];return b[o]=!1,b.concat()[0]!==b}),w=a("concat");u({target:"Array",proto:!0,forced:!y||!w},{concat:function(b){for(var S,k,E,T,R,O=m(this),M=n(O,0),L=0,I=-1,B=arguments.length;I<B;I++)if(R=void 0,!d(T=E=I===-1?O:arguments[I])||((R=T[o])!==void 0?!R:!s(T))){if(h<=L)throw TypeError(p);i(M,L++,E)}else{if(k=v(E.length),h<L+k)throw TypeError(p);for(S=0;S<k;S++,L++)S in E&&i(M,L,E[S])}return M.length=L,M}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(s,x,f){var u=s("../internals/export"),c=s("../internals/array-copy-within"),s=s("../internals/add-to-unscopables");u({target:"Array",proto:!0},{copyWithin:c}),s("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(d,x,f){var u=d("../internals/export"),c=d("../internals/array-iteration").every,s=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),s=s("every"),d=d("every");u({target:"Array",proto:!0,forced:!s||!d},{every:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(s,x,f){var u=s("../internals/export"),c=s("../internals/array-fill"),s=s("../internals/add-to-unscopables");u({target:"Array",proto:!0},{fill:c}),s("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(d,x,f){var u=d("../internals/export"),c=d("../internals/array-iteration").filter,s=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),s=s("filter"),d=d("filter");u({target:"Array",proto:!0,forced:!s||!d},{filter:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(v,x,f){var u=v("../internals/export"),c=v("../internals/array-iteration").findIndex,s=v("../internals/add-to-unscopables"),v=v("../internals/array-method-uses-to-length"),d="findIndex",m=!0,v=v(d);d in[]&&Array(1)[d](function(){m=!1}),u({target:"Array",proto:!0,forced:m||!v},{findIndex:function(i){return c(this,i,1<arguments.length?arguments[1]:void 0)}}),s(d)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/flatten-into-array"),s=t("../internals/to-object"),d=t("../internals/to-length"),m=t("../internals/a-function"),v=t("../internals/array-species-create");u({target:"Array",proto:!0},{flatMap:function(i){var n,a=s(this),o=d(a.length);return m(i),(n=v(a,0)).length=c(n,a,a,o,0,1,i,1<arguments.length?arguments[1]:void 0),n}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/flatten-into-array"),s=t("../internals/to-object"),d=t("../internals/to-length"),m=t("../internals/to-integer"),v=t("../internals/array-species-create");u({target:"Array",proto:!0},{flat:function(){var i=arguments.length?arguments[0]:void 0,n=s(this),a=d(n.length),o=v(n,0);return o.length=c(o,n,n,a,0,i===void 0?1:m(i)),o}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(c,x,f){var u=c("../internals/export"),c=c("../internals/array-for-each");u({target:"Array",proto:!0,forced:[].forEach!=c},{forEach:c})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/array-from");u({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(s){Array.from(s)})},{from:c})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/array-includes").includes,s=t("../internals/add-to-unscopables");u({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(d){return c(this,d,1<arguments.length?arguments[1]:void 0)}}),s("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(v,x,f){var u=v("../internals/export"),c=v("../internals/array-includes").indexOf,m=v("../internals/array-method-is-strict"),v=v("../internals/array-method-uses-to-length"),s=[].indexOf,d=!!s&&1/[1].indexOf(1,-0)<0,m=m("indexOf"),v=v("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:d||!m||!v},{indexOf:function(i){return d?s.apply(this,arguments)||0:c(this,i,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(m,x,f){var u=m("../internals/to-indexed-object"),c=m("../internals/add-to-unscopables"),s=m("../internals/iterators"),d=m("../internals/internal-state"),m=m("../internals/define-iterator"),v="Array Iterator",i=d.set,n=d.getterFor(v);x.exports=m(Array,"Array",function(a,o){i(this,{type:v,target:u(a),index:0,kind:o})},function(){var a=n(this),o=a.target,h=a.kind,p=a.index++;return!o||p>=o.length?{value:a.target=void 0,done:!0}:h=="keys"?{value:p,done:!1}:h=="values"?{value:o[p],done:!1}:{value:[p,o[p]],done:!1}},"values"),s.Arguments=s.Array,c("keys"),c("values"),c("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(m,x,f){var u=m("../internals/export"),d=m("../internals/indexed-object"),c=m("../internals/to-indexed-object"),m=m("../internals/array-method-is-strict"),s=[].join,d=d!=Object,m=m("join",",");u({target:"Array",proto:!0,forced:d||!m},{join:function(v){return s.call(c(this),v===void 0?",":v)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(c,x,f){var u=c("../internals/export"),c=c("../internals/array-last-index-of");u({target:"Array",proto:!0,forced:c!==[].lastIndexOf},{lastIndexOf:c})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(d,x,f){var u=d("../internals/export"),c=d("../internals/array-iteration").map,s=d("../internals/array-method-has-species-support"),d=d("../internals/array-method-uses-to-length"),s=s("map"),d=d("map");u({target:"Array",proto:!0,forced:!s||!d},{map:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(o,x,f){var u=o("../internals/export"),c=o("../internals/is-object"),s=o("../internals/is-array"),d=o("../internals/to-absolute-index"),m=o("../internals/to-length"),v=o("../internals/to-indexed-object"),i=o("../internals/create-property"),n=o("../internals/well-known-symbol"),a=o("../internals/array-method-has-species-support"),o=o("../internals/array-method-uses-to-length"),a=a("slice"),o=o("slice",{ACCESSORS:!0,0:0,1:2}),h=n("species"),p=[].slice,y=Math.max;u({target:"Array",proto:!0,forced:!a||!o},{slice:function(w,b){var S,k,E,T=v(this),R=m(T.length),O=d(w,R),M=d(b===void 0?R:b,R);if(s(T)&&((S=typeof(S=T.constructor)=="function"&&(S===Array||s(S.prototype))||c(S)&&(S=S[h])===null?void 0:S)===Array||S===void 0))return p.call(T,O,M);for(k=new(S===void 0?Array:S)(y(M-O,0)),E=0;O<M;O++,E++)O in T&&i(k,E,T[O]);return k.length=E,k}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(d,x,f){var u=d("../internals/export"),c=d("../internals/array-iteration").some,s=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),s=s("some"),d=d("some");u({target:"Array",proto:!0,forced:!s||!d},{some:function(m){return c(this,m,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(a,x,f){var u=a("../internals/export"),c=a("../internals/to-absolute-index"),s=a("../internals/to-integer"),d=a("../internals/to-length"),m=a("../internals/to-object"),v=a("../internals/array-species-create"),i=a("../internals/create-property"),n=a("../internals/array-method-has-species-support"),a=a("../internals/array-method-uses-to-length"),n=n("splice"),a=a("splice",{ACCESSORS:!0,0:0,1:2}),o=Math.max,h=Math.min;u({target:"Array",proto:!0,forced:!n||!a},{splice:function(L,y){var w,b,S,k,E,T,R=m(this),O=d(R.length),M=c(L,O),L=arguments.length;if(L===0?w=b=0:b=L===1?(w=0,O-M):(w=L-2,h(o(s(y),0),O-M)),9007199254740991<O+w-b)throw TypeError("Maximum allowed length exceeded");for(S=v(R,b),k=0;k<b;k++)(E=M+k)in R&&i(S,k,R[E]);if(w<(S.length=b)){for(k=M;k<O-b;k++)T=k+w,(E=k+b)in R?R[T]=R[E]:delete R[T];for(k=O;O-b+w<k;k--)delete R[k-1]}else if(b<w)for(k=O-b;M<k;k--)T=k+w-1,(E=k+b-1)in R?R[T]=R[E]:delete R[T];for(k=0;k<w;k++)R[k+M]=arguments[k+2];return R.length=O-b+w,S}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(t,x,f){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(t,x,f){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(c,x,f){var u=c("../internals/descriptors"),c=c("../internals/object-define-property").f,s=Function.prototype,d=s.toString,m=/^\s*function ([^ (]*)/;!u||"name"in s||c(s,"name",{configurable:!0,get:function(){try{return d.call(this).match(m)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(c,x,f){var u=c("../internals/collection"),c=c("../internals/collection-strong");x.exports=u("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(u,x,f){var u=u("../internals/export"),c=Math.hypot,s=Math.abs,d=Math.sqrt;u({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(m,v){for(var i,n,a=0,o=0,h=arguments.length,p=0;o<h;)p<(i=s(arguments[o++]))?(a=a*(n=p/i)*n+1,p=i):a+=0<i?(n=i/p)*n:i;return p===1/0?1/0:p*d(a)}})},{"../internals/export":50}],177:[function(u,x,f){var u=u("../internals/export"),c=Math.log,s=Math.LN2;u({target:"Math",stat:!0},{log2:function(d){return c(d)/s}})},{"../internals/export":50}],178:[function(t,x,f){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(t,x,f){function u(I){var B,V,G,Y,H,W,K,Q=a(I,!1);if(typeof Q=="string"&&2<Q.length){if((I=(Q=b(Q)).charCodeAt(0))===43||I===45){if((B=Q.charCodeAt(2))===88||B===120)return NaN}else if(I===48){switch(Q.charCodeAt(1)){case 66:case 98:V=2,G=49;break;case 79:case 111:V=8,G=55;break;default:return+Q}for(H=(Y=Q.slice(2)).length,W=0;W<H;W++)if((K=Y.charCodeAt(W))<48||G<K)return NaN;return parseInt(Y,V)}}return+Q}var c=t("../internals/descriptors"),s=t("../internals/global"),d=t("../internals/is-forced"),m=t("../internals/redefine"),v=t("../internals/has"),i=t("../internals/classof-raw"),n=t("../internals/inherit-if-required"),a=t("../internals/to-primitive"),o=t("../internals/fails"),h=t("../internals/object-create"),p=t("../internals/object-get-own-property-names").f,y=t("../internals/object-get-own-property-descriptor").f,w=t("../internals/object-define-property").f,b=t("../internals/string-trim").trim,S="Number",k=s[S],E=k.prototype,T=i(h(E))==S;if(d(S,!k(" 0o1")||!k("0b1")||k("+0x1"))){for(var R,O=function(B){var B=arguments.length<1?0:B,V=this;return V instanceof O&&(T?o(function(){E.valueOf.call(V)}):i(V)!=S)?n(new k(u(B)),V,O):u(B)},M=c?p(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),L=0;M.length>L;L++)v(k,R=M[L])&&!v(O,R)&&w(O,R,y(k,R));(O.prototype=E).constructor=O,m(s,S,O)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(t,x,f){t("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(t,x,f){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(v,x,f){function u(a,o,h){return o===0?h:o%2==1?u(a,o-1,h*a):u(a*a,o/2,h)}var c=v("../internals/export"),s=v("../internals/to-integer"),d=v("../internals/this-number-value"),m=v("../internals/string-repeat"),v=v("../internals/fails"),i=1 .toFixed,n=Math.floor;c({target:"Number",proto:!0,forced:i&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!v(function(){i.call({})})},{toFixed:function(S){function o(R,O){for(var M=-1,L=O;++M<6;)L+=R*k[M],k[M]=L%1e7,L=n(L/1e7)}function h(R){for(var O=6,M=0;0<=--O;)M+=k[O],k[O]=n(M/R),M=M%R*1e7}function p(){for(var R,O=6,M="";0<=--O;)M===""&&O!==0&&k[O]===0||(R=String(k[O]),M=M===""?R:M+m.call("0",7-R.length)+R);return M}var y,w,b=d(this),S=s(S),k=[0,0,0,0,0,0],E="",T="0";if(S<0||20<S)throw RangeError("Incorrect fraction digits");if(b!=b)return"NaN";if(b<=-1e21||1e21<=b)return String(b);if(b<0&&(E="-",b=-b),1e-21<b)if(b=(y=function(R){for(var O=0,M=R;4096<=M;)O+=12,M/=4096;for(;2<=M;)O+=1,M/=2;return O}(b*u(2,69,1))-69)<0?b*u(2,-y,1):b/u(2,y,1),b*=4503599627370496,0<(y=52-y)){for(o(0,b),w=S;7<=w;)o(1e7,0),w-=7;for(o(u(10,w,1),0),w=y-1;23<=w;)h(1<<23),w-=23;h(1<<w),o(1,1),h(2),T=p()}else o(0,b),o(1<<-y,0),T=p()+m.call("0",S);return T=0<S?E+((b=T.length)<=S?"0."+m.call("0",S-b)+T:T.slice(0,b-S)+"."+T.slice(b-S)):E+T}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(c,x,f){var u=c("../internals/export"),c=c("../internals/object-assign");u({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/object-to-array").entries;u({target:"Object",stat:!0},{entries:function(s){return c(s)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/iterate"),s=t("../internals/create-property");u({target:"Object",stat:!0},{fromEntries:function(d){var m={};return c(d,function(v,i){s(m,v,i)},void 0,!0),m}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(d,x,f){var u=d("../internals/export"),m=d("../internals/fails"),c=d("../internals/to-indexed-object"),s=d("../internals/object-get-own-property-descriptor").f,d=d("../internals/descriptors"),m=m(function(){s(1)});u({target:"Object",stat:!0,forced:!d||m,sham:!d},{getOwnPropertyDescriptor:function(v,i){return s(c(v),i)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(s,x,f){var u=s("../internals/export"),c=s("../internals/fails"),s=s("../internals/object-get-own-property-names-external").f;u({target:"Object",stat:!0,forced:c(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:s})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(m,x,f){var u=m("../internals/export"),c=m("../internals/fails"),s=m("../internals/to-object"),d=m("../internals/object-get-prototype-of"),m=m("../internals/correct-prototype-getter");u({target:"Object",stat:!0,forced:c(function(){d(1)}),sham:!m},{getPrototypeOf:function(v){return d(s(v))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/to-object"),s=t("../internals/object-keys");u({target:"Object",stat:!0,forced:t("../internals/fails")(function(){s(1)})},{keys:function(d){return s(c(d))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(s,x,f){var u=s("../internals/to-string-tag-support"),c=s("../internals/redefine"),s=s("../internals/object-to-string");u||c(Object.prototype,"toString",s,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(Me,x,f){var u,c,s,d,m=Me("../internals/export"),v=Me("../internals/is-pure"),i=Me("../internals/global"),n=Me("../internals/get-built-in"),a=Me("../internals/native-promise-constructor"),o=Me("../internals/redefine"),h=Me("../internals/redefine-all"),p=Me("../internals/set-to-string-tag"),y=Me("../internals/set-species"),w=Me("../internals/is-object"),b=Me("../internals/a-function"),S=Me("../internals/an-instance"),k=Me("../internals/classof-raw"),E=Me("../internals/inspect-source"),T=Me("../internals/iterate"),R=Me("../internals/check-correctness-of-iteration"),O=Me("../internals/species-constructor"),M=Me("../internals/task").set,L=Me("../internals/microtask"),I=Me("../internals/promise-resolve"),B=Me("../internals/host-report-errors"),V=Me("../internals/new-promise-capability"),G=Me("../internals/perform"),Y=Me("../internals/internal-state"),H=Me("../internals/is-forced"),He=Me("../internals/well-known-symbol"),W=Me("../internals/engine-v8-version"),K=He("species"),Q="Promise",se=Y.get,A=Y.set,z=Y.getterFor(Q),q=a,$=i.TypeError,ie=i.document,re=i.process,fe=n("fetch"),ge=V.f,de=ge,me=k(re)=="process",_e=!!(ie&&ie.createEvent&&i.dispatchEvent),ae="unhandledrejection",he="rejectionhandled",be=1,ke=2,xe=1,we=2,Me=H(Q,function(){var Xe,Le;return E(q)===String(q)&&(W===66||!me&&typeof PromiseRejectionEvent!="function")?!0:!(!v||q.prototype.finally)||!(51<=W&&/native code/.test(q))&&(Le=function(oe){oe(function(){},function(){})},((Xe=q.resolve(1)).constructor={})[K]=Le,!(Xe.then(function(){})instanceof Le))}),He=Me||!R(function(Xe){q.all(Xe).catch(function(){})}),Ie=function(Xe){var Le;return!(!w(Xe)||typeof(Le=Xe.then)!="function")&&Le},dt=function(Xe,Le,oe){var ce;Le.notified||(Le.notified=!0,ce=Le.reactions,L(function(){for(var ne,pe,Ee=Le.value,De=Le.state==be,Ge=0;ce.length>Ge;){var Ke,it,at,ht=ce[Ge++],Pt=De?ht.ok:ht.fail,Ot=ht.resolve,gt=ht.reject,Dt=ht.domain;try{Pt?(De||(Le.rejection===we&&function(Ct,sr){M.call(i,function(){me?re.emit("rejectionHandled",Ct):nt(he,Ct,sr.value)})}(Xe,Le),Le.rejection=xe),Pt===!0?Ke=Ee:(Dt&&Dt.enter(),Ke=Pt(Ee),Dt&&(Dt.exit(),at=!0)),Ke===ht.promise?gt($("Promise-chain cycle")):(it=Ie(Ke))?it.call(Ke,Ot,gt):Ot(Ke)):gt(Ee)}catch(Ct){Dt&&!at&&Dt.exit(),gt(Ct)}}Le.reactions=[],Le.notified=!1,oe&&!Le.rejection&&(ne=Xe,pe=Le,M.call(i,function(){var Ct=pe.value,sr=ot(pe);if(sr&&(sr=G(function(){me?re.emit("unhandledRejection",Ct,ne):nt(ae,ne,Ct)}),pe.rejection=me||ot(pe)?we:xe,sr.error))throw sr.value}))}))},nt=function(Xe,Le,oe){var ce;_e?((ce=ie.createEvent("Event")).promise=Le,ce.reason=oe,ce.initEvent(Xe,!1,!0),i.dispatchEvent(ce)):ce={promise:Le,reason:oe},(Le=i["on"+Xe])?Le(ce):Xe===ae&&B("Unhandled promise rejection",oe)},ot=function(Xe){return Xe.rejection!==xe&&!Xe.parent},ut=function(Xe,Le,oe,ce){return function(ne){Xe(Le,oe,ne,ce)}},ct=function(Xe,Le,oe,ce){Le.done||(Le.done=!0,(Le=ce||Le).value=oe,Le.state=ke,dt(Xe,Le,!0))},Ae=function(Xe,Le,oe,ce){if(!Le.done){Le.done=!0,ce&&(Le=ce);try{if(Xe===oe)throw $("Promise can't be resolved itself");var ne=Ie(oe);ne?L(function(){var pe={done:!1};try{ne.call(oe,ut(Ae,Xe,pe,Le),ut(ct,Xe,pe,Le))}catch(Ee){ct(Xe,pe,Ee,Le)}}):(Le.value=oe,Le.state=be,dt(Xe,Le,!1))}catch(pe){ct(Xe,{done:!1},pe,Le)}}};Me&&(q=function(Xe){S(this,q,Q),b(Xe),u.call(this);var Le=se(this);try{Xe(ut(Ae,this,Le),ut(ct,this,Le))}catch(oe){ct(this,Le,oe)}},(u=function(Xe){A(this,{type:Q,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(q.prototype,{then:function(Xe,Le){var oe=z(this),ce=ge(O(this,q));return ce.ok=typeof Xe!="function"||Xe,ce.fail=typeof Le=="function"&&Le,ce.domain=me?re.domain:void 0,oe.parent=!0,oe.reactions.push(ce),oe.state!=0&&dt(this,oe,!1),ce.promise},catch:function(Xe){return this.then(void 0,Xe)}}),c=function(){var Xe=new u,Le=se(Xe);this.promise=Xe,this.resolve=ut(Ae,Xe,Le),this.reject=ut(ct,Xe,Le)},V.f=ge=function(Xe){return Xe===q||Xe===s?new c:de(Xe)},v||typeof a!="function"||(d=a.prototype.then,o(a.prototype,"then",function(Xe,Le){var oe=this;return new q(function(ce,ne){d.call(oe,ce,ne)}).then(Xe,Le)},{unsafe:!0}),typeof fe=="function"&&m({global:!0,enumerable:!0,forced:!0},{fetch:function(Xe){return I(q,fe.apply(i,arguments))}}))),m({global:!0,wrap:!0,forced:Me},{Promise:q}),p(q,Q,!1,!0),y(Q),s=n(Q),m({target:Q,stat:!0,forced:Me},{reject:function(Xe){var Le=ge(this);return Le.reject.call(void 0,Xe),Le.promise}}),m({target:Q,stat:!0,forced:v||Me},{resolve:function(Xe){return I(v&&this===s?q:this,Xe)}}),m({target:Q,stat:!0,forced:He},{all:function(Xe){var Le=this,oe=ge(Le),ce=oe.resolve,ne=oe.reject,pe=G(function(){var Ee=b(Le.resolve),De=[],Ge=0,Ke=1;T(Xe,function(it){var at=Ge++,ht=!1;De.push(void 0),Ke++,Ee.call(Le,it).then(function(Pt){ht||(ht=!0,De[at]=Pt,--Ke||ce(De))},ne)}),--Ke||ce(De)});return pe.error&&ne(pe.value),oe.promise},race:function(Xe){var Le=this,oe=ge(Le),ce=oe.reject,ne=G(function(){var pe=b(Le.resolve);T(Xe,function(Ee){pe.call(Le,Ee).then(oe.resolve,ce)})});return ne.error&&ce(ne.value),oe.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(i,x,f){var u=i("../internals/export"),h=i("../internals/get-built-in"),c=i("../internals/a-function"),s=i("../internals/an-object"),d=i("../internals/is-object"),m=i("../internals/object-create"),v=i("../internals/function-bind"),i=i("../internals/fails"),n=h("Reflect","construct"),a=i(function(){function p(){}return!(n(function(){},[],p)instanceof p)}),o=!i(function(){n(function(){})}),h=a||o;u({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(p,y){c(p),s(y);var w=arguments.length<3?p:c(arguments[2]);if(o&&!a)return n(p,y,w);if(p==w){switch(y.length){case 0:return new p;case 1:return new p(y[0]);case 2:return new p(y[0],y[1]);case 3:return new p(y[0],y[1],y[2]);case 4:return new p(y[0],y[1],y[2],y[3])}var b=[null];return b.push.apply(b,y),new(v.apply(p,b))}return b=w.prototype,w=m(d(b)?b:Object.prototype),b=Function.apply.call(p,w,y),d(b)?b:w}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/is-object"),s=t("../internals/an-object"),d=t("../internals/has"),m=t("../internals/object-get-own-property-descriptor"),v=t("../internals/object-get-prototype-of");u({target:"Reflect",stat:!0},{get:function i(n,a){var o,h=arguments.length<3?n:arguments[2];return s(n)===h?n[a]:(o=m.f(n,a))?d(o,"value")?o.value:o.get===void 0?void 0:o.get.call(h):c(o=v(n))?i(o,a,h):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(t,x,f){var u=t("../internals/descriptors"),c=t("../internals/global"),s=t("../internals/is-forced"),d=t("../internals/inherit-if-required"),m=t("../internals/object-define-property").f,v=t("../internals/object-get-own-property-names").f,i=t("../internals/is-regexp"),n=t("../internals/regexp-flags"),a=t("../internals/regexp-sticky-helpers"),o=t("../internals/redefine"),h=t("../internals/fails"),p=t("../internals/internal-state").set,y=t("../internals/set-species"),w=t("../internals/well-known-symbol")("match"),b=c.RegExp,S=b.prototype,k=/a/g,E=/a/g,T=new b(k)!==k,R=a.UNSUPPORTED_Y;if(u&&s("RegExp",!T||R||h(function(){return E[w]=!1,b(k)!=k||b(E)==E||b(k,"i")!="/a/i"}))){for(var O=function(I,B){var V,G=this instanceof O,Y=i(I),H=B===void 0;return!G&&Y&&I.constructor===O&&H?I:(T?Y&&!H&&(I=I.source):I instanceof O&&(H&&(B=n.call(I)),I=I.source),R&&(V=!!B&&-1<B.indexOf("y"))&&(B=B.replace(/y/g,"")),Y=d(T?new b(I,B):b(I,B),G?this:S,O),R&&V&&p(Y,{sticky:V}),Y)},M=v(b),L=0;M.length>L;)(function(I){I in O||m(O,I,{configurable:!0,get:function(){return b[I]},set:function(B){b[I]=B}})})(M[L++]);(S.constructor=O).prototype=S,o(c,"RegExp",O)}y("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(c,x,f){var u=c("../internals/export"),c=c("../internals/regexp-exec");u({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(d,x,f){var u=d("../internals/redefine"),c=d("../internals/an-object"),i=d("../internals/fails"),s=d("../internals/regexp-flags"),d="toString",m=RegExp.prototype,v=m[d],i=i(function(){return v.call({source:"a",flags:"b"})!="/a/b"}),n=v.name!=d;(i||n)&&u(RegExp.prototype,d,function(){var a=c(this),o=String(a.source),h=a.flags;return"/"+o+"/"+String(h===void 0&&a instanceof RegExp&&!("flags"in m)?s.call(a):h)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(c,x,f){var u=c("../internals/collection"),c=c("../internals/collection-strong");x.exports=u("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},c)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(v,x,f){var u=v("../internals/export"),c=v("../internals/object-get-own-property-descriptor").f,s=v("../internals/to-length"),d=v("../internals/not-a-regexp"),m=v("../internals/require-object-coercible"),a=v("../internals/correct-is-regexp-logic"),v=v("../internals/is-pure"),i="".endsWith,n=Math.min,a=a("endsWith");u({target:"String",proto:!0,forced:!!(v||a||!(u=c(String.prototype,"endsWith"))||u.writable)&&!a},{endsWith:function(o){var h=String(m(this)),p=(d(o),1<arguments.length?arguments[1]:void 0),y=s(h.length),p=p===void 0?y:n(s(p),y),y=String(o);return i?i.call(h,y,p):h.slice(p-y.length,p)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/not-a-regexp"),s=t("../internals/require-object-coercible");u({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(d){return!!~String(s(this)).indexOf(c(d),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(s,x,f){var u=s("../internals/string-multibyte").charAt,c=s("../internals/internal-state"),s=s("../internals/define-iterator"),d="String Iterator",m=c.set,v=c.getterFor(d);s(String,"String",function(i){m(this,{type:d,string:String(i),index:0})},function(){var i=v(this),n=i.string,a=i.index;return a>=n.length?{value:void 0,done:!0}:(n=u(n,a),i.index+=n.length,{value:n,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(t,x,f){var u=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),s=t("../internals/to-length"),d=t("../internals/require-object-coercible"),m=t("../internals/advance-string-index"),v=t("../internals/regexp-exec-abstract");u("match",1,function(i,n,a){return[function(o){var h=d(this),p=o==null?void 0:o[i];return p!==void 0?p.call(o,h):new RegExp(o)[i](String(h))},function(o){var h=a(n,o,this);if(h.done)return h.value;var p=c(o),y=String(this);if(!p.global)return v(p,y);for(var w=p.unicode,b=[],S=p.lastIndex=0;(k=v(p,y))!==null;){var k=String(k[0]);(b[S]=k)===""&&(p.lastIndex=m(y,s(p.lastIndex),w)),S++}return S===0?null:b}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/string-pad").start;u({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(s){return c(this,s,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(t,x,f){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(t,x,f){var u=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),s=t("../internals/to-object"),d=t("../internals/to-length"),m=t("../internals/to-integer"),v=t("../internals/require-object-coercible"),i=t("../internals/advance-string-index"),n=t("../internals/regexp-exec-abstract"),a=Math.max,o=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;u("replace",2,function(w,b,S,k){var E=k.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,T=k.REPLACE_KEEPS_$0,R=E?"$":"$0";return[function(O,M){var L=v(this),I=O==null?void 0:O[w];return I!==void 0?I.call(O,L,M):b.call(String(L),O,M)},function(O,M){if(!E&&T||typeof M=="string"&&M.indexOf(R)===-1){var L=S(b,O,this,M);if(L.done)return L.value}for(var I,B=c(O),V=String(this),G=typeof M=="function",Y=(G||(M=String(M)),B.global),H=(Y&&(I=B.unicode,B.lastIndex=0),[]);(A=n(B,V))!==null&&(H.push(A),Y);)String(A[0])===""&&(B.lastIndex=i(V,d(B.lastIndex),I));for(var W,K="",Q=0,se=0;se<H.length;se++){for(var A=H[se],z=String(A[0]),q=a(o(m(A.index),V.length),0),$=[],ie=1;ie<A.length;ie++)$.push((W=A[ie])===void 0?W:String(W));var re=A.groups,fe=G?(fe=[z].concat($,q,V),re!==void 0&&fe.push(re),String(M.apply(void 0,fe))):function(ge,de,me,_e,ae,he){var be=me+ge.length,ke=_e.length,xe=y;return ae!==void 0&&(ae=s(ae),xe=p),b.call(he,xe,function(we,Me){var He;switch(Me.charAt(0)){case"$":return"$";case"&":return ge;case"`":return de.slice(0,me);case"'":return de.slice(be);case"<":He=ae[Me.slice(1,-1)];break;default:var Ie,dt=+Me;if(dt==0)return we;if(ke<dt)return(Ie=h(dt/10))!==0&&Ie<=ke?_e[Ie-1]===void 0?Me.charAt(1):_e[Ie-1]+Me.charAt(1):we;He=_e[dt-1]}return He===void 0?"":He})}(z,V,q,$,re,M);Q<=q&&(K+=V.slice(Q,q)+fe,Q=q+z.length)}return K+V.slice(Q)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(t,x,f){var u=t("../internals/fix-regexp-well-known-symbol-logic"),c=t("../internals/an-object"),s=t("../internals/require-object-coercible"),d=t("../internals/same-value"),m=t("../internals/regexp-exec-abstract");u("search",1,function(v,i,n){return[function(a){var o=s(this),h=a==null?void 0:a[v];return h!==void 0?h.call(a,o):new RegExp(a)[v](String(o))},function(a){var o,h=n(i,a,this);return h.done?h.value:(h=c(a),a=String(this),o=h.lastIndex,d(o,0)||(h.lastIndex=0),a=m(h,a),d(h.lastIndex,o)||(h.lastIndex=o),a===null?-1:a.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(o,x,f){var u=o("../internals/fix-regexp-well-known-symbol-logic"),c=o("../internals/is-regexp"),s=o("../internals/an-object"),d=o("../internals/require-object-coercible"),m=o("../internals/species-constructor"),v=o("../internals/advance-string-index"),i=o("../internals/to-length"),n=o("../internals/regexp-exec-abstract"),a=o("../internals/regexp-exec"),o=o("../internals/fails"),h=[].push,p=Math.min,y=4294967295,w=!o(function(){return!RegExp(y,"y")});u("split",2,function(b,S,k){var E="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(T,R){var O=String(d(this)),M=R===void 0?y:R>>>0;if(M==0)return[];if(T===void 0)return[O];if(!c(T))return S.call(O,T,M);for(var L,I,B,V=[],R=(T.ignoreCase?"i":"")+(T.multiline?"m":"")+(T.unicode?"u":"")+(T.sticky?"y":""),G=0,Y=new RegExp(T.source,R+"g");(L=a.call(Y,O))&&!(G<(I=Y.lastIndex)&&(V.push(O.slice(G,L.index)),1<L.length&&L.index<O.length&&h.apply(V,L.slice(1)),B=L[0].length,G=I,V.length>=M));)Y.lastIndex===L.index&&Y.lastIndex++;return G===O.length?!B&&Y.test("")||V.push(""):V.push(O.slice(G)),V.length>M?V.slice(0,M):V}:"0".split(void 0,0).length?function(T,R){return T===void 0&&R===0?[]:S.call(this,T,R)}:S;return[function(T,R){var O=d(this),M=T==null?void 0:T[b];return M!==void 0?M.call(T,O,R):E.call(String(O),T,R)},function(L,R){var O=k(E,L,this,R,E!==S);if(O.done)return O.value;var O=s(L),M=String(this),L=m(O,RegExp),I=O.unicode,B=(O.ignoreCase?"i":"")+(O.multiline?"m":"")+(O.unicode?"u":"")+(w?"y":"g"),V=new L(w?O:"^(?:"+O.source+")",B),G=R===void 0?y:R>>>0;if(G==0)return[];if(M.length===0)return n(V,M)===null?[M]:[];for(var Y=0,H=0,W=[];H<M.length;){V.lastIndex=w?H:0;var K,Q=n(V,w?M:M.slice(H));if(Q===null||(K=p(i(V.lastIndex+(w?0:H)),M.length))===Y)H=v(M,H,I);else{if(W.push(M.slice(Y,H)),W.length===G)return W;for(var se=1;se<=Q.length-1;se++)if(W.push(Q[se]),W.length===G)return W;H=Y=K}}return W.push(M.slice(Y)),W}]},!w)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(v,x,f){var u=v("../internals/export"),c=v("../internals/object-get-own-property-descriptor").f,s=v("../internals/to-length"),d=v("../internals/not-a-regexp"),m=v("../internals/require-object-coercible"),a=v("../internals/correct-is-regexp-logic"),v=v("../internals/is-pure"),i="".startsWith,n=Math.min,a=a("startsWith");u({target:"String",proto:!0,forced:!!(v||a||!(u=c(String.prototype,"startsWith"))||u.writable)&&!a},{startsWith:function(y){var h=String(m(this)),p=(d(y),s(n(1<arguments.length?arguments[1]:void 0,h.length))),y=String(y);return i?i.call(h,y,p):h.slice(p,p+y.length)===y}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/create-html");u({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return c(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(t,x,f){var u=t("../internals/export"),c=t("../internals/string-trim").trim;u({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return c(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(p,x,f){var u,c,s,d,m,v=p("../internals/export"),i=p("../internals/descriptors"),n=p("../internals/global"),a=p("../internals/has"),o=p("../internals/is-object"),h=p("../internals/object-define-property").f,p=p("../internals/copy-constructor-properties"),y=n.Symbol;!i||typeof y!="function"||"description"in y.prototype&&y().description===void 0||(u={},p(c=function(){var w=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),b=this instanceof c?new y(w):w===void 0?y():y(w);return w===""&&(u[b]=!0),b},y),(n=c.prototype=y.prototype).constructor=c,s=n.toString,d=String(y("test"))=="Symbol(test)",m=/^Symbol\((.*)\)[^)]+$/,h(n,"description",{configurable:!0,get:function(){var w=o(this)?this.valueOf():this,b=s.call(w);return a(u,w)?"":(w=d?b.slice(7,-1):b.replace(m,"$1"))===""?void 0:w}}),v({global:!0,forced:!0},{Symbol:c}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(t,x,f){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(de,x,f){function u(ne,pe){var Ee=He[ne]=O(he[ge]);return me(Ee,{type:fe,tag:ne,description:pe}),a||(Ee.description=pe),Ee}function c(ne,De){S(ne);var Ee=E(De),De=M(Ee).concat(ce(Ee));return ie(De,function(Ge){a&&!oe.call(Ee,Ge)||Le(ne,Ge,Ee[Ge])}),ne}function s(De,Ge){var Ee,De=E(De),Ge=T(Ge,!0);if(De!==ae||!y(He,Ge)||y(Ie,Ge))return!(Ee=ke(De,Ge))||!y(He,Ge)||y(De,re)&&De[re][Ge]||(Ee.enumerable=!0),Ee}function d(pe){var pe=we(E(pe)),Ee=[];return ie(pe,function(De){y(He,De)||y(Q,De)||Ee.push(De)}),Ee}var m=de("../internals/export"),v=de("../internals/global"),i=de("../internals/get-built-in"),n=de("../internals/is-pure"),a=de("../internals/descriptors"),o=de("../internals/native-symbol"),h=de("../internals/use-symbol-as-uid"),p=de("../internals/fails"),y=de("../internals/has"),w=de("../internals/is-array"),b=de("../internals/is-object"),S=de("../internals/an-object"),k=de("../internals/to-object"),E=de("../internals/to-indexed-object"),T=de("../internals/to-primitive"),R=de("../internals/create-property-descriptor"),O=de("../internals/object-create"),M=de("../internals/object-keys"),L=de("../internals/object-get-own-property-names"),I=de("../internals/object-get-own-property-names-external"),B=de("../internals/object-get-own-property-symbols"),V=de("../internals/object-get-own-property-descriptor"),G=de("../internals/object-define-property"),Y=de("../internals/object-property-is-enumerable"),H=de("../internals/create-non-enumerable-property"),W=de("../internals/redefine"),K=de("../internals/shared"),ot=de("../internals/shared-key"),Q=de("../internals/hidden-keys"),se=de("../internals/uid"),A=de("../internals/well-known-symbol"),z=de("../internals/well-known-symbol-wrapped"),q=de("../internals/define-well-known-symbol"),$=de("../internals/set-to-string-tag"),ut=de("../internals/internal-state"),ie=de("../internals/array-iteration").forEach,re=ot("hidden"),fe="Symbol",ge="prototype",de=A("toPrimitive"),me=ut.set,_e=ut.getterFor(fe),ae=Object[ge],he=v.Symbol,be=i("JSON","stringify"),ke=V.f,xe=G.f,we=I.f,Me=Y.f,He=K("symbols"),Ie=K("op-symbols"),dt=K("string-to-symbol-registry"),nt=K("symbol-to-string-registry"),ot=K("wks"),ut=v.QObject,ct=!ut||!ut[ge]||!ut[ge].findChild,Ae=a&&p(function(){return O(xe({},"a",{get:function(){return xe(this,"a",{value:7}).a}})).a!=7})?function(ne,pe,Ee){var De=ke(ae,pe);De&&delete ae[pe],xe(ne,pe,Ee),De&&ne!==ae&&xe(ae,pe,De)}:xe,Xe=h?function(ne){return typeof ne=="symbol"}:function(ne){return Object(ne)instanceof he},Le=function(ne,pe,Ee){return ne===ae&&Le(Ie,pe,Ee),S(ne),pe=T(pe,!0),S(Ee),(y(He,pe)?(Ee.enumerable?(y(ne,re)&&ne[re][pe]&&(ne[re][pe]=!1),Ee=O(Ee,{enumerable:R(0,!1)})):(y(ne,re)||xe(ne,re,R(1,{})),ne[re][pe]=!0),Ae):xe)(ne,pe,Ee)},oe=function(pe){var pe=T(pe,!0),Ee=Me.call(this,pe);return!(this===ae&&y(He,pe)&&!y(Ie,pe))&&(!(Ee||!y(this,pe)||!y(He,pe)||y(this,re)&&this[re][pe])||Ee)},ce=function(Ee){var pe=Ee===ae,Ee=we(pe?Ie:E(Ee)),De=[];return ie(Ee,function(Ge){!y(He,Ge)||pe&&!y(ae,Ge)||De.push(He[Ge])}),De};o||(W((he=function(){if(this instanceof he)throw TypeError("Symbol is not a constructor");var ne=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,pe=se(ne),Ee=function(De){this===ae&&Ee.call(Ie,De),y(this,re)&&y(this[re],pe)&&(this[re][pe]=!1),Ae(this,pe,R(1,De))};return a&&ct&&Ae(ae,pe,{configurable:!0,set:Ee}),u(pe,ne)})[ge],"toString",function(){return _e(this).tag}),W(he,"withoutSetter",function(ne){return u(se(ne),ne)}),Y.f=oe,G.f=Le,V.f=s,L.f=I.f=d,B.f=ce,z.f=function(ne){return u(A(ne),ne)},a&&(xe(he[ge],"description",{configurable:!0,get:function(){return _e(this).description}}),n||W(ae,"propertyIsEnumerable",oe,{unsafe:!0}))),m({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:he}),ie(M(ot),function(ne){q(ne)}),m({target:fe,stat:!0,forced:!o},{for:function(Ee){var pe,Ee=String(Ee);return y(dt,Ee)?dt[Ee]:(pe=he(Ee),dt[Ee]=pe,nt[pe]=Ee,pe)},keyFor:function(ne){if(!Xe(ne))throw TypeError(ne+" is not a symbol");if(y(nt,ne))return nt[ne]},useSetter:function(){ct=!0},useSimple:function(){ct=!1}}),m({target:"Object",stat:!0,forced:!o,sham:!a},{create:function(ne,pe){return pe===void 0?O(ne):c(O(ne),pe)},defineProperty:Le,defineProperties:c,getOwnPropertyDescriptor:s}),m({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:d,getOwnPropertySymbols:ce}),m({target:"Object",stat:!0,forced:p(function(){B.f(1)})},{getOwnPropertySymbols:function(ne){return B.f(k(ne))}}),be&&m({target:"JSON",stat:!0,forced:!o||p(function(){var ne=he();return be([ne])!="[null]"||be({a:ne})!="{}"||be(Object(ne))!="{}"})},{stringify:function(ne,pe,Ee){for(var De,Ge=[ne],Ke=1;Ke<arguments.length;)Ge.push(arguments[Ke++]);if((b(De=pe)||ne!==void 0)&&!Xe(ne))return w(pe)||(pe=function(it,at){if(typeof De=="function"&&(at=De.call(this,it,at)),!Xe(at))return at}),Ge[1]=pe,be.apply(null,Ge)}}),he[ge][de]||H(he[ge],de,he[ge].valueOf),$(he,fe),Q[re]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-copy-within"),s=u.aTypedArray;(0,u.exportTypedArrayMethod)("copyWithin",function(d,m){return c.call(s(this),d,m,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").every,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("every",function(d){return c(s(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-fill"),s=u.aTypedArray;(0,u.exportTypedArrayMethod)("fill",function(d){return c.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").filter,s=t("../internals/species-constructor"),d=u.aTypedArray,m=u.aTypedArrayConstructor;(0,u.exportTypedArrayMethod)("filter",function(v){for(var i=c(d(this),v,1<arguments.length?arguments[1]:void 0),v=s(this,this.constructor),n=0,a=i.length,o=new(m(v))(a);n<a;)o[n]=i[n++];return o})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").findIndex,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("findIndex",function(d){return c(s(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").find,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("find",function(d){return c(s(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,x,f){t("../internals/typed-array-constructor")("Float32",function(u){return function(c,s,d){return u(this,c,s,d)}})},{"../internals/typed-array-constructor":144}],220:[function(t,x,f){t("../internals/typed-array-constructor")("Float64",function(u){return function(c,s,d){return u(this,c,s,d)}})},{"../internals/typed-array-constructor":144}],221:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").forEach,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("forEach",function(d){c(s(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").includes,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("includes",function(d){return c(s(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-includes").indexOf,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("indexOf",function(d){return c(s(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(t,x,f){t("../internals/typed-array-constructor")("Int16",function(u){return function(c,s,d){return u(this,c,s,d)}})},{"../internals/typed-array-constructor":144}],225:[function(t,x,f){t("../internals/typed-array-constructor")("Int32",function(u){return function(c,s,d){return u(this,c,s,d)}})},{"../internals/typed-array-constructor":144}],226:[function(c,x,f){function u(){return s.call(v(this))}var a=c("../internals/global"),n=c("../internals/array-buffer-view-core"),i=c("../modules/es.array.iterator"),c=c("../internals/well-known-symbol")("iterator"),a=a.Uint8Array,s=i.values,d=i.keys,m=i.entries,v=n.aTypedArray,i=n.exportTypedArrayMethod,n=a&&a.prototype[c],a=!!n&&(n.name=="values"||n.name==null);i("entries",function(){return m.call(v(this))}),i("keys",function(){return d.call(v(this))}),i("values",u,!a),i(c,u,!a)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(c,x,f){var c=c("../internals/array-buffer-view-core"),u=c.aTypedArray,c=c.exportTypedArrayMethod,s=[].join;c("join",function(d){return s.apply(u(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-last-index-of"),s=u.aTypedArray;(0,u.exportTypedArrayMethod)("lastIndexOf",function(d){return c.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").map,s=t("../internals/species-constructor"),d=u.aTypedArray,m=u.aTypedArrayConstructor;(0,u.exportTypedArrayMethod)("map",function(v){return c(d(this),v,1<arguments.length?arguments[1]:void 0,function(i,n){return new(m(s(i,i.constructor)))(n)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").right,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("reduceRight",function(d){return c(s(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-reduce").left,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("reduce",function(d){return c(s(this),d,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(c,x,f){var c=c("../internals/array-buffer-view-core"),u=c.aTypedArray,c=c.exportTypedArrayMethod,s=Math.floor;c("reverse",function(){for(var d,m=u(this).length,v=s(m/2),i=0;i<v;)d=this[i],this[i++]=this[--m],this[m]=d;return this})},{"../internals/array-buffer-view-core":12}],233:[function(m,x,f){var u=m("../internals/array-buffer-view-core"),c=m("../internals/to-length"),s=m("../internals/to-offset"),d=m("../internals/to-object"),m=m("../internals/fails"),v=u.aTypedArray;(0,u.exportTypedArrayMethod)("set",function(i){v(this);var n=s(1<arguments.length?arguments[1]:void 0,1),a=this.length,o=d(i),h=c(o.length),p=0;if(a<h+n)throw RangeError("Wrong length");for(;p<h;)this[n+p]=o[p++]},m(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(c,x,f){var m=c("../internals/array-buffer-view-core"),u=c("../internals/species-constructor"),c=c("../internals/fails"),s=m.aTypedArray,d=m.aTypedArrayConstructor,m=m.exportTypedArrayMethod,v=[].slice;m("slice",function(i,n){for(var a=v.call(s(this),i,n),i=u(this,this.constructor),o=0,h=a.length,p=new(d(i))(h);o<h;)p[o]=a[o++];return p},c(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/array-iteration").some,s=u.aTypedArray;(0,u.exportTypedArrayMethod)("some",function(d){return c(s(this),d,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(c,x,f){var c=c("../internals/array-buffer-view-core"),u=c.aTypedArray,c=c.exportTypedArrayMethod,s=[].sort;c("sort",function(d){return s.call(u(this),d)})},{"../internals/array-buffer-view-core":12}],237:[function(t,x,f){var u=t("../internals/array-buffer-view-core"),c=t("../internals/to-length"),s=t("../internals/to-absolute-index"),d=t("../internals/species-constructor"),m=u.aTypedArray;(0,u.exportTypedArrayMethod)("subarray",function(o,i){var n=m(this),a=n.length,o=s(o,a);return new(d(n,n.constructor))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,c((i===void 0?a:s(i,a))-o))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(c,x,f){var m=c("../internals/global"),u=c("../internals/array-buffer-view-core"),c=c("../internals/fails"),s=m.Int8Array,d=u.aTypedArray,m=u.exportTypedArrayMethod,v=[].toLocaleString,i=[].slice,n=!!s&&c(function(){v.call(new s(1))});m("toLocaleString",function(){return v.apply(n?i.call(d(this)):d(this),arguments)},c(function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()})||!c(function(){s.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(c,x,f){var u=c("../internals/array-buffer-view-core").exportTypedArrayMethod,m=c("../internals/fails"),c=c("../internals/global").Uint8Array,c=c&&c.prototype||{},s=[].toString,d=[].join,m=(m(function(){s.call({})})&&(s=function(){return d.call(this)}),c.toString!=s);u("toString",s,m)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(t,x,f){t("../internals/typed-array-constructor")("Uint16",function(u){return function(c,s,d){return u(this,c,s,d)}})},{"../internals/typed-array-constructor":144}],241:[function(t,x,f){t("../internals/typed-array-constructor")("Uint32",function(u){return function(c,s,d){return u(this,c,s,d)}})},{"../internals/typed-array-constructor":144}],242:[function(t,x,f){t("../internals/typed-array-constructor")("Uint8",function(u){return function(c,s,d){return u(this,c,s,d)}})},{"../internals/typed-array-constructor":144}],243:[function(t,x,f){t("../internals/typed-array-constructor")("Uint8",function(u){return function(c,s,d){return u(this,c,s,d)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(y,S,f){function u(k){return function(){return k(this,arguments.length?arguments[0]:void 0)}}var c,s,d,m,v,w=y("../internals/global"),i=y("../internals/redefine-all"),n=y("../internals/internal-metadata"),a=y("../internals/collection"),o=y("../internals/collection-weak"),h=y("../internals/is-object"),p=y("../internals/internal-state").enforce,y=y("../internals/native-weak-map"),w=!w.ActiveXObject&&"ActiveXObject"in w,b=Object.isExtensible,S=S.exports=a("WeakMap",u,o);y&&w&&(c=o.getConstructor(u,"WeakMap",!0),n.REQUIRED=!0,a=S.prototype,s=a.delete,d=a.has,m=a.get,v=a.set,i(a,{delete:function(k){var E;return h(k)&&!b(k)?((E=p(this)).frozen||(E.frozen=new c),s.call(this,k)||E.frozen.delete(k)):s.call(this,k)},has:function(k){var E;return h(k)&&!b(k)?((E=p(this)).frozen||(E.frozen=new c),d.call(this,k)||E.frozen.has(k)):d.call(this,k)},get:function(k){var E;return!h(k)||b(k)||((E=p(this)).frozen||(E.frozen=new c),d.call(this,k))?m.call(this,k):E.frozen.get(k)},set:function(k,E){var T;return!h(k)||b(k)||((T=p(this)).frozen||(T.frozen=new c),d.call(this,k))?v.call(this,k,E):T.frozen.set(k,E),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(t,x,f){var u,c=t("../internals/global"),s=t("../internals/dom-iterables"),d=t("../internals/array-for-each"),m=t("../internals/create-non-enumerable-property");for(u in s){var v=c[u],v=v&&v.prototype;if(v&&v.forEach!==d)try{m(v,"forEach",d)}catch{v.forEach=d}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(v,x,f){var u,c=v("../internals/global"),s=v("../internals/dom-iterables"),d=v("../modules/es.array.iterator"),m=v("../internals/create-non-enumerable-property"),v=v("../internals/well-known-symbol"),i=v("iterator"),n=v("toStringTag"),a=d.values;for(u in s){var o=c[u],h=o&&o.prototype;if(h){if(h[i]!==a)try{m(h,i,a)}catch{h[i]=a}if(h[n]||m(h,n,u),s[u]){for(var p in d)if(h[p]!==d[p])try{m(h,p,d[p])}catch{h[p]=d[p]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(re,x,f){re("../modules/es.array.iterator");function u(fe){try{return decodeURIComponent(fe)}catch{return fe}}function c(fe){return q[fe]}function s(fe){return encodeURIComponent(fe).replace(z,c)}function d(fe){this.entries.length=0,$(this.entries,fe)}function m(fe,ge){if(fe<ge)throw TypeError("Not enough arguments")}function v(){w(this,v,G);var fe,ge,de,me,_e,ae,he,be,ke=0<arguments.length?arguments[0]:void 0,xe=[];if(H(this,{type:G,entries:xe,updateURL:function(){},updateSearchParams:d}),ke!==void 0)if(T(ke))if(typeof(fe=L(ke))=="function")for(de=(ge=fe.call(ke)).next;!(me=de.call(ge)).done;){if((ae=(_e=(me=M(E(me.value))).next).call(me)).done||(he=_e.call(me)).done||!_e.call(me).done)throw TypeError("Expected sequence with length 2");xe.push({key:ae.value+"",value:he.value+""})}else for(be in ke)b(ke,be)&&xe.push({key:be,value:ke[be]+""});else $(xe,typeof ke=="string"?ke.charAt(0)==="?"?ke.slice(1):ke:ke+"")}var i=re("../internals/export"),V=re("../internals/get-built-in"),n=re("../internals/native-url"),a=re("../internals/redefine"),o=re("../internals/redefine-all"),h=re("../internals/set-to-string-tag"),p=re("../internals/create-iterator-constructor"),y=re("../internals/internal-state"),w=re("../internals/an-instance"),b=re("../internals/has"),S=re("../internals/function-bind-context"),k=re("../internals/classof"),E=re("../internals/an-object"),T=re("../internals/is-object"),R=re("../internals/object-create"),O=re("../internals/create-property-descriptor"),M=re("../internals/get-iterator"),L=re("../internals/get-iterator-method"),re=re("../internals/well-known-symbol"),I=V("fetch"),B=V("Headers"),V=re("iterator"),G="URLSearchParams",Y=G+"Iterator",H=y.set,W=y.getterFor(G),K=y.getterFor(Y),Q=/\+/g,se=Array(4),A=function(fe){var ge,de=fe.replace(Q," "),me=4;try{return decodeURIComponent(de)}catch{for(;me;)de=de.replace((ge=me--,se[ge-1]||(se[ge-1]=RegExp("((?:%[\\da-f]{2}){"+ge+"})","gi"))),u);return de}},z=/[!'()~]|%20/g,q={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},$=function(fe,ge){if(ge)for(var de,me=ge.split("&"),_e=0;_e<me.length;)(de=me[_e++]).length&&(de=de.split("="),fe.push({key:A(de.shift()),value:A(de.join("="))}))},ie=p(function(fe,ge){H(this,{type:Y,iterator:M(W(fe).entries),kind:ge})},"Iterator",function(){var ge=K(this),fe=ge.kind,ge=ge.iterator.next(),de=ge.value;return ge.done||(ge.value=fe==="keys"?de.key:fe==="values"?de.value:[de.key,de.value]),ge}),re=v.prototype;o(re,{append:function(fe,ge){m(arguments.length,2);var de=W(this);de.entries.push({key:fe+"",value:ge+""}),de.updateURL()},delete:function(fe){m(arguments.length,1);for(var ge=W(this),de=ge.entries,me=fe+"",_e=0;_e<de.length;)de[_e].key===me?de.splice(_e,1):_e++;ge.updateURL()},get:function(fe){m(arguments.length,1);for(var ge=W(this).entries,de=fe+"",me=0;me<ge.length;me++)if(ge[me].key===de)return ge[me].value;return null},getAll:function(fe){m(arguments.length,1);for(var ge=W(this).entries,de=fe+"",me=[],_e=0;_e<ge.length;_e++)ge[_e].key===de&&me.push(ge[_e].value);return me},has:function(fe){m(arguments.length,1);for(var ge=W(this).entries,de=fe+"",me=0;me<ge.length;)if(ge[me++].key===de)return!0;return!1},set:function(fe,ge){m(arguments.length,1);for(var de,me=W(this),_e=me.entries,ae=!1,he=fe+"",be=ge+"",ke=0;ke<_e.length;ke++)(de=_e[ke]).key===he&&(ae?_e.splice(ke--,1):(ae=!0,de.value=be));ae||_e.push({key:he,value:be}),me.updateURL()},sort:function(){for(var fe,ge,de=W(this),me=de.entries,_e=me.slice(),ae=me.length=0;ae<_e.length;ae++){for(fe=_e[ae],ge=0;ge<ae;ge++)if(me[ge].key>fe.key){me.splice(ge,0,fe);break}ge===ae&&me.push(fe)}de.updateURL()},forEach:function(fe){for(var ge,de=W(this).entries,me=S(fe,1<arguments.length?arguments[1]:void 0,3),_e=0;_e<de.length;)me((ge=de[_e++]).value,ge.key,this)},keys:function(){return new ie(this,"keys")},values:function(){return new ie(this,"values")},entries:function(){return new ie(this,"entries")}},{enumerable:!0}),a(re,V,re.entries),a(re,"toString",function(){for(var fe,ge=W(this).entries,de=[],me=0;me<ge.length;)fe=ge[me++],de.push(s(fe.key)+"="+s(fe.value));return de.join("&")},{enumerable:!0}),h(v,G),i({global:!0,forced:!n},{URLSearchParams:v}),n||typeof I!="function"||typeof B!="function"||i({global:!0,enumerable:!0,forced:!0},{fetch:function(_e){var ge,de,me,_e=[_e];return 1<arguments.length&&(T(ge=arguments[1])&&(de=ge.body,k(de)===G&&((me=ge.headers?new B(ge.headers):new B).has("content-type")||me.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),ge=R(ge,{body:O(0,String(de)),headers:O(0,me)}))),_e.push(ge)),I.apply(this,_e)}}),x.exports={URLSearchParams:v,getState:W}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(M,x,f){M("../modules/es.string.iterator");function u(je){var Je,pt,$e,Gt;if(typeof je=="number"){for(Je=[],pt=0;pt<4;pt++)Je.unshift(je%256),je=Y(je/256);return Je.join(".")}if(typeof je!="object")return je;for(Je="",$e=he(je),pt=0;pt<8;pt++)Gt&&je[pt]===0||(Gt=Gt&&!1,$e===pt?(Je+=pt?":":"::",Gt=!0):(Je+=je[pt].toString(16),pt<7&&(Je+=":")));return"["+Je+"]"}function c(je){return!je.host||je.cannotBeABaseURL||je.scheme=="file"}function s(je,Je,pt,$e){var Gt,Ze,Yt,ft=pt||Xe,Mt=0,mt="",mr=!1,Rr=!1,cr=!1;for(pt||(je.scheme="",je.username="",je.password="",je.host=null,je.port=null,je.path=[],je.query=null,je.fragment=null,je.cannotBeABaseURL=!1,Je=Je.replace(me,"")),Je=Je.replace(_e,""),Gt=k(Je);Mt<=Gt.length;){switch(Ze=Gt[Mt],ft){case Xe:if(!Ze||!A.test(Ze)){if(pt)return K;ft=oe;continue}mt+=Ze.toLowerCase(),ft=Le;break;case Le:if(Ze&&(z.test(Ze)||Ze=="+"||Ze=="-"||Ze=="."))mt+=Ze.toLowerCase();else{if(Ze!=":"){if(pt)return K;mt="",ft=oe,Mt=0;continue}if(pt&&(Ie(je)!=b(He,mt)||mt=="file"&&(dt(je)||je.port!==null)||je.scheme=="file"&&!je.host))return;if(je.scheme=mt,pt)return void(Ie(je)&&He[je.scheme]==je.port&&(je.port=null));mt="",je.scheme=="file"?ft=Pt:Ie(je)&&$e&&$e.scheme==je.scheme?ft=ce:Ie(je)?ft=De:Gt[Mt+1]=="/"?(ft=ne,Mt++):(je.cannotBeABaseURL=!0,je.path.push(""),ft=sr)}break;case oe:if(!$e||$e.cannotBeABaseURL&&Ze!="#")return K;if($e.cannotBeABaseURL&&Ze=="#"){je.scheme=$e.scheme,je.path=$e.path.slice(),je.query=$e.query,je.fragment="",je.cannotBeABaseURL=!0,ft=Cr;break}ft=$e.scheme=="file"?Pt:pe;continue;case ce:if(Ze!="/"||Gt[Mt+1]!="/"){ft=pe;continue}ft=Ge,Mt++;break;case ne:if(Ze=="/"){ft=Ke;break}ft=Ct;continue;case pe:if(je.scheme=$e.scheme,Ze==v)je.username=$e.username,je.password=$e.password,je.host=$e.host,je.port=$e.port,je.path=$e.path.slice(),je.query=$e.query;else if(Ze=="/"||Ze=="\\"&&Ie(je))ft=Ee;else if(Ze=="?")je.username=$e.username,je.password=$e.password,je.host=$e.host,je.port=$e.port,je.path=$e.path.slice(),je.query="",ft=Gr;else{if(Ze!="#"){je.username=$e.username,je.password=$e.password,je.host=$e.host,je.port=$e.port,je.path=$e.path.slice(),je.path.pop(),ft=Ct;continue}je.username=$e.username,je.password=$e.password,je.host=$e.host,je.port=$e.port,je.path=$e.path.slice(),je.query=$e.query,je.fragment="",ft=Cr}break;case Ee:if(!Ie(je)||Ze!="/"&&Ze!="\\"){if(Ze!="/"){je.username=$e.username,je.password=$e.password,je.host=$e.host,je.port=$e.port,ft=Ct;continue}ft=Ke}else ft=Ge;break;case De:if(ft=Ge,Ze!="/"||mt.charAt(Mt+1)!="/")continue;Mt++;break;case Ge:if(Ze=="/"||Ze=="\\")break;ft=Ke;continue;case Ke:if(Ze=="@"){mr&&(mt="%40"+mt);for(var mr=!0,qr=k(mt),Qn=0;Qn<qr.length;Qn++){var nn=qr[Qn];nn!=":"||cr?(nn=Me(nn,we),cr?je.password+=nn:je.username+=nn):cr=!0}mt=""}else if(Ze==v||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&Ie(je)){if(mr&&mt=="")return W;Mt-=k(mt).length+1,mt="",ft=it}else mt+=Ze;break;case it:case at:if(pt&&je.scheme=="file"){ft=gt;continue}if(Ze!=":"||Rr){if(Ze==v||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&Ie(je)){if(Ie(je)&&mt=="")return Q;if(pt&&mt==""&&(dt(je)||je.port!==null))return;if(Yt=ae(je,mt))return Yt;if(mt="",ft=Dt,pt)return;continue}Ze=="["?Rr=!0:Ze=="]"&&(Rr=!1),mt+=Ze}else{if(mt=="")return Q;if(Yt=ae(je,mt))return Yt;if(mt="",ft=ht,pt==at)return}break;case ht:if(!q.test(Ze)){if(Ze==v||Ze=="/"||Ze=="?"||Ze=="#"||Ze=="\\"&&Ie(je)||pt){if(mt!=""){var Ur=parseInt(mt,10);if(65535<Ur)return se;je.port=Ie(je)&&Ur===He[je.scheme]?null:Ur,mt=""}if(pt)return;ft=Dt;continue}return se}mt+=Ze;break;case Pt:if(je.scheme="file",Ze=="/"||Ze=="\\")ft=Ot;else{if(!$e||$e.scheme!="file"){ft=Ct;continue}if(Ze==v)je.host=$e.host,je.path=$e.path.slice(),je.query=$e.query;else if(Ze=="?")je.host=$e.host,je.path=$e.path.slice(),je.query="",ft=Gr;else{if(Ze!="#"){ot(Gt.slice(Mt).join(""))||(je.host=$e.host,je.path=$e.path.slice(),ut(je)),ft=Ct;continue}je.host=$e.host,je.path=$e.path.slice(),je.query=$e.query,je.fragment="",ft=Cr}}break;case Ot:if(Ze=="/"||Ze=="\\"){ft=gt;break}$e&&$e.scheme=="file"&&!ot(Gt.slice(Mt).join(""))&&(nt($e.path[0],!0)?je.path.push($e.path[0]):je.host=$e.host),ft=Ct;continue;case gt:if(Ze==v||Ze=="/"||Ze=="\\"||Ze=="?"||Ze=="#"){if(!pt&&nt(mt))ft=Ct;else{if(mt==""){if(je.host="",pt)return}else{if(Yt=ae(je,mt))return Yt;if(je.host=="localhost"&&(je.host=""),pt)return;mt=""}ft=Dt}continue}mt+=Ze;break;case Dt:if(Ie(je)){if(ft=Ct,Ze!="/"&&Ze!="\\")continue}else if(pt||Ze!="?")if(pt||Ze!="#"){if(Ze!=v&&(ft=Ct,Ze!="/"))continue}else je.fragment="",ft=Cr;else je.query="",ft=Gr;break;case Ct:if(Ze==v||Ze=="/"||Ze=="\\"&&Ie(je)||!pt&&(Ze=="?"||Ze=="#")){if(Ae(mt)?(ut(je),Ze=="/"||Ze=="\\"&&Ie(je)||je.path.push("")):ct(mt)?Ze=="/"||Ze=="\\"&&Ie(je)||je.path.push(""):(je.scheme=="file"&&!je.path.length&&nt(mt)&&(je.host&&(je.host=""),mt=mt.charAt(0)+":"),je.path.push(mt)),mt="",je.scheme=="file"&&(Ze==v||Ze=="?"||Ze=="#"))for(;1<je.path.length&&je.path[0]==="";)je.path.shift();Ze=="?"?(je.query="",ft=Gr):Ze=="#"&&(je.fragment="",ft=Cr)}else mt+=Me(Ze,xe);break;case sr:Ze=="?"?(je.query="",ft=Gr):Ze=="#"?(je.fragment="",ft=Cr):Ze!=v&&(je.path[0]+=Me(Ze,be));break;case Gr:pt||Ze!="#"?Ze!=v&&(Ze=="'"&&Ie(je)?je.query+="%27":je.query+=Ze=="#"?"%23":Me(Ze,be)):(je.fragment="",ft=Cr);break;case Cr:Ze!=v&&(je.fragment+=Me(Ze,ke))}Mt++}}function d(Ze){var Je,pt,$e=w(this,d,"URL"),Gt=1<arguments.length?arguments[1]:void 0,Ze=String(Ze),Yt=V($e,{type:"URL"});if(Gt!==void 0){if(Gt instanceof d)Je=G(Gt);else if(pt=s(Je={},String(Gt)))throw TypeError(pt)}if(pt=s(Yt,Ze,null,Je))throw TypeError(pt);var ft=Yt.searchParams=new I;(Gt=B(ft)).updateSearchParams(Yt.query),Gt.updateURL=function(){Yt.query=String(ft)||null},o||($e.href=ir.call($e),$e.origin=qt.call($e),$e.protocol=Qr.call($e),$e.username=xr.call($e),$e.password=$t.call($e),$e.host=Pr.call($e),$e.hostname=ti.call($e),$e.port=co.call($e),$e.pathname=ho.call($e),$e.search=Jo.call($e),$e.searchParams=Zn.call($e),$e.hash=Ti.call($e))}function m(je,Je){return{get:je,set:Je,configurable:!0,enumerable:!0}}var v,i,n,a=M("../internals/export"),o=M("../internals/descriptors"),h=M("../internals/native-url"),Xt=M("../internals/global"),p=M("../internals/object-define-properties"),y=M("../internals/redefine"),w=M("../internals/an-instance"),b=M("../internals/has"),S=M("../internals/object-assign"),k=M("../internals/array-from"),E=M("../internals/string-multibyte").codeAt,T=M("../internals/string-punycode-to-ascii"),R=M("../internals/set-to-string-tag"),O=M("../modules/web.url-search-params"),M=M("../internals/internal-state"),L=Xt.URL,I=O.URLSearchParams,B=O.getState,V=M.set,G=M.getterFor("URL"),Y=Math.floor,H=Math.pow,W="Invalid authority",K="Invalid scheme",Q="Invalid host",se="Invalid port",A=/[A-Za-z]/,z=/[\d+-.A-Za-z]/,q=/\d/,$=/^(0x|0X)/,ie=/^[0-7]+$/,re=/^\d+$/,fe=/^[\dA-Fa-f]+$/,ge=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,de=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,me=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,_e=/[\u0009\u000A\u000D]/g,ae=function(je,Je){var pt,$e,Gt;if(Je.charAt(0)=="[")return Je.charAt(Je.length-1)=="]"&&(pt=function(Ze){var Yt=[0,0,0,0,0,0,0,0],ft=0,Mt=null,mt=0,mr,Rr,cr,qr,Qn,nn,Ur,Wr=function(){return Ze.charAt(mt)};if(Wr()==":"){if(Ze.charAt(1)!=":")return;mt+=2,ft++,Mt=ft}for(;Wr();){if(ft==8)return;if(Wr()==":"){if(Mt!==null)return;mt++,ft++,Mt=ft;continue}for(mr=Rr=0;Rr<4&&fe.test(Wr());)mr=mr*16+parseInt(Wr(),16),mt++,Rr++;if(Wr()=="."){if(Rr==0||(mt-=Rr,ft>6))return;for(cr=0;Wr();){if(qr=null,cr>0)if(Wr()=="."&&cr<4)mt++;else return;if(!q.test(Wr()))return;for(;q.test(Wr());){if(Qn=parseInt(Wr(),10),qr===null)qr=Qn;else{if(qr==0)return;qr=qr*10+Qn}if(qr>255)return;mt++}Yt[ft]=Yt[ft]*256+qr,cr++,(cr==2||cr==4)&&ft++}if(cr!=4)return;break}else if(Wr()==":"){if(mt++,!Wr())return}else if(Wr())return;Yt[ft++]=mr}if(Mt!==null)for(nn=ft-Mt,ft=7;ft!=0&&nn>0;)Ur=Yt[ft],Yt[ft--]=Yt[Mt+nn-1],Yt[Mt+--nn]=Ur;else if(ft!=8)return;return Yt}(Je.slice(1,-1)))?void(je.host=pt):Q;if(Ie(je))return Je=T(Je),ge.test(Je)||(pt=function(Ze){var Yt=Ze.split("."),ft,Mt,mt,mr,Rr,cr,qr;if(Yt.length&&Yt[Yt.length-1]==""&&Yt.pop(),(ft=Yt.length)>4)return Ze;for(Mt=[],mt=0;mt<ft;mt++){if(mr=Yt[mt],mr=="")return Ze;if(Rr=10,mr.length>1&&mr.charAt(0)=="0"&&(Rr=$.test(mr)?16:8,mr=mr.slice(Rr==8?1:2)),mr==="")cr=0;else{if(!(Rr==10?re:Rr==8?ie:fe).test(mr))return Ze;cr=parseInt(mr,Rr)}Mt.push(cr)}for(mt=0;mt<ft;mt++)if(cr=Mt[mt],mt==ft-1){if(cr>=H(256,5-ft))return null}else if(cr>255)return null;for(qr=Mt.pop(),mt=0;mt<Mt.length;mt++)qr+=Mt[mt]*H(256,3-mt);return qr}(Je))===null?Q:void(je.host=pt);if(de.test(Je))return Q;for(pt="",$e=k(Je),Gt=0;Gt<$e.length;Gt++)pt+=Me($e[Gt],be);je.host=pt},he=function(je){for(var Je=null,pt=1,$e=null,Gt=0,Ze=0;Ze<8;Ze++)je[Ze]!==0?(pt<Gt&&(Je=$e,pt=Gt),$e=null,Gt=0):($e===null&&($e=Ze),++Gt);return pt<Gt&&(Je=$e,pt=Gt),Je},be={},ke=S({},be,{" ":1,'"':1,"<":1,">":1,"`":1}),xe=S({},ke,{"#":1,"?":1,"{":1,"}":1}),we=S({},xe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Me=function(je,Je){var pt=E(je,0);return 32<pt&&pt<127&&!b(Je,je)?je:encodeURIComponent(je)},He={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ie=function(je){return b(He,je.scheme)},dt=function(je){return je.username!=""||je.password!=""},nt=function(je,Je){return je.length==2&&A.test(je.charAt(0))&&((je=je.charAt(1))==":"||!Je&&je=="|")},ot=function(je){return 1<je.length&&nt(je.slice(0,2))&&(je.length==2||(je=je.charAt(2))==="/"||je==="\\"||je==="?"||je==="#")},ut=function(je){var Je=je.path,pt=Je.length;!pt||je.scheme=="file"&&pt==1&&nt(Je[0],!0)||Je.pop()},ct=function(je){return je==="."||je.toLowerCase()==="%2e"},Ae=function(je){return(je=je.toLowerCase())===".."||je==="%2e."||je===".%2e"||je==="%2e%2e"},Xe={},Le={},oe={},ce={},ne={},pe={},Ee={},De={},Ge={},Ke={},it={},at={},ht={},Pt={},Ot={},gt={},Dt={},Ct={},sr={},Gr={},Cr={},Xt=d.prototype,ir=function(){var je=G(this),Je=je.scheme,pt=je.username,$e=je.password,Gt=je.host,Ze=je.port,Yt=je.path,ft=je.query,Mt=je.fragment,mt=Je+":";return Gt!==null?(mt+="//",dt(je)&&(mt+=pt+($e?":"+$e:"")+"@"),mt+=u(Gt),Ze!==null&&(mt+=":"+Ze)):Je=="file"&&(mt+="//"),mt+=je.cannotBeABaseURL?Yt[0]:Yt.length?"/"+Yt.join("/"):"",ft!==null&&(mt+="?"+ft),Mt!==null&&(mt+="#"+Mt),mt},qt=function(){var je=G(this),Je=je.scheme,pt=je.port;if(Je=="blob")try{return new URL(Je.path[0]).origin}catch{return"null"}return Je!="file"&&Ie(je)?Je+"://"+u(je.host)+(pt!==null?":"+pt:""):"null"},Qr=function(){return G(this).scheme+":"},xr=function(){return G(this).username},$t=function(){return G(this).password},Pr=function(){var Je=G(this),je=Je.host,Je=Je.port;return je===null?"":Je===null?u(je):u(je)+":"+Je},ti=function(){var je=G(this).host;return je===null?"":u(je)},co=function(){var je=G(this).port;return je===null?"":String(je)},ho=function(){var je=G(this),Je=je.path;return je.cannotBeABaseURL?Je[0]:Je.length?"/"+Je.join("/"):""},Jo=function(){var je=G(this).query;return je?"?"+je:""},Zn=function(){return G(this).searchParams},Ti=function(){var je=G(this).fragment;return je?"#"+je:""};o&&p(Xt,{href:m(ir,function(pt){var Je=G(this),pt=String(pt),pt=s(Je,pt);if(pt)throw TypeError(pt);B(Je.searchParams).updateSearchParams(Je.query)}),origin:m(qt),protocol:m(Qr,function(je){var Je=G(this);s(Je,String(je)+":",Xe)}),username:m(xr,function(je){var Je=G(this),pt=k(String(je));if(!c(Je)){Je.username="";for(var $e=0;$e<pt.length;$e++)Je.username+=Me(pt[$e],we)}}),password:m($t,function(je){var Je=G(this),pt=k(String(je));if(!c(Je)){Je.password="";for(var $e=0;$e<pt.length;$e++)Je.password+=Me(pt[$e],we)}}),host:m(Pr,function(je){var Je=G(this);Je.cannotBeABaseURL||s(Je,String(je),it)}),hostname:m(ti,function(je){var Je=G(this);Je.cannotBeABaseURL||s(Je,String(je),at)}),port:m(co,function(je){var Je=G(this);c(Je)||((je=String(je))==""?Je.port=null:s(Je,je,ht))}),pathname:m(ho,function(je){var Je=G(this);Je.cannotBeABaseURL||(Je.path=[],s(Je,je+"",Dt))}),search:m(Jo,function(je){var Je=G(this);(je=String(je))==""?Je.query=null:(je.charAt(0)=="?"&&(je=je.slice(1)),Je.query="",s(Je,je,Gr)),B(Je.searchParams).updateSearchParams(Je.query)}),searchParams:m(Zn),hash:m(Ti,function(je){var Je=G(this);(je=String(je))==""?Je.fragment=null:(je.charAt(0)=="#"&&(je=je.slice(1)),Je.fragment="",s(Je,je,Cr))})}),y(Xt,"toJSON",function(){return ir.call(this)},{enumerable:!0}),y(Xt,"toString",function(){return ir.call(this)},{enumerable:!0}),L&&(i=L.createObjectURL,n=L.revokeObjectURL,i&&y(d,"createObjectURL",function(je){return i.apply(L,arguments)}),n&&y(d,"revokeObjectURL",function(je){return n.apply(L,arguments)})),R(d,"URL"),a({global:!0,forced:!h,sham:!o},{URL:d})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(t,x,f){x.exports=t("./").polyfill()},{"./":250}],250:[function(t,x,f){(function(u,c){var s,d;s=this,d=function(){function m(ae){return typeof ae=="function"}var v=Array.isArray||function(ae){return Object.prototype.toString.call(ae)==="[object Array]"},i=0,n=void 0,a=void 0,o=function(ae,he){S[i]=ae,S[i+1]=he,(i+=2)===2&&(a?a(k):I())},h=typeof window<"u"?window:void 0,p=h||{},p=p.MutationObserver||p.WebKitMutationObserver,y=typeof self>"u"&&u!==void 0&&{}.toString.call(u)==="[object process]",w=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function b(){var ae=setTimeout;return function(){return ae(k,1)}}var S=new Array(1e3);function k(){for(var ae=0;ae<i;ae+=2)(0,S[ae])(S[ae+1]),S[ae]=void 0,S[ae+1]=void 0;i=0}function E(){try{var ae=Function("return this")().require("vertx");return(n=ae.runOnLoop||ae.runOnContext)!==void 0?function(){n(k)}:b()}catch{return b()}}var T,R,O,I=void 0;function M(ae,he){var be,ke=this,xe=new this.constructor(V),we=(xe[B]===void 0&&fe(xe),ke._state);return we?(be=arguments[we-1],o(function(){return ie(we,xe,be,ke._result)})):q(ke,xe,ae,he),xe}function L(ae){var he;return ae&&typeof ae=="object"&&ae.constructor===this?ae:(Q(he=new this(V),ae),he)}var I=y?function(){return u.nextTick(k)}:p?(R=0,y=new p(k),O=document.createTextNode(""),y.observe(O,{characterData:!0}),function(){O.data=R=++R%2}):w?((T=new MessageChannel).port1.onmessage=k,function(){return T.port2.postMessage(0)}):(h===void 0&&typeof t=="function"?E:b)(),B=Math.random().toString(36).substring(2);function V(){}var G=void 0,Y=1,H=2;function W(ae,he,be){o(function(ke){var xe=!1,we=function(Me,He,Ie,dt){try{Me.call(He,Ie,dt)}catch(nt){return nt}}(be,he,function(Me){xe||(xe=!0,(he!==Me?Q:A)(ke,Me))},function(Me){xe||(xe=!0,z(ke,Me))},ke._label);!xe&&we&&(xe=!0,z(ke,we))},ae)}function K(ae,he,be){var ke,xe;he.constructor===ae.constructor&&be===M&&he.constructor.resolve===L?(ke=ae,(xe=he)._state===Y?A(ke,xe._result):xe._state===H?z(ke,xe._result):q(xe,void 0,function(we){return Q(ke,we)},function(we){return z(ke,we)})):be!==void 0&&m(be)?W(ae,he,be):A(ae,he)}function Q(ae,he){if(ae===he)z(ae,new TypeError("You cannot resolve a promise with itself"));else if(be=typeof he,he===null||be!="object"&&be!="function")A(ae,he);else{be=void 0;try{be=he.then}catch(ke){return void z(ae,ke)}K(ae,he,be)}var be}function se(ae){ae._onerror&&ae._onerror(ae._result),$(ae)}function A(ae,he){ae._state===G&&(ae._result=he,ae._state=Y,ae._subscribers.length!==0&&o($,ae))}function z(ae,he){ae._state===G&&(ae._state=H,ae._result=he,o(se,ae))}function q(ae,he,be,ke){var xe=ae._subscribers,we=xe.length;ae._onerror=null,xe[we]=he,xe[we+Y]=be,xe[we+H]=ke,we===0&&ae._state&&o($,ae)}function $(ae){var he=ae._subscribers,be=ae._state;if(he.length!==0){for(var ke,xe=void 0,we=ae._result,Me=0;Me<he.length;Me+=3)ke=he[Me],xe=he[Me+be],ke?ie(be,ke,xe,we):xe(we);ae._subscribers.length=0}}function ie(ae,he,be,ke){var xe=m(be),we=void 0,Me=void 0,He=!0;if(xe){try{we=be(ke)}catch(Ie){He=!1,Me=Ie}if(he===we)return void z(he,new TypeError("A promises callback cannot return that same promise."))}else we=ke;he._state===G&&(xe&&He?Q(he,we):He===!1?z(he,Me):ae===Y?A(he,we):ae===H&&z(he,we))}var re=0;function fe(ae){ae[B]=re++,ae._state=void 0,ae._result=void 0,ae._subscribers=[]}de.prototype._enumerate=function(ae){for(var he=0;this._state===G&&he<ae.length;he++)this._eachEntry(ae[he],he)},de.prototype._eachEntry=function(ae,he){var be=this._instanceConstructor,ke=be.resolve;if(ke===L){var xe,we=void 0,Me=void 0,He=!1;try{we=ae.then}catch(Ie){He=!0,Me=Ie}we===M&&ae._state!==G?this._settledAt(ae._state,he,ae._result):typeof we!="function"?(this._remaining--,this._result[he]=ae):be===me?(xe=new be(V),He?z(xe,Me):K(xe,ae,we),this._willSettleAt(xe,he)):this._willSettleAt(new be(function(Ie){return Ie(ae)}),he)}else this._willSettleAt(ke(ae),he)},de.prototype._settledAt=function(ae,he,be){var ke=this.promise;ke._state===G&&(this._remaining--,ae===H?z(ke,be):this._result[he]=be),this._remaining===0&&A(ke,this._result)},de.prototype._willSettleAt=function(ae,he){var be=this;q(ae,void 0,function(ke){return be._settledAt(Y,he,ke)},function(ke){return be._settledAt(H,he,ke)})};var ge=de;function de(ae,he){this._instanceConstructor=ae,this.promise=new ae(V),this.promise[B]||fe(this.promise),v(he)?(this.length=he.length,this._remaining=he.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(he),this._remaining!==0)||A(this.promise,this._result)):z(this.promise,new Error("Array Methods must be provided an Array"))}_e.prototype.catch=function(ae){return this.then(null,ae)},_e.prototype.finally=function(ae){var he=this.constructor;return m(ae)?this.then(function(be){return he.resolve(ae()).then(function(){return be})},function(be){return he.resolve(ae()).then(function(){throw be})}):this.then(ae,ae)};var me=_e;function _e(ae){if(this[B]=re++,this._result=this._state=void 0,this._subscribers=[],V!==ae){if(typeof ae!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof _e))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var he=this;try{ae(function(be){Q(he,be)},function(be){z(he,be)})}catch(be){z(he,be)}}}return me.prototype.then=M,me.all=function(ae){return new ge(this,ae).promise},me.race=function(ae){var he=this;return v(ae)?new he(function(be,ke){for(var xe=ae.length,we=0;we<xe;we++)he.resolve(ae[we]).then(be,ke)}):new he(function(be,ke){return ke(new TypeError("You must pass an array to race."))})},me.resolve=L,me.reject=function(ae){var he=new this(V);return z(he,ae),he},me._setScheduler=function(ae){a=ae},me._setAsap=function(ae){o=ae},me._asap=o,me.polyfill=function(){var ae=void 0;if(c!==void 0)ae=c;else if(typeof self<"u")ae=self;else try{ae=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var he=ae.Promise;if(he){var be=null;try{be=Object.prototype.toString.call(he.resolve())}catch{}if(be==="[object Promise]"&&!he.cast)return}ae.Promise=me},me.Promise=me},typeof f=="object"&&x!==void 0?x.exports=d():s.ES6Promise=d()}).call(this,t("_process"),typeof Ma<"u"?Ma:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(t,x,f){var u,c;u=this,c=function(s,d){var m=5e3,v="callback";function i(a){try{delete window[a]}catch{window[a]=void 0}}function n(a){a=document.getElementById(a),a&&document.getElementsByTagName("head")[0].removeChild(a)}d.exports=function(a){var o=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],h=a,p=o.timeout||m,y=o.jsonpCallback||v,w=void 0;return new Promise(function(b,S){var k=o.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),E=y+"_"+k,T=(window[k]=function(R){b({ok:!0,json:function(){return Promise.resolve(R)}}),w&&clearTimeout(w),n(E),i(k)},h+=h.indexOf("?")===-1?"?":"&",document.createElement("script"));T.setAttribute("src",""+h+y+"="+k),o.charset&&T.setAttribute("charset",o.charset),T.id=E,document.getElementsByTagName("head")[0].appendChild(T),w=setTimeout(function(){S(new Error("JSONP request to "+a+" timed out")),i(k),n(E),window[k]=function(){i(k)}},p),T.onerror=function(){S(new Error("JSONP request to "+a+" failed")),i(k),n(E),w&&clearTimeout(w)}})}},f!==void 0&&x!==void 0?c(0,x):(c(c={exports:{}},c),u.fetchJsonp=c.exports)},{}],252:[function(t,x,f){var u=function(c){var s,d,m,v,i,n,a,o,h,p,y;if(!(c===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return y=c.document,s=function(){return c.URL||c.webkitURL||c},d=y.createElementNS("http://www.w3.org/1999/xhtml","a"),m="download"in d,v=/constructor/i.test(c.HTMLElement)||c.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),n=function(w){(c.setImmediate||c.setTimeout)(function(){throw w},0)},a=4e4,o=function(w){setTimeout(function(){typeof w=="string"?s().revokeObjectURL(w):w.remove()},a)},h=function(w){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(w.type)?new Blob(["\uFEFF",w],{type:w.type}):w},y=(p=function(w,b,R){R||(w=h(w));var k,E,T=this,R=w.type==="application/octet-stream",O=function(){for(var M=T,L="writestart progress write writeend".split(" "),I=void 0,B=(L=[].concat(L)).length;B--;){var V=M["on"+L[B]];if(typeof V=="function")try{V.call(M,I||M)}catch(G){n(G)}}};T.readyState=T.INIT,m?(k=s().createObjectURL(w),setTimeout(function(){var M,L;d.href=k,d.download=b,M=d,L=new MouseEvent("click"),M.dispatchEvent(L),O(),o(k),T.readyState=T.DONE})):(i||R&&v)&&c.FileReader?((E=new FileReader).onloadend=function(){var M=i?E.result:E.result.replace(/^data:[^;]*;/,"data:attachment/file;");c.open(M,"_blank")||(c.location.href=M),M=void 0,T.readyState=T.DONE,O()},E.readAsDataURL(w),T.readyState=T.INIT):(k=k||s().createObjectURL(w),!R&&c.open(k,"_blank")||(c.location.href=k),T.readyState=T.DONE,O(),o(k))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(w,b,S){return b=b||w.name||"download",S||(w=h(w)),navigator.msSaveOrOpenBlob(w,b)}:(y.abort=function(){},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,function(w,b,S){return new p(w,b||w.name||"download",S)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);x!==void 0&&x.exports?x.exports.saveAs=u:g!=null},{}],253:[function(t,x,f){var u,c=Object.defineProperty,s=(c(f,"__esModule",{value:!0}),f),d={GIFEncoder:()=>O,applyPalette:()=>function(G,Y,H="rgb565"){if(!G||!G.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(G instanceof Uint8Array||G instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<Y.length)throw new Error("applyPalette() only works with 256 colors or less");const W=new Uint32Array(G.buffer),K=W.length,Q=H==="rgb444"?4096:65536,se=new Uint8Array(K),A=new Array(Q);if(H==="rgba4444")for(let _e=0;_e<K;_e++){var ie=W[_e],z=ie>>24&255,q=ie>>16&255,$=ie>>8&255,ie=255&ie,re=o(ie,$,q,z),re=re in A?A[re]:A[re]=function(ae,he,be,ke,xe){let we=0,Me=1e100;for(let nt=0;nt<xe.length;nt++){var He,Ie=xe[nt],dt=E(Ie[3]-ke);dt>Me||(He=Ie[0],(dt+=E(He-ae))>Me||(He=Ie[1],(dt+=E(He-he))>Me||(He=Ie[2],(dt+=E(He-be))>Me||(Me=dt,we=nt))))}return we}(ie,$,q,z,Y);se[_e]=re}else{const _e=H==="rgb444"?h:a;for(let ae=0;ae<K;ae++){var de=W[ae],fe=de>>16&255,ge=de>>8&255,de=255&de,me=_e(de,ge,fe),me=me in A?A[me]:A[me]=function(he,be,ke,xe){let we=0,Me=1e100;for(let nt=0;nt<xe.length;nt++){var He,Ie=xe[nt],dt=E(Ie[0]-he);dt>Me||(He=Ie[1],(dt+=E(He-be))>Me||(He=Ie[2],(dt+=E(He-ke))>Me||(Me=dt,we=nt)))}return we}(de,ge,fe,Y);se[ae]=me}}return se},default:()=>V,nearestColor:()=>function(G,Y,H=S){return G[T(G,Y,H)]},nearestColorIndex:()=>T,nearestColorIndexWithDistance:()=>R,prequantize:()=>function(G,{roundRGB:Y=5,roundAlpha:H=10,oneBitAlpha:W=null}={}){const K=new Uint32Array(G.buffer);for(let q=0;q<K.length;q++){var z=K[q];let $=z>>24&255;var Q,se=z>>16&255,A=z>>8&255,z=255&z;$=k($,H),W&&(Q=typeof W=="number"?W:127,$=$<=Q?0:255),z=k(z,Y),A=k(A,Y),se=k(se,Y),K[q]=$<<24|se<<16|A<<8|z<<0}},quantize:()=>function(G,Y,H={}){var{format:W="rgb565",clearAlpha:K=!0,clearAlphaColor:Q=0,clearAlphaThreshold:se=0,oneBitAlpha:A=!1}=H;if(!G||!G.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(G instanceof Uint8Array||G instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");G=new Uint32Array(G.buffer);let z=H.useSqrt!==!1;const q=W==="rgba4444",$=function(ot,ut){const ct=ut==="rgb444"?4096:65536,Ae=new Array(ct),Xe=ot.length;if(ut==="rgba4444")for(let Ot=0;Ot<Xe;++Ot){var ne=ot[Ot],Le=ne>>24&255,oe=ne>>16&255,ce=ne>>8&255,ne=255&ne,pe=o(ne,ce,oe,Le);let gt=pe in Ae?Ae[pe]:Ae[pe]=b();gt.rc+=ne,gt.gc+=ce,gt.bc+=oe,gt.ac+=Le,gt.cnt++}else if(ut==="rgb444")for(let Ot=0;Ot<Xe;++Ot){var Ge=ot[Ot],Ee=Ge>>16&255,De=Ge>>8&255,Ge=255&Ge,Ke=h(Ge,De,Ee);let gt=Ke in Ae?Ae[Ke]:Ae[Ke]=b();gt.rc+=Ge,gt.gc+=De,gt.bc+=Ee,gt.cnt++}else for(let Ot=0;Ot<Xe;++Ot){var ht=ot[Ot],it=ht>>16&255,at=ht>>8&255,ht=255&ht,Pt=a(ht,at,it);let gt=Pt in Ae?Ae[Pt]:Ae[Pt]=b();gt.rc+=ht,gt.gc+=at,gt.bc+=it,gt.cnt++}return Ae}(G,W),ie=$.length,re=ie-1,fe=new Uint32Array(ie+1);for(var ge=0,de=0;de<ie;++de){const ot=$[de];ot!=null&&(Ie=1/ot.cnt,q&&(ot.ac*=Ie),ot.rc*=Ie,ot.gc*=Ie,ot.bc*=Ie,$[ge++]=ot)}y(Y)/ge<.022&&(z=!1);for(var me,_e,ae,de=0;de<ge-1;++de)$[de].fw=de+1,$[de+1].bk=de,z&&($[de].cnt=Math.sqrt($[de].cnt));for(z&&($[de].cnt=Math.sqrt($[de].cnt)),de=0;de<ge;++de){w($,de);var he=$[de].err;for(_e=++fe[0];1<_e&&(ae=_e>>1,!($[me=fe[ae]].err<=he));_e=ae)fe[_e]=me;fe[_e]=de}var be,ke=ge-Y;for(de=0;de<ke;){for(;;){var xe=fe[1];if((be=$[xe]).tm>=be.mtm&&$[be.nn].mtm<=be.tm)break;for(be.mtm==re?xe=fe[1]=fe[fe[0]--]:(w($,xe),be.tm=de),he=$[xe].err,_e=1;(ae=_e+_e)<=fe[0]&&(ae<fe[0]&&$[fe[ae]].err>$[fe[ae+1]].err&&ae++,!(he<=$[me=fe[ae]].err));_e=ae)fe[_e]=me;fe[_e]=xe}var we=$[be.nn],Me=be.cnt,He=we.cnt,Ie=1/(Me+He);q&&(be.ac=Ie*(Me*be.ac+He*we.ac)),be.rc=Ie*(Me*be.rc+He*we.rc),be.gc=Ie*(Me*be.gc+He*we.gc),be.bc=Ie*(Me*be.bc+He*we.bc),be.cnt+=we.cnt,be.mtm=++de,$[we.bk].fw=we.fw,$[we.fw].bk=we.bk,we.mtm=re}let dt=[];for(de=0;;0){let ot=p(Math.round($[de].rc),0,255),ut=p(Math.round($[de].gc),0,255),ct=p(Math.round($[de].bc),0,255),Ae=255;q&&(Ae=p(Math.round($[de].ac),0,255),A&&(nt=typeof A=="number"?A:127,Ae=Ae<=nt?0:255),K&&Ae<=se&&(ot=ut=ct=Q,Ae=0));var nt=q?[ot,ut,ct,Ae]:[ot,ut,ct];if(function(Xe,Le){for(let ne=0;ne<Xe.length;ne++){var ce=Xe[ne],oe=ce[0]===Le[0]&&ce[1]===Le[1]&&ce[2]===Le[2],ce=!(4<=ce.length&&4<=Le.length)||ce[3]===Le[3];if(oe&&ce)return!0}return!1}(dt,nt)||dt.push(nt),(de=$[de].fw)==0)break}return dt},snapColorsToPalette:()=>function(G,Y,H=5){if(G.length&&Y.length){var W=G.map(z=>z.slice(0,3)),K=H*H,Q=G[0].length;for(let z=0;z<Y.length;z++){let q=Y[z];q=q.length<Q?[q[0],q[1],q[2],255]:q.length>Q?q.slice(0,3):q.slice();var A=R(W,q.slice(0,3),S),se=A[0],A=A[1];0<A&&A<=K&&(G[se]=q)}}}};for(u in d)c(s,u,{get:d[u],enumerable:!0});var m={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function v(G=256){let Y=0,H=new Uint8Array(G);return{get buffer(){return H.buffer},reset(){Y=0},bytesView(){return H.subarray(0,Y)},bytes(){return H.slice(0,Y)},writeByte(K){W(Y+1),H[Y]=K,Y++},writeBytes(K,Q=0,se=K.length){W(Y+se);for(let A=0;A<se;A++)H[Y++]=K[A+Q]},writeBytesView(K,Q=0,se=K.byteLength){W(Y+se),H.set(K.subarray(Q,Q+se),Y),Y+=se}};function W(K){var Q=H.length;if(!(K<=Q)){K=Math.max(K,Q*(Q<1048576?2:1.125)>>>0),Q!=0&&(K=Math.max(K,256));const se=H;H=new Uint8Array(K),0<Y&&H.set(se.subarray(0,Y),0)}}}var i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],n=function(G,Y,H,q,K=v(512),Q=new Uint8Array(256),se=new Int32Array(5003),A=new Int32Array(5003)){var z=se.length,q=Math.max(2,q);Q.fill(0),A.fill(0),se.fill(-1);let $=0,ie=0;var re=q+1;const fe=re;let ge=!1,de=fe,me=(1<<de)-1;var _e=1<<re-1;const ae=1+_e;let he=2+_e,be=0,ke=H[0],xe=0;for(let nt=z;nt<65536;nt*=2)++xe;xe=8-xe,K.writeByte(q),dt(_e);var we=H.length;for(let nt=1;nt<we;nt++)e:{var Me=H[nt],He=(Me<<12)+ke;let ot=Me<<xe^ke;if(se[ot]===He)ke=A[ot];else{for(var Ie=ot===0?1:z-ot;0<=se[ot];)if((ot-=Ie)<0&&(ot+=z),se[ot]===He){ke=A[ot];break e}dt(ke),ke=Me,he<4096?(A[ot]=he++,se[ot]=He):(se.fill(-1),he=2+_e,ge=!0,dt(_e))}}return dt(ke),dt(ae),K.writeByte(0),K.bytesView();function dt(nt){for($&=i[ie],0<ie?$|=nt<<ie:$=nt,ie+=de;8<=ie;)Q[be++]=255&$,254<=be&&(K.writeByte(be),K.writeBytesView(Q,0,be),be=0),$>>=8,ie-=8;if((he>me||ge)&&(ge?(de=fe,me=(1<<de)-1,ge=!1):(++de,me=de===12?1<<de:(1<<de)-1)),nt==ae){for(;0<ie;)Q[be++]=255&$,254<=be&&(K.writeByte(be),K.writeBytesView(Q,0,be),be=0),$>>=8,ie-=8;0<be&&(K.writeByte(be),K.writeBytesView(Q,0,be),be=0)}}};function a(G,Y,H){return G<<8&63488|Y<<2&992|H>>3}function o(G,Y,H,W){return G>>4|240&Y|(240&H)<<4|(240&W)<<8}function h(G,Y,H){return G>>4<<8|240&Y|H>>4}function p(G,Y,H){return G<Y?Y:H<G?H:G}function y(G){return G*G}function w(G,Y,H){var W=0,K=1e100;const Q=G[Y];for(var se=Q.cnt,A=Q.ac,z=Q.rc,q=Q.gc,$=Q.bc,ie=Q.fw;ie!=0;ie=G[ie].fw){var re,fe=G[ie],ge=fe.cnt,ge=se*ge/(se+ge);K<=ge||(re=0,K<=(re+=ge*y(fe.rc-z))||K<=(re+=ge*y(fe.gc-q))||K<=(re+=ge*y(fe.bc-$))||(K=re,W=ie))}Q.err=K,Q.nn=W}function b(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function S(G,Y){for(var H=0,W=0;W<G.length;W++){var K=G[W]-Y[W];H+=K*K}return H}function k(G,Y){return 1<Y?Math.round(G/Y)*Y:G}function E(G){return G*G}function T(G,Y,H=S){let W=1/0,K=-1;for(let se=0;se<G.length;se++){var Q=H(Y,G[se]);Q<W&&(W=Q,K=se)}return K}function R(G,Y,H=S){let W=1/0,K=-1;for(let se=0;se<G.length;se++){var Q=H(Y,G[se]);Q<W&&(W=Q,K=se)}return[K,W]}function O(G={}){const{initialCapacity:Y=4096,auto:H=!0}=G,W=v(Y),K=new Uint8Array(256),Q=new Int32Array(5003),se=new Int32Array(5003);let A=!1;return{reset(){W.reset(),A=!1},finish(){W.writeByte(m.trailer)},bytes(){return W.bytes()},bytesView(){return W.bytesView()},get buffer(){return W.buffer},get stream(){return W},writeHeader:z,writeFrame(q,$,ie,ke={}){var{transparent:fe=!1,transparentIndex:ge=0,delay:Ie=0,palette:de=null,repeat:we=0,colorDepth:me=8,dispose:_e=-1}=ke;let ae=!1;if(H?A||(ae=!0,z(),A=!0):ae=!!ke.first,$=Math.max(0,Math.floor($)),ie=Math.max(0,Math.floor(ie)),ae){if(!de)throw new Error("First frame must include a { palette } option");var[ke,Me,be,He,xe=8]=[W,$,ie,de,me];He=B(He.length)-1,xe=128|xe-1<<4|He,L(ke,Me),L(ke,be),ke.writeBytes([xe,0,0]),M(W,de),0<=we&&(He=W,Me=we,He.writeByte(33),He.writeByte(255),He.writeByte(11),I(He,"NETSCAPE2.0"),He.writeByte(3),He.writeByte(1),L(He,Me),He.writeByte(0))}var he,be=Math.round(Ie/10),ke=W,xe=_e,we=be,Me=fe,He=ge,Ie=(ke.writeByte(33),ke.writeByte(249),ke.writeByte(4),He<0&&(He=0,Me=!1),Me=Me?(he=1,2):he=0,0<=xe&&(Me=7&xe),Me<<=2,ke.writeByte(0|Me|he),L(ke,we),ke.writeByte(He||0),ke.writeByte(0),!!de&&!ae);_e=W,fe=$,ge=ie,he=Ie?de:null,_e.writeByte(44),L(_e,0),L(_e,0),L(_e,fe),L(_e,ge),he?(fe=B(he.length)-1,_e.writeByte(128|fe)):_e.writeByte(0),Ie&&M(W,de),[we,ke,ge,fe,_e=8,Ie,de,q]=[W,q,$,ie,me,K,Q,se],n(ge,fe,ke,_e,we,Ie,de,q)}};function z(){I(W,"GIF89a")}}function M(G,Y){var H=1<<B(Y.length);for(let W=0;W<H;W++){let K=[0,0,0];W<Y.length&&(K=Y[W]),G.writeByte(K[0]),G.writeByte(K[1]),G.writeByte(K[2])}}function L(G,Y){G.writeByte(255&Y),G.writeByte(Y>>8&255)}function I(G,Y){for(var H=0;H<Y.length;H++)G.writeByte(Y.charCodeAt(H))}function B(G){return Math.max(Math.ceil(Math.log2(G)),1)}var V=O},{}],254:[function(t,x,f){f.read=function(u,c,s,d,w){var v,i,n=8*w-d-1,a=(1<<n)-1,o=a>>1,h=-7,p=s?w-1:0,y=s?-1:1,w=u[c+p];for(p+=y,v=w&(1<<-h)-1,w>>=-h,h+=n;0<h;v=256*v+u[c+p],p+=y,h-=8);for(i=v&(1<<-h)-1,v>>=-h,h+=d;0<h;i=256*i+u[c+p],p+=y,h-=8);if(v===0)v=1-o;else{if(v===a)return i?NaN:1/0*(w?-1:1);i+=Math.pow(2,d),v-=o}return(w?-1:1)*i*Math.pow(2,v-d)},f.write=function(u,c,s,d,m,b){var i,n,a=8*b-m-1,o=(1<<a)-1,h=o>>1,p=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=d?0:b-1,w=d?1:-1,b=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(n=isNaN(c)?1:0,i=o):(i=Math.floor(Math.log(c)/Math.LN2),c*(d=Math.pow(2,-i))<1&&(i--,d*=2),2<=(c+=1<=i+h?p/d:p*Math.pow(2,1-h))*d&&(i++,d/=2),o<=i+h?(n=0,i=o):1<=i+h?(n=(c*d-1)*Math.pow(2,m),i+=h):(n=c*Math.pow(2,h-1)*Math.pow(2,m),i=0));8<=m;u[s+y]=255&n,y+=w,n/=256,m-=8);for(i=i<<m|n,a+=m;0<a;u[s+y]=255&i,y+=w,i/=256,a-=8);u[s+y-w]|=128*b}},{}],255:[function(t,x,f){var u;function c(oe,ce){return oe.b===ce.b&&oe.a===ce.a}function s(oe,ce){return oe.b<ce.b||oe.b===ce.b&&oe.a<=ce.a}function d(oe,ce,ne){var pe=ce.b-oe.b,Ee=ne.b-ce.b;return 0<pe+Ee?pe<Ee?ce.a-oe.a+pe/(pe+Ee)*(oe.a-ne.a):ce.a-ne.a+Ee/(pe+Ee)*(ne.a-oe.a):0}function m(oe,ce,ne){var pe=ce.b-oe.b,Ee=ne.b-ce.b;return 0<pe+Ee?(ce.a-ne.a)*pe+(ce.a-oe.a)*Ee:0}function v(oe,ce){return oe.a<ce.a||oe.a===ce.a&&oe.b<=ce.b}function i(oe,ce,ne){var pe=ce.a-oe.a,Ee=ne.a-ce.a;return 0<pe+Ee?pe<Ee?ce.b-oe.b+pe/(pe+Ee)*(oe.b-ne.b):ce.b-ne.b+Ee/(pe+Ee)*(ne.b-oe.b):0}function n(oe,ce,ne){var pe=ce.a-oe.a,Ee=ne.a-ce.a;return 0<pe+Ee?(ce.b-ne.b)*pe+(ce.b-oe.b)*Ee:0}function a(oe,ce,ne,pe){return(oe=oe<0?0:oe)<=(ne=ne<0?0:ne)?ne===0?(ce+pe)/2:ce+oe/(oe+ne)*(pe-ce):pe+ne/(oe+ne)*(ce-pe)}function o(oe){var ce=b(oe.b);return k(ce,oe.c),k(ce.b,oe.c),E(ce,oe.a),ce}function h(oe,ce){var ne=!1,pe=!1;oe!==ce&&(ce.a!==oe.a&&(pe=!0,R(ce.a,oe.a)),ce.d!==oe.d&&(ne=!0,O(ce.d,oe.d)),S(ce,oe),pe||(k(ce,oe.a),oe.a.c=oe),ne||(E(ce,oe.d),oe.d.a=oe))}function p(oe){var ce=oe.b,ne=!1;oe.d!==oe.b.d&&(ne=!0,O(oe.d,oe.b.d)),oe.c===oe?R(oe.a,null):(oe.b.d.a=oe.b.e,oe.a.c=oe.c,S(oe,oe.b.e),ne||E(oe,oe.d)),ce.c===ce?(R(ce.a,null),O(ce.d,null)):(oe.d.a=ce.b.e,ce.a.c=ce.c,S(ce,ce.b.e)),T(oe)}function y(oe){var ce=b(oe),ne=ce.b;return S(ce,oe.e),ce.a=oe.b.a,k(ne,ce.a),ce.d=ne.d=oe.d,ce=ce.b,S(oe.b,oe.b.b.e),S(oe.b,ce),oe.b.a=ce.a,ce.b.a.c=ce.b,ce.b.d=oe.b.d,ce.f=oe.f,ce.b.f=oe.b.f,ce}function w(oe,ce){var ne=!1,pe=b(oe),Ee=pe.b;return ce.d!==oe.d&&(ne=!0,O(ce.d,oe.d)),S(pe,oe.e),S(Ee,ce),pe.a=oe.b.a,Ee.a=ce.a,pe.d=Ee.d=oe.d,oe.d.a=Ee,ne||E(pe,oe.d),pe}function b(oe){var ce=new be,ne=new be,pe=oe.b.h;return(((ne.h=pe).b.h=ce).h=oe).b.h=ne,ce.b=ne,((ce.c=ce).e=ne).b=ce,(ne.c=ne).e=ce}function S(oe,ce){var ne=oe.c,pe=ce.c;ne.b.e=ce,(pe.b.e=oe).c=pe,ce.c=ne}function k(oe,ce){var ne=ce.f,pe=new xe(ce,ne);for(ne.e=pe,ne=(ce.f=pe).c=oe;ne.a=pe,(ne=ne.c)!==oe;);}function E(oe,ce){var ne=ce.d,pe=new he(ce,ne);for(ne.b=pe,(ce.d=pe).a=oe,pe.c=ce.c,ne=oe;ne.d=pe,(ne=ne.e)!==oe;);}function T(oe){var ce=oe.h;oe=oe.b.h,(ce.b.h=oe).b.h=ce}function R(oe,ce){for(var ne=oe.c,pe=ne;pe.a=ce,(pe=pe.c)!==ne;);ne=oe.f,((pe=oe.e).f=ne).e=pe}function O(oe,ce){for(var ne=oe.a,pe=ne;pe.d=ce,(pe=pe.e)!==ne;);ne=oe.d,((pe=oe.b).d=ne).b=pe}function M(oe){var ce=0;return Math.abs(oe[1])>Math.abs(oe[0])&&(ce=1),ce=Math.abs(oe[2])>Math.abs(oe[ce])?2:ce}function L(oe,ce){oe.f+=ce.f,oe.b.f+=ce.b.f}function I(oe,ce,ne){return oe=oe.a,ce=ce.a,ne=ne.a,ce.b.a===oe?ne.b.a===oe?s(ce.a,ne.a)?m(ne.b.a,ce.a,ne.a)<=0:0<=m(ce.b.a,ne.a,ce.a):m(ne.b.a,oe,ne.a)<=0:ne.b.a===oe?0<=m(ce.b.a,oe,ce.a):(ce=d(ce.b.a,oe,ce.a),(oe=d(ne.b.a,oe,ne.a))<=ce)}function B(oe){oe.a.i=null;var ce=oe.e;ce.a.c=ce.c,ce.c.a=ce.a,oe.e=null}function V(oe,ce){p(oe.a),oe.c=!1,(oe.a=ce).i=oe}function G(oe){for(var ce=oe.a.a;(oe=Le(oe)).a.a===ce;);return oe.c&&(V(oe,ce=w(Xe(oe).a.b,oe.a.e)),oe=Le(oe)),oe}function Y(oe,ce,ne){var pe=new Ae;return pe.a=ne,pe.e=ge(oe.f,ce.e,pe),ne.i=pe}function H(oe,ce){switch(oe.s){case 100130:return(1&ce)!=0;case 100131:return ce!==0;case 100132:return 0<ce;case 100133:return ce<0;case 100134:return 2<=ce||ce<=-2}return!1}function W(oe){var ce=oe.a,ne=ce.d;ne.c=oe.d,ne.a=ce,B(oe)}function K(oe,ce,ne){for(ce=(oe=ce).a;oe!==ne;){oe.c=!1;var pe=Xe(oe),Ee=pe.a;if(Ee.a!==ce.a){if(!pe.c){W(oe);break}V(pe,Ee=w(ce.c.b,Ee.b))}ce.c!==Ee&&(h(Ee.b.e,Ee),h(ce,Ee)),W(oe),ce=pe.a,oe=pe}return ce}function Q(oe,ce,ne,pe,Ee,De){for(var Ge=!0;Y(oe,ce,ne.b),(ne=ne.c)!==pe;);for(Ee===null&&(Ee=Xe(ce).a.b.c);(ne=(pe=Xe(ce)).a.b).a===Ee.a;)ne.c!==Ee&&(h(ne.b.e,ne),h(Ee.b.e,ne)),pe.f=ce.f-ne.f,pe.d=H(oe,pe.f),ce.b=!0,!Ge&&q(oe,ce)&&(L(ne,Ee),B(ce),p(Ee)),Ge=!1,ce=pe,Ee=ne;ce.b=!0,De&&ie(oe,ce)}function se(oe,ce,ne,pe,Ee){var De=[ce.g[0],ce.g[1],ce.g[2]];ce.d=null,ce.d=oe.o&&oe.o(De,ne,pe,oe.c)||null,ce.d===null&&(Ee?oe.n||(ae(oe,100156),oe.n=!0):ce.d=ne[0])}function A(oe,ce,ne){var pe=[null,null,null,null];pe[0]=ce.a.d,pe[1]=ne.a.d,se(oe,ce.a,pe,[.5,.5,0,0],!1),h(ce,ne)}function z(oe,ce,ne,pe,Ee){var De=Math.abs(ce.b-oe.b)+Math.abs(ce.a-oe.a),Ge=Math.abs(ne.b-oe.b)+Math.abs(ne.a-oe.a),Ke=Ee+1;pe[Ee]=.5*Ge/(De+Ge),pe[Ke]=.5*De/(De+Ge),oe.g[0]+=pe[Ee]*ce.g[0]+pe[Ke]*ne.g[0],oe.g[1]+=pe[Ee]*ce.g[1]+pe[Ke]*ne.g[1],oe.g[2]+=pe[Ee]*ce.g[2]+pe[Ke]*ne.g[2]}function q(oe,ce){var ne=Xe(ce),pe=ce.a,Ee=ne.a;if(s(pe.a,Ee.a)){if(0<m(Ee.b.a,pe.a,Ee.a))return;if(c(pe.a,Ee.a)){if(pe.a!==Ee.a){var ne=oe.e,De=pe.a.h;if(0<=De){var Ge=(ne=ne.b).d,Ke=ne.e,it=ne.c,at=it[De];Ge[at]=Ge[ne.a],(it[Ge[at]]=at)<=--ne.a&&(at<=1||s(Ke[Ge[at>>1]],Ke[Ge[at]])?ut:ct)(ne,at),Ke[De]=null,it[De]=ne.b,ne.b=De}else for(ne.c[-(De+1)]=null;0<ne.a&&ne.c[ne.d[ne.a-1]]===null;)--ne.a;A(oe,Ee.b.e,pe)}}else y(Ee.b),h(pe,Ee.b.e),ce.b=ne.b=!0}else{if(m(pe.b.a,Ee.a,pe.a)<0)return;Le(ce).b=ce.b=!0,y(pe.b),h(Ee.b.e,pe)}return 1}function $(oe,ce){var ne=Xe(ce),pe=ce.a,Ee=ne.a,De=pe.a,Ge=Ee.a,Ke=pe.b.a,it=Ee.b.a,at=new xe;if(m(Ke,oe.a,De),m(it,oe.a,Ge),!(De===Ge||Math.min(De.a,Ke.a)>Math.max(Ge.a,it.a))){if(s(De,Ge)){if(0<m(it,De,Ge))return}else if(m(Ke,Ge,De)<0)return;var ht,Pt,Ot=Ke,gt=De,Dt=it,Ct=Ge;if(s(Ot,gt)||(ht=Ot,Ot=gt,gt=ht),s(Dt,Ct)||(ht=Dt,Dt=Ct,Ct=ht),s(Ot,Dt)||(ht=Ot,Ot=Dt,Dt=ht,ht=gt,gt=Ct,Ct=ht),s(Dt,gt)?s(gt,Ct)?((ht=d(Ot,Dt,gt))+(Pt=d(Dt,gt,Ct))<0&&(ht=-ht,Pt=-Pt),at.b=a(ht,Dt.b,Pt,gt.b)):((ht=m(Ot,Dt,gt))+(Pt=-m(Ot,Ct,gt))<0&&(ht=-ht,Pt=-Pt),at.b=a(ht,Dt.b,Pt,Ct.b)):at.b=(Dt.b+gt.b)/2,v(Ot,gt)||(ht=Ot,Ot=gt,gt=ht),v(Dt,Ct)||(ht=Dt,Dt=Ct,Ct=ht),v(Ot,Dt)||(ht=Ot,Ot=Dt,Dt=ht,ht=gt,gt=Ct,Ct=ht),v(Dt,gt)?v(gt,Ct)?((ht=i(Ot,Dt,gt))+(Pt=i(Dt,gt,Ct))<0&&(ht=-ht,Pt=-Pt),at.a=a(ht,Dt.a,Pt,gt.a)):((ht=n(Ot,Dt,gt))+(Pt=-n(Ot,Ct,gt))<0&&(ht=-ht,Pt=-Pt),at.a=a(ht,Dt.a,Pt,Ct.a)):at.a=(Dt.a+gt.a)/2,s(at,oe.a)&&(at.b=oe.a.b,at.a=oe.a.a),Ot=s(De,Ge)?De:Ge,s(Ot,at)&&(at.b=Ot.b,at.a=Ot.a),c(at,De)||c(at,Ge))return q(oe,ce),0;if(!c(Ke,oe.a)&&0<=m(Ke,oe.a,at)||!c(it,oe.a)&&m(it,oe.a,at)<=0){if(it===oe.a)y(pe.b),h(Ee.b,pe),pe=Xe(ce=G(ce)).a,K(oe,Xe(ce),ne),Q(oe,ce,pe.b.e,pe,pe,!0);else{if(Ke!==oe.a)return 0<=m(Ke,oe.a,at)&&(Le(ce).b=ce.b=!0,y(pe.b),pe.a.b=oe.a.b,pe.a.a=oe.a.a),void(m(it,oe.a,at)<=0&&(ce.b=ne.b=!0,y(Ee.b),Ee.a.b=oe.a.b,Ee.a.a=oe.a.a));for(y(Ee.b),h(pe.e,Ee.b.e),Ge=(De=ne=ce).a.b.a;(De=Le(De)).a.b.a===Ge;);De=Xe(ce=De).a.b.c,ne.a=Ee.b.e,Q(oe,ce,(Ee=K(oe,ne,null)).c,pe.b.c,De,!0)}return 1}y(pe.b),y(Ee.b),h(Ee.b.e,pe),pe.a.b=at.b,pe.a.a=at.a,pe.a.h=Me(oe.e,pe.a),pe=pe.a,Ee=[0,0,0,0],at=[De.d,Ke.d,Ge.d,it.d],pe.g[0]=pe.g[1]=pe.g[2]=0,z(pe,De,Ke,Ee,0),z(pe,Ge,it,Ee,2),se(oe,pe,at,Ee,!0),Le(ce).b=ce.b=ne.b=!0}}function ie(oe,ce){for(var ne=Xe(ce);;){for(;ne.b;)ne=Xe(ce=ne);if(!ce.b&&((ce=Le(ne=ce))===null||!ce.b))break;ce.b=!1;var pe=ce.a,Ee=ne.a;if(De=pe.b.a!==Ee.b.a)e:{var De,Ge=Xe(De=ce),Ke=De.a,it=Ge.a,at=void 0;if(s(Ke.b.a,it.b.a)){if(m(Ke.b.a,it.b.a,Ke.a)<0){De=!1;break e}Le(De).b=De.b=!0,at=y(Ke),h(it.b,at),at.d.c=De.d}else{if(0<m(it.b.a,Ke.b.a,it.a)){De=!1;break e}De.b=Ge.b=!0,at=y(it),h(Ke.e,it.b),at.b.d.c=De.d}De=!0}if(De&&(ne.c?(B(ne),p(Ee),Ee=(ne=Xe(ce)).a):ce.c&&(B(ce),p(pe),pe=(ce=Le(ne)).a)),pe.a!==Ee.a){if(pe.b.a===Ee.b.a||ce.c||ne.c||pe.b.a!==oe.a&&Ee.b.a!==oe.a)q(oe,ce);else if($(oe,ce))break}pe.a===Ee.a&&pe.b.a===Ee.b.a&&(L(Ee,pe),B(ce),p(pe),ce=Le(ne))}}function re(oe,ce){var ne=new Ae,pe=o(oe.b);pe.a.b=4e150,pe.a.a=ce,pe.b.a.b=-4e150,pe.b.a.a=ce,oe.a=pe.b.a,ne.a=pe,ne.f=0,ne.d=!1,ne.c=!1,ne.h=!0,ne.b=!1,pe=ge(pe=oe.f,pe.a,ne),ne.e=pe}function fe(oe){this.a=new de,this.b=oe,this.c=I}function ge(oe,ce,ne){for(;(ce=ce.c).b!==null&&!oe.c(oe.b,ce.b,ne););return oe=new de(ne,ce.a,ce),ce.a.c=oe,ce.a=oe}function de(oe,ce,ne){this.b=oe||null,this.a=ce||this,this.c=ne||this}function me(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function _e(oe,ce){if(oe.d!==ce)for(;oe.d!==ce;)if(oe.d<ce)switch(oe.d){case 0:ae(oe,100151),oe.u(null);break;case 1:ae(oe,100152),oe.t()}else switch(oe.d){case 2:ae(oe,100154),oe.v();break;case 1:ae(oe,100153),oe.w()}}function ae(oe,ce){oe.p&&oe.p(ce,oe.c)}function he(oe,ce){this.b=oe||this,this.d=ce||this,this.a=null,this.c=!1}function be(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function ke(){this.c=new xe,this.a=new he,this.b=new be,this.d=new be,this.b.b=this.d,this.d.b=this.b}function xe(oe,ce){this.e=oe||this,this.f=ce||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function we(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new Ie}function Me(oe,ce){var ne,pe,Ee;return oe.e?(2*(pe=++(ne=oe.b).a)>ne.f&&(ne.f*=2,ne.c=dt(ne.c,ne.f+1)),ne.b===0?Ee=pe:(Ee=ne.b,ne.b=ne.c[ne.b]),ne.e[Ee]=ce,ne.c[Ee]=pe,ne.d[pe]=Ee,ne.h&&ct(ne,pe),Ee):(ne=oe.a++,oe.c[ne]=ce,-(ne+1))}function He(oe){if(oe.a===0)return ot(oe.b);var ce=oe.c[oe.d[oe.a-1]];if(oe.b.a!==0&&s(nt(oe.b),ce))return ot(oe.b);for(;--oe.a,0<oe.a&&oe.c[oe.d[oe.a-1]]===null;);return ce}function Ie(){this.d=dt([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function dt(oe,ce){for(var ne=Array(ce),pe=0;pe<oe.length;pe++)ne[pe]=oe[pe];for(;pe<ce;pe++)ne[pe]=0;return ne}function nt(oe){return oe.e[oe.d[1]]}function ot(oe){var ce=oe.d,ne=oe.e,pe=oe.c,Ee=ce[1],De=ne[Ee];return 0<oe.a&&(ce[1]=ce[oe.a],pe[ce[1]]=1,ne[Ee]=null,pe[Ee]=oe.b,oe.b=Ee,0<--oe.a&&ut(oe,1)),De}function ut(oe,ce){for(var ne=oe.d,pe=oe.e,Ee=oe.c,De=ce,Ge=ne[De];;){var Ke=De<<1,it=(Ke<oe.a&&s(pe[ne[Ke+1]],pe[ne[Ke]])&&(Ke+=1),ne[Ke]);if(Ke>oe.a||s(pe[Ge],pe[it])){Ee[ne[De]=Ge]=De;break}Ee[ne[De]=it]=De,De=Ke}}function ct(oe,ce){for(var ne=oe.d,pe=oe.e,Ee=oe.c,De=ce,Ge=ne[De];;){var Ke=De>>1,it=ne[Ke];if(Ke==0||s(pe[it],pe[Ge])){Ee[ne[De]=Ge]=De;break}Ee[ne[De]=it]=De,De=Ke}}function Ae(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Xe(oe){return oe.e.c.b}function Le(oe){return oe.e.a.b}(u=me.prototype).x=function(){_e(this,0)},u.B=function(oe,ce){switch(oe){case 100142:return;case 100140:switch(ce){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ce)}break;case 100141:return void(this.m=!!ce);default:return void ae(this,100900)}ae(this,100901)},u.y=function(oe){switch(oe){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:ae(this,100900)}return!1},u.A=function(oe,ce,ne){this.j[0]=oe,this.j[1]=ce,this.j[2]=ne},u.z=function(oe,ce){var ne=ce||null;switch(oe){case 100100:case 100106:this.h=ne;break;case 100104:case 100110:this.l=ne;break;case 100101:case 100107:this.k=ne;break;case 100102:case 100108:this.i=ne;break;case 100103:case 100109:this.p=ne;break;case 100105:case 100111:this.o=ne;break;case 100112:this.r=ne;break;default:ae(this,100900)}},u.C=function(oe,ce){var ne=!1,pe=[0,0,0];_e(this,2);for(var Ee=0;Ee<3;++Ee){var De=oe[Ee];De<-1e150&&(De=-1e150,ne=!0),1e150<De&&(De=1e150,ne=!0),pe[Ee]=De}ne&&ae(this,100155),(ne=this.q)===null?h(ne=o(this.b),ne.b):(y(ne),ne=ne.e),ne.a.d=ce,ne.a.g[0]=pe[0],ne.a.g[1]=pe[1],ne.a.g[2]=pe[2],ne.f=1,ne.b.f=-1,this.q=ne},u.u=function(oe){_e(this,0),this.d=1,this.b=new ke,this.c=oe},u.t=function(){_e(this,1),this.d=2,this.q=null},u.v=function(){_e(this,2),this.d=1},u.w=function(){_e(this,1),this.d=0;var oe,ce,ne=this.j[0],pe=this.j[1],Ee=this.j[2],De=!1,Ge=[ne,pe,Ee];if(ne===0&&pe===0&&Ee===0){for(var pe=[-2e150,-2e150,-2e150],Ke=[2e150,2e150,2e150],Ee=[],it=[],ne=(De=this.b.c).e;ne!==De;ne=ne.e)for(var at=0;at<3;++at){var ht=ne.g[at];ht<Ke[at]&&(Ke[at]=ht,it[at]=ne),ht>pe[at]&&(pe[at]=ht,Ee[at]=ne)}if(pe[1]-Ke[1]>pe[ne=0]-Ke[0]&&(ne=1),Ke[ne=pe[2]-Ke[2]>pe[ne]-Ke[ne]?2:ne]>=pe[ne])Ge[0]=0,Ge[1]=0,Ge[2]=1;else{for(Ke=it[ne],Ee=Ee[ne],it=[pe=0,0,0],Ke=[Ke.g[0]-Ee.g[0],Ke.g[1]-Ee.g[1],Ke.g[2]-Ee.g[2]],at=[0,0,0],ne=De.e;ne!==De;ne=ne.e)at[0]=ne.g[0]-Ee.g[0],at[1]=ne.g[1]-Ee.g[1],at[2]=ne.g[2]-Ee.g[2],it[0]=Ke[1]*at[2]-Ke[2]*at[1],it[1]=Ke[2]*at[0]-Ke[0]*at[2],it[2]=Ke[0]*at[1]-Ke[1]*at[0],pe<(ht=it[0]*it[0]+it[1]*it[1]+it[2]*it[2])&&(pe=ht,Ge[0]=it[0],Ge[1]=it[1],Ge[2]=it[2]);pe<=0&&(Ge[0]=Ge[1]=Ge[2]=0,Ge[M(Ke)]=1)}De=!0}for(it=M(Ge),ne=this.b.c,pe=(it+1)%3,Ee=(it+2)%3,it=0<Ge[it]?1:-1,Ge=ne.e;Ge!==ne;Ge=Ge.e)Ge.b=Ge.g[pe],Ge.a=it*Ge.g[Ee];if(De){for(Ge=0,ne=(De=this.b.a).b;ne!==De;ne=ne.b)if(!((pe=ne.a).f<=0))for(;Ge+=(pe.a.b-pe.b.a.b)*(pe.a.a+pe.b.a.a),(pe=pe.e)!==ne.a;);if(Ge<0)for(De=(Ge=this.b.c).e;De!==Ge;De=De.e)De.a=-De.a}for(this.n=!1,Ge=this.b.b,ne=Ge.h;ne!==Ge;ne=De)De=ne.h,pe=ne.e,c(ne.a,ne.b.a)&&ne.e.e!==ne&&(A(this,pe,ne),p(ne),pe=(ne=pe).e),pe.e===ne&&(pe!==ne&&(pe!==De&&pe!==De.b||(De=De.h),p(pe)),ne!==De&&ne!==De.b||(De=De.h),p(ne));for(this.e=Ge=new we,De=this.b.c,ne=De.e;ne!==De;ne=ne.e)ne.h=Me(Ge,ne);var Pt=Ge;Pt.d=[];for(var Ot=0;Ot<Pt.a;Ot++)Pt.d[Ot]=Ot;Pt.d.sort(function(Ct){return function(sr,Gr){return s(Ct[sr],Ct[Gr])?1:-1}}(Pt.c)),Pt.e=!0;for(var gt=Pt.b,Dt=gt.a;1<=Dt;--Dt)ut(gt,Dt);for(gt.h=!0,this.f=new fe(this),re(this,-4e150),re(this,4e150);(Ge=He(this.e))!==null;){for(;;){e:if((ne=this.e).a===0)De=nt(ne.b);else if(De=ne.c[ne.d[ne.a-1]],ne.b.a!==0&&s(ne=nt(ne.b),De)){De=ne;break e}if(De===null||!c(De,Ge))break;De=He(this.e),A(this,Ge.c,De.c)}(function Ct(sr,Gr){for(var Cr,Xt=(sr.a=Gr).c;Xt.i===null;)if((Xt=Xt.c)===Gr.c){var Xt=sr,ir=Gr;($t=new Ae).a=ir.c.b;for(var Pr=(qt=Xt.f).a;(Pr=Pr.a).b!==null&&!qt.c(qt.b,$t,Pr.b););var qt,Qr,xr=Xe(qt=Pr.b),$t=qt.a,Pr=xr.a;return void(m($t.b.a,ir,$t.a)===0?c(($t=qt.a).a,ir)||c($t.b.a,ir)||(y($t.b),qt.c&&(p($t.c),qt.c=!1),h(ir.c,$t),Ct(Xt,ir)):(Qr=s(Pr.b.a,$t.b.a)?qt:xr,xr=void 0,qt.d||Qr.c?(xr=Qr===qt?w(ir.c.b,$t.e):w(Pr.b.c.b,ir.c).b,Qr.c?V(Qr,xr):((qt=Y($t=Xt,qt,xr)).f=Le(qt).f+qt.a.f,qt.d=H($t,qt.f)),Ct(Xt,ir)):Q(Xt,qt,ir.c,ir.c,null,!0)))}qt=($t=Xe(Xt=G(Xt.i))).a,($t=K(sr,$t,null)).c===qt?($t=(qt=$t).c,Pr=Xe(Xt),xr=Xt.a,Qr=Pr.a,Cr=!1,xr.b.a!==Qr.b.a&&$(sr,Xt),c(xr.a,sr.a)&&(h($t.b.e,xr),$t=Xe(Xt=G(Xt)).a,K(sr,Xe(Xt),Pr),Cr=!0),c(Qr.a,sr.a)&&(h(qt,Qr.b.e),qt=K(sr,Pr,null),Cr=!0),Cr?Q(sr,Xt,qt.c,$t,$t,!0):(ir=s(Qr.a,xr.a)?Qr.b.e:xr,Q(sr,Xt,ir=w(qt.c.b,ir),ir.c,ir.c,!1),ir.b.i.c=!0,ie(sr,Xt))):Q(sr,Xt,$t.c,qt,qt,!0)})(this,Ge)}for(this.a=this.f.a.a.b.a.a,Ge=0;(De=this.f.a.a.b)!==null;)De.h||++Ge,B(De);for(this.f=null,(Ge=this.e).b=null,Ge.d=null,this.e=Ge.c=null,Ge=this.b,ne=Ge.a.b;ne!==Ge.a;ne=De)De=ne.b,(ne=ne.a).e.e===ne&&(L(ne.c,ne),p(ne));if(!this.n){if(Ge=this.b,this.m)for(ne=Ge.b.h;ne!==Ge.b;ne=De)De=ne.h,ne.b.d.c!==ne.d.c?ne.f=ne.d.c?1:-1:p(ne);else for(ne=Ge.a.b;ne!==Ge.a;ne=De)if(De=ne.b,ne.c){for(ne=ne.a;s(ne.b.a,ne.a);ne=ne.c.b);for(;s(ne.a,ne.b.a);ne=ne.e);for(pe=ne.c.b,Ee=void 0;ne.e!==pe;)if(s(ne.b.a,pe.a)){for(;pe.e!==ne&&(s((ce=pe.e).b.a,ce.a)||m(pe.a,pe.b.a,pe.e.b.a)<=0);)pe=(Ee=w(pe.e,pe)).b;pe=pe.c.b}else{for(;pe.e!==ne&&(s((oe=ne.c.b).a,oe.b.a)||0<=m(ne.b.a,ne.a,ne.c.b.a));)ne=(Ee=w(ne,ne.c.b)).b;ne=ne.e}for(;pe.e.e!==ne;)Ee=w(pe.e,pe),pe=Ee.b}if(this.h||this.i||this.k||this.l)if(this.m){for(De=(Ge=this.b).a.b;De!==Ge.a;De=De.b)if(De.c){for(this.h&&this.h(2,this.c),ne=De.a;this.k&&this.k(ne.a.d,this.c),(ne=ne.e)!==De.a;);this.i&&this.i(this.c)}}else{for(Ge=this.b,De=!!this.l,ne=!1,pe=-1,Ee=Ge.a.d;Ee!==Ge.a;Ee=Ee.d)if(Ee.c)for(ne||(this.h&&this.h(4,this.c),ne=!0),it=Ee.a;De&&(Ke=it.b.d.c?0:1,pe!==Ke&&(pe=Ke,this.l&&this.l(!!pe,this.c))),this.k&&this.k(it.a.d,this.c),(it=it.e)!==Ee.a;);ne&&this.i&&this.i(this.c)}if(this.r){for(Ge=this.b,ne=Ge.a.b;ne!==Ge.a;ne=De)if(De=ne.b,!ne.c){for(Ee=(pe=ne.a).e,it=void 0;Ee=(it=Ee).e,(it.d=null)===it.b.d&&(it.c===it?R(it.a,null):(it.a.c=it.c,S(it,it.b.e)),(Ke=it.b).c===Ke?R(Ke.a,null):(Ke.a.c=Ke.c,S(Ke,Ke.b.e)),T(it)),it!==pe;);pe=ne.d,((ne=ne.b).d=pe).b=ne}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:me,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},me.prototype.gluDeleteTess=me.prototype.x,me.prototype.gluTessProperty=me.prototype.B,me.prototype.gluGetTessProperty=me.prototype.y,me.prototype.gluTessNormal=me.prototype.A,me.prototype.gluTessCallback=me.prototype.z,me.prototype.gluTessVertex=me.prototype.C,me.prototype.gluTessBeginPolygon=me.prototype.u,me.prototype.gluTessBeginContour=me.prototype.t,me.prototype.gluTessEndContour=me.prototype.v,me.prototype.gluTessEndPolygon=me.prototype.w,x!==void 0&&(x.exports=this.libtess)},{}],256:[function(t,x,f){function u(s,d,m,v){var i=0,n=(v=v===void 0?{}:v).loop===void 0?null:v.loop,a=v.palette===void 0?null:v.palette;if(d<=0||m<=0||65535<d||65535<m)throw new Error("Width/Height invalid.");function o(E){if(E=E.length,E<2||256<E||E&E-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return E}s[i++]=71,s[i++]=73,s[i++]=70,s[i++]=56,s[i++]=57,s[i++]=97;var h=0,p=0;if(a!==null){for(var y=o(a);y>>=1;)++h;if(y=1<<h,--h,v.background!==void 0){if(y<=(p=v.background))throw new Error("Background index out of range.");if(p===0)throw new Error("Background index explicitly passed as 0.")}}if(s[i++]=255&d,s[i++]=d>>8&255,s[i++]=255&m,s[i++]=m>>8&255,s[i++]=(a!==null?128:0)|h,s[i++]=p,s[i++]=0,a!==null)for(var w=0,b=a.length;w<b;++w){var S=a[w];s[i++]=S>>16&255,s[i++]=S>>8&255,s[i++]=255&S}if(n!==null){if(n<0||65535<n)throw new Error("Loop count invalid.");s[i++]=33,s[i++]=255,s[i++]=11,s[i++]=78,s[i++]=69,s[i++]=84,s[i++]=83,s[i++]=67,s[i++]=65,s[i++]=80,s[i++]=69,s[i++]=50,s[i++]=46,s[i++]=48,s[i++]=3,s[i++]=1,s[i++]=255&n,s[i++]=n>>8&255,s[i++]=0}var k=!1;this.addFrame=function(E,T,R,O,M,L){if(k===!0&&(--i,k=!1),L=L===void 0?{}:L,E<0||T<0||65535<E||65535<T)throw new Error("x/y invalid.");if(R<=0||O<=0||65535<R||65535<O)throw new Error("Width/Height invalid.");if(M.length<R*O)throw new Error("Not enough pixels for the frame size.");var I=!0,B=L.palette;if(B==null&&(I=!1,B=a),B==null)throw new Error("Must supply either a local or global palette.");for(var G=o(B),V=0;G>>=1;)++V;var G=1<<V,Y=L.delay===void 0?0:L.delay,H=L.disposal===void 0?0:L.disposal;if(H<0||3<H)throw new Error("Disposal out of range.");var W=!1,K=0;if(L.transparent!==void 0&&L.transparent!==null&&(W=!0,(K=L.transparent)<0||G<=K))throw new Error("Transparent color index.");if(H===0&&!W&&Y===0||(s[i++]=33,s[i++]=249,s[i++]=4,s[i++]=H<<2|(W===!0?1:0),s[i++]=255&Y,s[i++]=Y>>8&255,s[i++]=K,s[i++]=0),s[i++]=44,s[i++]=255&E,s[i++]=E>>8&255,s[i++]=255&T,s[i++]=T>>8&255,s[i++]=255&R,s[i++]=R>>8&255,s[i++]=255&O,s[i++]=O>>8&255,s[i++]=I===!0?128|V-1:0,I===!0)for(var Q=0,se=B.length;Q<se;++Q){var A=B[Q];s[i++]=A>>16&255,s[i++]=A>>8&255,s[i++]=255&A}return i=function(z,q,$,ie){z[q++]=$;var re=q++,fe=1<<$,ge=fe-1,de=1+fe,me=1+de,_e=$+1,ae=0,he=0;function be(ot){for(;ot<=ae;)z[q++]=255&he,he>>=8,ae-=8,q===re+256&&(z[re]=255,re=q++)}function ke(ot){he|=ot<<ae,ae+=_e,be(8)}var xe=ie[0]&ge,we={};ke(fe);for(var Me=1,He=ie.length;Me<He;++Me){var Ie=ie[Me]&ge,dt=xe<<8|Ie,nt=we[dt];if(nt===void 0){for(he|=xe<<ae,ae+=_e;8<=ae;)z[q++]=255&he,he>>=8,ae-=8,q===re+256&&(z[re]=255,re=q++);me===4096?(ke(fe),me=1+de,_e=$+1,we={}):(1<<_e<=me&&++_e,we[dt]=me++),xe=Ie}else xe=nt}return ke(xe),ke(de),be(1),re+1===q?z[re]=0:(z[re]=q-re-1,z[q++]=0),q}(s,i,V<2?2:V,M)},this.end=function(){return k===!1&&(s[i++]=59,k=!0),i},this.getOutputBuffer=function(){return s},this.setOutputBuffer=function(E){s=E},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(E){i=E}}function c(s,d,m,v){for(var i=s[d++],n=1<<i,a=1+n,o=1+a,h=i+1,p=(1<<h)-1,y=0,w=0,b=0,S=s[d++],k=new Int32Array(4096),E=null;;){for(;y<16&&S!==0;)w|=s[d++]<<y,y+=8,S===1?S=s[d++]:--S;if(y<h)break;var T=w&p;if(w>>=h,y-=h,T==n)o=1+a,p=(1<<(h=i+1))-1,E=null;else{if(T==a)break;for(var R=T<o?T:E,O=0,M=R;n<M;)M=k[M]>>8,++O;var L=M;if(v<b+O+(R!==T?1:0))return void console.log("Warning, gif stream longer than expected.");m[b++]=L;var I=b+=O;for(R!==T&&(m[b++]=L),M=R;O--;)M=k[M],m[--I]=255&M,M>>=8;E!==null&&o<4096&&(k[o++]=E<<8|L,p+1<=o&&h<12&&(++h,p=p<<1|1)),E=T}}b!==v&&console.log("Warning, gif stream shorter than expected.")}try{f.GifWriter=u,f.GifReader=function(s){var d=0;if(s[d++]!==71||s[d++]!==73||s[d++]!==70||s[d++]!==56||(s[d++]+1&253)!=56||s[d++]!==97)throw new Error("Invalid GIF 87a/89a header.");var m=s[d++]|s[d++]<<8,v=s[d++]|s[d++]<<8,i=s[d++],n=1<<1+(7&i),a=(s[d++],s[d++],null),o=null,h=(i>>7&&(a=d,d+=3*(o=n)),!0),p=[],y=0,w=null,b=0,S=null;for(this.width=m,this.height=v;h&&d<s.length;)switch(s[d++]){case 33:switch(s[d++]){case 255:if(s[d]!==11||s[d+1]==78&&s[d+2]==69&&s[d+3]==84&&s[d+4]==83&&s[d+5]==67&&s[d+6]==65&&s[d+7]==80&&s[d+8]==69&&s[d+9]==50&&s[d+10]==46&&s[d+11]==48&&s[d+12]==3&&s[d+13]==1&&s[d+16]==0)d+=14,S=s[d++]|s[d++]<<8,d++;else for(d+=12;;){if(!(0<=(E=s[d++])))throw Error("Invalid block size");if(E===0)break;d+=E}break;case 249:if(s[d++]!==4||s[d+4]!==0)throw new Error("Invalid graphics extension block.");var k=s[d++],y=s[d++]|s[d++]<<8,w=s[d++];!(1&k)&&(w=null),b=k>>2&7,d++;break;case 254:for(;;){if(!(0<=(E=s[d++])))throw Error("Invalid block size");if(E===0)break;d+=E}break;default:throw new Error("Unknown graphic control label: 0x"+s[d-1].toString(16))}break;case 44:var E,T=s[d++]|s[d++]<<8,R=s[d++]|s[d++]<<8,O=s[d++]|s[d++]<<8,M=s[d++]|s[d++]<<8,Y=s[d++],L=Y>>6&1,I=1<<1+(7&Y),B=a,V=o,G=!1,Y=(Y>>7&&(G=!0,B=d,d+=3*(V=I)),d);for(d++;;){if(!(0<=(E=s[d++])))throw Error("Invalid block size");if(E===0)break;d+=E}p.push({x:T,y:R,width:O,height:M,has_local_palette:G,palette_offset:B,palette_size:V,data_offset:Y,data_length:d-Y,transparent_index:w,interlaced:!!L,delay:y,disposal:b});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+s[d-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return S},this.frameInfo=function(H){if(H<0||H>=p.length)throw new Error("Frame index out of range.");return p[H]},this.decodeAndBlitFrameBGRA=function(H,W){for(var H=this.frameInfo(H),K=H.width*H.height,Q=new Uint8Array(K),se=(c(s,H.data_offset,Q,K),H.palette_offset),A=H.transparent_index,z=(A===null&&(A=256),H.width),q=m-z,$=z,ie=4*(H.y*m+H.x),re=4*((H.y+H.height)*m+H.x),fe=ie,ge=4*q,de=(H.interlaced===!0&&(ge+=4*m*7),8),me=0,_e=Q.length;me<_e;++me){var ae,he,be=Q[me];$===0&&($=z,re<=(fe+=ge)&&(ge=4*q+4*m*(de-1),fe=ie+(z+q)*(de<<1),de>>=1)),be===A?fe+=4:(ae=s[se+3*be],he=s[se+3*be+1],be=s[se+3*be+2],W[fe++]=be,W[fe++]=he,W[fe++]=ae,W[fe++]=255),--$}},this.decodeAndBlitFrameRGBA=function(H,W){for(var H=this.frameInfo(H),K=H.width*H.height,Q=new Uint8Array(K),se=(c(s,H.data_offset,Q,K),H.palette_offset),A=H.transparent_index,z=(A===null&&(A=256),H.width),q=m-z,$=z,ie=4*(H.y*m+H.x),re=4*((H.y+H.height)*m+H.x),fe=ie,ge=4*q,de=(H.interlaced===!0&&(ge+=4*m*7),8),me=0,_e=Q.length;me<_e;++me){var ae,he,be=Q[me];$===0&&($=z,re<=(fe+=ge)&&(ge=4*q+4*m*(de-1),fe=ie+(z+q)*(de<<1),de>>=1)),be===A?fe+=4:(ae=s[se+3*be],he=s[se+3*be+1],be=s[se+3*be+2],W[fe++]=ae,W[fe++]=he,W[fe++]=be,W[fe++]=255),--$}}}}catch{}},{}],257:[function(t,x,f){(function(u){var c,s;c=this,s=function(d){function m(X){if(this==null)throw TypeError();var P,N=String(this),U=N.length,X=X?Number(X):0;if(!((X=X!=X?0:X)<0||U<=X))return 55296<=(P=N.charCodeAt(X))&&P<=56319&&X+1<U&&56320<=(U=N.charCodeAt(X+1))&&U<=57343?1024*(P-55296)+U-56320+65536:P}String.prototype.codePointAt||((v=function(){try{var j={},P=Object.defineProperty,N=P(j,j,j)&&P}catch{}return N}())?v(String.prototype,"codePointAt",{value:m,configurable:!0,writable:!0}):String.prototype.codePointAt=m);var v,i=0,n=-3;function a(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function o(j,P){this.source=j,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=P,this.destLen=0,this.ltree=new a,this.dtree=new a}var h=new a,p=new a,y=new Uint8Array(30),w=new Uint16Array(30),b=new Uint8Array(30),S=new Uint16Array(30),k=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E=new a,T=new Uint8Array(320);function R(j,P,N,U){for(var X,ee=0;ee<N;++ee)j[ee]=0;for(ee=0;ee<30-N;++ee)j[ee+N]=ee/N|0;for(X=U,ee=0;ee<30;++ee)P[ee]=X,X+=1<<j[ee]}var O=new Uint16Array(16);function M(j,P,N,U){for(var X,ee=0;ee<16;++ee)j.table[ee]=0;for(ee=0;ee<U;++ee)j.table[P[N+ee]]++;for(ee=X=j.table[0]=0;ee<16;++ee)O[ee]=X,X+=j.table[ee];for(ee=0;ee<U;++ee)P[N+ee]&&(j.trans[O[P[N+ee]]++]=ee)}function L(j,P,N){if(!P)return N;for(;j.bitcount<24;)j.tag|=j.source[j.sourceIndex++]<<j.bitcount,j.bitcount+=8;var U=j.tag&65535>>>16-P;return j.tag>>>=P,j.bitcount-=P,U+N}function I(j,P){for(;j.bitcount<24;)j.tag|=j.source[j.sourceIndex++]<<j.bitcount,j.bitcount+=8;for(var N=0,U=0,X=0,ee=j.tag;U=2*U+(1&ee),ee>>>=1,N+=P.table[++X],0<=(U-=P.table[X]););return j.tag=ee,j.bitcount-=X,P.trans[N+U]}function B(j,P,N){for(;;){var U=I(j,P);if(U===256)return i;if(U<256)j.dest[j.destLen++]=U;else for(var X,ee=L(j,y[U-=257],w[U]),U=I(j,N),te=X=j.destLen-L(j,b[U],S[U]);te<X+ee;++te)j.dest[j.destLen++]=j.dest[te]}}for(var V=h,G=p,Y=0;Y<7;++Y)V.table[Y]=0;for(V.table[7]=24,V.table[8]=152,V.table[9]=112,Y=0;Y<24;++Y)V.trans[Y]=256+Y;for(Y=0;Y<144;++Y)V.trans[24+Y]=Y;for(Y=0;Y<8;++Y)V.trans[168+Y]=280+Y;for(Y=0;Y<112;++Y)V.trans[176+Y]=144+Y;for(Y=0;Y<5;++Y)G.table[Y]=0;for(G.table[5]=32,Y=0;Y<32;++Y)G.trans[Y]=Y;R(y,w,4,3),R(b,S,2,1),y[28]=0,w[28]=258;var H=function(j,P){var N,U,X,ee=new o(j,P);do{switch(X=void 0,(U=ee).bitcount--||(U.tag=U.source[U.sourceIndex++],U.bitcount=7),X=1&U.tag,U.tag>>>=1,U=X,L(ee,2,0)){case 0:N=function(Ue){for(var wt,Nt;8<Ue.bitcount;)Ue.sourceIndex--,Ue.bitcount-=8;if((wt=256*Ue.source[Ue.sourceIndex+1]+Ue.source[Ue.sourceIndex])!==(65535&~(256*Ue.source[Ue.sourceIndex+3]+Ue.source[Ue.sourceIndex+2])))return n;for(Ue.sourceIndex+=4,Nt=wt;Nt;--Nt)Ue.dest[Ue.destLen++]=Ue.source[Ue.sourceIndex++];return Ue.bitcount=0,i}(ee);break;case 1:N=B(ee,h,p);break;case 2:We=Be=Ye=Fe=te=Se=Pe=Ne=Ce=ve=ye=le=void 0;for(var te,le=ee,ye=ee.ltree,ve=ee.dtree,Ce=L(le,5,257),Ne=L(le,5,1),Pe=L(le,4,4),Se=0;Se<19;++Se)T[Se]=0;for(Se=0;Se<Pe;++Se){var Ye=L(le,3,0);T[k[Se]]=Ye}for(M(E,T,0,19),te=0;te<Ce+Ne;){var Be=I(le,E);switch(Be){case 16:for(var We=T[te-1],Fe=L(le,2,3);Fe;--Fe)T[te++]=We;break;case 17:for(Fe=L(le,3,3);Fe;--Fe)T[te++]=0;break;case 18:for(Fe=L(le,7,11);Fe;--Fe)T[te++]=0;break;default:T[te++]=Be}}M(ye,T,0,Ce),M(ve,T,Ce,Ne),N=B(ee,ee.ltree,ee.dtree);break;default:N=n}if(N!==i)throw new Error("Data error")}while(!U);return ee.destLen<ee.dest.length?typeof ee.dest.slice=="function"?ee.dest.slice(0,ee.destLen):ee.dest.subarray(0,ee.destLen):ee.dest};function W(j,P,N,U,X){return Math.pow(1-X,3)*j+3*Math.pow(1-X,2)*X*P+3*(1-X)*Math.pow(X,2)*N+Math.pow(X,3)*U}function K(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Q(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function se(j){throw new Error(j)}function A(j,P){j||se(P)}K.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},K.prototype.addPoint=function(j,P){typeof j=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=j,this.x2=j),j<this.x1&&(this.x1=j),j>this.x2&&(this.x2=j)),typeof P=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=P,this.y2=P),P<this.y1&&(this.y1=P),P>this.y2&&(this.y2=P))},K.prototype.addX=function(j){this.addPoint(j,null)},K.prototype.addY=function(j){this.addPoint(null,j)},K.prototype.addBezier=function(j,P,N,U,X,ee,te,le){var ye=[j,P],ve=[N,U],Ce=[X,ee],Ne=[te,le];this.addPoint(j,P),this.addPoint(te,le);for(var Pe=0;Pe<=1;Pe++){var Se,Ye=6*ye[Pe]-12*ve[Pe]+6*Ce[Pe],Be=-3*ye[Pe]+9*ve[Pe]-9*Ce[Pe]+3*Ne[Pe],We=3*ve[Pe]-3*ye[Pe];Be==0?Ye==0||0<(Se=-We/Ye)&&Se<1&&(Pe===0&&this.addX(W(ye[Pe],ve[Pe],Ce[Pe],Ne[Pe],Se)),Pe===1&&this.addY(W(ye[Pe],ve[Pe],Ce[Pe],Ne[Pe],Se))):(Se=Math.pow(Ye,2)-4*We*Be)<0||(0<(We=(-Ye+Math.sqrt(Se))/(2*Be))&&We<1&&(Pe===0&&this.addX(W(ye[Pe],ve[Pe],Ce[Pe],Ne[Pe],We)),Pe===1&&this.addY(W(ye[Pe],ve[Pe],Ce[Pe],Ne[Pe],We))),0<(We=(-Ye-Math.sqrt(Se))/(2*Be))&&We<1&&(Pe===0&&this.addX(W(ye[Pe],ve[Pe],Ce[Pe],Ne[Pe],We)),Pe===1&&this.addY(W(ye[Pe],ve[Pe],Ce[Pe],Ne[Pe],We))))}},K.prototype.addQuad=function(j,P,N,U,X,ee){N=j+2/3*(N-j),U=P+2/3*(U-P),this.addBezier(j,P,N,U,N+1/3*(X-j),U+1/3*(ee-P),X,ee)},Q.prototype.moveTo=function(j,P){this.commands.push({type:"M",x:j,y:P})},Q.prototype.lineTo=function(j,P){this.commands.push({type:"L",x:j,y:P})},Q.prototype.curveTo=Q.prototype.bezierCurveTo=function(j,P,N,U,X,ee){this.commands.push({type:"C",x1:j,y1:P,x2:N,y2:U,x:X,y:ee})},Q.prototype.quadTo=Q.prototype.quadraticCurveTo=function(j,P,N,U){this.commands.push({type:"Q",x1:j,y1:P,x:N,y:U})},Q.prototype.close=Q.prototype.closePath=function(){this.commands.push({type:"Z"})},Q.prototype.extend=function(j){var P;if(j.commands)j=j.commands;else if(j instanceof K)return P=j,this.moveTo(P.x1,P.y1),this.lineTo(P.x2,P.y1),this.lineTo(P.x2,P.y2),this.lineTo(P.x1,P.y2),void this.close();Array.prototype.push.apply(this.commands,j)},Q.prototype.getBoundingBox=function(){for(var j=new K,P=0,N=0,U=0,X=0,ee=0;ee<this.commands.length;ee++){var te=this.commands[ee];switch(te.type){case"M":j.addPoint(te.x,te.y),P=U=te.x,N=X=te.y;break;case"L":j.addPoint(te.x,te.y),U=te.x,X=te.y;break;case"Q":j.addQuad(U,X,te.x1,te.y1,te.x,te.y),U=te.x,X=te.y;break;case"C":j.addBezier(U,X,te.x1,te.y1,te.x2,te.y2,te.x,te.y),U=te.x,X=te.y;break;case"Z":U=P,X=N;break;default:throw new Error("Unexpected path command "+te.type)}}return j.isEmpty()&&j.addPoint(0,0),j},Q.prototype.draw=function(j){j.beginPath();for(var P=0;P<this.commands.length;P+=1){var N=this.commands[P];N.type==="M"?j.moveTo(N.x,N.y):N.type==="L"?j.lineTo(N.x,N.y):N.type==="C"?j.bezierCurveTo(N.x1,N.y1,N.x2,N.y2,N.x,N.y):N.type==="Q"?j.quadraticCurveTo(N.x1,N.y1,N.x,N.y):N.type==="Z"&&j.closePath()}this.fill&&(j.fillStyle=this.fill,j.fill()),this.stroke&&(j.strokeStyle=this.stroke,j.lineWidth=this.strokeWidth,j.stroke())},Q.prototype.toPathData=function(j){function P(){for(var ee=arguments,te="",le=0;le<arguments.length;le+=1){var ye=ee[le];0<=ye&&0<le&&(te+=" "),te+=(ye=ye,Math.round(ye)===ye?""+Math.round(ye):ye.toFixed(j))}return te}j=j!==void 0?j:2;for(var N="",U=0;U<this.commands.length;U+=1){var X=this.commands[U];X.type==="M"?N+="M"+P(X.x,X.y):X.type==="L"?N+="L"+P(X.x,X.y):X.type==="C"?N+="C"+P(X.x1,X.y1,X.x2,X.y2,X.x,X.y):X.type==="Q"?N+="Q"+P(X.x1,X.y1,X.x,X.y):X.type==="Z"&&(N+="Z")}return N},Q.prototype.toSVG=function(j){var P=(P='<path d="')+this.toPathData(j)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?P+=' fill="none"':P+=' fill="'+this.fill+'"'),this.stroke&&(P+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),P+="/>"},Q.prototype.toDOMElement=function(P){var P=this.toPathData(P),N=document.createElementNS("http://www.w3.org/2000/svg","path");return N.setAttribute("d",P),N};var z={fail:se,argument:A,assert:A},q={},$={},ie={};function re(j){return function(){return j}}$.BYTE=function(j){return z.argument(0<=j&&j<=255,"Byte value should be between 0 and 255."),[j]},ie.BYTE=re(1),$.CHAR=function(j){return[j.charCodeAt(0)]},ie.CHAR=re(1),$.CHARARRAY=function(j){for(var P=[],N=0;N<j.length;N+=1)P[N]=j.charCodeAt(N);return P},ie.CHARARRAY=function(j){return j.length},$.USHORT=function(j){return[j>>8&255,255&j]},ie.USHORT=re(2),$.SHORT=function(j){return[(j=32768<=j?-(65536-j):j)>>8&255,255&j]},ie.SHORT=re(2),$.UINT24=function(j){return[j>>16&255,j>>8&255,255&j]},ie.UINT24=re(3),$.ULONG=function(j){return[j>>24&255,j>>16&255,j>>8&255,255&j]},ie.ULONG=re(4),$.LONG=function(j){return[(j=2147483648<=j?-(4294967296-j):j)>>24&255,j>>16&255,j>>8&255,255&j]},ie.LONG=re(4),$.FIXED=$.ULONG,ie.FIXED=ie.ULONG,$.FWORD=$.SHORT,ie.FWORD=ie.SHORT,$.UFWORD=$.USHORT,ie.UFWORD=ie.USHORT,$.LONGDATETIME=function(j){return[0,0,0,0,j>>24&255,j>>16&255,j>>8&255,255&j]},ie.LONGDATETIME=re(8),$.TAG=function(j){return z.argument(j.length===4,"Tag should be exactly 4 ASCII characters."),[j.charCodeAt(0),j.charCodeAt(1),j.charCodeAt(2),j.charCodeAt(3)]},ie.TAG=re(4),$.Card8=$.BYTE,ie.Card8=ie.BYTE,$.Card16=$.USHORT,ie.Card16=ie.USHORT,$.OffSize=$.BYTE,ie.OffSize=ie.BYTE,$.SID=$.USHORT,ie.SID=ie.USHORT,$.NUMBER=function(j){return-107<=j&&j<=107?[j+139]:108<=j&&j<=1131?[247+((j-=108)>>8),255&j]:-1131<=j&&j<=-108?[251+((j=-j-108)>>8),255&j]:-32768<=j&&j<=32767?$.NUMBER16(j):$.NUMBER32(j)},ie.NUMBER=function(j){return $.NUMBER(j).length},$.NUMBER16=function(j){return[28,j>>8&255,255&j]},ie.NUMBER16=re(3),$.NUMBER32=function(j){return[29,j>>24&255,j>>16&255,j>>8&255,255&j]},ie.NUMBER32=re(5),$.REAL=function(j){for(var P=j.toString(),N=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(P),U=(N&&(N=parseFloat("1e"+((N[2]?+N[2]:0)+N[1].length)),P=(Math.round(j*N)/N).toString()),""),X=0,ee=P.length;X<ee;X+=1){var te=P[X];U+=te==="e"?P[++X]==="-"?"c":"b":te==="."?"a":te==="-"?"e":te}for(var le=[30],ye=0,ve=(U+=1&U.length?"f":"ff").length;ye<ve;ye+=2)le.push(parseInt(U.substr(ye,2),16));return le},ie.REAL=function(j){return $.REAL(j).length},$.NAME=$.CHARARRAY,ie.NAME=ie.CHARARRAY,$.STRING=$.CHARARRAY,ie.STRING=ie.CHARARRAY,q.UTF8=function(j,P,N){for(var U=[],X=N,ee=0;ee<X;ee++,P+=1)U[ee]=j.getUint8(P);return String.fromCharCode.apply(null,U)},q.UTF16=function(j,P,N){for(var U=[],X=N/2,ee=0;ee<X;ee++,P+=2)U[ee]=j.getUint16(P);return String.fromCharCode.apply(null,U)},$.UTF16=function(j){for(var P=[],N=0;N<j.length;N+=1){var U=j.charCodeAt(N);P[P.length]=U>>8&255,P[P.length]=255&U}return P},ie.UTF16=function(j){return 2*j.length};var fe,ge={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},de=(q.MACSTRING=function(j,P,N,U){var X=ge[U];if(X!==void 0){for(var ee="",te=0;te<N;te++){var le=j.getUint8(P+te);ee+=le<=127?String.fromCharCode(le):X[127&le]}return ee}},typeof WeakMap=="function"&&new WeakMap);function me(j){return-128<=j&&j<=127}$.MACSTRING=function(j,P){var N=function(te){if(!fe)for(var le in fe={},ge)fe[le]=new String(le);var ye=fe[te];if(ye!==void 0){if(de){var ve=de.get(ye);if(ve!==void 0)return ve}var Ce=ge[te];if(Ce!==void 0){for(var Ne={},Pe=0;Pe<Ce.length;Pe++)Ne[Ce.charCodeAt(Pe)]=Pe+128;return de&&de.set(ye,Ne),Ne}}}(P);if(N!==void 0){for(var U=[],X=0;X<j.length;X++){var ee=j.charCodeAt(X);if(128<=ee&&(ee=N[ee])===void 0)return;U[X]=ee}return U}},ie.MACSTRING=function(j,P){return j=$.MACSTRING(j,P),j!==void 0?j.length:0},$.VARDELTAS=function(j){for(var U=0,P=[];U<j.length;)var N=j[U],U=(N===0?function(X,ee,te){for(var le=0,ye=X.length;ee<ye&&le<64&&X[ee]===0;)++ee,++le;return te.push(128|le-1),ee}:-128<=N&&N<=127?function(X,ee,te){for(var le=0,ye=X.length,ve=ee;ve<ye&&le<64;){var Ce=X[ve];if(!me(Ce)||Ce===0&&ve+1<ye&&X[ve+1]===0)break;++ve,++le}te.push(le-1);for(var Ne=ee;Ne<ve;++Ne)te.push(X[Ne]+256&255);return ve}:function(X,ee,te){for(var le=0,ye=X.length,ve=ee;ve<ye&&le<64;){var Ce=X[ve];if(Ce===0||me(Ce)&&ve+1<ye&&me(X[ve+1]))break;++ve,++le}te.push(64|le-1);for(var Ne=ee;Ne<ve;++Ne){var Pe=X[Ne];te.push(Pe+65536>>8&255,Pe+256&255)}return ve})(j,U,P);return P},$.INDEX=function(j){for(var P=1,N=[P],U=[],X=0;X<j.length;X+=1){var ee=$.OBJECT(j[X]);Array.prototype.push.apply(U,ee),P+=ee.length,N.push(P)}if(U.length===0)return[0,0];for(var te=[],le=1+Math.floor(Math.log(P)/Math.log(2))/8|0,ye=[void 0,$.BYTE,$.USHORT,$.UINT24,$.ULONG][le],ve=0;ve<N.length;ve+=1){var Ce=ye(N[ve]);Array.prototype.push.apply(te,Ce)}return Array.prototype.concat($.Card16(j.length),$.OffSize(le),te,U)},ie.INDEX=function(j){return $.INDEX(j).length},$.DICT=function(j){for(var P=[],N=Object.keys(j),U=N.length,X=0;X<U;X+=1){var ee=parseInt(N[X],0),te=j[ee];P=(P=P.concat($.OPERAND(te.value,te.type))).concat($.OPERATOR(ee))}return P},ie.DICT=function(j){return $.DICT(j).length},$.OPERATOR=function(j){return j<1200?[j]:[12,j-1200]},$.OPERAND=function(j,P){var N=[];if(Array.isArray(P))for(var U=0;U<P.length;U+=1)z.argument(j.length===P.length,"Not enough arguments given for type"+P),N=N.concat($.OPERAND(j[U],P[U]));else if(P==="SID")N=N.concat($.NUMBER(j));else if(P==="offset")N=N.concat($.NUMBER32(j));else if(P==="number")N=N.concat($.NUMBER(j));else{if(P!=="real")throw new Error("Unknown operand type "+P);N=N.concat($.REAL(j))}return N},$.OP=$.BYTE,ie.OP=ie.BYTE;var _e=typeof WeakMap=="function"&&new WeakMap;function ae(j,P,N){for(var U=0;U<P.length;U+=1){var X=P[U];this[X.name]=X.value}if(this.tableName=j,this.fields=P,N)for(var ee=Object.keys(N),te=0;te<ee.length;te+=1){var le=ee[te],ye=N[le];this[le]!==void 0&&(this[le]=ye)}}function he(j,P,N){N===void 0&&(N=P.length);var U=new Array(P.length+1);U[0]={name:j+"Count",type:"USHORT",value:N};for(var X=0;X<P.length;X++)U[X+1]={name:j+X,type:"USHORT",value:P[X]};return U}function be(j,P,N){var U=P.length,X=new Array(U+1);X[0]={name:j+"Count",type:"USHORT",value:U};for(var ee=0;ee<U;ee++)X[ee+1]={name:j+ee,type:"TABLE",value:N(P[ee],ee)};return X}function ke(j,P,N){var U=P.length,X=[];X[0]={name:j+"Count",type:"USHORT",value:U};for(var ee=0;ee<U;ee++)X=X.concat(N(P[ee],ee));return X}function xe(j){j.format===1?ae.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(he("glyph",j.glyphs))):z.assert(!1,"Can't create coverage table format 2 yet.")}function we(j){ae.call(this,"scriptListTable",ke("scriptRecord",j,function(P,N){var U=P.script,X=U.defaultLangSys;return z.assert(!!X,"Unable to write GSUB: script "+P.tag+" has no default language system."),[{name:"scriptTag"+N,type:"TAG",value:P.tag},{name:"script"+N,type:"TABLE",value:new ae("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new ae("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:X.reqFeatureIndex}].concat(he("featureIndex",X.featureIndexes)))}].concat(ke("langSys",U.langSysRecords,function(ee,te){var le=ee.langSys;return[{name:"langSysTag"+te,type:"TAG",value:ee.tag},{name:"langSys"+te,type:"TABLE",value:new ae("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:le.reqFeatureIndex}].concat(he("featureIndex",le.featureIndexes)))}]})))}]}))}function Me(j){ae.call(this,"featureListTable",ke("featureRecord",j,function(P,N){var U=P.feature;return[{name:"featureTag"+N,type:"TAG",value:P.tag},{name:"feature"+N,type:"TABLE",value:new ae("featureTable",[{name:"featureParams",type:"USHORT",value:U.featureParams}].concat(he("lookupListIndex",U.lookupListIndexes)))}]}))}function He(j,P){ae.call(this,"lookupListTable",be("lookup",j,function(N){var U=P[N.lookupType];return z.assert(!!U,"Unable to write GSUB lookup type "+N.lookupType+" tables."),new ae("lookupTable",[{name:"lookupType",type:"USHORT",value:N.lookupType},{name:"lookupFlag",type:"USHORT",value:N.lookupFlag}].concat(be("subtable",N.subtables,U)))}))}$.CHARSTRING=function(j){if(_e){var P=_e.get(j);if(P!==void 0)return P}for(var ee=[],N=j.length,U=0;U<N;U+=1)var X=j[U],ee=ee.concat($[X.type](X.value));return _e&&_e.set(j,ee),ee},ie.CHARSTRING=function(j){return $.CHARSTRING(j).length},$.OBJECT=function(j){var P=$[j.type];return z.argument(P!==void 0,"No encoding function for type "+j.type),P(j.value)},ie.OBJECT=function(j){var P=ie[j.type];return z.argument(P!==void 0,"No sizeOf function for type "+j.type),P(j.value)},$.TABLE=function(j){for(var P=[],N=j.fields.length,U=[],X=[],ee=0;ee<N;ee+=1){var te=j.fields[ee],ye=$[te.type],le=(z.argument(ye!==void 0,"No encoding function for field type "+te.type+" ("+te.name+")"),j[te.name]),ye=ye(le=le===void 0?te.value:le);te.type==="TABLE"?(X.push(P.length),P=P.concat([0,0]),U.push(ye)):P=P.concat(ye)}for(var ve=0;ve<U.length;ve+=1){var Ce=X[ve],Ne=P.length;z.argument(Ne<65536,"Table "+j.tableName+" too big."),P[Ce]=Ne>>8,P[Ce+1]=255&Ne,P=P.concat(U[ve])}return P},ie.TABLE=function(j){for(var P=0,N=j.fields.length,U=0;U<N;U+=1){var X=j.fields[U],ee=ie[X.type],te=(z.argument(ee!==void 0,"No sizeOf function for field type "+X.type+" ("+X.name+")"),j[X.name]);P+=ee(te=te===void 0?X.value:te),X.type==="TABLE"&&(P+=2)}return P},$.RECORD=$.TABLE,ie.RECORD=ie.TABLE,$.LITERAL=function(j){return j},ie.LITERAL=function(j){return j.length},ae.prototype.encode=function(){return $.TABLE(this)},ae.prototype.sizeOf=function(){return ie.TABLE(this)};var Ie={Table:ae,Record:ae,Coverage:(xe.prototype=Object.create(ae.prototype)).constructor=xe,ScriptList:(we.prototype=Object.create(ae.prototype)).constructor=we,FeatureList:(Me.prototype=Object.create(ae.prototype)).constructor=Me,LookupList:(He.prototype=Object.create(ae.prototype)).constructor=He,ushortList:he,tableList:be,recordList:ke};function dt(j,P){return j.getUint8(P)}function nt(j,P){return j.getUint16(P,!1)}function ot(j,P){return j.getUint32(P,!1)}function ut(j,P){return j.getInt16(P,!1)+j.getUint16(P+2,!1)/65535}var ct={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Ae(j,P){this.data=j,this.offset=P,this.relativeOffset=0}Ae.prototype.parseByte=function(){var j=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,j},Ae.prototype.parseChar=function(){var j=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,j},Ae.prototype.parseCard8=Ae.prototype.parseByte,Ae.prototype.parseCard16=Ae.prototype.parseUShort=function(){var j=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,j},Ae.prototype.parseSID=Ae.prototype.parseUShort,Ae.prototype.parseOffset16=Ae.prototype.parseUShort,Ae.prototype.parseShort=function(){var j=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,j},Ae.prototype.parseF2Dot14=function(){var j=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,j},Ae.prototype.parseOffset32=Ae.prototype.parseULong=function(){var j=ot(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,j},Ae.prototype.parseFixed=function(){var j=ut(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,j},Ae.prototype.parseString=function(j){var P=this.data,N=this.offset+this.relativeOffset,U="";this.relativeOffset+=j;for(var X=0;X<j;X++)U+=String.fromCharCode(P.getUint8(N+X));return U},Ae.prototype.parseTag=function(){return this.parseString(4)},Ae.prototype.parseLongDateTime=function(){var j=ot(this.data,this.offset+this.relativeOffset+4);return j-=2082844800,this.relativeOffset+=8,j},Ae.prototype.parseVersion=function(j){var P=nt(this.data,this.offset+this.relativeOffset),N=nt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,P+N/(j=j===void 0?4096:j)/10},Ae.prototype.skip=function(j,P){this.relativeOffset+=ct[j]*(P=P===void 0?1:P)},Ae.prototype.parseULongList=function(j){j===void 0&&(j=this.parseULong());for(var P=new Array(j),N=this.data,U=this.offset+this.relativeOffset,X=0;X<j;X++)P[X]=N.getUint32(U),U+=4;return this.relativeOffset+=4*j,P},Ae.prototype.parseOffset16List=Ae.prototype.parseUShortList=function(j){j===void 0&&(j=this.parseUShort());for(var P=new Array(j),N=this.data,U=this.offset+this.relativeOffset,X=0;X<j;X++)P[X]=N.getUint16(U),U+=2;return this.relativeOffset+=2*j,P},Ae.prototype.parseShortList=function(j){for(var P=new Array(j),N=this.data,U=this.offset+this.relativeOffset,X=0;X<j;X++)P[X]=N.getInt16(U),U+=2;return this.relativeOffset+=2*j,P},Ae.prototype.parseByteList=function(j){for(var P=new Array(j),N=this.data,U=this.offset+this.relativeOffset,X=0;X<j;X++)P[X]=N.getUint8(U++);return this.relativeOffset+=j,P},Ae.prototype.parseList=function(j,P){P||(P=j,j=this.parseUShort());for(var N=new Array(j),U=0;U<j;U++)N[U]=P.call(this);return N},Ae.prototype.parseList32=function(j,P){P||(P=j,j=this.parseULong());for(var N=new Array(j),U=0;U<j;U++)N[U]=P.call(this);return N},Ae.prototype.parseRecordList=function(j,P){P||(P=j,j=this.parseUShort());for(var N=new Array(j),U=Object.keys(P),X=0;X<j;X++){for(var ee={},te=0;te<U.length;te++){var le=U[te],ye=P[le];ee[le]=ye.call(this)}N[X]=ee}return N},Ae.prototype.parseRecordList32=function(j,P){P||(P=j,j=this.parseULong());for(var N=new Array(j),U=Object.keys(P),X=0;X<j;X++){for(var ee={},te=0;te<U.length;te++){var le=U[te],ye=P[le];ee[le]=ye.call(this)}N[X]=ee}return N},Ae.prototype.parseStruct=function(j){if(typeof j=="function")return j.call(this);for(var P=Object.keys(j),N={},U=0;U<P.length;U++){var X=P[U],ee=j[X];N[X]=ee.call(this)}return N},Ae.prototype.parseValueRecord=function(j){var P;if((j=j===void 0?this.parseUShort():j)!==0)return P={},1&j&&(P.xPlacement=this.parseShort()),2&j&&(P.yPlacement=this.parseShort()),4&j&&(P.xAdvance=this.parseShort()),8&j&&(P.yAdvance=this.parseShort()),16&j&&(P.xPlaDevice=void 0,this.parseShort()),32&j&&(P.yPlaDevice=void 0,this.parseShort()),64&j&&(P.xAdvDevice=void 0,this.parseShort()),128&j&&(P.yAdvDevice=void 0,this.parseShort()),P},Ae.prototype.parseValueRecordList=function(){for(var j=this.parseUShort(),P=this.parseUShort(),N=new Array(P),U=0;U<P;U++)N[U]=this.parseValueRecord(j);return N},Ae.prototype.parsePointer=function(j){var P=this.parseOffset16();if(0<P)return new Ae(this.data,this.offset+P).parseStruct(j)},Ae.prototype.parsePointer32=function(j){var P=this.parseOffset32();if(0<P)return new Ae(this.data,this.offset+P).parseStruct(j)},Ae.prototype.parseListOfLists=function(j){for(var P=this.parseOffset16List(),N=P.length,U=this.relativeOffset,X=new Array(N),ee=0;ee<N;ee++){var te=P[ee];if(te===0)X[ee]=void 0;else if(this.relativeOffset=te,j){for(var le=this.parseOffset16List(),ye=new Array(le.length),ve=0;ve<le.length;ve++)this.relativeOffset=te+le[ve],ye[ve]=j.call(this);X[ee]=ye}else X[ee]=this.parseUShortList()}return this.relativeOffset=U,X},Ae.prototype.parseCoverage=function(){var j=this.offset+this.relativeOffset,P=this.parseUShort(),N=this.parseUShort();if(P===1)return{format:1,glyphs:this.parseUShortList(N)};if(P!==2)throw new Error("0x"+j.toString(16)+": Coverage format must be 1 or 2.");for(var U=new Array(N),X=0;X<N;X++)U[X]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:U}},Ae.prototype.parseClassDef=function(){var j=this.offset+this.relativeOffset,P=this.parseUShort();if(P===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(P===2)return{format:2,ranges:this.parseRecordList({start:Ae.uShort,end:Ae.uShort,classId:Ae.uShort})};throw new Error("0x"+j.toString(16)+": ClassDef format must be 1 or 2.")},Ae.list=function(j,P){return function(){return this.parseList(j,P)}},Ae.list32=function(j,P){return function(){return this.parseList32(j,P)}},Ae.recordList=function(j,P){return function(){return this.parseRecordList(j,P)}},Ae.recordList32=function(j,P){return function(){return this.parseRecordList32(j,P)}},Ae.pointer=function(j){return function(){return this.parsePointer(j)}},Ae.pointer32=function(j){return function(){return this.parsePointer32(j)}},Ae.tag=Ae.prototype.parseTag,Ae.byte=Ae.prototype.parseByte,Ae.uShort=Ae.offset16=Ae.prototype.parseUShort,Ae.uShortList=Ae.prototype.parseUShortList,Ae.uLong=Ae.offset32=Ae.prototype.parseULong,Ae.uLongList=Ae.prototype.parseULongList,Ae.struct=Ae.prototype.parseStruct,Ae.coverage=Ae.prototype.parseCoverage,Ae.classDef=Ae.prototype.parseClassDef;var Xe={reserved:Ae.uShort,reqFeatureIndex:Ae.uShort,featureIndexes:Ae.uShortList},Le=(Ae.prototype.parseScriptList=function(){return this.parsePointer(Ae.recordList({tag:Ae.tag,script:Ae.pointer({defaultLangSys:Ae.pointer(Xe),langSysRecords:Ae.recordList({tag:Ae.tag,langSys:Ae.pointer(Xe)})})}))||[]},Ae.prototype.parseFeatureList=function(){return this.parsePointer(Ae.recordList({tag:Ae.tag,feature:Ae.pointer({featureParams:Ae.offset16,lookupListIndexes:Ae.uShortList})}))||[]},Ae.prototype.parseLookupList=function(j){return this.parsePointer(Ae.list(Ae.pointer(function(){var P=this.parseUShort(),N=(z.argument(1<=P&&P<=9,"GPOS/GSUB lookup type "+P+" unknown."),this.parseUShort()),U=16&N;return{lookupType:P,lookupFlag:N,subtables:this.parseList(Ae.pointer(j[P])),markFilteringSet:U?this.parseUShort():void 0}})))||[]},Ae.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var j=this.parseUShort(),P=this.parseUShort();return z.argument(j===1&&P<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Ae.offset32,featureTableSubstitutionOffset:Ae.offset32})})||[]},{getByte:dt,getCard8:dt,getUShort:nt,getCard16:nt,getShort:function(j,P){return j.getInt16(P,!1)},getULong:ot,getFixed:ut,getTag:function(j,P){for(var N="",U=P;U<P+4;U+=1)N+=String.fromCharCode(j.getInt8(U));return N},getOffset:function(j,P,N){for(var U=0,X=0;X<N;X+=1)U=(U<<=8)+j.getUint8(P+X);return U},getBytes:function(j,P,N){for(var U=[],X=P;X<N;X+=1)U.push(j.getUint8(X));return U},bytesToString:function(j){for(var P="",N=0;N<j.length;N+=1)P+=String.fromCharCode(j[N]);return P},Parser:Ae}),oe={parse:function(j,P){for(var N={},U=(N.version=Le.getUShort(j,P),z.argument(N.version===0,"cmap table version should be 0."),N.numTables=Le.getUShort(j,P+2),-1),X=N.numTables-1;0<=X;--X){var ee=Le.getUShort(j,P+4+8*X),te=Le.getUShort(j,P+4+8*X+2);if(ee===3&&(te===0||te===1||te===10)||ee===0&&(te===0||te===1||te===2||te===3||te===4)){U=Le.getULong(j,P+4+8*X+4);break}}if(U===-1)throw new Error("No valid cmap sub-tables found.");var le=new Le.Parser(j,P+U);if(N.format=le.parseUShort(),N.format===12){var ye,ve=N,Ce=le;Ce.parseUShort(),ve.length=Ce.parseULong(),ve.language=Ce.parseULong(),ve.groupCount=ye=Ce.parseULong(),ve.glyphIndexMap={};for(var Ne=0;Ne<ye;Ne+=1)for(var Pe=Ce.parseULong(),Se=Ce.parseULong(),Ye=Ce.parseULong(),Be=Pe;Be<=Se;Be+=1)ve.glyphIndexMap[Be]=Ye,Ye++}else{if(N.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+N.format+").");var We=N,Fe=j,Ue=P,wt=U;We.length=le.parseUShort(),We.language=le.parseUShort(),We.segCount=Nt=le.parseUShort()>>1,le.skip("uShort",3),We.glyphIndexMap={};for(var Nt,_t=new Le.Parser(Fe,Ue+wt+14),xt=new Le.Parser(Fe,Ue+wt+16+2*Nt),zt=new Le.Parser(Fe,Ue+wt+16+4*Nt),er=new Le.Parser(Fe,Ue+wt+16+6*Nt),wr=Ue+wt+16+8*Nt,Mr=0;Mr<Nt-1;Mr+=1)for(var Hr=void 0,Xr=_t.parseUShort(),Bn=xt.parseUShort(),rr=zt.parseShort(),ar=er.parseUShort(),tr=Bn;tr<=Xr;tr+=1)ar!==0?(wr=(wr=er.offset+er.relativeOffset-2)+ar+2*(tr-Bn),(Hr=Le.getUShort(Fe,wr))!==0&&(Hr=Hr+rr&65535)):Hr=tr+rr&65535,We.glyphIndexMap[tr]=Hr}return N},make:function(j){for(var P=!0,N=j.length-1;0<N;--N)if(65535<j.get(N).unicode){console.log("Adding CMAP format 12 (needed!)"),P=!1;break}var U,X,ee=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:P?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:P?12:20}],te=(ee=(ee=P?ee:ee.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new Ie.Table("cmap",ee));for(te.segments=[],N=0;N<j.length;N+=1){for(var le=j.get(N),ye=0;ye<le.unicodes.length;ye+=1)U=le.unicodes[ye],X=N,te.segments.push({end:U,start:U,delta:-(U-X),offset:0,glyphIndex:X});te.segments=te.segments.sort(function(Ue,wt){return Ue.start-wt.start})}te.segments.push({end:65535,start:65535,delta:1,offset:0});var ve=te.segments.length,Ce=0,Ne=[],Pe=[],Se=[],Ye=[],Be=[],We=[];for(N=0;N<ve;N+=1){var Fe=te.segments[N];Fe.end<=65535&&Fe.start<=65535?(Ne=Ne.concat({name:"end_"+N,type:"USHORT",value:Fe.end}),Pe=Pe.concat({name:"start_"+N,type:"USHORT",value:Fe.start}),Se=Se.concat({name:"idDelta_"+N,type:"SHORT",value:Fe.delta}),Ye=Ye.concat({name:"idRangeOffset_"+N,type:"USHORT",value:Fe.offset}),Fe.glyphId!==void 0&&(Be=Be.concat({name:"glyph_"+N,type:"USHORT",value:Fe.glyphId}))):Ce+=1,P||Fe.glyphIndex===void 0||(We=(We=(We=We.concat({name:"cmap12Start_"+N,type:"ULONG",value:Fe.start})).concat({name:"cmap12End_"+N,type:"ULONG",value:Fe.end})).concat({name:"cmap12Glyph_"+N,type:"ULONG",value:Fe.glyphIndex}))}return te.segCountX2=2*(ve-Ce),te.searchRange=2*Math.pow(2,Math.floor(Math.log(ve-Ce)/Math.log(2))),te.entrySelector=Math.log(te.searchRange/2)/Math.log(2),te.rangeShift=te.segCountX2-te.searchRange,te.fields=te.fields.concat(Ne),te.fields.push({name:"reservedPad",type:"USHORT",value:0}),te.fields=te.fields.concat(Pe),te.fields=te.fields.concat(Se),te.fields=te.fields.concat(Ye),te.fields=te.fields.concat(Be),te.cmap4Length=14+2*Ne.length+2+2*Pe.length+2*Se.length+2*Ye.length+2*Be.length,P||(ee=16+4*We.length,te.cmap12Offset=20+te.cmap4Length,te.fields=te.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:ee},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:We.length/3}]),te.fields=te.fields.concat(We)),te}},ce=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ne=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],pe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Ee=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function De(j){this.font=j}function Ge(j){this.cmap=j}function Ke(j,P){this.encoding=j,this.charset=P}function it(j){switch(j.version){case 1:this.names=Ee.slice();break;case 2:this.names=new Array(j.numberOfGlyphs);for(var P=0;P<j.numberOfGlyphs;P++)j.glyphNameIndex[P]<Ee.length?this.names[P]=Ee[j.glyphNameIndex[P]]:this.names[P]=j.names[j.glyphNameIndex[P]-Ee.length];break;case 2.5:this.names=new Array(j.numberOfGlyphs);for(var N=0;N<j.numberOfGlyphs;N++)this.names[N]=Ee[N+j.glyphNameIndex[N]];break;default:this.names=[]}}De.prototype.charToGlyphIndex=function(j){var P=j.codePointAt(0),N=this.font.glyphs;if(N){for(var U=0;U<N.length;U+=1)for(var X=N.get(U),ee=0;ee<X.unicodes.length;ee+=1)if(X.unicodes[ee]===P)return U}return null},Ge.prototype.charToGlyphIndex=function(j){return this.cmap.glyphIndexMap[j.codePointAt(0)]||0},Ke.prototype.charToGlyphIndex=function(j){return j=j.codePointAt(0),j=this.encoding[j],this.charset.indexOf(j)},it.prototype.nameToGlyphIndex=function(j){return this.names.indexOf(j)},it.prototype.glyphIndexToName=function(j){return this.names[j]};var at={line:function(j,P,N,U,X){j.beginPath(),j.moveTo(P,N),j.lineTo(U,X),j.stroke()}};function ht(j){this.bindConstructorValues(j)}function Pt(j,P,N){Object.defineProperty(j,P,{get:function(){return j.path,j[N]},set:function(U){j[N]=U},enumerable:!0,configurable:!0})}function Ot(j,P){if(this.font=j,this.glyphs={},Array.isArray(P))for(var N=0;N<P.length;N++)this.glyphs[N]=P[N];this.length=P&&P.length||0}ht.prototype.bindConstructorValues=function(j){var P;this.index=j.index||0,this.name=j.name||null,this.unicode=j.unicode||void 0,this.unicodes=j.unicodes||j.unicode!==void 0?[j.unicode]:[],j.xMin&&(this.xMin=j.xMin),j.yMin&&(this.yMin=j.yMin),j.xMax&&(this.xMax=j.xMax),j.yMax&&(this.yMax=j.yMax),j.advanceWidth&&(this.advanceWidth=j.advanceWidth),Object.defineProperty(this,"path",(j=j.path,P=j||new Q,{configurable:!0,get:function(){return P=typeof P=="function"?P():P},set:function(N){P=N}}))},ht.prototype.addUnicode=function(j){this.unicodes.length===0&&(this.unicode=j),this.unicodes.push(j)},ht.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ht.prototype.getPath=function(j,P,N,U,X){j=j!==void 0?j:0,P=P!==void 0?P:0,N=N!==void 0?N:72;for(var ee,te,le=(U=U||{}).xScale,ye=U.yScale,ve=((ee=U.hinting&&X&&X.hinting?this.path&&X.hinting.exec(this,N):ee)?(te=X.hinting.getCommands(ee),j=Math.round(j),P=Math.round(P),le=ye=1):(te=this.path.commands,U=1/this.path.unitsPerEm*N,le===void 0&&(le=U),ye===void 0&&(ye=U)),new Q),Ce=0;Ce<te.length;Ce+=1){var Ne=te[Ce];Ne.type==="M"?ve.moveTo(j+Ne.x*le,P+-Ne.y*ye):Ne.type==="L"?ve.lineTo(j+Ne.x*le,P+-Ne.y*ye):Ne.type==="Q"?ve.quadraticCurveTo(j+Ne.x1*le,P+-Ne.y1*ye,j+Ne.x*le,P+-Ne.y*ye):Ne.type==="C"?ve.curveTo(j+Ne.x1*le,P+-Ne.y1*ye,j+Ne.x2*le,P+-Ne.y2*ye,j+Ne.x*le,P+-Ne.y*ye):Ne.type==="Z"&&ve.closePath()}return ve},ht.prototype.getContours=function(){if(this.points===void 0)return[];for(var j=[],P=[],N=0;N<this.points.length;N+=1){var U=this.points[N];P.push(U),U.lastPointOfContour&&(j.push(P),P=[])}return z.argument(P.length===0,"There are still points left in the current contour."),j},ht.prototype.getMetrics=function(){for(var j=this.path.commands,P=[],N=[],U=0;U<j.length;U+=1){var X=j[U];X.type!=="Z"&&(P.push(X.x),N.push(X.y)),X.type!=="Q"&&X.type!=="C"||(P.push(X.x1),N.push(X.y1)),X.type==="C"&&(P.push(X.x2),N.push(X.y2))}var ee={xMin:Math.min.apply(null,P),yMin:Math.min.apply(null,N),xMax:Math.max.apply(null,P),yMax:Math.max.apply(null,N),leftSideBearing:this.leftSideBearing};return isFinite(ee.xMin)||(ee.xMin=0),isFinite(ee.xMax)||(ee.xMax=this.advanceWidth),isFinite(ee.yMin)||(ee.yMin=0),isFinite(ee.yMax)||(ee.yMax=0),ee.rightSideBearing=this.advanceWidth-ee.leftSideBearing-(ee.xMax-ee.xMin),ee},ht.prototype.draw=function(j,P,N,U,X){this.getPath(P,N,U,X).draw(j)},ht.prototype.drawPoints=function(j,P,N,U){function X(Ce,Ne,Pe,Se){var Ye=2*Math.PI;j.beginPath();for(var Be=0;Be<Ce.length;Be+=1)j.moveTo(Ne+Ce[Be].x*Se,Pe+Ce[Be].y*Se),j.arc(Ne+Ce[Be].x*Se,Pe+Ce[Be].y*Se,2,0,Ye,!1);j.closePath(),j.fill()}P=P!==void 0?P:0,N=N!==void 0?N:0;for(var U=1/this.path.unitsPerEm*(U=U!==void 0?U:24),ee=[],te=[],le=this.path,ye=0;ye<le.commands.length;ye+=1){var ve=le.commands[ye];ve.x!==void 0&&ee.push({x:ve.x,y:-ve.y}),ve.x1!==void 0&&te.push({x:ve.x1,y:-ve.y1}),ve.x2!==void 0&&te.push({x:ve.x2,y:-ve.y2})}j.fillStyle="blue",X(ee,P,N,U),j.fillStyle="red",X(te,P,N,U)},ht.prototype.drawMetrics=function(j,P,N,U){P=P!==void 0?P:0,N=N!==void 0?N:0,U=1/this.path.unitsPerEm*(U=U!==void 0?U:24),j.lineWidth=1,j.strokeStyle="black",at.line(j,P,-1e4,P,1e4),at.line(j,-1e4,N,1e4,N);var X=this.xMin||0,ee=this.yMin||0,te=this.xMax||0,le=this.yMax||0,ye=this.advanceWidth||0;j.strokeStyle="blue",at.line(j,P+X*U,-1e4,P+X*U,1e4),at.line(j,P+te*U,-1e4,P+te*U,1e4),at.line(j,-1e4,N+-ee*U,1e4,N+-ee*U),at.line(j,-1e4,N+-le*U,1e4,N+-le*U),j.strokeStyle="green",at.line(j,P+ye*U,-1e4,P+ye*U,1e4)},Ot.prototype.get=function(j){return typeof this.glyphs[j]=="function"&&(this.glyphs[j]=this.glyphs[j]()),this.glyphs[j]},Ot.prototype.push=function(j,P){this.glyphs[j]=P,this.length++};var gt={GlyphSet:Ot,glyphLoader:function(j,P){return new ht({index:P,font:j})},ttfGlyphLoader:function(j,P,N,U,X,ee){return function(){var te=new ht({index:P,font:j});return te.path=function(){N(te,U,X);var le=ee(j.glyphs,te);return le.unitsPerEm=j.unitsPerEm,le},Pt(te,"xMin","_xMin"),Pt(te,"xMax","_xMax"),Pt(te,"yMin","_yMin"),Pt(te,"yMax","_yMax"),te}},cffGlyphLoader:function(j,P,N,U){return function(){var X=new ht({index:P,font:j});return X.path=function(){var ee=N(j,X,U);return ee.unitsPerEm=j.unitsPerEm,ee},X}}};function Dt(j){return j=j.length<1240?107:j.length<33900?1131:32768,j}function Ct(j,P,N){var U,X=[],ee=[],te=Le.getCard16(j,P);if(te!==0){for(var le=Le.getByte(j,P+2),ye=P+(te+1)*le+2,ve=P+3,Ce=0;Ce<te+1;Ce+=1)X.push(Le.getOffset(j,ve,le)),ve+=le;U=ye+X[te]}else U=P+2;for(var Ne=0;Ne<X.length-1;Ne+=1){var Pe=Le.getBytes(j,ye+X[Ne],ye+X[Ne+1]);N&&(Pe=N(Pe)),ee.push(Pe)}return{objects:ee,startOffset:P,endOffset:U}}function sr(j,P){if(P===28)return j.parseByte()<<8|j.parseByte();if(P===29)return j.parseByte()<<24|j.parseByte()<<16|j.parseByte()<<8|j.parseByte();if(P===30){for(var N=j,U="",X=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var te=N.parseByte(),ee=te>>4,te=15&te;if(ee==15||(U+=X[ee],te==15))break;U+=X[te]}return parseFloat(U)}if(32<=P&&P<=246)return P-139;if(247<=P&&P<=250)return 256*(P-247)+j.parseByte()+108;if(251<=P&&P<=254)return 256*-(P-251)-j.parseByte()-108;throw new Error("Invalid b0 "+P)}function Gr(j,P,N){var U=new Le.Parser(j,P=P!==void 0?P:0),X=[],ee=[];for(N=N!==void 0?N:j.length;U.relativeOffset<N;){var te=U.parseByte();te<=21?(te===12&&(te=1200+U.parseByte()),X.push([te,ee]),ee=[]):ee.push(sr(U,te))}for(var le=X,ye={},ve=0;ve<le.length;ve+=1){var Ce=le[ve][0],Ne=le[ve][1],Pe=void 0,Pe=Ne.length===1?Ne[0]:Ne;if(ye.hasOwnProperty(Ce)&&!isNaN(ye[Ce]))throw new Error("Object "+ye+" already has key "+Ce);ye[Ce]=Pe}return ye}function Cr(j,P){return P=P<=390?ce[P]:j[P-391]}function Xt(j,P,N){for(var U,X={},ee=0;ee<P.length;ee+=1){var te=P[ee];if(Array.isArray(te.type)){var le=[];le.length=te.type.length;for(var ye=0;ye<te.type.length;ye++)(U=j[te.op]!==void 0?j[te.op][ye]:void 0)===void 0&&(U=te.value!==void 0&&te.value[ye]!==void 0?te.value[ye]:null),te.type[ye]==="SID"&&(U=Cr(N,U)),le[ye]=U;X[te.name]=le}else(U=j[te.op])===void 0&&(U=te.value!==void 0?te.value:null),te.type==="SID"&&(U=Cr(N,U)),X[te.name]=U}return X}var ir=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],qt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Qr(j,P,N,U){return Xt(Gr(j,P,N),qt,U)}function xr(j,P,N,U){for(var X=[],ee=0;ee<N.length;ee+=1){var te=new DataView(new Uint8Array(N[ee]).buffer),te=(le=U,Xt(Gr(te,0,te.byteLength),ir,le)),le=(te._subrs=[],te._subrsBias=0,te.private[0]),ye=te.private[1];le!==0&&ye!==0&&(le=Qr(j,ye+P,le,U),te._defaultWidthX=le.defaultWidthX,te._nominalWidthX=le.nominalWidthX,le.subrs!==0&&(ye=Ct(j,ye+le.subrs+P),te._subrs=ye.objects,te._subrsBias=Dt(te._subrs)),te._privateDict=le),X.push(te)}return X}function $t(j,P,N){var U,X,ee,te,le,ye,ve,Ce,Ne,Pe=new Q,Se=[],Ye=0,Be=!1,We=!1,Fe=0,Ue=0,wt=(Ne=(j.isCIDFont?(le=j.tables.cff.topDict._fdSelect[P.index],le=j.tables.cff.topDict._fdArray[le],ye=le._subrs,ve=le._subrsBias,Ce=le._defaultWidthX,le):(ye=j.tables.cff.topDict._subrs,ve=j.tables.cff.topDict._subrsBias,Ce=j.tables.cff.topDict._defaultWidthX,j.tables.cff.topDict))._nominalWidthX,Ce);function Nt(xt,zt){We&&Pe.closePath(),Pe.moveTo(xt,zt),We=!0}function _t(){Se.length%2==0||Be||(wt=Se.shift()+Ne),Ye+=Se.length>>1,Se.length=0,Be=!0}return function xt(zt){for(var er,wr,Mr,Hr,Xr,Bn,rr,ar,tr,sn,yr,$r,dr=0;dr<zt.length;){var nr=zt[dr];switch(dr+=1,nr){case 1:case 3:_t();break;case 4:1<Se.length&&!Be&&(wt=Se.shift()+Ne,Be=!0),Ue+=Se.pop(),Nt(Fe,Ue);break;case 5:for(;0<Se.length;)Fe+=Se.shift(),Ue+=Se.shift(),Pe.lineTo(Fe,Ue);break;case 6:for(;0<Se.length&&(Fe+=Se.shift(),Pe.lineTo(Fe,Ue),Se.length!==0);)Ue+=Se.shift(),Pe.lineTo(Fe,Ue);break;case 7:for(;0<Se.length&&(Ue+=Se.shift(),Pe.lineTo(Fe,Ue),Se.length!==0);)Fe+=Se.shift(),Pe.lineTo(Fe,Ue);break;case 8:for(;0<Se.length;)U=Fe+Se.shift(),X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),Fe=ee+Se.shift(),Ue=te+Se.shift(),Pe.curveTo(U,X,ee,te,Fe,Ue);break;case 10:Xr=Se.pop()+ve,(Bn=ye[Xr])&&xt(Bn);break;case 11:return;case 12:switch(nr=zt[dr],dr+=1,nr){case 35:U=Fe+Se.shift(),X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),rr=ee+Se.shift(),ar=te+Se.shift(),tr=rr+Se.shift(),sn=ar+Se.shift(),yr=tr+Se.shift(),$r=sn+Se.shift(),Fe=yr+Se.shift(),Ue=$r+Se.shift(),Se.shift(),Pe.curveTo(U,X,ee,te,rr,ar),Pe.curveTo(tr,sn,yr,$r,Fe,Ue);break;case 34:U=Fe+Se.shift(),X=Ue,ee=U+Se.shift(),te=X+Se.shift(),rr=ee+Se.shift(),ar=te,tr=rr+Se.shift(),sn=te,yr=tr+Se.shift(),$r=Ue,Fe=yr+Se.shift(),Pe.curveTo(U,X,ee,te,rr,ar),Pe.curveTo(tr,sn,yr,$r,Fe,Ue);break;case 36:U=Fe+Se.shift(),X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),rr=ee+Se.shift(),ar=te,tr=rr+Se.shift(),sn=te,yr=tr+Se.shift(),$r=sn+Se.shift(),Fe=yr+Se.shift(),Pe.curveTo(U,X,ee,te,rr,ar),Pe.curveTo(tr,sn,yr,$r,Fe,Ue);break;case 37:U=Fe+Se.shift(),X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),rr=ee+Se.shift(),ar=te+Se.shift(),tr=rr+Se.shift(),sn=ar+Se.shift(),yr=tr+Se.shift(),$r=sn+Se.shift(),Math.abs(yr-Fe)>Math.abs($r-Ue)?Fe=yr+Se.shift():Ue=$r+Se.shift(),Pe.curveTo(U,X,ee,te,rr,ar),Pe.curveTo(tr,sn,yr,$r,Fe,Ue);break;default:console.log("Glyph "+P.index+": unknown operator 1200"+nr),Se.length=0}break;case 14:0<Se.length&&!Be&&(wt=Se.shift()+Ne,Be=!0),We&&(Pe.closePath(),We=!1);break;case 18:_t();break;case 19:case 20:_t(),dr+=Ye+7>>3;break;case 21:2<Se.length&&!Be&&(wt=Se.shift()+Ne,Be=!0),Ue+=Se.pop(),Nt(Fe+=Se.pop(),Ue);break;case 22:1<Se.length&&!Be&&(wt=Se.shift()+Ne,Be=!0),Nt(Fe+=Se.pop(),Ue);break;case 23:_t();break;case 24:for(;2<Se.length;)U=Fe+Se.shift(),X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),Fe=ee+Se.shift(),Ue=te+Se.shift(),Pe.curveTo(U,X,ee,te,Fe,Ue);Fe+=Se.shift(),Ue+=Se.shift(),Pe.lineTo(Fe,Ue);break;case 25:for(;6<Se.length;)Fe+=Se.shift(),Ue+=Se.shift(),Pe.lineTo(Fe,Ue);U=Fe+Se.shift(),X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),Fe=ee+Se.shift(),Ue=te+Se.shift(),Pe.curveTo(U,X,ee,te,Fe,Ue);break;case 26:for(Se.length%2&&(Fe+=Se.shift());0<Se.length;)U=Fe,X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),Fe=ee,Ue=te+Se.shift(),Pe.curveTo(U,X,ee,te,Fe,Ue);break;case 27:for(Se.length%2&&(Ue+=Se.shift());0<Se.length;)U=Fe+Se.shift(),X=Ue,ee=U+Se.shift(),te=X+Se.shift(),Fe=ee+Se.shift(),Ue=te,Pe.curveTo(U,X,ee,te,Fe,Ue);break;case 28:er=zt[dr],wr=zt[dr+1],Se.push((er<<24|wr<<16)>>16),dr+=2;break;case 29:Xr=Se.pop()+j.gsubrsBias,(Bn=j.gsubrs[Xr])&&xt(Bn);break;case 30:for(;0<Se.length&&(U=Fe,X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),Fe=ee+Se.shift(),Ue=te+(Se.length===1?Se.shift():0),Pe.curveTo(U,X,ee,te,Fe,Ue),Se.length!==0);)U=Fe+Se.shift(),X=Ue,ee=U+Se.shift(),te=X+Se.shift(),Ue=te+Se.shift(),Fe=ee+(Se.length===1?Se.shift():0),Pe.curveTo(U,X,ee,te,Fe,Ue);break;case 31:for(;0<Se.length&&(U=Fe+Se.shift(),X=Ue,ee=U+Se.shift(),te=X+Se.shift(),Ue=te+Se.shift(),Fe=ee+(Se.length===1?Se.shift():0),Pe.curveTo(U,X,ee,te,Fe,Ue),Se.length!==0);)U=Fe,X=Ue+Se.shift(),ee=U+Se.shift(),te=X+Se.shift(),Fe=ee+Se.shift(),Ue=te+(Se.length===1?Se.shift():0),Pe.curveTo(U,X,ee,te,Fe,Ue);break;default:nr<32?console.log("Glyph "+P.index+": unknown operator "+nr):nr<247?Se.push(nr-139):nr<251?(er=zt[dr],dr+=1,Se.push(256*(nr-247)+er+108)):nr<255?(er=zt[dr],dr+=1,Se.push(256*-(nr-251)-er-108)):(er=zt[dr],wr=zt[dr+1],Mr=zt[dr+2],Hr=zt[dr+3],dr+=4,Se.push((er<<24|wr<<16|Mr<<8|Hr)/65536))}}}(N),P.advanceWidth=wt,Pe}function Pr(j,P){var N,U=ce.indexOf(j);return 0<=U&&(N=U),0<=(U=P.indexOf(j))?N=U+ce.length:(N=ce.length+P.length,P.push(j)),N}function ti(j,P,N){for(var U={},X=0;X<j.length;X+=1){var ee=j[X],te=P[ee.name];te===void 0||function le(ye,ve){if(ye===ve)return 1;if(Array.isArray(ye)&&Array.isArray(ve)&&ye.length===ve.length){for(var Ce=0;Ce<ye.length;Ce+=1)if(!le(ye[Ce],ve[Ce]))return;return 1}}(te,ee.value)||(ee.type==="SID"&&(te=Pr(te,N)),U[ee.op]={name:ee.name,type:ee.type,value:te})}return U}function co(j,P){var N=new Ie.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return N.dict=ti(ir,j,P),N}function ho(j){var P=new Ie.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return P.topDicts=[{name:"topDict_0",type:"TABLE",value:j}],P}function Jo(j){for(var P=new Ie.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),N=0;N<j.length;N+=1){var U=j.get(N),X=function(ee){for(var te=[],le=ee.path,ye=(te.push({name:"width",type:"NUMBER",value:ee.advanceWidth}),0),ve=0,Ce=0;Ce<le.commands.length;Ce+=1){var Ne,Pe,Se,Ye,Be=void 0,We=void 0,Fe=le.commands[Ce];(Fe=Fe.type==="Q"?{type:"C",x:Fe.x,y:Fe.y,x1:1/3*ye+2/3*Fe.x1,y1:1/3*ve+2/3*Fe.y1,x2:1/3*Fe.x+2/3*Fe.x1,y2:1/3*Fe.y+2/3*Fe.y1}:Fe).type==="M"?(Be=Math.round(Fe.x-ye),We=Math.round(Fe.y-ve),te.push({name:"dx",type:"NUMBER",value:Be}),te.push({name:"dy",type:"NUMBER",value:We}),te.push({name:"rmoveto",type:"OP",value:21}),ye=Math.round(Fe.x),ve=Math.round(Fe.y)):Fe.type==="L"?(Be=Math.round(Fe.x-ye),We=Math.round(Fe.y-ve),te.push({name:"dx",type:"NUMBER",value:Be}),te.push({name:"dy",type:"NUMBER",value:We}),te.push({name:"rlineto",type:"OP",value:5}),ye=Math.round(Fe.x),ve=Math.round(Fe.y)):Fe.type==="C"&&(Ne=Math.round(Fe.x1-ye),Pe=Math.round(Fe.y1-ve),Se=Math.round(Fe.x2-Fe.x1),Ye=Math.round(Fe.y2-Fe.y1),Be=Math.round(Fe.x-Fe.x2),We=Math.round(Fe.y-Fe.y2),te.push({name:"dx1",type:"NUMBER",value:Ne}),te.push({name:"dy1",type:"NUMBER",value:Pe}),te.push({name:"dx2",type:"NUMBER",value:Se}),te.push({name:"dy2",type:"NUMBER",value:Ye}),te.push({name:"dx",type:"NUMBER",value:Be}),te.push({name:"dy",type:"NUMBER",value:We}),te.push({name:"rrcurveto",type:"OP",value:8}),ye=Math.round(Fe.x),ve=Math.round(Fe.y))}return te.push({name:"endchar",type:"OP",value:14}),te}(U);P.charStrings.push({name:U.name,type:"CHARSTRING",value:X})}return P}var Zn={parse:function(j,P,N){N.tables.cff={},le=j,U=P,(X={}).formatMajor=Le.getCard8(le,U),X.formatMinor=Le.getCard8(le,U+1),X.size=Le.getCard8(le,U+2),X.offsetSize=Le.getCard8(le,U+3),X.startOffset=U,X.endOffset=U+4;var le=Ct(j,X.endOffset,Le.bytesToString),U=Ct(j,le.endOffset),X=Ct(j,U.endOffset,Le.bytesToString),le=Ct(j,X.endOffset);if(N.gsubrs=le.objects,N.gsubrsBias=Dt(N.gsubrs),(le=xr(j,P,U.objects,X.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+le.length);if(U=le[0],(N.tables.cff.topDict=U)._privateDict&&(N.defaultWidthX=U._privateDict.defaultWidthX,N.nominalWidthX=U._privateDict.nominalWidthX),U.ros[0]!==void 0&&U.ros[1]!==void 0&&(N.isCIDFont=!0),N.isCIDFont){var le=U.fdArray,ee=U.fdSelect;if(le===0||ee===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");le=xr(j,P,Ct(j,le+=P).objects,X.objects),U._fdArray=le,U._fdSelect=function(Pe,Se,Ye,Be){var We,Fe=[],Ue=new Le.Parser(Pe,Se);if((Pe=Ue.parseCard8())===0)for(var wt=0;wt<Ye;wt++){if(Be<=(We=Ue.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+We+" (FD count "+Be+")");Fe.push(We)}else{if(Pe!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Pe);var Nt,_t=Ue.parseCard16(),xt=Ue.parseCard16();if(xt!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+xt);for(var zt=0;zt<_t;zt++){if(We=Ue.parseCard8(),Nt=Ue.parseCard16(),Be<=We)throw new Error("CFF table CID Font FDSelect has bad FD index value "+We+" (FD count "+Be+")");if(Ye<Nt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Nt);for(;xt<Nt;xt++)Fe.push(We);xt=Nt}if(Nt!==Ye)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Nt)}return Fe}(j,ee+=P,N.numGlyphs,le.length)}var ee=P+U.private[1],le=Qr(j,ee,U.private[0],X.objects),te=(N.defaultWidthX=le.defaultWidthX,N.nominalWidthX=le.nominalWidthX,le.subrs!==0?(ee=Ct(j,ee+le.subrs),N.subrs=ee.objects,N.subrsBias=Dt(N.subrs)):(N.subrs=[],N.subrsBias=0),Ct(j,P+U.charStrings)),le=(N.nGlyphs=te.objects.length,function(Ce,Ne,Pe,Se){var Ye=new Le.Parser(Ce,Ne),Be=(--Pe,[".notdef"]);if((Ce=Ye.parseCard8())===0)for(var We=0;We<Pe;We+=1)Fe=Ye.parseSID(),Be.push(Cr(Se,Fe));else if(Ce===1)for(;Be.length<=Pe;)for(var Fe=Ye.parseSID(),Ue=Ye.parseCard8(),wt=0;wt<=Ue;wt+=1)Be.push(Cr(Se,Fe)),Fe+=1;else{if(Ce!==2)throw new Error("Unknown charset format "+Ce);for(;Be.length<=Pe;){Fe=Ye.parseSID(),Ue=Ye.parseCard16();for(var Nt=0;Nt<=Ue;Nt+=1)Be.push(Cr(Se,Fe)),Fe+=1}}return Be}(j,P+U.charset,N.nGlyphs,X.objects));U.encoding===0?N.cffEncoding=new Ke(ne,le):U.encoding===1?N.cffEncoding=new Ke(pe,le):N.cffEncoding=function(Ce,Ne,Pe){var Se={},Ye=new Le.Parser(Ce,Ne);if((Ce=Ye.parseCard8())===0)for(var Be=Ye.parseCard8(),We=0;We<Be;We+=1)Se[Ue=Ye.parseCard8()]=We;else{if(Ce!==1)throw new Error("Unknown encoding format "+Ce);for(var Fe=Ye.parseCard8(),Ue=1,wt=0;wt<Fe;wt+=1)for(var Nt=Ye.parseCard8(),_t=Ye.parseCard8(),xt=Nt;xt<=Nt+_t;xt+=1)Se[xt]=Ue,Ue+=1}return new Ke(Se,Pe)}(j,P+U.encoding,le),N.encoding=N.encoding||N.cffEncoding,N.glyphs=new gt.GlyphSet(N);for(var ye=0;ye<N.nGlyphs;ye+=1){var ve=te.objects[ye];N.glyphs.push(ye,gt.cffGlyphLoader(N,ye,$t,ve))}},make:function(j,Ce){for(var N,U=new Ie.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),X=1/Ce.unitsPerEm,X={version:Ce.version,fullName:Ce.fullName,familyName:Ce.familyName,weight:Ce.weightName,fontBBox:Ce.fontBBox||[0,0,0,0],fontMatrix:[X,0,0,X,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},ee=[],te=1;te<j.length;te+=1)N=j.get(te),ee.push(N.name);var le,ye,ve=[],Ce=(U.header=new Ie.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),U.nameIndex=function(Pe){var Se=new Ie.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Se.names=[];for(var Ye=0;Ye<Pe.length;Ye+=1)Se.names.push({name:"name_"+Ye,type:"NAME",value:Pe[Ye]});return Se}([Ce.postScriptName]),co(X,ve)),Ne=(U.topDictIndex=ho(Ce),U.globalSubrIndex=new Ie.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),U.charsets=function(Pe,Se){for(var Ye=new Ie.Record("Charsets",[{name:"format",type:"Card8",value:0}]),Be=0;Be<Pe.length;Be+=1){var We=Pr(Pe[Be],Se);Ye.fields.push({name:"glyph_"+Be,type:"SID",value:We})}return Ye}(ee,ve),U.charStringsIndex=Jo(j),U.privateDict=(Ne={},le=ve,(ye=new Ie.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=ti(qt,Ne,le),ye),U.stringIndex=function(Pe){var Se=new Ie.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Se.strings=[];for(var Ye=0;Ye<Pe.length;Ye+=1)Se.strings.push({name:"string_"+Ye,type:"STRING",value:Pe[Ye]});return Se}(ve),U.header.sizeOf()+U.nameIndex.sizeOf()+U.topDictIndex.sizeOf()+U.stringIndex.sizeOf()+U.globalSubrIndex.sizeOf());return X.charset=Ne,X.encoding=0,X.charStrings=X.charset+U.charsets.sizeOf(),X.private[1]=X.charStrings+U.charStringsIndex.sizeOf(),Ce=co(X,ve),U.topDictIndex=ho(Ce),U}},Ti={parse:function(U,P){var N={},U=new Le.Parser(U,P);return N.version=U.parseVersion(),N.fontRevision=Math.round(1e3*U.parseFixed())/1e3,N.checkSumAdjustment=U.parseULong(),N.magicNumber=U.parseULong(),z.argument(N.magicNumber===1594834165,"Font header has wrong magic number."),N.flags=U.parseUShort(),N.unitsPerEm=U.parseUShort(),N.created=U.parseLongDateTime(),N.modified=U.parseLongDateTime(),N.xMin=U.parseShort(),N.yMin=U.parseShort(),N.xMax=U.parseShort(),N.yMax=U.parseShort(),N.macStyle=U.parseUShort(),N.lowestRecPPEM=U.parseUShort(),N.fontDirectionHint=U.parseShort(),N.indexToLocFormat=U.parseShort(),N.glyphDataFormat=U.parseShort(),N},make:function(j){var P=Math.round(new Date().getTime()/1e3)+2082844800,N=P;return j.createdTimestamp&&(N=j.createdTimestamp+2082844800),new Ie.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:N},{name:"modified",type:"LONGDATETIME",value:P},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],j)}},je={parse:function(U,P){var N={},U=new Le.Parser(U,P);return N.version=U.parseVersion(),N.ascender=U.parseShort(),N.descender=U.parseShort(),N.lineGap=U.parseShort(),N.advanceWidthMax=U.parseUShort(),N.minLeftSideBearing=U.parseShort(),N.minRightSideBearing=U.parseShort(),N.xMaxExtent=U.parseShort(),N.caretSlopeRise=U.parseShort(),N.caretSlopeRun=U.parseShort(),N.caretOffset=U.parseShort(),U.relativeOffset+=8,N.metricDataFormat=U.parseShort(),N.numberOfHMetrics=U.parseUShort(),N},make:function(j){return new Ie.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],j)}},Je={parse:function(j,P,N,U,X){for(var ee,te,le=new Le.Parser(j,P),ye=0;ye<U;ye+=1){ye<N&&(ee=le.parseUShort(),te=le.parseShort());var ve=X.get(ye);ve.advanceWidth=ee,ve.leftSideBearing=te}},make:function(j){for(var P=new Ie.Table("hmtx",[]),N=0;N<j.length;N+=1){var X=j.get(N),U=X.advanceWidth||0,X=X.leftSideBearing||0;P.fields.push({name:"advanceWidth_"+N,type:"USHORT",value:U}),P.fields.push({name:"leftSideBearing_"+N,type:"SHORT",value:X})}return P}},pt={make:function(j){for(var P=new Ie.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:j.length}]),N="",U=12+4*j.length,X=0;X<j.length;++X){var ee=N.indexOf(j[X]);ee<0&&(ee=N.length,N+=j[X]),P.fields.push({name:"offset "+X,type:"USHORT",value:U+ee}),P.fields.push({name:"length "+X,type:"USHORT",value:j[X].length})}return P.fields.push({name:"stringPool",type:"CHARARRAY",value:N}),P},parse:function(j,P){for(var N=new Le.Parser(j,P),U=N.parseULong(),X=(z.argument(U===1,"Unsupported ltag table version."),N.skip("uLong",1),N.parseULong()),ee=[],te=0;te<X;te++){for(var le="",ye=P+N.parseUShort(),ve=N.parseUShort(),Ce=ye;Ce<ye+ve;++Ce)le+=String.fromCharCode(j.getInt8(Ce));ee.push(le)}return ee}},$e={parse:function(U,P){var N={},U=new Le.Parser(U,P);return N.version=U.parseVersion(),N.numGlyphs=U.parseUShort(),N.version===1&&(N.maxPoints=U.parseUShort(),N.maxContours=U.parseUShort(),N.maxCompositePoints=U.parseUShort(),N.maxCompositeContours=U.parseUShort(),N.maxZones=U.parseUShort(),N.maxTwilightPoints=U.parseUShort(),N.maxStorage=U.parseUShort(),N.maxFunctionDefs=U.parseUShort(),N.maxInstructionDefs=U.parseUShort(),N.maxStackElements=U.parseUShort(),N.maxSizeOfInstructions=U.parseUShort(),N.maxComponentElements=U.parseUShort(),N.maxComponentDepth=U.parseUShort()),N},make:function(j){return new Ie.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:j}])}},Gt=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ze={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Yt={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},ft={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Mt="utf-16",mt={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},mr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Rr(j,P,N){switch(j){case 0:return Mt;case 1:return mr[N]||mt[P];case 3:if(P===1||P===10)return Mt}}function cr(j){var P,N={};for(P in j)N[j[P]]=parseInt(P);return N}function qr(j,P,N,U,X,ee){return new Ie.Record("NameRecord",[{name:"platformID",type:"USHORT",value:j},{name:"encodingID",type:"USHORT",value:P},{name:"languageID",type:"USHORT",value:N},{name:"nameID",type:"USHORT",value:U},{name:"length",type:"USHORT",value:X},{name:"offset",type:"USHORT",value:ee}])}function Qn(j,P){if((N=function(ee,te){var le=ee.length,ye=te.length-le+1;e:for(var ve=0;ve<ye;ve++)for(;ve<ye;ve++){for(var Ce=0;Ce<le;Ce++)if(te[ve+Ce]!==ee[Ce])continue e;return ve}return-1}(j,P))<0)for(var N=P.length,U=0,X=j.length;U<X;++U)P.push(j[U]);return N}var nn={parse:function(j,P,N){for(var U={},X=new Le.Parser(j,P),P=X.parseUShort(),ee=X.parseUShort(),te=X.offset+X.parseUShort(),le=0;le<ee;le++){var Ye=X.parseUShort(),ye=X.parseUShort(),ve=X.parseUShort(),Ce=X.parseUShort(),Ce=Gt[Ce]||Ce,Ne=X.parseUShort(),Pe=X.parseUShort(),Se=function(We,Fe,Ue){switch(We){case 0:if(Fe===65535)return"und";if(Ue)return Ue[Fe];break;case 1:return Ze[Fe];case 3:return ft[Fe]}}(Ye,ve,N),Ye=Rr(Ye,ye,ve);Ye!==void 0&&Se!==void 0&&(ye=void 0,(ye=Ye===Mt?q.UTF16(j,te+Pe,Ne):q.MACSTRING(j,te+Pe,Ne,Ye))&&((ve=(ve=U[Ce])===void 0?U[Ce]={}:ve)[Se]=ye))}return P===1&&X.parseUShort(),U},make:function(j,P){var N,U=[],X={},ee=cr(Gt);for(N in j){var te=ee[N];if(te===void 0&&(te=N),Pe=parseInt(te),isNaN(Pe))throw new Error('Name table entry "'+N+'" does not exist, see nameTableNames for complete list.');X[Pe]=j[N],U.push(Pe)}for(var le=cr(Ze),ye=cr(ft),ve=[],Ce=[],Ne=0;Ne<U.length;Ne++){var Pe,Se,Ye=X[Pe=U[Ne]];for(Se in Ye){var Be=Ye[Se],Nt=1,We=le[Se],Fe=Yt[We],Ue=Rr(Nt,Fe,We),Ue=$.MACSTRING(Be,Ue),wt=(Ue===void 0&&(Nt=0,(We=P.indexOf(Se))<0&&(We=P.length,P.push(Se)),Fe=4,Ue=$.UTF16(Be)),Qn(Ue,Ce)),Nt=(ve.push(qr(Nt,Fe,We,Pe,Ue.length,wt)),ye[Se]);Nt!==void 0&&(We=Qn(Fe=$.UTF16(Be),Ce),ve.push(qr(3,1,Nt,Pe,Fe.length,We)))}}ve.sort(function(zt,er){return zt.platformID-er.platformID||zt.encodingID-er.encodingID||zt.languageID-er.languageID||zt.nameID-er.nameID});for(var _t=new Ie.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ve.length},{name:"stringOffset",type:"USHORT",value:6+12*ve.length}]),xt=0;xt<ve.length;xt++)_t.fields.push({name:"record_"+xt,type:"RECORD",value:ve[xt]});return _t.fields.push({name:"strings",type:"LITERAL",value:Ce}),_t}},Ur=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Wr={parse:function(j,P){var N={},U=new Le.Parser(j,P);N.version=U.parseUShort(),N.xAvgCharWidth=U.parseShort(),N.usWeightClass=U.parseUShort(),N.usWidthClass=U.parseUShort(),N.fsType=U.parseUShort(),N.ySubscriptXSize=U.parseShort(),N.ySubscriptYSize=U.parseShort(),N.ySubscriptXOffset=U.parseShort(),N.ySubscriptYOffset=U.parseShort(),N.ySuperscriptXSize=U.parseShort(),N.ySuperscriptYSize=U.parseShort(),N.ySuperscriptXOffset=U.parseShort(),N.ySuperscriptYOffset=U.parseShort(),N.yStrikeoutSize=U.parseShort(),N.yStrikeoutPosition=U.parseShort(),N.sFamilyClass=U.parseShort(),N.panose=[];for(var X=0;X<10;X++)N.panose[X]=U.parseByte();return N.ulUnicodeRange1=U.parseULong(),N.ulUnicodeRange2=U.parseULong(),N.ulUnicodeRange3=U.parseULong(),N.ulUnicodeRange4=U.parseULong(),N.achVendID=String.fromCharCode(U.parseByte(),U.parseByte(),U.parseByte(),U.parseByte()),N.fsSelection=U.parseUShort(),N.usFirstCharIndex=U.parseUShort(),N.usLastCharIndex=U.parseUShort(),N.sTypoAscender=U.parseShort(),N.sTypoDescender=U.parseShort(),N.sTypoLineGap=U.parseShort(),N.usWinAscent=U.parseUShort(),N.usWinDescent=U.parseUShort(),1<=N.version&&(N.ulCodePageRange1=U.parseULong(),N.ulCodePageRange2=U.parseULong()),2<=N.version&&(N.sxHeight=U.parseShort(),N.sCapHeight=U.parseShort(),N.usDefaultChar=U.parseUShort(),N.usBreakChar=U.parseUShort(),N.usMaxContent=U.parseUShort()),N},make:function(j){return new Ie.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],j)},unicodeRanges:Ur,getUnicodeRange:function(j){for(var P=0;P<Ur.length;P+=1){var N=Ur[P];if(j>=N.begin&&j<N.end)return P}return-1}},Nn={parse:function(j,P){var N={},U=new Le.Parser(j,P);switch(N.version=U.parseVersion(),N.italicAngle=U.parseFixed(),N.underlinePosition=U.parseShort(),N.underlineThickness=U.parseShort(),N.isFixedPitch=U.parseULong(),N.minMemType42=U.parseULong(),N.maxMemType42=U.parseULong(),N.minMemType1=U.parseULong(),N.maxMemType1=U.parseULong(),N.version){case 1:N.names=Ee.slice();break;case 2:N.numberOfGlyphs=U.parseUShort(),N.glyphNameIndex=new Array(N.numberOfGlyphs);for(var X=0;X<N.numberOfGlyphs;X++)N.glyphNameIndex[X]=U.parseUShort();N.names=[];for(var ee,te=0;te<N.numberOfGlyphs;te++)N.glyphNameIndex[te]>=Ee.length&&(ee=U.parseChar(),N.names.push(U.parseString(ee)));break;case 2.5:N.numberOfGlyphs=U.parseUShort(),N.offset=new Array(N.numberOfGlyphs);for(var le=0;le<N.numberOfGlyphs;le++)N.offset[le]=U.parseChar()}return N},make:function(){return new Ie.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},$n=new Array(9),ki=($n[1]=function(){var j=this.offset+this.relativeOffset,P=this.parseUShort();return P===1?{substFormat:1,coverage:this.parsePointer(Ae.coverage),deltaGlyphId:this.parseUShort()}:P===2?{substFormat:2,coverage:this.parsePointer(Ae.coverage),substitute:this.parseOffset16List()}:void z.assert(!1,"0x"+j.toString(16)+": lookup type 1 format must be 1 or 2.")},$n[2]=function(){var j=this.parseUShort();return z.argument(j===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(Ae.coverage),sequences:this.parseListOfLists()}},$n[3]=function(){var j=this.parseUShort();return z.argument(j===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(Ae.coverage),alternateSets:this.parseListOfLists()}},$n[4]=function(){var j=this.parseUShort();return z.argument(j===1,"GSUB ligature table identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(Ae.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Ae.uShort,lookupListIndex:Ae.uShort});$n[5]=function(){var j,P,N=this.offset+this.relativeOffset,U=this.parseUShort();return U===1?{substFormat:U,coverage:this.parsePointer(Ae.coverage),ruleSets:this.parseListOfLists(function(){var X=this.parseUShort(),ee=this.parseUShort();return{input:this.parseUShortList(X-1),lookupRecords:this.parseRecordList(ee,ki)}})}:U===2?{substFormat:U,coverage:this.parsePointer(Ae.coverage),classDef:this.parsePointer(Ae.classDef),classSets:this.parseListOfLists(function(){var X=this.parseUShort(),ee=this.parseUShort();return{classes:this.parseUShortList(X-1),lookupRecords:this.parseRecordList(ee,ki)}})}:U===3?(j=this.parseUShort(),P=this.parseUShort(),{substFormat:U,coverages:this.parseList(j,Ae.pointer(Ae.coverage)),lookupRecords:this.parseRecordList(P,ki)}):void z.assert(!1,"0x"+N.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},$n[6]=function(){var j=this.offset+this.relativeOffset,P=this.parseUShort();return P===1?{substFormat:1,coverage:this.parsePointer(Ae.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ki)}})}:P===2?{substFormat:2,coverage:this.parsePointer(Ae.coverage),backtrackClassDef:this.parsePointer(Ae.classDef),inputClassDef:this.parsePointer(Ae.classDef),lookaheadClassDef:this.parsePointer(Ae.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ki)}})}:P===3?{substFormat:3,backtrackCoverage:this.parseList(Ae.pointer(Ae.coverage)),inputCoverage:this.parseList(Ae.pointer(Ae.coverage)),lookaheadCoverage:this.parseList(Ae.pointer(Ae.coverage)),lookupRecords:this.parseRecordList(ki)}:void z.assert(!1,"0x"+j.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},$n[7]=function(){var j=this.parseUShort(),j=(z.argument(j===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),P=new Ae(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:j,extension:$n[j].call(P)}},$n[8]=function(){var j=this.parseUShort();return z.argument(j===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:j,coverage:this.parsePointer(Ae.coverage),backtrackCoverage:this.parseList(Ae.pointer(Ae.coverage)),lookaheadCoverage:this.parseList(Ae.pointer(Ae.coverage)),substitutes:this.parseUShortList()}};var ea=new Array(9);ea[1]=function(j){return j.substFormat===1?new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ie.Coverage(j.coverage)},{name:"deltaGlyphID",type:"USHORT",value:j.deltaGlyphId}]):new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Ie.Coverage(j.coverage)}].concat(Ie.ushortList("substitute",j.substitute)))},ea[3]=function(j){return z.assert(j.substFormat===1,"Lookup type 3 substFormat must be 1."),new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ie.Coverage(j.coverage)}].concat(Ie.tableList("altSet",j.alternateSets,function(P){return new Ie.Table("alternateSetTable",Ie.ushortList("alternate",P))})))},ea[4]=function(j){return z.assert(j.substFormat===1,"Lookup type 4 substFormat must be 1."),new Ie.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Ie.Coverage(j.coverage)}].concat(Ie.tableList("ligSet",j.ligatureSets,function(P){return new Ie.Table("ligatureSetTable",Ie.tableList("ligature",P,function(N){return new Ie.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:N.ligGlyph}].concat(Ie.ushortList("component",N.components,N.components.length+1)))}))})))};var fo={parse:function(j,P){return P=(j=new Ae(j,P=P||0)).parseVersion(1),z.argument(P===1||P===1.1,"Unsupported GSUB table version."),P===1?{version:P,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList($n)}:{version:P,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList($n),variations:j.parseFeatureVariationsList()}},make:function(j){return new Ie.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ie.ScriptList(j.scripts)},{name:"features",type:"TABLE",value:new Ie.FeatureList(j.features)},{name:"lookups",type:"TABLE",value:new Ie.LookupList(j.lookups,ea)}])}},po={parse:function(j,P){for(var N=new Le.Parser(j,P),U=N.parseULong(),X=(z.argument(U===1,"Unsupported META table version."),N.parseULong(),N.parseULong(),N.parseULong()),ee={},te=0;te<X;te++){var le=N.parseTag(),ve=N.parseULong(),ye=N.parseULong(),ve=q.UTF8(j,P+ve,ye);ee[le]=ve}return ee},make:function(j){var P,N=Object.keys(j).length,U="",X=16+12*N,ee=new Ie.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:X},{name:"numTags",type:"ULONG",value:N}]);for(P in j){var te=U.length;U+=j[P],ee.fields.push({name:"tag "+P,type:"TAG",value:P}),ee.fields.push({name:"offset "+P,type:"ULONG",value:X+te}),ee.fields.push({name:"length "+P,type:"ULONG",value:j[P].length})}return ee.fields.push({name:"stringPool",type:"CHARARRAY",value:U}),ee}};function Ei(j){return Math.log(j)/Math.log(2)|0}function Ci(j){for(;j.length%4!=0;)j.push(0);for(var P=0,N=0;N<j.length;N+=4)P+=(j[N]<<24)+(j[N+1]<<16)+(j[N+2]<<8)+j[N+3];return P%=Math.pow(2,32)}function fu(j,P,N,U){return new Ie.Record("Table Record",[{name:"tag",type:"TAG",value:j!==void 0?j:""},{name:"checkSum",type:"ULONG",value:P!==void 0?P:0},{name:"offset",type:"ULONG",value:N!==void 0?N:0},{name:"length",type:"ULONG",value:U!==void 0?U:0}])}function pu(j){for(var P=new Ie.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),N=(P.tables=j,P.numTables=j.length,Math.pow(2,Ei(P.numTables))),U=(P.searchRange=16*N,P.entrySelector=Ei(N),P.rangeShift=16*P.numTables-P.searchRange,[]),X=[],ee=P.sizeOf()+fu().sizeOf()*P.numTables;ee%4!=0;)ee+=1,X.push({name:"padding",type:"BYTE",value:0});for(var te=0;te<j.length;te+=1){var le=j[te],ye=(z.argument(le.tableName.length===4,"Table name"+le.tableName+" is invalid."),le.sizeOf()),ve=fu(le.tableName,Ci(le.encode()),ee,ye);for(U.push({name:ve.tag+" Table Record",type:"RECORD",value:ve}),X.push({name:le.tableName+" table",type:"RECORD",value:le}),ee+=ye,z.argument(!isNaN(ee),"Something went wrong calculating the offset.");ee%4!=0;)ee+=1,X.push({name:"padding",type:"BYTE",value:0})}return U.sort(function(Ce,Ne){return Ce.value.tag>Ne.value.tag?1:-1}),P.fields=P.fields.concat(U),P.fields=P.fields.concat(X),P}function ta(j,P,N){for(var U=0;U<P.length;U+=1){var X=j.charToGlyphIndex(P[U]);if(0<X)return j.glyphs.get(X).getMetrics()}return N}var mu={make:pu,fontToTable:function(j){for(var P,N=[],U=[],X=[],ee=[],te=[],le=[],ye=[],ve=0,Ce=0,Ne=0,Pe=0,Se=0,Ye=0;Ye<j.glyphs.length;Ye+=1){var Be=j.glyphs.get(Ye),We=0|Be.unicode;if(isNaN(Be.advanceWidth))throw new Error("Glyph "+Be.name+" ("+Ye+"): advanceWidth is not a number.");(We<P||P===void 0)&&0<We&&(P=We),ve<We&&(ve=We);var We=Wr.getUnicodeRange(We);if(We<32)Ce|=1<<We;else if(We<64)Ne|=1<<We-32;else if(We<96)Pe|=1<<We-64;else{if(!(We<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Se|=1<<We-96}Be.name!==".notdef"&&(We=Be.getMetrics(),N.push(We.xMin),U.push(We.yMin),X.push(We.xMax),ee.push(We.yMax),le.push(We.leftSideBearing),ye.push(We.rightSideBearing),te.push(Be.advanceWidth))}var Fe,Ue={xMin:Math.min.apply(null,N),yMin:Math.min.apply(null,U),xMax:Math.max.apply(null,X),yMax:Math.max.apply(null,ee),advanceWidthMax:Math.max.apply(null,te),advanceWidthAvg:function(nr){for(var Os=0,si=0;si<nr.length;si+=1)Os+=nr[si];return Os/nr.length}(te),minLeftSideBearing:Math.min.apply(null,le),maxLeftSideBearing:Math.max.apply(null,le),minRightSideBearing:Math.min.apply(null,ye)},wt=(Ue.ascender=j.ascender,Ue.descender=j.descender,Ti.make({flags:3,unitsPerEm:j.unitsPerEm,xMin:Ue.xMin,yMin:Ue.yMin,xMax:Ue.xMax,yMax:Ue.yMax,lowestRecPPEM:3,createdTimestamp:j.createdTimestamp})),Nt=je.make({ascender:Ue.ascender,descender:Ue.descender,advanceWidthMax:Ue.advanceWidthMax,minLeftSideBearing:Ue.minLeftSideBearing,minRightSideBearing:Ue.minRightSideBearing,xMaxExtent:Ue.maxLeftSideBearing+(Ue.xMax-Ue.xMin),numberOfHMetrics:j.glyphs.length}),_t=$e.make(j.glyphs.length),xt=Wr.make({xAvgCharWidth:Math.round(Ue.advanceWidthAvg),usWeightClass:j.tables.os2.usWeightClass,usWidthClass:j.tables.os2.usWidthClass,usFirstCharIndex:P,usLastCharIndex:ve,ulUnicodeRange1:Ce,ulUnicodeRange2:Ne,ulUnicodeRange3:Pe,ulUnicodeRange4:Se,fsSelection:j.tables.os2.fsSelection,sTypoAscender:Ue.ascender,sTypoDescender:Ue.descender,sTypoLineGap:0,usWinAscent:Ue.yMax,usWinDescent:Math.abs(Ue.yMin),ulCodePageRange1:1,sxHeight:ta(j,"xyvw",{yMax:Math.round(Ue.ascender/2)}).yMax,sCapHeight:ta(j,"HIKLEFJMNTZBDPRAGOQSUVWXY",Ue).yMax,usDefaultChar:j.hasChar(" ")?32:0,usBreakChar:j.hasChar(" ")?32:0}),zt=Je.make(j.glyphs),er=oe.make(j.glyphs),ar=j.getEnglishName("fontFamily"),tr=j.getEnglishName("fontSubfamily"),rr=ar+" "+tr,wr=(wr=j.getEnglishName("postScriptName"))||ar.replace(/\s/g,"")+"-"+tr,Mr={};for(Fe in j.names)Mr[Fe]=j.names[Fe];Mr.uniqueID||(Mr.uniqueID={en:j.getEnglishName("manufacturer")+":"+rr}),Mr.postScriptName||(Mr.postScriptName={en:wr}),Mr.preferredFamily||(Mr.preferredFamily=j.names.fontFamily),Mr.preferredSubfamily||(Mr.preferredSubfamily=j.names.fontSubfamily);var Xr=[],Hr=nn.make(Mr,Xr),Xr=0<Xr.length?pt.make(Xr):void 0,Bn=Nn.make(),rr=Zn.make(j.glyphs,{version:j.getEnglishName("version"),fullName:rr,familyName:ar,weightName:tr,postScriptName:wr,unitsPerEm:j.unitsPerEm,fontBBox:[0,Ue.yMin,Ue.ascender,Ue.advanceWidthMax]}),ar=j.metas&&0<Object.keys(j.metas).length?po.make(j.metas):void 0,tr=[wt,Nt,_t,xt,Hr,er,Bn,rr,zt];Xr&&tr.push(Xr),j.tables.gsub&&tr.push(fo.make(j.tables.gsub)),ar&&tr.push(ar);for(var sn=Ci((wr=pu(tr)).encode()),yr=wr.fields,$r=!1,dr=0;dr<yr.length;dr+=1)if(yr[dr].name==="head table"){yr[dr].value.checkSumAdjustment=2981146554-sn,$r=!0;break}if($r)return wr;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:Ci};function mo(j,P){for(var N=0,U=j.length-1;N<=U;){var X=N+U>>>1,ee=j[X].tag;if(ee===P)return X;ee<P?N=1+X:U=X-1}return-N-1}function Mi(j,P){for(var N=0,U=j.length-1;N<=U;){var X=N+U>>>1,ee=j[X];if(ee===P)return X;ee<P?N=1+X:U=X-1}return-N-1}function yu(j,P){for(var N=0,U=j.length-1;N<=U;){var X,ee=N+U>>>1,te=(X=j[ee]).start;if(te===P)return X;te<P?N=1+ee:U=ee-1}if(0<N)return P>(X=j[N-1]).end?0:X}function Oi(j,P){this.font=j,this.tableName=P}function Zt(j){Oi.call(this,j,"gpos")}function Kn(j){Oi.call(this,j,"gsub")}function al(j,P,N){for(var U=j.subtables,X=0;X<U.length;X++){var ee=U[X];if(ee.substFormat===P)return ee}if(N)return U.push(N),N}function ra(j){for(var P=new ArrayBuffer(j.length),N=new Uint8Array(P),U=0;U<j.length;++U)N[U]=j[U];return P}function ri(j,P){if(!j)throw P}function ll(j,P,N,U,X){var ee=0<(P&U)?(ee=j.parseByte(),N+(ee=P&X?ee:-ee)):0<(P&X)?N:N+j.parseShort();return ee}function gu(j,P,N){var U,X=new Le.Parser(P,N);if(j.numberOfContours=X.parseShort(),j._xMin=X.parseShort(),j._yMin=X.parseShort(),j._xMax=X.parseShort(),j._yMax=X.parseShort(),0<j.numberOfContours){for(var ee=j.endPointIndices=[],te=0;te<j.numberOfContours;te+=1)ee.push(X.parseUShort());j.instructionLength=X.parseUShort(),j.instructions=[];for(var le=0;le<j.instructionLength;le+=1)j.instructions.push(X.parseByte());for(var ye=ee[ee.length-1]+1,ve=[],Ce=0;Ce<ye;Ce+=1)if(U=X.parseByte(),ve.push(U),0<(8&U))for(var Ne=X.parseByte(),Pe=0;Pe<Ne;Pe+=1)ve.push(U),Ce+=1;if(z.argument(ve.length===ye,"Bad flags."),0<ee.length){var Se,Ye=[];if(0<ye){for(var Be=0;Be<ye;Be+=1)U=ve[Be],(Se={}).onCurve=!!(1&U),Se.lastPointOfContour=0<=ee.indexOf(Be),Ye.push(Se);for(var We=0,Fe=0;Fe<ye;Fe+=1)U=ve[Fe],(Se=Ye[Fe]).x=ll(X,U,We,2,16),We=Se.x;for(var Ue=0,wt=0;wt<ye;wt+=1)U=ve[wt],(Se=Ye[wt]).y=ll(X,U,Ue,4,32),Ue=Se.y}j.points=Ye}else j.points=[]}else if(j.numberOfContours===0)j.points=[];else{j.isComposite=!0,j.points=[],j.components=[];for(var Nt=!0;Nt;){ve=X.parseUShort();var _t={glyphIndex:X.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&ve)?0<(2&ve)?(_t.dx=X.parseShort(),_t.dy=X.parseShort()):_t.matchedPoints=[X.parseUShort(),X.parseUShort()]:0<(2&ve)?(_t.dx=X.parseChar(),_t.dy=X.parseChar()):_t.matchedPoints=[X.parseByte(),X.parseByte()],0<(8&ve)?_t.xScale=_t.yScale=X.parseF2Dot14():0<(64&ve)?(_t.xScale=X.parseF2Dot14(),_t.yScale=X.parseF2Dot14()):0<(128&ve)&&(_t.xScale=X.parseF2Dot14(),_t.scale01=X.parseF2Dot14(),_t.scale10=X.parseF2Dot14(),_t.yScale=X.parseF2Dot14()),j.components.push(_t),Nt=!!(32&ve)}if(256&ve){j.instructionLength=X.parseUShort(),j.instructions=[];for(var xt=0;xt<j.instructionLength;xt+=1)j.instructions.push(X.parseByte())}}}function yo(j,P){for(var N=[],U=0;U<j.length;U+=1){var X=j[U],X={x:P.xScale*X.x+P.scale01*X.y+P.dx,y:P.scale10*X.x+P.yScale*X.y+P.dy,onCurve:X.onCurve,lastPointOfContour:X.lastPointOfContour};N.push(X)}return N}function go(j){var P=new Q;if(j)for(var N=function(Ne){for(var Pe=[],Se=[],Ye=0;Ye<Ne.length;Ye+=1){var Be=Ne[Ye];Se.push(Be),Be.lastPointOfContour&&(Pe.push(Se),Se=[])}return z.argument(Se.length===0,"There are still points left in the current contour."),Pe}(j),U=0;U<N.length;++U){var X,ee=N[U],te=ee[ee.length-1],le=ee[0];te.onCurve?P.moveTo(te.x,te.y):le.onCurve?P.moveTo(le.x,le.y):(X={x:.5*(te.x+le.x),y:.5*(te.y+le.y)},P.moveTo(X.x,X.y));for(var ye=0;ye<ee.length;++ye){var ve,Ce=te,te=le,le=ee[(ye+1)%ee.length];te.onCurve?P.lineTo(te.x,te.y):(ve=le,Ce.onCurve||(te.x,Ce.x,te.y,Ce.y),le.onCurve||(ve={x:.5*(te.x+le.x),y:.5*(te.y+le.y)}),P.quadraticCurveTo(te.x,te.y,ve.x,ve.y))}P.closePath()}return P}function Gs(j,P){if(P.isComposite)for(var N=0;N<P.components.length;N+=1){var U=P.components[N],X=j.get(U.glyphIndex);if(X.getPath(),X.points){var ee=void 0;if(U.matchedPoints===void 0)ee=yo(X.points,U);else{if(U.matchedPoints[0]>P.points.length-1||U.matchedPoints[1]>X.points.length-1)throw Error("Matched points out of range in "+P.name);var te=P.points[U.matchedPoints[0]],le=X.points[U.matchedPoints[1]],U={xScale:U.xScale,scale01:U.scale01,scale10:U.scale10,yScale:U.yScale,dx:0,dy:0},le=yo([le],U)[0];U.dx=te.x-le.x,U.dy=te.y-le.y,ee=yo(X.points,U)}P.points=P.points.concat(ee)}}return go(P.points)}(Zt.prototype=Oi.prototype={searchTag:mo,binSearch:Mi,getTable:function(j){var P=this.font.tables[this.tableName];return P=!P&&j?this.font.tables[this.tableName]=this.createDefaultTable():P},getScriptNames:function(){var j=this.getTable();return j?j.scripts.map(function(P){return P.tag}):[]},getDefaultScriptName:function(){var j=this.getTable();if(j){for(var P=!1,N=0;N<j.scripts.length;N++){var U=j.scripts[N].tag;if(U==="DFLT")return U;U==="latn"&&(P=!0)}return P?"latn":void 0}},getScriptTable:function(j,P){var N,U=this.getTable(P);if(U)return N=U.scripts,0<=(U=mo(U.scripts,j=j||"DFLT"))?N[U].script:P?(N.splice(-1-U,0,P={tag:j,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),P.script):void 0},getLangSysTable:function(X,P,N){var U,X=this.getScriptTable(X,N);if(X)return P&&P!=="dflt"&&P!=="DFLT"?0<=(U=mo(X.langSysRecords,P))?X.langSysRecords[U].langSys:N?(X.langSysRecords.splice(-1-U,0,N={tag:P,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),N.langSys):void 0:X.defaultLangSys},getFeatureTable:function(j,P,N,U){if(j=this.getLangSysTable(j,P,U),j){for(var X,ee=j.featureIndexes,te=this.font.tables[this.tableName].features,le=0;le<ee.length;le++)if((X=te[ee[le]]).tag===N)return X.feature;if(U)return P=te.length,z.assert(P===0||N>=te[P-1].tag,"Features must be added in alphabetical order."),te.push(X={tag:N,feature:{params:0,lookupListIndexes:[]}}),ee.push(P),X.feature}},getLookupTables:function(ee,P,N,U,X){var ee=this.getFeatureTable(ee,P,N,X),te=[];if(ee){for(var le,ye=ee.lookupListIndexes,ve=this.font.tables[this.tableName].lookups,Ce=0;Ce<ye.length;Ce++)(le=ve[ye[Ce]]).lookupType===U&&te.push(le);if(te.length===0&&X)return P=ve.length,ve.push(le={lookupType:U,lookupFlag:0,subtables:[],markFilteringSet:void 0}),ye.push(P),[le]}return te},getGlyphClass:function(j,P){switch(j.format){case 1:return j.startGlyph<=P&&P<j.startGlyph+j.classes.length?j.classes[P-j.startGlyph]:0;case 2:var N=yu(j.ranges,P);return N?N.classId:0}},getCoverageIndex:function(j,P){switch(j.format){case 1:var N=Mi(j.glyphs,P);return 0<=N?N:-1;case 2:return N=yu(j.ranges,P),N?N.index+P-N.start:-1}},expandCoverage:function(j){if(j.format===1)return j.glyphs;for(var P=[],N=j.ranges,U=0;U<N.length;U++)for(var X=N[U],ee=X.start,te=X.end,le=ee;le<=te;le++)P.push(le);return P}}).init=function(){var j=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(j)},Zt.prototype.getKerningValue=function(j,P,N){for(var U=0;U<j.length;U++)for(var X=j[U].subtables,ee=0;ee<X.length;ee++){var te=X[ee],le=this.getCoverageIndex(te.coverage,P);if(!(le<0))switch(te.posFormat){case 1:for(var ye=te.pairSets[le],ve=0;ve<ye.length;ve++){var Ce=ye[ve];if(Ce.secondGlyph===N)return Ce.value1&&Ce.value1.xAdvance||0}break;case 2:var Pe=this.getGlyphClass(te.classDef1,P),Ne=this.getGlyphClass(te.classDef2,N),Pe=te.classRecords[Pe][Ne];return Pe.value1&&Pe.value1.xAdvance||0}}return 0},Zt.prototype.getKerningTables=function(j,P){if(this.font.tables.gpos)return this.getLookupTables(j,P,"kern",2)},(Kn.prototype=Oi.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Kn.prototype.getSingle=function(j,P,N){for(var U=[],X=this.getLookupTables(P,N,j,1),ee=0;ee<X.length;ee++)for(var te=X[ee].subtables,le=0;le<te.length;le++){var ye=te[le],ve=this.expandCoverage(ye.coverage),Ce=void 0;if(ye.substFormat===1)for(var Ne=ye.deltaGlyphId,Ce=0;Ce<ve.length;Ce++){var Pe=ve[Ce];U.push({sub:Pe,by:Pe+Ne})}else{var Se=ye.substitute;for(Ce=0;Ce<ve.length;Ce++)U.push({sub:ve[Ce],by:Se[Ce]})}}return U},Kn.prototype.getAlternates=function(j,P,N){for(var U=[],X=this.getLookupTables(P,N,j,3),ee=0;ee<X.length;ee++)for(var te=X[ee].subtables,le=0;le<te.length;le++)for(var ye=te[le],ve=this.expandCoverage(ye.coverage),Ce=ye.alternateSets,Ne=0;Ne<ve.length;Ne++)U.push({sub:ve[Ne],by:Ce[Ne]});return U},Kn.prototype.getLigatures=function(j,P,N){for(var U=[],X=this.getLookupTables(P,N,j,4),ee=0;ee<X.length;ee++)for(var te=X[ee].subtables,le=0;le<te.length;le++)for(var ye=te[le],ve=this.expandCoverage(ye.coverage),Ce=ye.ligatureSets,Ne=0;Ne<ve.length;Ne++)for(var Pe=ve[Ne],Se=Ce[Ne],Ye=0;Ye<Se.length;Ye++){var Be=Se[Ye];U.push({sub:[Pe].concat(Be.components),by:Be.ligGlyph})}return U},Kn.prototype.addSingle=function(j,P,N,U){N=al(this.getLookupTables(N,U,j,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),z.assert(N.coverage.format===1,"Ligature: unable to modify coverage table format "+N.coverage.format),U=P.sub,j=this.binSearch(N.coverage.glyphs,U),j<0&&(N.coverage.glyphs.splice(j=-1-j,0,U),N.substitute.splice(j,0,0)),N.substitute[j]=P.by},Kn.prototype.addAlternate=function(j,P,N,U){N=al(this.getLookupTables(N,U,j,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),z.assert(N.coverage.format===1,"Ligature: unable to modify coverage table format "+N.coverage.format),U=P.sub,j=this.binSearch(N.coverage.glyphs,U),j<0&&(N.coverage.glyphs.splice(j=-1-j,0,U),N.alternateSets.splice(j,0,0)),N.alternateSets[j]=P.by},Kn.prototype.addLigature=function(ee,ye,le,X){var le=this.getLookupTables(le,X,ee,4,!0)[0],X=le.subtables[0],ee=(X||(le.subtables[0]=X={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),z.assert(X.coverage.format===1,"Ligature: unable to modify coverage table format "+X.coverage.format),ye.sub[0]),te=ye.sub.slice(1),le={ligGlyph:ye.by,components:te},ye=this.binSearch(X.coverage.glyphs,ee);if(0<=ye){for(var ve=X.ligatureSets[ye],Ce=0;Ce<ve.length;Ce++)if(function(Ne,Pe){var Se=Ne.length;if(Se===Pe.length){for(var Ye=0;Ye<Se;Ye++)if(Ne[Ye]!==Pe[Ye])return;return 1}}(ve[Ce].components,te))return;ve.push(le)}else X.coverage.glyphs.splice(ye=-1-ye,0,ee),X.ligatureSets.splice(ye,0,[le])},Kn.prototype.getFeature=function(j,P,N){if(/ss\d\d/.test(j))return this.getSingle(j,P,N);switch(j){case"aalt":case"salt":return this.getSingle(j,P,N).concat(this.getAlternates(j,P,N));case"dlig":case"liga":case"rlig":return this.getLigatures(j,P,N)}},Kn.prototype.add=function(j,P,N,U){if(/ss\d\d/.test(j))return this.addSingle(j,P,N,U);switch(j){case"aalt":case"salt":return typeof P.by=="number"?this.addSingle(j,P,N,U):this.addAlternate(j,P,N,U);case"dlig":case"liga":case"rlig":return this.addLigature(j,P,N,U)}};var Ts={getPath:go,parse:function(j,P,N,U){for(var X=new gt.GlyphSet(U),ee=0;ee<N.length-1;ee+=1){var te=N[ee];te!==N[ee+1]?X.push(ee,gt.ttfGlyphLoader(U,ee,gu,j,P+te,Gs)):X.push(ee,gt.glyphLoader(U,ee))}return X}};function ks(j){this.font=j,this.getCommands=function(P){return Ts.getPath(P).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function vo(j){return j}function Ai(j){return Math.sign(j)*Math.round(Math.abs(j))}function qs(j){return Math.sign(j)*Math.round(Math.abs(2*j))/2}function nd(j){return Math.sign(j)*(Math.round(Math.abs(j)+.5)-.5)}function vu(j){return Math.sign(j)*Math.ceil(Math.abs(j))}function _o(j){return Math.sign(j)*Math.floor(Math.abs(j))}function _u(j){var P=this.srPeriod,N=this.srPhase,U=1;return j<0&&(j=-j,U=-1),j+=this.srThreshold-N,j=Math.trunc(j/P)*P,(j+=N)<0?N*U:j*U}var Jn={x:1,y:0,axis:"x",distance:function(j,P,N,U){return(N?j.xo:j.x)-(U?P.xo:P.x)},interpolate:function(j,P,N,U){var X,ee,te,le,ye,ve,Ce;if(!U||U===this)return X=j.xo-P.xo,ee=j.xo-N.xo,ye=P.x-P.xo,ve=N.x-N.xo,(Ce=(te=Math.abs(X))+(le=Math.abs(ee)))===0?void(j.x=j.xo+(ye+ve)/2):void(j.x=j.xo+(ye*le+ve*te)/Ce);X=U.distance(j,P,!0,!0),ee=U.distance(j,N,!0,!0),ye=U.distance(P,P,!1,!0),ve=U.distance(N,N,!1,!0),(Ce=(te=Math.abs(X))+(le=Math.abs(ee)))===0?Jn.setRelative(j,j,(ye+ve)/2,U,!0):Jn.setRelative(j,j,(ye*le+ve*te)/Ce,U,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(j,P,N,U,X){var ee,te;U&&U!==this?(ee=X?P.xo:P.x,te=X?P.yo:P.y,ee+=N*U.x,te+=N*U.y,j.x=ee+(j.y-te)/U.normalSlope):j.x=(X?P.xo:P.x)+N},slope:0,touch:function(j){j.xTouched=!0},touched:function(j){return j.xTouched},untouch:function(j){j.xTouched=!1}},Fn={x:0,y:1,axis:"y",distance:function(j,P,N,U){return(N?j.yo:j.y)-(U?P.yo:P.y)},interpolate:function(j,P,N,U){var X,ee,te,le,ye,ve,Ce;if(!U||U===this)return X=j.yo-P.yo,ee=j.yo-N.yo,ye=P.y-P.yo,ve=N.y-N.yo,(Ce=(te=Math.abs(X))+(le=Math.abs(ee)))===0?void(j.y=j.yo+(ye+ve)/2):void(j.y=j.yo+(ye*le+ve*te)/Ce);X=U.distance(j,P,!0,!0),ee=U.distance(j,N,!0,!0),ye=U.distance(P,P,!1,!0),ve=U.distance(N,N,!1,!0),(Ce=(te=Math.abs(X))+(le=Math.abs(ee)))===0?Fn.setRelative(j,j,(ye+ve)/2,U,!0):Fn.setRelative(j,j,(ye*le+ve*te)/Ce,U,!0)},normalSlope:0,setRelative:function(j,P,N,U,X){var ee,te;U&&U!==this?(ee=X?P.xo:P.x,te=X?P.yo:P.y,ee+=N*U.x,te+=N*U.y,j.y=te+U.normalSlope*(j.x-ee)):j.y=(X?P.yo:P.y)+N},slope:Number.POSITIVE_INFINITY,touch:function(j){j.yTouched=!0},touched:function(j){return j.yTouched},untouch:function(j){j.yTouched=!1}};function Pi(j,P){this.x=j,this.y=P,this.axis=void 0,this.slope=P/j,this.normalSlope=-j/P,Object.freeze(this)}function bo(j,P){var N=Math.sqrt(j*j+P*P);return P/=N,(j/=N)===1&&P===0?Jn:j===0&&P===1?Fn:new Pi(j,P)}function En(j,P,N,U){this.x=this.xo=Math.round(64*j)/64,this.y=this.yo=Math.round(64*P)/64,this.lastPointOfContour=N,this.onCurve=U,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Jn),Object.freeze(Fn),Pi.prototype.distance=function(j,P,N,U){return this.x*Jn.distance(j,P,N,U)+this.y*Fn.distance(j,P,N,U)},Pi.prototype.interpolate=function(j,X,ee,U){var te=U.distance(j,X,!0,!0),le=U.distance(j,ee,!0,!0),X=U.distance(X,X,!1,!0),ee=U.distance(ee,ee,!1,!0),te=Math.abs(te),le=Math.abs(le),ye=te+le;ye===0?this.setRelative(j,j,(X+ee)/2,U,!0):this.setRelative(j,j,(X*le+ee*te)/ye,U,!0)},Pi.prototype.setRelative=function(j,ee,ye,ve,le){var te=le?ee.xo:ee.x,le=le?ee.yo:ee.y,ee=te+ye*(ve=ve||this).x,te=le+ye*ve.y,le=ve.normalSlope,ye=this.slope,ve=j.x,Ce=j.y;j.x=(ye*ve-le*ee+te-Ce)/(ye-le),j.y=ye*(j.x-ve)+Ce},Pi.prototype.touch=function(j){j.xTouched=!0,j.yTouched=!0},En.prototype.nextTouched=function(j){for(var P=this.nextPointOnContour;!j.touched(P)&&P!==this;)P=P.nextPointOnContour;return P},En.prototype.prevTouched=function(j){for(var P=this.prevPointOnContour;!j.touched(P)&&P!==this;)P=P.prevPointOnContour;return P};var Es=Object.freeze(new En(0,0)),Ri={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function es(j,P){switch(this.env=j,this.stack=[],this.prog=P,j){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Jn,this.round=Ai}}function na(j){for(var P=j.tZone=new Array(j.gZone.length),N=0;N<P.length;N++)P[N]=new En(0,0)}function bu(j,P){var N,U=j.prog,X=j.ip,ee=1;do if((N=U[++X])===88)ee++;else if(N===89)ee--;else if(N===64)X+=U[X+1]+1;else if(N===65)X+=2*U[X+1]+1;else if(176<=N&&N<=183)X+=N-176+1;else if(184<=N&&N<=191)X+=2*(N-184+1);else if(P&&ee===1&&N===27)break;while(0<ee);j.ip=X}function sa(j,P){d.DEBUG&&console.log(P.step,"SVTCA["+j.axis+"]"),P.fv=P.pv=P.dpv=j}function xo(j,P){d.DEBUG&&console.log(P.step,"SPVTCA["+j.axis+"]"),P.pv=P.dpv=j}function ia(j,P){d.DEBUG&&console.log(P.step,"SFVTCA["+j.axis+"]"),P.fv=j}function ul(j,P){var N,X=P.stack,U=X.pop(),X=X.pop(),ee=P.z2[U],te=P.z1[X];d.DEBUG&&console.log("SPVTL["+j+"]",U,X),U=j?(N=ee.y-te.y,te.x-ee.x):(N=te.x-ee.x,te.y-ee.y),P.pv=P.dpv=bo(N,U)}function Cs(j,P){var N,X=P.stack,U=X.pop(),X=X.pop(),ee=P.z2[U],te=P.z1[X];d.DEBUG&&console.log("SFVTL["+j+"]",U,X),U=j?(N=ee.y-te.y,te.x-ee.x):(N=te.x-ee.x,te.y-ee.y),P.fv=bo(N,U)}function wo(j){d.DEBUG&&console.log(j.step,"POP[]"),j.stack.pop()}function So(j,P){var N=P.stack.pop(),U=P.z0[N],X=P.fv,ee=P.pv,te=(d.DEBUG&&console.log(P.step,"MDAP["+j+"]",N),ee.distance(U,Es));j&&(te=P.round(te)),X.setRelative(U,Es,te,ee),X.touch(U),P.rp0=P.rp1=N}function cl(j,P){var N,U,X,ee=P.z2,te=ee.length-2;d.DEBUG&&console.log(P.step,"IUP["+j.axis+"]");for(var le=0;le<te;le++)N=ee[le],j.touched(N)||(U=N.prevTouched(j))!==N&&(U===(X=N.nextTouched(j))&&j.setRelative(N,N,j.distance(U,U,!1,!0),j,!0),j.interpolate(N,U,X,j))}function jo(j,P){for(var N=P.stack,U=j?P.rp1:P.rp2,X=(j?P.z0:P.z1)[U],ee=P.fv,te=P.pv,le=P.loop,ye=P.z2;le--;){var ve=N.pop(),Ce=ye[ve],Ne=te.distance(X,X,!1,!0);ee.setRelative(Ce,Ce,Ne,te),ee.touch(Ce),d.DEBUG&&console.log(P.step,(1<P.loop?"loop "+(P.loop-le)+": ":"")+"SHP["+(j?"rp1":"rp2")+"]",ve)}P.loop=1}function To(j,P){for(var N=P.stack,te=j?P.rp1:P.rp2,U=(j?P.z0:P.z1)[te],X=P.fv,ee=P.pv,te=N.pop(),le=P.z2[P.contours[te]],ye=le,ve=(d.DEBUG&&console.log(P.step,"SHC["+j+"]",te),ee.distance(U,U,!1,!0));ye!==U&&X.setRelative(ye,ye,ve,ee),(ye=ye.nextPointOnContour)!==le;);}function dl(j,P){var N,U,le=P.stack,X=j?P.rp1:P.rp2,X=(j?P.z0:P.z1)[X],ee=P.fv,te=P.pv,le=le.pop();switch(d.DEBUG&&console.log(P.step,"SHZ["+j+"]",le),le){case 0:N=P.tZone;break;case 1:N=P.gZone;break;default:throw new Error("Invalid zone")}for(var ye=te.distance(X,X,!1,!0),ve=N.length-2,Ce=0;Ce<ve;Ce++)U=N[Ce],ee.setRelative(U,U,ye,te)}function bn(j,P){var U=P.stack,N=U.pop()/64,U=U.pop(),X=P.z1[U],ee=P.z0[P.rp0],te=P.fv,le=P.pv;te.setRelative(X,ee,N,le),te.touch(X),d.DEBUG&&console.log(P.step,"MSIRP["+j+"]",N,U),P.rp1=P.rp0,P.rp2=U,j&&(P.rp0=U)}function ni(j,P){var N=P.stack,le=N.pop(),N=N.pop(),U=P.z0[N],X=P.fv,ee=P.pv,te=P.cvt[le],le=(d.DEBUG&&console.log(P.step,"MIAP["+j+"]",le,"(",te,")",N),ee.distance(U,Es));j&&(Math.abs(le-te)<P.cvCutIn&&(le=te),le=P.round(le)),X.setRelative(U,Es,le,ee),P.zp0===0&&(U.xo=U.x,U.yo=U.y),X.touch(U),P.rp0=P.rp1=N}function oa(j,P){var N=P.stack,U=N.pop(),X=P.z2[U];d.DEBUG&&console.log(P.step,"GC["+j+"]",U),N.push(64*P.dpv.distance(X,Es,j,!1))}function Di(j,P){var U=P.stack,N=U.pop(),U=U.pop(),X=P.z1[N],ee=P.z0[U],ee=P.dpv.distance(ee,X,j,j);d.DEBUG&&console.log(P.step,"MD["+j+"]",N,U,"->",ee),P.stack.push(Math.round(64*ee))}function hl(j,P){var N=P.stack,U=N.pop(),X=P.fv,ee=P.pv,te=P.ppem,le=P.deltaBase+16*(j-1),ye=P.deltaShift,ve=P.z0;d.DEBUG&&console.log(P.step,"DELTAP["+j+"]",U,N);for(var Ce=0;Ce<U;Ce++){var Ne=N.pop(),Pe=N.pop();le+((240&Pe)>>4)===te&&(0<=(Pe=(15&Pe)-8)&&Pe++,d.DEBUG&&console.log(P.step,"DELTAPFIX",Ne,"by",Pe*ye),Ne=ve[Ne],X.setRelative(Ne,Ne,Pe*ye,ee))}}function Ii(j,P){var N=P.stack,U=N.pop();d.DEBUG&&console.log(P.step,"ROUND[]"),N.push(64*P.round(U/64))}function ko(j,P){var N=P.stack,U=N.pop(),X=P.ppem,ee=P.deltaBase+16*(j-1),te=P.deltaShift;d.DEBUG&&console.log(P.step,"DELTAC["+j+"]",U,N);for(var le=0;le<U;le++){var ye=N.pop(),ve=N.pop();ee+((240&ve)>>4)===X&&(0<=(ve=(15&ve)-8)&&ve++,ve=ve*te,d.DEBUG&&console.log(P.step,"DELTACFIX",ye,"by",ve),P.cvt[ye]+=ve)}}function Li(j,P){var N,X=P.stack,U=X.pop(),X=X.pop(),ee=P.z2[U],te=P.z1[X];d.DEBUG&&console.log(P.step,"SDPVTL["+j+"]",U,X),U=j?(N=ee.y-te.y,te.x-ee.x):(N=te.x-ee.x,te.y-ee.y),P.dpv=bo(N,U)}function ts(j,P){var N=P.stack,U=P.prog,X=P.ip;d.DEBUG&&console.log(P.step,"PUSHB["+j+"]");for(var ee=0;ee<j;ee++)N.push(U[++X]);P.ip=X}function Ms(j,P){var N=P.ip,U=P.prog,X=P.stack;d.DEBUG&&console.log(P.ip,"PUSHW["+j+"]");for(var ee=0;ee<j;ee++){var te=U[++N]<<8|U[++N];32768&te&&(te=-(1+(65535^te))),X.push(te)}P.ip=N}function vt(j,P,N,U,X,ee){var te,le,ve=ee.stack,ye=j&&ve.pop(),ve=ve.pop(),Ce=ee.rp0,Ce=ee.z0[Ce],Ne=ee.z1[ve],Pe=ee.minDis,Se=ee.fv,Ye=ee.dpv,Be=te=Ye.distance(Ne,Ce,!0,!0),We=0<=Be?1:-1;Be=Math.abs(Be),j&&(le=ee.cvt[ye],U&&Math.abs(Be-le)<ee.cvCutIn&&(Be=le)),N&&Be<Pe&&(Be=Pe),U&&(Be=ee.round(Be)),Se.setRelative(Ne,Ce,We*Be,Ye),Se.touch(Ne),d.DEBUG&&console.log(ee.step,(j?"MIRP[":"MDRP[")+(P?"M":"m")+(N?">":"_")+(U?"R":"_")+(X===0?"Gr":X===1?"Bl":X===2?"Wh":"")+"]",j?ye+"("+ee.cvt[ye]+","+le+")":"",ve,"(d =",te,"->",We*Be,")"),ee.rp1=ee.rp0,ee.rp2=ve,P&&(ee.rp0=ve)}ks.prototype.exec=function(j,P){if(typeof P!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var N=this.font,U=this._prepState;if(!U||U.ppem!==P){var X=this._fpgmState;if(!X){es.prototype=Ri,(X=this._fpgmState=new es("fpgm",N.tables.fpgm)).funcs=[],X.font=N,d.DEBUG&&(console.log("---EXEC FPGM---"),X.step=-1);try{Ws(X)}catch(ve){return console.log("Hinting error in FPGM:"+ve),void(this._errorState=3)}}es.prototype=X,(U=this._prepState=new es("prep",N.tables.prep)).ppem=P;var ee=N.tables.cvt;if(ee)for(var te=U.cvt=new Array(ee.length),le=P/N.unitsPerEm,ye=0;ye<ee.length;ye++)te[ye]=ee[ye]*le;else U.cvt=[];d.DEBUG&&(console.log("---EXEC PREP---"),U.step=-1);try{Ws(U)}catch(ve){this._errorState<2&&console.log("Hinting error in PREP:"+ve),this._errorState=2}}if(!(1<this._errorState))try{return sd(j,U)}catch(ve){this._errorState<1&&(console.log("Hinting error:"+ve),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var sd=function(j,P){var N=P.ppem/P.font.unitsPerEm,U=N,X=j.components;if(es.prototype=P,X){for(var ee=P.font,te=[],le=[],ye=0;ye<X.length;ye++){var ve=X[ye],Ce=ee.glyphs.get(ve.glyphIndex),Ne=new es("glyf",Ce.instructions);d.DEBUG&&(console.log("---EXEC COMP "+ye+"---"),Ne.step=-1),xu(Ce,Ne,N,U);for(var Pe=Math.round(ve.dx*N),Se=Math.round(ve.dy*U),Ye=Ne.gZone,Be=Ne.contours,We=0;We<Ye.length;We++){var Fe=Ye[We];Fe.xTouched=Fe.yTouched=!1,Fe.xo=Fe.x=Fe.x+Pe,Fe.yo=Fe.y=Fe.y+Se}var Ue=te.length;te.push.apply(te,Ye);for(var wt=0;wt<Be.length;wt++)le.push(Be[wt]+Ue)}j.instructions&&!Ne.inhibitGridFit&&((Ne=new es("glyf",j.instructions)).gZone=Ne.z0=Ne.z1=Ne.z2=te,Ne.contours=le,te.push(new En(0,0),new En(Math.round(j.advanceWidth*N),0)),d.DEBUG&&(console.log("---EXEC COMPOSITE---"),Ne.step=-1),Ws(Ne),te.length-=2)}else Ne=new es("glyf",j.instructions),d.DEBUG&&(console.log("---EXEC GLYPH---"),Ne.step=-1),xu(j,Ne,N,U),te=Ne.gZone;return te},xu=function(j,P,N,U){for(var X,ee,te,le=j.points||[],ye=le.length,ve=P.gZone=P.z0=P.z1=P.z2=[],Ce=P.contours=[],Ne=0;Ne<ye;Ne++)X=le[Ne],ve[Ne]=new En(X.x*N,X.y*U,X.lastPointOfContour,X.onCurve);for(var Pe=0;Pe<ye;Pe++)X=ve[Pe],ee||(ee=X,Ce.push(Pe)),X.lastPointOfContour?((X.nextPointOnContour=ee).prevPointOnContour=X,ee=void 0):(te=ve[Pe+1],(X.nextPointOnContour=te).prevPointOnContour=X);if(!P.inhibitGridFit){if(d.DEBUG){console.log("PROCESSING GLYPH",P.stack);for(var Se=0;Se<ye;Se++)console.log(Se,ve[Se].x,ve[Se].y)}if(ve.push(new En(0,0),new En(Math.round(j.advanceWidth*N),0)),Ws(P),ve.length-=2,d.DEBUG){console.log("FINISHED GLYPH",P.stack);for(var Ye=0;Ye<ye;Ye++)console.log(Ye,ve[Ye].x,ve[Ye].y)}}},Ws=function(j){var P=j.prog;if(P){var N,U=P.length;for(j.ip=0;j.ip<U;j.ip++){if(d.DEBUG&&j.step++,!(N=id[P[j.ip]]))throw new Error("unknown instruction: 0x"+Number(P[j.ip]).toString(16));N(j)}}},id=[sa.bind(void 0,Fn),sa.bind(void 0,Jn),xo.bind(void 0,Fn),xo.bind(void 0,Jn),ia.bind(void 0,Fn),ia.bind(void 0,Jn),ul.bind(void 0,0),ul.bind(void 0,1),Cs.bind(void 0,0),Cs.bind(void 0,1),function(j){var P=(N=j.stack).pop(),N=N.pop();d.DEBUG&&console.log(j.step,"SPVFS[]",P,N),j.pv=j.dpv=bo(N,P)},function(j){var P=(N=j.stack).pop(),N=N.pop();d.DEBUG&&console.log(j.step,"SPVFS[]",P,N),j.fv=bo(N,P)},function(j){var P=j.stack,N=j.pv;d.DEBUG&&console.log(j.step,"GPV[]"),P.push(16384*N.x),P.push(16384*N.y)},function(j){var P=j.stack,N=j.fv;d.DEBUG&&console.log(j.step,"GFV[]"),P.push(16384*N.x),P.push(16384*N.y)},function(j){j.fv=j.pv,d.DEBUG&&console.log(j.step,"SFVTPV[]")},function(P){var N=(te=P.stack).pop(),U=te.pop(),X=te.pop(),ee=te.pop(),te=te.pop(),ye=P.z0,Ce=P.z1,le=ye[N],ye=ye[U],ve=Ce[X],Ce=Ce[ee],P=P.z2[te],N=(d.DEBUG&&console.log("ISECT[], ",N,U,X,ee,te),le.x),U=le.y,X=ye.x,ee=ye.y,te=ve.x,le=ve.y,ye=Ce.x,ve=Ce.y,Ce=(N-X)*(le-ve)-(U-ee)*(te-ye),Ne=N*ee-U*X,Pe=te*ve-le*ye;P.x=(Ne*(te-ye)-Pe*(N-X))/Ce,P.y=(Ne*(le-ve)-Pe*(U-ee))/Ce},function(j){j.rp0=j.stack.pop(),d.DEBUG&&console.log(j.step,"SRP0[]",j.rp0)},function(j){j.rp1=j.stack.pop(),d.DEBUG&&console.log(j.step,"SRP1[]",j.rp1)},function(j){j.rp2=j.stack.pop(),d.DEBUG&&console.log(j.step,"SRP2[]",j.rp2)},function(j){var P=j.stack.pop();switch(d.DEBUG&&console.log(j.step,"SZP0[]",P),j.zp0=P){case 0:j.tZone||na(j),j.z0=j.tZone;break;case 1:j.z0=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){var P=j.stack.pop();switch(d.DEBUG&&console.log(j.step,"SZP1[]",P),j.zp1=P){case 0:j.tZone||na(j),j.z1=j.tZone;break;case 1:j.z1=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){var P=j.stack.pop();switch(d.DEBUG&&console.log(j.step,"SZP2[]",P),j.zp2=P){case 0:j.tZone||na(j),j.z2=j.tZone;break;case 1:j.z2=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){var P=j.stack.pop();switch(d.DEBUG&&console.log(j.step,"SZPS[]",P),j.zp0=j.zp1=j.zp2=P){case 0:j.tZone||na(j),j.z0=j.z1=j.z2=j.tZone;break;case 1:j.z0=j.z1=j.z2=j.gZone;break;default:throw new Error("Invalid zone pointer")}},function(j){j.loop=j.stack.pop(),d.DEBUG&&console.log(j.step,"SLOOP[]",j.loop)},function(j){d.DEBUG&&console.log(j.step,"RTG[]"),j.round=Ai},function(j){d.DEBUG&&console.log(j.step,"RTHG[]"),j.round=nd},function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"SMD[]",P),j.minDis=P/64},function(j){d.DEBUG&&console.log(j.step,"ELSE[]"),bu(j,!1)},function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"JMPR[]",P),j.ip+=P-1},function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"SCVTCI[]",P),j.cvCutIn=P/64},void 0,void 0,function(j){var P=j.stack;d.DEBUG&&console.log(j.step,"DUP[]"),P.push(P[P.length-1])},wo,function(j){d.DEBUG&&console.log(j.step,"CLEAR[]"),j.stack.length=0},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"SWAP[]"),P.push(N),P.push(U)},function(j){var P=j.stack;d.DEBUG&&console.log(j.step,"DEPTH[]"),P.push(P.length)},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"CINDEX[]",N),P.push(P[P.length-N])},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"MINDEX[]",N),P.push(P.splice(P.length-N,1)[0])},void 0,void 0,void 0,function(j){var P=(U=j.stack).pop(),N=U.pop(),U=(d.DEBUG&&console.log(j.step,"LOOPCALL[]",P,N),j.ip),X=j.prog;j.prog=j.funcs[P];for(var ee=0;ee<N;ee++)Ws(j),d.DEBUG&&console.log(++j.step,ee+1<N?"next loopcall":"done loopcall",ee);j.ip=U,j.prog=X},function(j){var P=j.stack.pop(),N=(d.DEBUG&&console.log(j.step,"CALL[]",P),j.ip),U=j.prog;j.prog=j.funcs[P],Ws(j),j.ip=N,j.prog=U,d.DEBUG&&console.log(++j.step,"returning from",P)},function(j){if(j.env!=="fpgm")throw new Error("FDEF not allowed here");var U=j.stack,P=j.prog,N=j.ip,U=U.pop(),X=N;for(d.DEBUG&&console.log(j.step,"FDEF[]",U);P[++N]!==45;);j.ip=N,j.funcs[U]=P.slice(X+1,N)},void 0,So.bind(void 0,0),So.bind(void 0,1),cl.bind(void 0,Fn),cl.bind(void 0,Jn),jo.bind(void 0,0),jo.bind(void 0,1),To.bind(void 0,0),To.bind(void 0,1),dl.bind(void 0,0),dl.bind(void 0,1),function(j){for(var P=j.stack,N=j.loop,U=j.fv,X=P.pop()/64,ee=j.z2;N--;){var te=P.pop(),le=ee[te];d.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-N)+": ":"")+"SHPIX[]",te,X),U.setRelative(le,le,X),U.touch(le)}j.loop=1},function(j){for(var P=j.stack,N=j.rp1,U=j.rp2,X=j.loop,ee=j.z0[N],te=j.z1[U],le=j.fv,ye=j.dpv,ve=j.z2;X--;){var Ce=P.pop(),Ne=ve[Ce];d.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-X)+": ":"")+"IP[]",Ce,N,"<->",U),le.interpolate(Ne,ee,te,ye),le.touch(Ne)}j.loop=1},bn.bind(void 0,0),bn.bind(void 0,1),function(j){for(var P=j.stack,N=j.rp0,U=j.z0[N],X=j.loop,ee=j.fv,te=j.pv,le=j.z1;X--;){var ye=P.pop(),ve=le[ye];d.DEBUG&&console.log(j.step,(1<j.loop?"loop "+(j.loop-X)+": ":"")+"ALIGNRP[]",ye),ee.setRelative(ve,U,0,te),ee.touch(ve)}j.loop=1},function(j){d.DEBUG&&console.log(j.step,"RTDG[]"),j.round=qs},ni.bind(void 0,0),ni.bind(void 0,1),function(j){var P=j.prog,N=j.ip,U=j.stack,X=P[++N];d.DEBUG&&console.log(j.step,"NPUSHB[]",X);for(var ee=0;ee<X;ee++)U.push(P[++N]);j.ip=N},function(j){var P=j.ip,N=j.prog,U=j.stack,X=N[++P];d.DEBUG&&console.log(j.step,"NPUSHW[]",X);for(var ee=0;ee<X;ee++){var te=N[++P]<<8|N[++P];32768&te&&(te=-(1+(65535^te))),U.push(te)}j.ip=P},function(j){var U=j.stack,P=(P=j.store)||(j.store=[]),N=U.pop(),U=U.pop();d.DEBUG&&console.log(j.step,"WS",N,U),P[U]=N},function(X){var P=X.stack,N=X.store,U=P.pop(),X=(d.DEBUG&&console.log(X.step,"RS",U),N&&N[U]||0);P.push(X)},function(j){var P=(N=j.stack).pop(),N=N.pop();d.DEBUG&&console.log(j.step,"WCVTP",P,N),j.cvt[N]=P/64},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"RCVT",N),P.push(64*j.cvt[N])},oa.bind(void 0,0),oa.bind(void 0,1),void 0,Di.bind(void 0,0),Di.bind(void 0,1),function(j){d.DEBUG&&console.log(j.step,"MPPEM[]"),j.stack.push(j.ppem)},void 0,function(j){d.DEBUG&&console.log(j.step,"FLIPON[]"),j.autoFlip=!0},void 0,void 0,function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"LT[]",N,U),P.push(U<N?1:0)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"LTEQ[]",N,U),P.push(U<=N?1:0)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"GT[]",N,U),P.push(N<U?1:0)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"GTEQ[]",N,U),P.push(N<=U?1:0)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"EQ[]",N,U),P.push(N===U?1:0)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"NEQ[]",N,U),P.push(N!==U?1:0)},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"ODD[]",N),P.push(Math.trunc(N)%2?1:0)},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"EVEN[]",N),P.push(Math.trunc(N)%2?0:1)},function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"IF[]",P),P||(bu(j,!0),d.DEBUG&&console.log(j.step,"EIF[]"))},function(j){d.DEBUG&&console.log(j.step,"EIF[]")},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"AND[]",N,U),P.push(N&&U?1:0)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"OR[]",N,U),P.push(N||U?1:0)},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"NOT[]",N),P.push(N?0:1)},hl.bind(void 0,1),function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"SDB[]",P),j.deltaBase=P},function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"SDS[]",P),j.deltaShift=Math.pow(.5,P)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"ADD[]",N,U),P.push(U+N)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"SUB[]",N,U),P.push(U-N)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"DIV[]",N,U),P.push(64*U/N)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"MUL[]",N,U),P.push(U*N/64)},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"ABS[]",N),P.push(Math.abs(N))},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"NEG[]",N),P.push(-N)},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"FLOOR[]",N),P.push(64*Math.floor(N/64))},function(j){var P=j.stack,N=P.pop();d.DEBUG&&console.log(j.step,"CEILING[]",N),P.push(64*Math.ceil(N/64))},Ii.bind(void 0,0),Ii.bind(void 0,1),Ii.bind(void 0,2),Ii.bind(void 0,3),void 0,void 0,void 0,void 0,function(j){var P=(N=j.stack).pop(),N=N.pop();d.DEBUG&&console.log(j.step,"WCVTF[]",P,N),j.cvt[N]=P*j.ppem/j.font.unitsPerEm},hl.bind(void 0,2),hl.bind(void 0,3),ko.bind(void 0,1),ko.bind(void 0,2),ko.bind(void 0,3),function(j){var P,N=j.stack.pop();switch(d.DEBUG&&console.log(j.step,"SROUND[]",N),j.round=_u,192&N){case 0:P=.5;break;case 64:P=1;break;case 128:P=2;break;default:throw new Error("invalid SROUND value")}switch(j.srPeriod=P,48&N){case 0:j.srPhase=0;break;case 16:j.srPhase=.25*P;break;case 32:j.srPhase=.5*P;break;case 48:j.srPhase=.75*P;break;default:throw new Error("invalid SROUND value")}j.srThreshold=(N&=15)===0?0:(N/8-.5)*P},function(j){var P,N=j.stack.pop();switch(d.DEBUG&&console.log(j.step,"S45ROUND[]",N),j.round=_u,192&N){case 0:P=Math.sqrt(2)/2;break;case 64:P=Math.sqrt(2);break;case 128:P=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(j.srPeriod=P,48&N){case 0:j.srPhase=0;break;case 16:j.srPhase=.25*P;break;case 32:j.srPhase=.5*P;break;case 48:j.srPhase=.75*P;break;default:throw new Error("invalid S45ROUND value")}j.srThreshold=(N&=15)===0?0:(N/8-.5)*P},void 0,void 0,function(j){d.DEBUG&&console.log(j.step,"ROFF[]"),j.round=vo},void 0,function(j){d.DEBUG&&console.log(j.step,"RUTG[]"),j.round=vu},function(j){d.DEBUG&&console.log(j.step,"RDTG[]"),j.round=_o},wo,wo,void 0,void 0,void 0,void 0,void 0,function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"SCANCTRL[]",P)},Li.bind(void 0,0),Li.bind(void 0,1),function(j){var P=j.stack,N=P.pop(),U=0;d.DEBUG&&console.log(j.step,"GETINFO[]",N),1&N&&(U=35),32&N&&(U|=4096),P.push(U)},void 0,function(j){var P=j.stack,N=P.pop(),U=P.pop(),X=P.pop();d.DEBUG&&console.log(j.step,"ROLL[]"),P.push(U),P.push(N),P.push(X)},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"MAX[]",N,U),P.push(Math.max(U,N))},function(j){var P=j.stack,N=P.pop(),U=P.pop();d.DEBUG&&console.log(j.step,"MIN[]",N,U),P.push(Math.min(U,N))},function(j){var P=j.stack.pop();d.DEBUG&&console.log(j.step,"SCANTYPE[]",P)},function(j){var P=j.stack.pop(),N=j.stack.pop();switch(d.DEBUG&&console.log(j.step,"INSTCTRL[]",P,N),P){case 1:return void(j.inhibitGridFit=!!N);case 2:return void(j.ignoreCvt=!!N);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ts.bind(void 0,1),ts.bind(void 0,2),ts.bind(void 0,3),ts.bind(void 0,4),ts.bind(void 0,5),ts.bind(void 0,6),ts.bind(void 0,7),ts.bind(void 0,8),Ms.bind(void 0,1),Ms.bind(void 0,2),Ms.bind(void 0,3),Ms.bind(void 0,4),Ms.bind(void 0,5),Ms.bind(void 0,6),Ms.bind(void 0,7),Ms.bind(void 0,8),vt.bind(void 0,0,0,0,0,0),vt.bind(void 0,0,0,0,0,1),vt.bind(void 0,0,0,0,0,2),vt.bind(void 0,0,0,0,0,3),vt.bind(void 0,0,0,0,1,0),vt.bind(void 0,0,0,0,1,1),vt.bind(void 0,0,0,0,1,2),vt.bind(void 0,0,0,0,1,3),vt.bind(void 0,0,0,1,0,0),vt.bind(void 0,0,0,1,0,1),vt.bind(void 0,0,0,1,0,2),vt.bind(void 0,0,0,1,0,3),vt.bind(void 0,0,0,1,1,0),vt.bind(void 0,0,0,1,1,1),vt.bind(void 0,0,0,1,1,2),vt.bind(void 0,0,0,1,1,3),vt.bind(void 0,0,1,0,0,0),vt.bind(void 0,0,1,0,0,1),vt.bind(void 0,0,1,0,0,2),vt.bind(void 0,0,1,0,0,3),vt.bind(void 0,0,1,0,1,0),vt.bind(void 0,0,1,0,1,1),vt.bind(void 0,0,1,0,1,2),vt.bind(void 0,0,1,0,1,3),vt.bind(void 0,0,1,1,0,0),vt.bind(void 0,0,1,1,0,1),vt.bind(void 0,0,1,1,0,2),vt.bind(void 0,0,1,1,0,3),vt.bind(void 0,0,1,1,1,0),vt.bind(void 0,0,1,1,1,1),vt.bind(void 0,0,1,1,1,2),vt.bind(void 0,0,1,1,1,3),vt.bind(void 0,1,0,0,0,0),vt.bind(void 0,1,0,0,0,1),vt.bind(void 0,1,0,0,0,2),vt.bind(void 0,1,0,0,0,3),vt.bind(void 0,1,0,0,1,0),vt.bind(void 0,1,0,0,1,1),vt.bind(void 0,1,0,0,1,2),vt.bind(void 0,1,0,0,1,3),vt.bind(void 0,1,0,1,0,0),vt.bind(void 0,1,0,1,0,1),vt.bind(void 0,1,0,1,0,2),vt.bind(void 0,1,0,1,0,3),vt.bind(void 0,1,0,1,1,0),vt.bind(void 0,1,0,1,1,1),vt.bind(void 0,1,0,1,1,2),vt.bind(void 0,1,0,1,1,3),vt.bind(void 0,1,1,0,0,0),vt.bind(void 0,1,1,0,0,1),vt.bind(void 0,1,1,0,0,2),vt.bind(void 0,1,1,0,0,3),vt.bind(void 0,1,1,0,1,0),vt.bind(void 0,1,1,0,1,1),vt.bind(void 0,1,1,0,1,2),vt.bind(void 0,1,1,0,1,3),vt.bind(void 0,1,1,1,0,0),vt.bind(void 0,1,1,1,0,1),vt.bind(void 0,1,1,1,0,2),vt.bind(void 0,1,1,1,0,3),vt.bind(void 0,1,1,1,1,0),vt.bind(void 0,1,1,1,1,1),vt.bind(void 0,1,1,1,1,2),vt.bind(void 0,1,1,1,1,3)],od=Array.from||function(j){return j.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function or(j){(j=j||{}).empty||(ri(j.familyName,"When creating a new Font object, familyName is required."),ri(j.styleName,"When creating a new Font object, styleName is required."),ri(j.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),ri(j.ascender,"When creating a new Font object, ascender is required."),ri(j.descender,"When creating a new Font object, descender is required."),ri(j.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:j.familyName||" "},fontSubfamily:{en:j.styleName||" "},fullName:{en:j.fullName||j.familyName+" "+j.styleName},postScriptName:{en:j.postScriptName||(j.familyName+j.styleName).replace(/\s/g,"")},designer:{en:j.designer||" "},designerURL:{en:j.designerURL||" "},manufacturer:{en:j.manufacturer||" "},manufacturerURL:{en:j.manufacturerURL||" "},license:{en:j.license||" "},licenseURL:{en:j.licenseURL||" "},version:{en:j.version||"Version 0.1"},description:{en:j.description||" "},copyright:{en:j.copyright||" "},trademark:{en:j.trademark||" "}},this.unitsPerEm=j.unitsPerEm||1e3,this.ascender=j.ascender,this.descender=j.descender,this.createdTimestamp=j.createdTimestamp,this.tables={os2:{usWeightClass:j.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:j.widthClass||this.usWidthClasses.MEDIUM,fsSelection:j.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new gt.GlyphSet(this,j.glyphs||[]),this.encoding=new De(this),this.position=new Zt(this),this.substitution=new Kn(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new ks(this):void 0)}})}function wu(j,P){var N,U=JSON.stringify(j),X=256;for(N in P){var ee=parseInt(N);if(ee&&!(ee<256)){if(JSON.stringify(P[N])===U)return ee;X<=ee&&(X=ee+1)}}return P[X]=j,X}or.prototype.hasChar=function(j){return this.encoding.charToGlyphIndex(j)!==null},or.prototype.charToGlyphIndex=function(j){return this.encoding.charToGlyphIndex(j)},or.prototype.charToGlyph=function(j){return j=this.charToGlyphIndex(j),this.glyphs.get(j)||this.glyphs.get(0)},or.prototype.stringToGlyphs=function(j,P){P=P||this.defaultRenderOptions;for(var N=od(j),U=[],X=0;X<N.length;X+=1){var ee=N[X];U.push(this.charToGlyphIndex(ee))}var te=U.length;if(P.features){var j=P.script||this.substitution.getDefaultScriptName(),le=[];P.features.liga&&(le=le.concat(this.substitution.getFeature("liga",j,P.language))),P.features.rlig&&(le=le.concat(this.substitution.getFeature("rlig",j,P.language)));for(var ye=0;ye<te;ye+=1)for(var ve=0;ve<le.length;ve++){for(var Ce=le[ve],Ne=Ce.sub,Pe=Ne.length,Se=0;Se<Pe&&Ne[Se]===U[ye+Se];)Se++;Se===Pe&&(U.splice(ye,Pe,Ce.by),te=te-Pe+1)}}for(var Ye=new Array(te),Be=this.glyphs.get(0),We=0;We<te;We+=1)Ye[We]=this.glyphs.get(U[We])||Be;return Ye},or.prototype.nameToGlyphIndex=function(j){return this.glyphNames.nameToGlyphIndex(j)},or.prototype.nameToGlyph=function(j){return j=this.nameToGlyphIndex(j),this.glyphs.get(j)||this.glyphs.get(0)},or.prototype.glyphIndexToName=function(j){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(j):""},or.prototype.getKerningValue=function(j,P){j=j.index||j,P=P.index||P;var N=this.position.defaultKerningTables;return N?this.position.getKerningValue(N,j,P):this.kerningPairs[j+","+P]||0},or.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},or.prototype.forEachGlyph=function(j,P,N,U,X,ee){P=P!==void 0?P:0,N=N!==void 0?N:0,X=X||this.defaultRenderOptions;var te,le=1/this.unitsPerEm*(U=U!==void 0?U:72),ye=this.stringToGlyphs(j,X);X.kerning&&(j=X.script||this.position.getDefaultScriptName(),te=this.position.getKerningTables(j,X.language));for(var ve=0;ve<ye.length;ve+=1){var Ce=ye[ve];ee.call(this,Ce,P,N,U,X),Ce.advanceWidth&&(P+=Ce.advanceWidth*le),X.kerning&&ve<ye.length-1&&(P+=(te?this.position.getKerningValue(te,Ce.index,ye[ve+1].index):this.getKerningValue(Ce,ye[ve+1]))*le),X.letterSpacing?P+=X.letterSpacing*U:X.tracking&&(P+=X.tracking/1e3*U)}return P},or.prototype.getPath=function(j,P,N,U,X){var ee=new Q;return this.forEachGlyph(j,P,N,U,X,function(te,le,ye,ve){te=te.getPath(le,ye,ve,X,this),ee.extend(te)}),ee},or.prototype.getPaths=function(j,P,N,U,X){var ee=[];return this.forEachGlyph(j,P,N,U,X,function(te,le,ye,ve){te=te.getPath(le,ye,ve,X,this),ee.push(te)}),ee},or.prototype.getAdvanceWidth=function(j,P,N){return this.forEachGlyph(j,0,0,P,N,function(){})},or.prototype.draw=function(j,P,N,U,X,ee){this.getPath(P,N,U,X,ee).draw(j)},or.prototype.drawPoints=function(j,P,N,U,X,ee){this.forEachGlyph(P,N,U,X,ee,function(te,le,ye,ve){te.drawPoints(j,le,ye,ve)})},or.prototype.drawMetrics=function(j,P,N,U,X,ee){this.forEachGlyph(P,N,U,X,ee,function(te,le,ye,ve){te.drawMetrics(j,le,ye,ve)})},or.prototype.getEnglishName=function(j){if(j=this.names[j],j)return j.en},or.prototype.validate=function(){var j=this;function P(N){N=j.getEnglishName(N),N&&N.trim().length}P("fontFamily"),P("weightName"),P("manufacturer"),P("copyright"),P("version"),this.unitsPerEm},or.prototype.toTables=function(){return mu.fontToTable(this)},or.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},or.prototype.toArrayBuffer=function(){for(var j=this.toTables().encode(),P=new ArrayBuffer(j.length),N=new Uint8Array(P),U=0;U<j.length;U++)N[U]=j[U];return P},or.prototype.download=function(j){var P=this.getEnglishName("fontFamily"),N=this.getEnglishName("fontSubfamily"),U=(j=j||P.replace(/\s/g,"")+"-"+N+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,U.byteLength,function(X){X.root.getFile(j,{create:!0},function(ee){ee.createWriter(function(te){var le=new DataView(U),le=new Blob([le],{type:"font/opentype"});te.write(le),te.addEventListener("writeend",function(){location.href=ee.toURL()},!1)})})},function(X){throw new Error(X.name+": "+X.message)})):(P=t("fs"),N=function(X){for(var ee=new u(X.byteLength),te=new Uint8Array(X),le=0;le<ee.length;++le)ee[le]=te[le];return ee}(U),P.writeFileSync(j,N))},or.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},or.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},or.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var ad={make:function(j,P){var N=new Ie.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:j.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:j.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*j.axes.length}]);N.offsetToData=N.sizeOf();for(var U,X,ee,te=0;te<j.axes.length;te++)N.fields=N.fields.concat((U=te,X=j.axes[te],ee=P,ee=wu(X.name,P),[{name:"tag_"+U,type:"TAG",value:X.tag},{name:"minValue_"+U,type:"FIXED",value:X.minValue<<16},{name:"defaultValue_"+U,type:"FIXED",value:X.defaultValue<<16},{name:"maxValue_"+U,type:"FIXED",value:X.maxValue<<16},{name:"flags_"+U,type:"USHORT",value:0},{name:"nameID_"+U,type:"USHORT",value:ee}]));for(var le=0;le<j.instances.length;le++)N.fields=N.fields.concat(function(ye,ve,Ce,Ne){for(var Pe=[{name:"nameID_"+ye,type:"USHORT",value:wu(ve.name,Ne)},{name:"flags_"+ye,type:"USHORT",value:0}],Se=0;Se<Ce.length;++Se){var Ye=Ce[Se].tag;Pe.push({name:"axis_"+ye+" "+Ye,type:"FIXED",value:ve.coordinates[Ye]<<16})}return Pe}(le,j.instances[le],j.axes,P));return N},parse:function(j,P,N){for(var U,X,ee,te,le=new Le.Parser(j,P),ye=le.parseULong(),ve=(z.argument(ye===65536,"Unsupported fvar table version."),le.parseOffset16()),Ce=(le.skip("uShort",1),le.parseUShort()),Ne=le.parseUShort(),Pe=le.parseUShort(),Se=le.parseUShort(),Ye=[],Be=0;Be<Ce;Be++)Ye.push((U=j,X=P+ve+Be*Ne,ee=N,te={},U=new Le.Parser(U,X),te.tag=U.parseTag(),te.minValue=U.parseFixed(),te.defaultValue=U.parseFixed(),te.maxValue=U.parseFixed(),U.skip("uShort",1),te.name=ee[U.parseUShort()]||{},te));for(var We=[],Fe=P+ve+Ce*Ne,Ue=0;Ue<Pe;Ue++)We.push(function(wt,Nt,_t,xt){var zt={},er=new Le.Parser(wt,Nt);zt.name=xt[er.parseUShort()]||{},er.skip("uShort",1),zt.coordinates={};for(var wr=0;wr<_t.length;++wr)zt.coordinates[_t[wr].tag]=er.parseFixed();return zt}(j,Fe+Ue*Se,Ye,N));return{axes:Ye,instances:We}}},Un=new Array(10);Un[1]=function(){var j=this.offset+this.relativeOffset,P=this.parseUShort();return P===1?{posFormat:1,coverage:this.parsePointer(Ae.coverage),value:this.parseValueRecord()}:P===2?{posFormat:2,coverage:this.parsePointer(Ae.coverage),values:this.parseValueRecordList()}:void z.assert(!1,"0x"+j.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Un[2]=function(){var j,P,N,U,ee=this.offset+this.relativeOffset,X=this.parseUShort(),ee=(z.assert(X===1||X===2,"0x"+ee.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Ae.coverage)),te=this.parseUShort(),le=this.parseUShort();return X===1?{posFormat:X,coverage:ee,valueFormat1:te,valueFormat2:le,pairSets:this.parseList(Ae.pointer(Ae.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(te),value2:this.parseValueRecord(le)}})))}:X===2?(j=this.parsePointer(Ae.classDef),P=this.parsePointer(Ae.classDef),N=this.parseUShort(),U=this.parseUShort(),{posFormat:X,coverage:ee,valueFormat1:te,valueFormat2:le,classDef1:j,classDef2:P,class1Count:N,class2Count:U,classRecords:this.parseList(N,Ae.list(U,function(){return{value1:this.parseValueRecord(te),value2:this.parseValueRecord(le)}}))}):void 0},Un[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Un[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Un[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Un[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Un[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Un[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Un[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var ld=new Array(10),ud={parse:function(j,P){return P=(j=new Ae(j,P=P||0)).parseVersion(1),z.argument(P===1||P===1.1,"Unsupported GPOS table version "+P),P===1?{version:P,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList(Un)}:{version:P,scripts:j.parseScriptList(),features:j.parseFeatureList(),lookups:j.parseLookupList(Un),variations:j.parseFeatureVariationsList()}},make:function(j){return new Ie.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Ie.ScriptList(j.scripts)},{name:"features",type:"TABLE",value:new Ie.FeatureList(j.features)},{name:"lookups",type:"TABLE",value:new Ie.LookupList(j.lookups,ld)}])}},cd={parse:function(j,P){if(j=new Le.Parser(j,P),(P=j.parseUShort())===0){var N=j,U={},Ne=(N.skip("uShort"),N.parseUShort()),X=(z.argument(Ne===0,"Unsupported kern sub-table version."),N.skip("uShort",2),N.parseUShort());N.skip("uShort",3);for(var ee=0;ee<X;ee+=1){var te=N.parseUShort(),le=N.parseUShort(),ye=N.parseShort();U[te+","+le]=ye}return U}if(P!==1)throw new Error("Unsupported kern table version ("+P+").");var ve=j,Ce={},Ne=(ve.skip("uShort"),1<ve.parseULong()&&console.warn("Only the first kern subtable is supported."),ve.skip("uLong"),255&ve.parseUShort());if(ve.skip("uShort"),Ne==0){var Pe=ve.parseUShort();ve.skip("uShort",3);for(var Se=0;Se<Pe;Se+=1){var Ye=ve.parseUShort(),Be=ve.parseUShort(),We=ve.parseShort();Ce[Ye+","+Be]=We}}return Ce}},dd={parse:function(j,P,N,U){for(var X=new Le.Parser(j,P),ee=U?X.parseUShort:X.parseULong,te=[],le=0;le<N+1;le+=1){var ye=ee.call(X);U&&(ye*=2),te.push(ye)}return te}};function fl(j,P){t("fs").readFile(j,function(N,U){if(N)return P(N.message);P(null,ra(U))})}function hd(j,P){var N=new XMLHttpRequest;N.open("get",j,!0),N.responseType="arraybuffer",N.onload=function(){return N.response?P(null,N.response):P("Font could not be loaded: "+N.statusText)},N.onerror=function(){P("Font could not be loaded")},N.send()}function Su(j,P){for(var N=[],U=12,X=0;X<P;X+=1){var ee=Le.getTag(j,U),te=Le.getULong(j,U+4),le=Le.getULong(j,U+8),ye=Le.getULong(j,U+12);N.push({tag:ee,checksum:te,offset:le,length:ye,compression:!1}),U+=16}return N}function Dr(N,P){if(P.compression!=="WOFF")return{data:N,offset:P.offset};var N=new Uint8Array(N.buffer,P.offset+2,P.compressedLength-2),U=new Uint8Array(P.length);if(H(N,U),U.byteLength!==P.length)throw new Error("Decompression error: "+P.tag+" decompressed length doesn't match recorded length");return{data:new DataView(U.buffer,0),offset:0}}function aa(Ue){var P,N,U,X,ee,te,le,ye,ve,Ce,Ne,Pe,Se,Ye,Be=new or({empty:!0}),We=new DataView(Ue,0),Fe=[],Ue=Le.getTag(We,0);if(Ue==="\0\0\0"||Ue==="true"||Ue==="typ1")Be.outlinesFormat="truetype",Fe=Su(We,U=Le.getUShort(We,4));else if(Ue==="OTTO")Be.outlinesFormat="cff",Fe=Su(We,U=Le.getUShort(We,4));else{if(Ue!=="wOFF")throw new Error("Unsupported OpenType signature "+Ue);var wt=Le.getTag(We,4);if(wt==="\0\0\0")Be.outlinesFormat="truetype";else{if(wt!=="OTTO")throw new Error("Unsupported OpenType flavor "+Ue);Be.outlinesFormat="cff"}Fe=function(ar,tr){for(var sn=[],yr=44,$r=0;$r<tr;$r+=1){var dr=Le.getTag(ar,yr),nr=Le.getULong(ar,yr+4),Os=Le.getULong(ar,yr+8),si=Le.getULong(ar,yr+12),pl=void 0,pl=Os<si&&"WOFF";sn.push({tag:dr,offset:nr,compression:pl,compressedLength:Os,length:si}),yr+=20}return sn}(We,U=Le.getUShort(We,12))}for(var Nt=0;Nt<U;Nt+=1){var _t=Fe[Nt],xt=void 0;switch(_t.tag){case"cmap":xt=Dr(We,_t),Be.tables.cmap=oe.parse(xt.data,xt.offset),Be.encoding=new Ge(Be.tables.cmap);break;case"cvt ":xt=Dr(We,_t),Ye=new Le.Parser(xt.data,xt.offset),Be.tables.cvt=Ye.parseShortList(_t.length/2);break;case"fvar":ee=_t;break;case"fpgm":xt=Dr(We,_t),Ye=new Le.Parser(xt.data,xt.offset),Be.tables.fpgm=Ye.parseByteList(_t.length);break;case"head":xt=Dr(We,_t),Be.tables.head=Ti.parse(xt.data,xt.offset),Be.unitsPerEm=Be.tables.head.unitsPerEm,P=Be.tables.head.indexToLocFormat;break;case"hhea":xt=Dr(We,_t),Be.tables.hhea=je.parse(xt.data,xt.offset),Be.ascender=Be.tables.hhea.ascender,Be.descender=Be.tables.hhea.descender,Be.numberOfHMetrics=Be.tables.hhea.numberOfHMetrics;break;case"hmtx":ve=_t;break;case"ltag":xt=Dr(We,_t),N=pt.parse(xt.data,xt.offset);break;case"maxp":xt=Dr(We,_t),Be.tables.maxp=$e.parse(xt.data,xt.offset),Be.numGlyphs=Be.tables.maxp.numGlyphs;break;case"name":Pe=_t;break;case"OS/2":xt=Dr(We,_t),Be.tables.os2=Wr.parse(xt.data,xt.offset);break;case"post":xt=Dr(We,_t),Be.tables.post=Nn.parse(xt.data,xt.offset),Be.glyphNames=new it(Be.tables.post);break;case"prep":xt=Dr(We,_t),Ye=new Le.Parser(xt.data,xt.offset),Be.tables.prep=Ye.parseByteList(_t.length);break;case"glyf":te=_t;break;case"loca":Ne=_t;break;case"CFF ":X=_t;break;case"kern":Ce=_t;break;case"GPOS":le=_t;break;case"GSUB":ye=_t;break;case"meta":Se=_t}}if(wt=Dr(We,Pe),Be.tables.name=nn.parse(wt.data,wt.offset,N),Be.names=Be.tables.name,te&&Ne)Ue=P===0,wt=Dr(We,Ne),wt=dd.parse(wt.data,wt.offset,Be.numGlyphs,Ue),Ue=Dr(We,te),Be.glyphs=Ts.parse(Ue.data,Ue.offset,wt,Be);else{if(!X)throw new Error("Font doesn't contain TrueType or CFF outlines.");Ue=Dr(We,X),Zn.parse(Ue.data,Ue.offset,Be)}for(var wt=Dr(We,ve),zt=(Je.parse(wt.data,wt.offset,Be.numberOfHMetrics,Be.numGlyphs,Be.glyphs),Be),er=zt.tables.cmap.glyphIndexMap,wr=Object.keys(er),Mr=0;Mr<wr.length;Mr+=1){var Hr,Xr=wr[Mr],Bn=er[Xr];(Hr=zt.glyphs.get(Bn)).addUnicode(parseInt(Xr))}for(var rr=0;rr<zt.glyphs.length;rr+=1)Hr=zt.glyphs.get(rr),zt.cffEncoding?zt.isCIDFont?Hr.name="gid"+rr:Hr.name=zt.cffEncoding.charset[rr]:zt.glyphNames.names&&(Hr.name=zt.glyphNames.glyphIndexToName(rr));return Ce?(Ue=Dr(We,Ce),Be.kerningPairs=cd.parse(Ue.data,Ue.offset)):Be.kerningPairs={},le&&(wt=Dr(We,le),Be.tables.gpos=ud.parse(wt.data,wt.offset),Be.position.init()),ye&&(Ue=Dr(We,ye),Be.tables.gsub=fo.parse(Ue.data,Ue.offset)),ee&&(wt=Dr(We,ee),Be.tables.fvar=ad.parse(wt.data,wt.offset,Be.names)),Se&&(Ue=Dr(We,Se),Be.tables.meta=po.parse(Ue.data,Ue.offset),Be.metas=Be.tables.meta),Be}d.Font=or,d.Glyph=ht,d.Path=Q,d.BoundingBox=K,d._parse=Le,d.parse=aa,d.load=function(j,P){(typeof window>"u"?fl:hd)(j,function(N,U){if(N)return P(N);var X;try{X=aa(U)}catch(ee){return P(ee,null)}return P(null,X)})},d.loadSync=function(j){return aa(ra(t("fs").readFileSync(j)))},Object.defineProperty(d,"__esModule",{value:!0})},s(typeof f=="object"&&x!==void 0?f:c.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],258:[function(t,x,f){(function(u){function c(m,v){for(var i=0,n=m.length-1;0<=n;n--){var a=m[n];a==="."?m.splice(n,1):a===".."?(m.splice(n,1),i++):i&&(m.splice(n,1),i--)}if(v)for(;i--;)m.unshift("..");return m}function s(m,v){if(m.filter)return m.filter(v);for(var i=[],n=0;n<m.length;n++)v(m[n],n,m)&&i.push(m[n]);return i}f.resolve=function(){for(var m="",v=!1,i=arguments.length-1;-1<=i&&!v;i--){var n=0<=i?arguments[i]:u.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");n&&(m=n+"/"+m,v=n.charAt(0)==="/")}return(v?"/":"")+(m=c(s(m.split("/"),function(a){return!!a}),!v).join("/"))||"."},f.normalize=function(m){var v=f.isAbsolute(m),i=d(m,-1)==="/";return(m=(m=c(s(m.split("/"),function(n){return!!n}),!v).join("/"))||v?m:".")&&i&&(m+="/"),(v?"/":"")+m},f.isAbsolute=function(m){return m.charAt(0)==="/"},f.join=function(){var m=Array.prototype.slice.call(arguments,0);return f.normalize(s(m,function(v,i){if(typeof v!="string")throw new TypeError("Arguments to path.join must be strings");return v}).join("/"))},f.relative=function(m,v){function i(w){for(var b=0;b<w.length&&w[b]==="";b++);for(var S=w.length-1;0<=S&&w[S]==="";S--);return S<b?[]:w.slice(b,S-b+1)}m=f.resolve(m).substr(1),v=f.resolve(v).substr(1);for(var n=i(m.split("/")),a=i(v.split("/")),o=Math.min(n.length,a.length),h=o,p=0;p<o;p++)if(n[p]!==a[p]){h=p;break}for(var y=[],p=h;p<n.length;p++)y.push("..");return(y=y.concat(a.slice(h))).join("/")},f.sep="/",f.delimiter=":",f.dirname=function(m){if(typeof m!="string"&&(m+=""),m.length===0)return".";for(var v=m.charCodeAt(0)===47,i=-1,n=!0,a=m.length-1;1<=a;--a)if(m.charCodeAt(a)===47){if(!n){i=a;break}}else n=!1;return i===-1?v?"/":".":v&&i===1?"/":m.slice(0,i)},f.basename=function(m,v){return m=function(i){typeof i!="string"&&(i+="");for(var n=0,a=-1,o=!0,h=i.length-1;0<=h;--h)if(i.charCodeAt(h)===47){if(!o){n=h+1;break}}else a===-1&&(o=!1,a=h+1);return a===-1?"":i.slice(n,a)}(m),m=v&&m.substr(-1*v.length)===v?m.substr(0,m.length-v.length):m},f.extname=function(m){typeof m!="string"&&(m+="");for(var v=-1,i=0,n=-1,a=!0,o=0,h=m.length-1;0<=h;--h){var p=m.charCodeAt(h);if(p===47){if(a)continue;i=h+1;break}n===-1&&(a=!1,n=h+1),p===46?v===-1?v=h:o!==1&&(o=1):v!==-1&&(o=-1)}return v===-1||n===-1||o===0||o===1&&v===n-1&&v===i+1?"":m.slice(v,n)};var d="ab".substr(-1)==="b"?function(m,v,i){return m.substr(v,i)}:function(m,v,i){return v<0&&(v=m.length+v),m.substr(v,i)}}).call(this,t("_process"))},{_process:259}],259:[function(t,s,f){var u,c,s=s.exports={};function d(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}try{u=typeof setTimeout=="function"?setTimeout:d}catch{u=d}try{c=typeof clearTimeout=="function"?clearTimeout:m}catch{c=m}function v(b){if(u===setTimeout)return setTimeout(b,0);if((u===d||!u)&&setTimeout)return(u=setTimeout)(b,0);try{return u(b,0)}catch{try{return u.call(null,b,0)}catch{return u.call(this,b,0)}}}var i,n=[],a=!1,o=-1;function h(){a&&i&&(a=!1,i.length?n=i.concat(n):o=-1,n.length&&p())}function p(){if(!a){for(var b=v(h),S=(a=!0,n.length);S;){for(i=n,n=[];++o<S;)i&&i[o].run();o=-1,S=n.length}i=null,a=!1,function(k){if(c===clearTimeout)return clearTimeout(k);if((c===m||!c)&&clearTimeout)return(c=clearTimeout)(k);try{c(k)}catch{try{return c.call(null,k)}catch{return c.call(this,k)}}}(b)}}function y(b,S){this.fun=b,this.array=S}function w(){}s.nextTick=function(b){var S=new Array(arguments.length-1);if(1<arguments.length)for(var k=1;k<arguments.length;k++)S[k-1]=arguments[k];n.push(new y(b,S)),n.length!==1||a||v(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],260:[function(t,x,f){x=function(u){var c,s=Object.prototype,d=s.hasOwnProperty,E=typeof Symbol=="function"?Symbol:{},m=E.iterator||"@@iterator",v=E.asyncIterator||"@@asyncIterator",i=E.toStringTag||"@@toStringTag";function n(Y,q,W,$){var Q,se,A,z,q=q&&q.prototype instanceof b?q:b,q=Object.create(q.prototype),$=new B($||[]);return q._invoke=(Q=Y,se=W,A=$,z=o,function(ie,re){if(z===p)throw new Error("Generator is already running");if(z===y){if(ie==="throw")throw re;return G()}for(A.method=ie,A.arg=re;;){var fe=A.delegate;if(fe&&(fe=function ge(de,me){var _e=de.iterator[me.method];if(_e===c){if(me.delegate=null,me.method==="throw"){if(de.iterator.return&&(me.method="return",me.arg=c,ge(de,me),me.method==="throw"))return w;me.method="throw",me.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}if(_e=a(_e,de.iterator,me.arg),_e.type==="throw")return me.method="throw",me.arg=_e.arg,me.delegate=null,w;if(_e=_e.arg,!_e)return me.method="throw",me.arg=new TypeError("iterator result is not an object"),me.delegate=null,w;{if(!_e.done)return _e;me[de.resultName]=_e.value,me.next=de.nextLoc,me.method!=="return"&&(me.method="next",me.arg=c)}return me.delegate=null,w}(fe,A),fe)){if(fe===w)continue;return fe}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(z===o)throw z=y,A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);if(z=p,fe=a(Q,se,A),fe.type==="normal"){if(z=A.done?y:h,fe.arg!==w)return{value:fe.arg,done:A.done}}else fe.type==="throw"&&(z=y,A.method="throw",A.arg=fe.arg)}}),q}function a(Y,H,W){try{return{type:"normal",arg:Y.call(H,W)}}catch(K){return{type:"throw",arg:K}}}u.wrap=n;var o="suspendedStart",h="suspendedYield",p="executing",y="completed",w={};function b(){}function S(){}function k(){}var E={},T=(E[m]=function(){return this},Object.getPrototypeOf),T=T&&T(T(V([]))),R=(T&&T!==s&&d.call(T,m)&&(E=T),k.prototype=b.prototype=Object.create(E));function O(Y){["next","throw","return"].forEach(function(H){Y[H]=function(W){return this._invoke(H,W)}})}function M(Y){var H;this._invoke=function(W,K){function Q(){return new Promise(function(se,A){(function z(ge,$,ie,re){var fe,ge=a(Y[ge],Y,$);if(ge.type!=="throw")return($=(fe=ge.arg).value)&&typeof $=="object"&&d.call($,"__await")?Promise.resolve($.__await).then(function(de){z("next",de,ie,re)},function(de){z("throw",de,ie,re)}):Promise.resolve($).then(function(de){fe.value=de,ie(fe)},function(de){return z("throw",de,ie,re)});re(ge.arg)})(W,K,se,A)})}return H=H?H.then(Q,Q):Q()}}function L(Y){var H={tryLoc:Y[0]};1 in Y&&(H.catchLoc=Y[1]),2 in Y&&(H.finallyLoc=Y[2],H.afterLoc=Y[3]),this.tryEntries.push(H)}function I(Y){var H=Y.completion||{};H.type="normal",delete H.arg,Y.completion=H}function B(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(L,this),this.reset(!0)}function V(Y){if(Y){var H,W=Y[m];if(W)return W.call(Y);if(typeof Y.next=="function")return Y;if(!isNaN(Y.length))return H=-1,(W=function K(){for(;++H<Y.length;)if(d.call(Y,H))return K.value=Y[H],K.done=!1,K;return K.value=c,K.done=!0,K}).next=W}return{next:G}}function G(){return{value:c,done:!0}}return(S.prototype=R.constructor=k).constructor=S,k[i]=S.displayName="GeneratorFunction",u.isGeneratorFunction=function(Y){return Y=typeof Y=="function"&&Y.constructor,!!Y&&(Y===S||(Y.displayName||Y.name)==="GeneratorFunction")},u.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,k):(Y.__proto__=k,i in Y||(Y[i]="GeneratorFunction")),Y.prototype=Object.create(R),Y},u.awrap=function(Y){return{__await:Y}},O(M.prototype),M.prototype[v]=function(){return this},u.AsyncIterator=M,u.async=function(Y,H,W,K){var Q=new M(n(Y,H,W,K));return u.isGeneratorFunction(H)?Q:Q.next().then(function(se){return se.done?se.value:Q.next()})},O(R),R[i]="Generator",R[m]=function(){return this},R.toString=function(){return"[object Generator]"},u.keys=function(Y){var H,W=[];for(H in Y)W.push(H);return W.reverse(),function K(){for(;W.length;){var Q=W.pop();if(Q in Y)return K.value=Q,K.done=!1,K}return K.done=!0,K}},u.values=V,B.prototype={constructor:B,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(I),!Y)for(var H in this)H.charAt(0)==="t"&&d.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=c)},stop:function(){this.done=!0;var Y=this.tryEntries[0].completion;if(Y.type==="throw")throw Y.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var H=this;function W(q,$){return se.type="throw",se.arg=Y,H.next=q,$&&(H.method="next",H.arg=c),!!$}for(var K=this.tryEntries.length-1;0<=K;--K){var Q=this.tryEntries[K],se=Q.completion;if(Q.tryLoc==="root")return W("end");if(Q.tryLoc<=this.prev){var A=d.call(Q,"catchLoc"),z=d.call(Q,"finallyLoc");if(A&&z){if(this.prev<Q.catchLoc)return W(Q.catchLoc,!0);if(this.prev<Q.finallyLoc)return W(Q.finallyLoc)}else if(A){if(this.prev<Q.catchLoc)return W(Q.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<Q.finallyLoc)return W(Q.finallyLoc)}}}},abrupt:function(Y,H){for(var W=this.tryEntries.length-1;0<=W;--W){var K=this.tryEntries[W];if(K.tryLoc<=this.prev&&d.call(K,"finallyLoc")&&this.prev<K.finallyLoc){var Q=K;break}}var se=(Q=Q&&(Y==="break"||Y==="continue")&&Q.tryLoc<=H&&H<=Q.finallyLoc?null:Q)?Q.completion:{};return se.type=Y,se.arg=H,Q?(this.method="next",this.next=Q.finallyLoc,w):this.complete(se)},complete:function(Y,H){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&H&&(this.next=H),w},finish:function(Y){for(var H=this.tryEntries.length-1;0<=H;--H){var W=this.tryEntries[H];if(W.finallyLoc===Y)return this.complete(W.completion,W.afterLoc),I(W),w}},catch:function(Y){for(var H=this.tryEntries.length-1;0<=H;--H){var W,K,Q=this.tryEntries[H];if(Q.tryLoc===Y)return(W=Q.completion).type==="throw"&&(K=W.arg,I(Q)),K}throw new Error("illegal catch attempt")},delegateYield:function(Y,H,W){return this.delegate={iterator:V(Y),resultName:H,nextLoc:W},this.method==="next"&&(this.arg=c),w}},u}(typeof x=="object"?x.exports:{});try{regeneratorRuntime=x}catch{Function("r","regeneratorRuntime = r")(x)}},{}],261:[function(t,x,f){(function(u){var c,s,d,m,v,i,n,a,o,h;function p(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function y(I){return I=typeof I!="string"?String(I):I}function w(I){var B={next:function(){var V=I.shift();return{done:V===void 0,value:V}}};return s&&(B[Symbol.iterator]=function(){return B}),B}function b(I){this.map={},I instanceof b?I.forEach(function(B,V){this.append(V,B)},this):Array.isArray(I)?I.forEach(function(B){this.append(B[0],B[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(B){this.append(B,I[B])},this)}function S(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function k(I){return new Promise(function(B,V){I.onload=function(){B(I.result)},I.onerror=function(){V(I.error)}})}function E(I){var B=new FileReader,V=k(B);return B.readAsArrayBuffer(I),V}function T(I){var B;return I.slice?I.slice(0):((B=new Uint8Array(I.byteLength)).set(new Uint8Array(I)),B.buffer)}function R(){return this.bodyUsed=!1,this._initBody=function(I){if(this._bodyInit=I)if(typeof I=="string")this._bodyText=I;else if(d&&Blob.prototype.isPrototypeOf(I))this._bodyBlob=I;else if(m&&FormData.prototype.isPrototypeOf(I))this._bodyFormData=I;else if(c&&URLSearchParams.prototype.isPrototypeOf(I))this._bodyText=I.toString();else if(v&&d&&n(I))this._bodyArrayBuffer=T(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v||!ArrayBuffer.prototype.isPrototypeOf(I)&&!a(I))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=T(I)}else this._bodyText="";this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var I=S(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(E)}),this.text=function(){var I,B,V=S(this);if(V)return V;if(this._bodyBlob)return V=this._bodyBlob,I=new FileReader,B=k(I),I.readAsText(V),B;if(this._bodyArrayBuffer)return Promise.resolve(function(G){for(var Y=new Uint8Array(G),H=new Array(Y.length),W=0;W<Y.length;W++)H[W]=String.fromCharCode(Y[W]);return H.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}function O(I,B){var V,G=(B=B||{}).body;if(I instanceof O){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,B.headers||(this.headers=new b(I.headers)),this.method=I.method,this.mode=I.mode,G||I._bodyInit==null||(G=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=B.credentials||this.credentials||"omit",!B.headers&&this.headers||(this.headers=new b(B.headers)),this.method=(I=B.method||this.method||"GET",V=I.toUpperCase(),-1<o.indexOf(V)?V:I),this.mode=B.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(G)}function M(I){var B=new FormData;return I.trim().split("&").forEach(function(V){var G;V&&(G=(V=V.split("=")).shift().replace(/\+/g," "),V=V.join("=").replace(/\+/g," "),B.append(decodeURIComponent(G),decodeURIComponent(V)))}),B}function L(I,B){B=B||{},this.type="default",this.status=B.status===void 0?200:B.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in B?B.statusText:"OK",this.headers=new b(B.headers),this.url=B.url||"",this._initBody(I)}u.fetch||(c="URLSearchParams"in u,s="Symbol"in u&&"iterator"in Symbol,d="FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),m="FormData"in u,(v="ArrayBuffer"in u)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(I){return I&&DataView.prototype.isPrototypeOf(I)},a=ArrayBuffer.isView||function(I){return I&&-1<i.indexOf(Object.prototype.toString.call(I))}),b.prototype.append=function(I,B){I=p(I),B=y(B);var V=this.map[I];this.map[I]=V?V+","+B:B},b.prototype.delete=function(I){delete this.map[p(I)]},b.prototype.get=function(I){return I=p(I),this.has(I)?this.map[I]:null},b.prototype.has=function(I){return this.map.hasOwnProperty(p(I))},b.prototype.set=function(I,B){this.map[p(I)]=y(B)},b.prototype.forEach=function(I,B){for(var V in this.map)this.map.hasOwnProperty(V)&&I.call(B,this.map[V],V,this)},b.prototype.keys=function(){var I=[];return this.forEach(function(B,V){I.push(V)}),w(I)},b.prototype.values=function(){var I=[];return this.forEach(function(B){I.push(B)}),w(I)},b.prototype.entries=function(){var I=[];return this.forEach(function(B,V){I.push([V,B])}),w(I)},s&&(b.prototype[Symbol.iterator]=b.prototype.entries),o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],O.prototype.clone=function(){return new O(this,{body:this._bodyInit})},R.call(O.prototype),R.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},L.error=function(){var I=new L(null,{status:0,statusText:""});return I.type="error",I},h=[301,302,303,307,308],L.redirect=function(I,B){if(h.indexOf(B)===-1)throw new RangeError("Invalid status code");return new L(null,{status:B,headers:{location:I}})},u.Headers=b,u.Request=O,u.Response=L,u.fetch=function(I,B){return new Promise(function(V,G){var Y=new O(I,B),H=new XMLHttpRequest;H.onload=function(){var W,K={status:H.status,statusText:H.statusText,headers:(K=H.getAllResponseHeaders()||"",W=new b,K.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(A){var A=A.split(":"),z=A.shift().trim();z&&(A=A.join(":").trim(),W.append(z,A))}),W)},Q=(K.url="responseURL"in H?H.responseURL:K.headers.get("X-Request-URL"),"response"in H?H.response:H.responseText);V(new L(Q,K))},H.onerror=function(){G(new TypeError("Network request failed"))},H.ontimeout=function(){G(new TypeError("Network request failed"))},H.open(Y.method,Y.url,!0),Y.credentials==="include"?H.withCredentials=!0:Y.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&d&&(H.responseType="blob"),Y.headers.forEach(function(W,K){H.setRequestHeader(K,W)}),H.send(Y._bodyInit===void 0?null:Y._bodyInit)})},u.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(t,x,f){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u,c=d(t("../core/main")),s=d(t("../color/color_conversion"));function d(i){return i&&i.__esModule?i:{default:i}}var m=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],v=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];c.default.prototype._rgbColorName=function(o){var n,a,o=s.default._rgbaToHSBA(o),h=[(u=o)[0],o[1],o[2]];h[0]!==0&&(h[0]=Math.round(100*h[0]),(o=h[0].toString().split(""))[a=o.length-1]=parseInt(o[a]),o[a]<2.5?o[a]=0:2.5<=o[a]&&o[a]<7.5&&(o[a]=5),o.length===2?(o[0]=parseInt(o[0]),7.5<=o[a]&&(o[a]=0,o[0]=o[0]+1),h[0]=10*o[0]+o[1]):7.5<=o[a]?h[0]=10:h[0]=o[a]),h[2]=h[2]/255;for(var p=h.length-1;1<=p;p--)h[p]<=.25?h[p]=0:.25<h[p]&&h[p]<.75?h[p]=.5:h[p]=1;if(h[0]===0&&h[1]===0&&h[2]===1){for(var y=2;0<=y;y--)u[y]=Math.round(1e4*u[y])/1e4;for(var w=0;w<m.length;w++){if(m[w].h===u[0]&&m[w].s===u[1]&&m[w].b===u[2]){n=m[w].name;break}n="white"}}else for(var b=0;b<v.length;b++)if(v[b].h===h[0]&&v[b].s===h[1]&&v[b].b===h[2]){n=v[b].name;break}return n},t=c.default,f.default=t},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(t,x,f){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t},c="_Description",s="_fallbackDesc",d="_fallbackTable",m="_Label",v="_labelDesc",i="_labelTable";function n(a){if(a==="label"||a==="fallback")throw new Error("description should not be LABEL or FALLBACK");return a.endsWith(".")||a.endsWith(";")||a.endsWith(",")||a.endsWith("?")||a.endsWith("!")||(a+="."),a}u.default.prototype.describe=function(a,o){var h;u.default._validateParameters("describe",arguments),typeof a=="string"&&(h=this.canvas.id,a=n(a),this.dummyDOM||(this.dummyDOM=document.getElementById(h).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==a&&(this.descriptions.fallback.innerHTML=a):this._describeHTML("fallback",a),o===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==a&&(this.descriptions.label.innerHTML=a):this._describeHTML("label",a)))},u.default.prototype.describeElement=function(a,o,h){var p,y;u.default._validateParameters("describeElement",arguments),typeof o=="string"&&typeof a=="string"&&(p=this.canvas.id,o=n(o),y=function(w){if(w==="label"||w==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return w.endsWith(".")||w.endsWith(";")||w.endsWith(",")?w=w.replace(/.$/,":"):w.endsWith(":")||(w+=":"),w}(a),a=a.replace(/[^a-zA-Z0-9]/g,""),y='<th scope="row">'.concat(y,"</th><td>").concat(o,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(p).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[a]?this.descriptions.fallbackElements[a].innerHTML!==y&&(this.descriptions.fallbackElements[a].innerHTML=y):this._describeElementHTML("fallback",a,y),h===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[a]?this.descriptions.labelElements[a].innerHTML!==y&&(this.descriptions.labelElements[a].innerHTML=y):this._describeElementHTML("label",a,y)))},u.default.prototype._describeHTML=function(a,o){var h,p=this.canvas.id;a==="fallback"?(this.dummyDOM.querySelector("#".concat(p+c))?this.dummyDOM.querySelector("#"+p+d).insertAdjacentHTML("beforebegin",'<p id="'.concat(p+s,'"></p>')):(h='<div id="'.concat(p).concat(c,'" role="region" aria-label="Canvas Description"><p id="').concat(p).concat(s,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutput")).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#".concat(p)).innerHTML=h),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(p).concat(s)),this.descriptions.fallback.innerHTML=o):a==="label"&&(this.dummyDOM.querySelector("#".concat(p+m))?this.dummyDOM.querySelector("#".concat(p+i))&&this.dummyDOM.querySelector("#".concat(p+i)).insertAdjacentHTML("beforebegin",'<p id="'.concat(p).concat(v,'"></p>')):(h='<div id="'.concat(p).concat(m,'" class="p5Label"><p id="').concat(p).concat(v,'"></p></div>'),this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(p,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",h):this.dummyDOM.querySelector("#"+p).insertAdjacentHTML("afterend",h)),this.descriptions.label=this.dummyDOM.querySelector("#"+p+v),this.descriptions.label.innerHTML=o)},u.default.prototype._describeElementHTML=function(a,o,h){var p,y=this.canvas.id;a==="fallback"?(this.dummyDOM.querySelector("#".concat(y+c))?this.dummyDOM.querySelector("#"+y+d)||this.dummyDOM.querySelector("#"+y+s).insertAdjacentHTML("afterend",'<table id="'.concat(y).concat(d,'"><caption>Canvas elements and their descriptions</caption></table>')):(p='<div id="'.concat(y).concat(c,'" role="region" aria-label="Canvas Description"><table id="').concat(y).concat(d,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutput")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+y).innerHTML=p),(p=document.createElement("tr")).id=y+"_fte_"+o,this.dummyDOM.querySelector("#"+y+d).appendChild(p),this.descriptions.fallbackElements[o]=this.dummyDOM.querySelector("#".concat(y).concat("_fte_").concat(o)),this.descriptions.fallbackElements[o].innerHTML=h):a==="label"&&(this.dummyDOM.querySelector("#".concat(y+m))?this.dummyDOM.querySelector("#".concat(y+i))||this.dummyDOM.querySelector("#"+y+v).insertAdjacentHTML("afterend",'<table id="'.concat(y+i,'"></table>')):(p='<div id="'.concat(y).concat(m,'" class="p5Label"><table id="').concat(y).concat(i,'"></table></div>'),this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(y,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",p):this.dummyDOM.querySelector("#"+y).insertAdjacentHTML("afterend",p)),(a=document.createElement("tr")).id=y+"_lte_"+o,this.dummyDOM.querySelector("#"+y+i).appendChild(a),this.descriptions.labelElements[o]=this.dummyDOM.querySelector("#".concat(y).concat("_lte_").concat(o)),this.descriptions.labelElements[o].innerHTML=h)},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(t,x,f){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(u){var c,s,d,m;this.dummyDOM.querySelector("#".concat(u,"_summary"))&&(c=this._accessibleOutputs[u],d=function(v,i,n,a){return i="".concat(i," canvas, ").concat(n," by ").concat(a," pixels, contains ").concat(v[0]),i=(v[0]===1?"".concat(i," shape: "):"".concat(i," shapes: ")).concat(v[1]),i}((s=function(v,i){var n,a="",o="",h=0;for(n in i){var p,y=0;for(p in i[n]){var w='<li id="'.concat(v,"shape").concat(h,'">').concat(i[n][p].color," ").concat(n,",");n==="line"?w+=" location = ".concat(i[n][p].pos,", length = ").concat(i[n][p].length," pixels"):(w+=" location = ".concat(i[n][p].pos),n!=="point"&&(w+=", area = ".concat(i[n][p].area," %")),w+="</li>"),a+=w,y++,h++}o=1<y?"".concat(o," ").concat(y," ").concat(n,"s"):"".concat(o," ").concat(y," ").concat(n)}return{numShapes:[h,o],details:a}}(u,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),m=function(v,i){var n,a,o=0,h="",p=Array.from(Array(10),function(){return Array(10)});for(n in i)for(var y in i[n]){var w=void 0;w=n!=="line"?'<a href="#'.concat(v,"shape").concat(o,'">').concat(i[n][y].color," ").concat(n,"</a>"):'<a href="#'.concat(v,"shape").concat(o,'">').concat(i[n][y].color," ").concat(n," midpoint</a>"),i[n][y].loc.locY<p.length&&i[n][y].loc.locX<p[i[n][y].loc.locY].length&&(p[i[n][y].loc.locY][i[n][y].loc.locX]?p[i[n][y].loc.locY][i[n][y].loc.locX]=p[i[n][y].loc.locY][i[n][y].loc.locX]+"  "+w:p[i[n][y].loc.locY][i[n][y].loc.locX]=w,o++)}for(a in p){var b,S="<tr>";for(b in p[a])S+="<td>",p[a][b]!==void 0&&(S+=p[a][b]),S+="</td>";h=h+S+"</tr>"}return h}(u,this.ingredients.shapes),d!==c.summary.innerHTML&&(c.summary.innerHTML=d),m!==c.map.innerHTML&&(c.map.innerHTML=m),s.details!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=s.details),this._accessibleOutputs[u]=c)},t=t.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(d){return function(m){if(Array.isArray(m)){for(var v=0,i=new Array(m.length);v<m.length;v++)i[v]=m[v];return i}}(d)||function(m){if(Symbol.iterator in Object(m)||Object.prototype.toString.call(m)==="[object Arguments]")return Array.from(m)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(d,m,v){return m=Math.floor(d[0]/m*10),d=Math.floor(d[1]/v*10),m===10&&(m-=1),d===10&&(d-=1),{locX:m,locY:d}}u.default.prototype.textOutput=function(d){u.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},u.default.prototype.gridOutput=function(d){u.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),d===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},u.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},u.default.prototype._createOutput=function(d,m){var v,i,n,a=this.canvas.id,o=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(a).parentNode),"");m==="Fallback"?(v=a+d,this.dummyDOM.querySelector("#".concat(i=a+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(a,"_Description"))?this.dummyDOM.querySelector("#".concat(a,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(i,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(a)).innerHTML='<div id="'.concat(i,'" role="region" aria-label="Canvas Outputs"></div>'))):m==="Label"&&(v=a+d+(o=m),this.dummyDOM.querySelector("#".concat(i=a+"accessibleOutput"+m))||(this.dummyDOM.querySelector("#".concat(a,"_Label"))?this.dummyDOM.querySelector("#".concat(a,"_Label")):this.dummyDOM.querySelector("#".concat(a))).insertAdjacentHTML("afterend",'<div id="'.concat(i,'"></div>'))),this._accessibleOutputs[v]={},d==="textOutput"?(o="#".concat(a,"gridOutput").concat(o),n='<div id="'.concat(v,'">Text Output<div id="').concat(v,'Summary" aria-label="text output summary"><p id="').concat(v,'_summary"></p><ul id="').concat(v,'_list"></ul></div><table id="').concat(v,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(o)?this.dummyDOM.querySelector(o).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#".concat(i)).innerHTML=n,this._accessibleOutputs[v].list=this.dummyDOM.querySelector("#".concat(v,"_list"))):d==="gridOutput"&&(o="#".concat(a,"textOutput").concat(o),n='<div id="'.concat(v,'">Grid Output<p id="').concat(v,'_summary" aria-label="grid output summary"><table id="').concat(v,'_map" summary="grid output content"></table><ul id="').concat(v,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(o)?this.dummyDOM.querySelector(o).insertAdjacentHTML("afterend",n):this.dummyDOM.querySelector("#".concat(i)).innerHTML=n,this._accessibleOutputs[v].map=this.dummyDOM.querySelector("#".concat(v,"_map"))),this._accessibleOutputs[v].shapeDetails=this.dummyDOM.querySelector("#".concat(v,"_shapeDetails")),this._accessibleOutputs[v].summary=this.dummyDOM.querySelector("#".concat(v,"_summary"))},u.default.prototype._updateAccsOutput=function(){var d=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(d+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(d+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(d+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(d+"gridOutputLabel"))},u.default.prototype._accsBackground=function(d){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==d&&(this.ingredients.colors.backgroundRGBA=d,this.ingredients.colors.background=this._rgbColorName(d))},u.default.prototype._accsCanvasColors=function(d,m){d==="fill"?this.ingredients.colors.fillRGBA!==m&&(this.ingredients.colors.fillRGBA=m,this.ingredients.colors.fill=this._rgbColorName(m)):d==="stroke"&&this.ingredients.colors.strokeRGBA!==m&&(this.ingredients.colors.strokeRGBA=m,this.ingredients.colors.stroke=this._rgbColorName(m))},u.default.prototype._accsOutput=function(d,m){d==="ellipse"&&m[2]===m[3]?d="circle":d==="rectangle"&&m[2]===m[3]&&(d="square");var v,i,n={},a=!0,o=function(p,y){var w;return p=p==="rectangle"||p==="ellipse"||p==="arc"||p==="circle"||p==="square"?(w=Math.round(y[0]+y[2]/2),Math.round(y[1]+y[3]/2)):p==="triangle"?(w=(y[0]+y[2]+y[4])/3,(y[1]+y[3]+y[5])/3):p==="quadrilateral"?(w=(y[0]+y[2]+y[4]+y[6])/4,(y[1]+y[3]+y[5]+y[7])/4):p==="line"?(w=(y[0]+y[2])/2,(y[1]+y[3])/2):(w=y[0],y[1]),[w,p]}(d,m);if(d==="line"?(n.color=this.ingredients.colors.stroke,n.length=Math.round(this.dist(m[0],m[1],m[2],m[3])),v=this._getPos(m[0],[1]),i=this._getPos(m[2],[3]),n.loc=s(o,this.width,this.height),n.pos=v===i?"at ".concat(v):"from ".concat(v," to ").concat(i)):(d==="point"?n.color=this.ingredients.colors.stroke:(n.color=this.ingredients.colors.fill,n.area=this._getArea(d,m)),n.pos=this._getPos.apply(this,c(o)),n.loc=s(o,this.width,this.height)),this.ingredients.shapes[d]){if(this.ingredients.shapes[d]!==[n]){for(var h in this.ingredients.shapes[d])JSON.stringify(this.ingredients.shapes[d][h])===JSON.stringify(n)&&(a=!1);a===!0&&this.ingredients.shapes[d].push(n)}}else this.ingredients.shapes[d]=[n]},u.default.prototype._getPos=function(i,v){var i=new DOMPointReadOnly(i,v),v=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),i=i.matrixTransform(v),v=i.x,i=i.y,n=this.width*this._pixelDensity,a=this.height*this._pixelDensity;return v<.4*n?i<.4*a?"top left":.6*a<i?"bottom left":"mid left":.6*n<v?i<.4*a?"top right":.6*a<i?"bottom right":"mid right":i<.4*a?"top middle":.6*a<i?"bottom middle":"middle"},u.default.prototype._getArea=function(d,m){var v,i,n=0,a=(d==="arc"?(n=(v=((m[5]-m[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*m[2]*m[3]/8,m[6]!=="open"&&m[6]!=="chord"||(i=m[0],y=m[1],a=m[0]+m[2]/2*Math.cos(m[4]).toFixed(2),w=m[1]+m[3]/2*Math.sin(m[4]).toFixed(2),h=m[0]+m[2]/2*Math.cos(m[5]).toFixed(2),o=m[1]+m[3]/2*Math.sin(m[5]).toFixed(2),i=Math.abs(i*(w-o)+a*(o-y)+h*(y-w))/2,v>Math.PI?n+=i:n-=i)):d==="ellipse"||d==="circle"?n=3.14*m[2]/2*m[3]/2:d==="line"||d==="point"?n=0:d==="quadrilateral"?n=Math.abs((m[6]+m[0])*(m[7]-m[1])+(m[0]+m[2])*(m[1]-m[3])+(m[2]+m[4])*(m[3]-m[5])+(m[4]+m[6])*(m[5]-m[7]))/2:d==="rectangle"||d==="square"?n=m[2]*m[3]:d==="triangle"&&(n=Math.abs(m[0]*(m[3]-m[5])+m[2]*(m[5]-m[1])+m[4]*(m[1]-m[3]))/2),this.width*this._pixelDensity),o=this.height*this._pixelDensity,h=[new DOMPoint(0,0),new DOMPoint(a,0),new DOMPoint(a,o),new DOMPoint(0,o)],p=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),y=h.map(function(b){return b.matrixTransform(p)}),w=Math.abs((y[3].x+y[0].x)*(y[3].y-y[0].y)+(y[0].x+y[1].x)*(y[0].y-y[1].y)+(y[1].x+y[2].x)*(y[1].y-y[2].y)+(y[2].x+y[3].x)*(y[2].y-y[3].y))/2;return Math.round(100*n/w)},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(t,x,f){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(u){var c,s,d,m;this.dummyDOM.querySelector("#".concat(u,"_summary"))&&(c=this._accessibleOutputs[u],d=function(v,i,n,a){return n="Your output is a, ".concat(n," by ").concat(a," pixels, ").concat(i," canvas containing the following"),n=v===1?"".concat(n," shape:"):"".concat(n," ").concat(v," shapes:"),n}((s=function(v,i){var n,a="",o=0;for(n in i)for(var h in i[n]){var p='<li><a href="#'.concat(v,"shape").concat(o,'">').concat(i[n][h].color," ").concat(n,"</a>");n==="line"?p+=", ".concat(i[n][h].pos,", ").concat(i[n][h].length," pixels long.</li>"):(p+=", at ".concat(i[n][h].pos),n!=="point"&&(p+=", covering ".concat(i[n][h].area,"% of the canvas")),p+=".</li>"),a+=p,o++}return{numShapes:o,listShapes:a}}(u,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),m=function(v,i){var n,a="",o=0;for(n in i)for(var h in i[n]){var p='<tr id="'.concat(v,"shape").concat(o,'"><th>').concat(i[n][h].color," ").concat(n,"</th>");n==="line"?p+="<td>location = ".concat(i[n][h].pos,"</td><td>length = ").concat(i[n][h].length," pixels</td></tr>"):(p+="<td>location = ".concat(i[n][h].pos,"</td>"),n!=="point"&&(p+="<td> area = ".concat(i[n][h].area,"%</td>")),p+="</tr>"),a+=p,o++}return a}(u,this.ingredients.shapes),d!==c.summary.innerHTML&&(c.summary.innerHTML=d),s.listShapes!==c.list.innerHTML&&(c.list.innerHTML=s.listShapes),m!==c.shapeDetails.innerHTML&&(c.shapeDetails.innerHTML=m),this._accessibleOutputs[u]=c)},t=t.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(t,x,f){var u=(u=t("./core/main"))&&u.__esModule?u:{default:u};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.Quat"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),x.exports=u.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(u){var c=u[0],s=u[1],d=u[2],m=(2-s)*d/2;return m!=0&&(m==1?s=0:m<.5?s/=2-s:s=s*d/(2-2*m)),[c,s,m,u[3]]},_hsbaToRGBA:function(u){var c,s,d,m,v,i=6*u[0],n=u[1],a=u[2];return n===0?[a,a,a,u[3]]:(s=a*(1-n),d=a*(1-n*(i-(c=Math.floor(i)))),n=a*(1-n*(1+c-i)),i=c===1?(m=d,v=a,s):c===2?(m=s,v=a,n):c===3?(m=s,v=d,a):c===4?(m=n,v=s,a):c===5?(m=a,v=s,d):(m=a,v=n,s),[m,v,i,u[3]])},_hslaToHSBA:function(u){var c=u[0],s=u[1],d=u[2],m=d<.5?(1+s)*d:d+s-d*s;return[c,s=2*(m-d)/m,m,u[3]]},_hslaToRGBA:function(u){var c,s=6*u[0],d=u[1],m=u[2];return d===0?[m,m,m,u[3]]:[(c=function(v,i,n){return v<0?v+=6:6<=v&&(v-=6),v<1?i+(n-i)*v:v<3?n:v<4?i+(n-i)*(4-v):i})(2+s,d=2*m-(m=m<.5?(1+d)*m:m+d-m*d),m),c(s,d,m),c(s-2,d,m),u[3]]},_rgbaToHSBA:function(u){var c,s,d=u[0],m=u[1],v=u[2],i=Math.max(d,m,v),n=i-Math.min(d,m,v);return n==0?s=c=0:(s=n/i,d===i?c=(m-v)/n:m===i?c=2+(v-d)/n:v===i&&(c=4+(d-m)/n),c<0?c+=6:6<=c&&(c-=6)),[c/6,s,i,u[3]]},_rgbaToHSLA:function(u){var c,s,d=u[0],m=u[1],v=u[2],i=Math.max(d,m,v),a=Math.min(d,m,v),n=i+a,a=i-a;return a==0?s=c=0:(s=n<1?a/n:a/(2-n),d===i?c=(m-v)/a:m===i?c=2+(v-d)/a:v===i&&(c=4+(d-m)/a),c<0?c+=6:6<=c&&(c-=6)),[c/6,s,n/2,u[3]]}},t=t.default.ColorConversion,f.default=t},{"../core/main":283}],269:[function(t,x,f){function u(i){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}function c(i){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(n){return u(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":u(n)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},d=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var n=m();if(n&&n.has(i))return n.get(i);var a,o={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var p;Object.prototype.hasOwnProperty.call(i,a)&&((p=h?Object.getOwnPropertyDescriptor(i,a):null)&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=i[a])}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function m(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,m=function(){return i},i)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.alpha=function(i){return s.default._validateParameters("alpha",arguments),this.color(i)._getAlpha()},s.default.prototype.blue=function(i){return s.default._validateParameters("blue",arguments),this.color(i)._getBlue()},s.default.prototype.brightness=function(i){return s.default._validateParameters("brightness",arguments),this.color(i)._getBrightness()},s.default.prototype.color=function(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return s.default._validateParameters("color",a),a[0]instanceof s.default.Color?a[0]:(i=Array.isArray(a[0])?a[0]:a,new s.default.Color(this,i))},s.default.prototype.green=function(i){return s.default._validateParameters("green",arguments),this.color(i)._getGreen()},s.default.prototype.hue=function(i){return s.default._validateParameters("hue",arguments),this.color(i)._getHue()},s.default.prototype.lerpColor=function(i,n,a){s.default._validateParameters("lerpColor",arguments),i instanceof s.default.Color||(i=color(i)),n instanceof s.default.Color||(n=color(n));var o,h,p,y=this._colorMode,w=this._colorMaxes;if(y===d.RGB)h=i.levels.map(function(b){return b/255}),p=n.levels.map(function(b){return b/255});else if(y===d.HSB)i._getBrightness(),n._getBrightness(),h=i.hsba,p=n.hsba;else{if(y!==d.HSL)throw new Error("".concat(y," cannot be used for interpolation."));i._getLightness(),n._getLightness(),h=i.hsla,p=n.hsla}return a=Math.max(Math.min(a,1),0),this.lerp===void 0&&(this.lerp=function(b,S,k){return k*(S-b)+b}),y===d.RGB?o=this.lerp(h[0],p[0],a):(.5<Math.abs(h[0]-p[0])&&(h[0]>p[0]?p[0]+=1:h[0]+=1),1<=(o=this.lerp(h[0],p[0],a))&&--o),i=this.lerp(h[1],p[1],a),n=this.lerp(h[2],p[2],a),h=this.lerp(h[3],p[3],a),o*=w[y][0],i*=w[y][1],n*=w[y][2],h*=w[y][3],this.color(o,i,n,h)},s.default.prototype.paletteLerp=function(i,n){var a=i[0];if(n<a[1])return this.color(a[0]);for(var o=1;o<i.length;o++){var h,p=i[o];if(n<p[1])return h=i[o-1],this.lerpColor(this.color(h[0]),this.color(p[0]),(n-h[1])/(p[1]-h[1]))}return this.color(i[i.length-1][0])},s.default.prototype.lightness=function(i){return s.default._validateParameters("lightness",arguments),this.color(i)._getLightness()},s.default.prototype.red=function(i){return s.default._validateParameters("red",arguments),this.color(i)._getRed()},s.default.prototype.saturation=function(i){return s.default._validateParameters("saturation",arguments),this.color(i)._getSaturation()};var v=s.default;f.default=v},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(o,x,f){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}function c(b){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(S){return u(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":u(S)})(b)}o("core-js/modules/es.symbol"),o("core-js/modules/es.symbol.description"),o("core-js/modules/es.symbol.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.iterator"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.get-own-property-descriptor"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.iterator"),o("core-js/modules/es.string.trim"),o("core-js/modules/es.weak-map"),o("core-js/modules/web.dom-collections.iterator"),o("core-js/modules/es.array.includes"),o("core-js/modules/es.array.join"),o("core-js/modules/es.array.map"),o("core-js/modules/es.array.slice"),o("core-js/modules/es.object.to-string"),o("core-js/modules/es.regexp.constructor"),o("core-js/modules/es.regexp.exec"),o("core-js/modules/es.regexp.to-string"),o("core-js/modules/es.string.includes"),o("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=i(o("../core/main")),d=function(b){if(b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var S=v();if(S&&S.has(b))return S.get(b);var k,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in b){var R;Object.prototype.hasOwnProperty.call(b,k)&&((R=T?Object.getOwnPropertyDescriptor(b,k):null)&&(R.get||R.set)?Object.defineProperty(E,k,R):E[k]=b[k])}return E.default=b,S&&S.set(b,E),E}(o("../core/constants")),m=i(o("./color_conversion"));function v(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,v=function(){return b},b)}function i(b){return b&&b.__esModule?b:{default:b}}function n(b,S){for(var k=0;k<S.length;k++){var E=S[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(b,E.key,E)}}var a={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},o=/\s*/,w=/(\d{1,3})/,h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp("".concat(h.source,"%")),y={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",w.source,",",w.source,",",w.source,"\\)$"].join(o.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(o.source),"i"),RGBA:new RegExp(["^rgba\\(",w.source,",",w.source,",",w.source,",",h.source,"\\)$"].join(o.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",h.source,"\\)$"].join(o.source),"i"),HSL:new RegExp(["^hsl\\(",w.source,",",p.source,",",p.source,"\\)$"].join(o.source),"i"),HSLA:new RegExp(["^hsla\\(",w.source,",",p.source,",",p.source,",",h.source,"\\)$"].join(o.source),"i"),HSB:new RegExp(["^hsb\\(",w.source,",",p.source,",",p.source,"\\)$"].join(o.source),"i"),HSBA:new RegExp(["^hsba\\(",w.source,",",p.source,",",p.source,",",h.source,"\\)$"].join(o.source),"i")},w=(s.default.Color=function(){function b(T,R){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(T._colorMode,T._colorMaxes),![d.RGB,d.HSL,d.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=b._parseInputs.apply(this,R),this._calculateLevels()}var S,k,E;return S=b,E=[{key:"_parseInputs",value:function(T,R,O,M){var L,I=arguments.length,B=this.mode,V=this.maxes[B],G=[];if(3<=I){for(G[0]=T/V[0],G[1]=R/V[1],G[2]=O/V[2],G[3]=typeof M=="number"?M/V[3]:1,L=G.length-1;0<=L;--L){var Y=G[L];Y<0?G[L]=0:1<Y&&(G[L]=1)}return B===d.HSL?m.default._hslaToRGBA(G):B===d.HSB?m.default._hsbaToRGBA(G):G}if(I===1&&typeof T=="string"){if(O=T.trim().toLowerCase(),a[O])return b._parseInputs.call(this,a[O]);if(y.HEX3.test(O))return(G=y.HEX3.exec(O).slice(1).map(function(H){return parseInt(H+H,16)/255}))[3]=1,G;if(y.HEX6.test(O))return(G=y.HEX6.exec(O).slice(1).map(function(H){return parseInt(H,16)/255}))[3]=1,G;if(y.HEX4.test(O))return G=y.HEX4.exec(O).slice(1).map(function(H){return parseInt(H+H,16)/255});if(y.HEX8.test(O))return G=y.HEX8.exec(O).slice(1).map(function(H){return parseInt(H,16)/255});if(y.RGB.test(O))return(G=y.RGB.exec(O).slice(1).map(function(H){return H/255}))[3]=1,G;if(y.RGB_PERCENT.test(O))return(G=y.RGB_PERCENT.exec(O).slice(1).map(function(H){return parseFloat(H)/100}))[3]=1,G;if(y.RGBA.test(O))return G=y.RGBA.exec(O).slice(1).map(function(H,W){return W===3?parseFloat(H):H/255});if(y.RGBA_PERCENT.test(O))return G=y.RGBA_PERCENT.exec(O).slice(1).map(function(H,W){return W===3?parseFloat(H):parseFloat(H)/100});if(y.HSL.test(O)?(G=y.HSL.exec(O).slice(1).map(function(H,W){return W===0?parseInt(H,10)/360:parseInt(H,10)/100}))[3]=1:y.HSLA.test(O)&&(G=y.HSLA.exec(O).slice(1).map(function(H,W){return W===0?parseInt(H,10)/360:W===3?parseFloat(H):parseInt(H,10)/100})),(G=G.map(function(H){return Math.max(Math.min(H,1),0)})).length)return m.default._hslaToRGBA(G);if(y.HSB.test(O)?(G=y.HSB.exec(O).slice(1).map(function(H,W){return W===0?parseInt(H,10)/360:parseInt(H,10)/100}))[3]=1:y.HSBA.test(O)&&(G=y.HSBA.exec(O).slice(1).map(function(H,W){return W===0?parseInt(H,10)/360:W===3?parseFloat(H):parseInt(H,10)/100})),G.length){for(L=G.length-1;0<=L;--L)G[L]=Math.max(Math.min(G[L],1),0);return m.default._hsbaToRGBA(G)}G=[1,1,1,1]}else{if(I!==1&&I!==2||typeof T!="number")throw new Error("".concat(arguments,"is not a valid color representation."));G[0]=T/V[2],G[1]=T/V[2],G[2]=T/V[2],G[3]=typeof R=="number"?R/V[3]:1,G=G.map(function(H){return Math.max(Math.min(H,1),0)})}return G}}],(k=[{key:"toString",value:function(T){var R=this.levels,O=this._array,M=O[3];switch(T){case"#rrggbb":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16));case"#rrggbbaa":return"#".concat(R[0]<16?"0".concat(R[0].toString(16)):R[0].toString(16),R[1]<16?"0".concat(R[1].toString(16)):R[1].toString(16),R[2]<16?"0".concat(R[2].toString(16)):R[2].toString(16),R[3]<16?"0".concat(R[3].toString(16)):R[3].toString(16));case"#rgb":return"#".concat(Math.round(15*O[0]).toString(16),Math.round(15*O[1]).toString(16),Math.round(15*O[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*O[0]).toString(16),Math.round(15*O[1]).toString(16),Math.round(15*O[2]).toString(16),Math.round(15*O[3]).toString(16));case"rgb":return"rgb(".concat(R[0],", ",R[1],", ",R[2],")");case"rgb%":return"rgb(".concat((100*O[0]).toPrecision(3),"%, ",(100*O[1]).toPrecision(3),"%, ",(100*O[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*O[0]).toPrecision(3),"%, ",(100*O[1]).toPrecision(3),"%, ",(100*O[2]).toPrecision(3),"%, ",(100*O[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[d.HSB][0],", ",this.hsba[1]*this.maxes[d.HSB][1],", ",this.hsba[2]*this.maxes[d.HSB][2],", ",M,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[d.HSL][0],", ",this.hsla[1]*this.maxes[d.HSL][1],", ",this.hsla[2]*this.maxes[d.HSL][2],", ",M,")");case"hsla%":return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*M).toPrecision(3),"%)");default:return"rgba(".concat(R[0],",",R[1],",",R[2],",",M,")")}}},{key:"setRed",value:function(T){this._array[0]=T/this.maxes[d.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(T){this._array[1]=T/this.maxes[d.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(T){this._array[2]=T/this.maxes[d.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(T){this._array[3]=T/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var T=this._array,R=this.levels=new Array(T.length),O=T.length-1;0<=O;--O)R[O]=Math.round(255*T[O]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(T,R){this.mode=T,this.maxes=R}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[d.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[d.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[d.RGB][1]}},{key:"_getHue",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[d.HSB][0]):(this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[d.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[d.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[d.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===d.HSB?(this.hsba||(this.hsba=m.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[d.HSB][1]):(this.hsla||(this.hsla=m.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[d.HSL][1])}}])&&n(S.prototype,k),E&&n(S,E),b}(),s.default.Color);f.default=w},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(t,x,f){function u(i){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}function c(i){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(n){return u(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":u(n)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},d=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var n=m();if(n&&n.has(i))return n.get(i);var a,o={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var p;Object.prototype.hasOwnProperty.call(i,a)&&((p=h?Object.getOwnPropertyDescriptor(i,a):null)&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=i[a])}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function m(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,m=function(){return i},i)}t("./p5.Color"),s.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},s.default.prototype.endClip=function(){this._renderer.endClip()},s.default.prototype.clip=function(i,n){this._renderer.beginClip(n),i(),this._renderer.endClip(n)},s.default.prototype.background=function(){var i;return(i=this._renderer).background.apply(i,arguments),this},s.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},s.default.prototype.colorMode=function(i,n,a,o,h){return s.default._validateParameters("colorMode",arguments),i!==d.RGB&&i!==d.HSB&&i!==d.HSL||(this._colorMode=i,i=this._colorMaxes[i],arguments.length===2?(i[0]=n,i[1]=n,i[2]=n,i[3]=n):arguments.length===4?(i[0]=n,i[1]=a,i[2]=o):arguments.length===5&&(i[0]=n,i[1]=a,i[2]=o,i[3]=h)),this},s.default.prototype.fill=function(){var i;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(i=this._renderer).fill.apply(i,arguments),this},s.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},s.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},s.default.prototype.stroke=function(){var i;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(i=this._renderer).stroke.apply(i,arguments),this},s.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},s.default.prototype.noErase=function(){return this._renderer.noErase(),this};var v=s.default;f.default=v},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.QUADRATIC=f.LINEAR=f._CTX_MIDDLE=f._DEFAULT_LEADMULT=f._DEFAULT_TEXT_FILL=f.WORD=f.CHAR=f.BOLDITALIC=f.BOLD=f.ITALIC=f.NORMAL=f.BLUR=f.ERODE=f.DILATE=f.POSTERIZE=f.INVERT=f.OPAQUE=f.GRAY=f.THRESHOLD=f.BURN=f.DODGE=f.SOFT_LIGHT=f.HARD_LIGHT=f.OVERLAY=f.REPLACE=f.SCREEN=f.MULTIPLY=f.EXCLUSION=f.SUBTRACT=f.DIFFERENCE=f.LIGHTEST=f.DARKEST=f.ADD=f.REMOVE=f.BLEND=f.UP_ARROW=f.TAB=f.SHIFT=f.RIGHT_ARROW=f.RETURN=f.OPTION=f.LEFT_ARROW=f.ESCAPE=f.ENTER=f.DOWN_ARROW=f.DELETE=f.CONTROL=f.BACKSPACE=f.ALT=f.AUTO=f.HSL=f.HSB=f.RGB=f.MITER=f.BEVEL=f.ROUND=f.SQUARE=f.PROJECT=f.PIE=f.CHORD=f.OPEN=f.CLOSE=f.TESS=f.QUAD_STRIP=f.QUADS=f.TRIANGLE_STRIP=f.TRIANGLE_FAN=f.TRIANGLES=f.LINE_LOOP=f.LINE_STRIP=f.LINES=f.POINTS=f.BASELINE=f.BOTTOM=f.TOP=f.CENTER=f.LEFT=f.RIGHT=f.RADIUS=f.CORNERS=f.CORNER=f.RAD_TO_DEG=f.DEG_TO_RAD=f.RADIANS=f.DEGREES=f.TWO_PI=f.TAU=f.QUARTER_PI=f.PI=f.HALF_PI=f.WAIT=f.TEXT=f.MOVE=f.HAND=f.CROSS=f.ARROW=f.WEBGL2=f.WEBGL=f.P2D=f.VERSION=void 0,f.RGBA=f.HALF_FLOAT=f.FLOAT=f.UNSIGNED_INT=f.UNSIGNED_BYTE=f.COVER=f.CONTAIN=f.FALLBACK=f.LABEL=f.AXES=f.GRID=f._DEFAULT_FILL=f._DEFAULT_STROKE=f.PORTRAIT=f.LANDSCAPE=f.SMOOTH=f.FLAT=f.MIRROR=f.CLAMP=f.REPEAT=f.NEAREST=f.IMAGE=f.IMMEDIATE=f.TEXTURE=f.FILL=f.STROKE=f.CURVE=f.BEZIER=void 0;var u=Math.PI,c=(f.VERSION="1.11.2",f.P2D="p2d",f.WEBGL="webgl",f.WEBGL2="webgl2",f.ARROW="default",f.CROSS="crosshair",f.HAND="pointer",f.MOVE="move",f.TEXT="text",f.WAIT="wait",u/2),c=(f.HALF_PI=c,u),c=(f.PI=c,u/4),c=(f.QUARTER_PI=c,2*u),c=(f.TAU=c,2*u),c=(f.TWO_PI=c,f.DEGREES="degrees",f.RADIANS="radians",u/180),c=(f.DEG_TO_RAD=c,180/u);f.RAD_TO_DEG=c,f.CORNER="corner",f.CORNERS="corners",f.RADIUS="radius",f.RIGHT="right",f.LEFT="left",f.CENTER="center",f.TOP="top",f.BOTTOM="bottom",f.BASELINE="alphabetic",f.POINTS=0,f.LINES=1,f.LINE_STRIP=3,f.LINE_LOOP=2,f.TRIANGLES=4,f.TRIANGLE_FAN=6,f.TRIANGLE_STRIP=5,f.QUADS="quads",f.QUAD_STRIP="quad_strip",f.TESS="tess",f.CLOSE="close",f.OPEN="open",f.CHORD="chord",f.PIE="pie",f.PROJECT="square",f.SQUARE="butt",f.ROUND="round",f.BEVEL="bevel",f.MITER="miter",f.RGB="rgb",f.HSB="hsb",f.HSL="hsl",f.AUTO="auto",f.ALT=18,f.BACKSPACE=8,f.CONTROL=17,f.DELETE=46,f.DOWN_ARROW=40,f.ENTER=13,f.ESCAPE=27,f.LEFT_ARROW=37,f.OPTION=18,f.RETURN=13,f.RIGHT_ARROW=39,f.SHIFT=16,f.TAB=9,f.UP_ARROW=38,f.BLEND="source-over",f.REMOVE="destination-out",f.ADD="lighter",f.DARKEST="darken",f.LIGHTEST="lighten",f.DIFFERENCE="difference",f.SUBTRACT="subtract",f.EXCLUSION="exclusion",f.MULTIPLY="multiply",f.SCREEN="screen",f.REPLACE="copy",f.OVERLAY="overlay",f.HARD_LIGHT="hard-light",f.SOFT_LIGHT="soft-light",f.DODGE="color-dodge",f.BURN="color-burn",f.THRESHOLD="threshold",f.GRAY="gray",f.OPAQUE="opaque",f.INVERT="invert",f.POSTERIZE="posterize",f.DILATE="dilate",f.ERODE="erode",f.BLUR="blur",f.NORMAL="normal",f.ITALIC="italic",f.BOLD="bold",f.BOLDITALIC="bold italic",f.CHAR="CHAR",f.WORD="WORD",f._DEFAULT_TEXT_FILL="#000000",f._DEFAULT_LEADMULT=1.25,f._CTX_MIDDLE="middle",f.LINEAR="linear",f.QUADRATIC="quadratic",f.BEZIER="bezier",f.CURVE="curve",f.STROKE="stroke",f.FILL="fill",f.TEXTURE="texture",f.IMMEDIATE="immediate",f.IMAGE="image",f.NEAREST="nearest",f.REPEAT="repeat",f.CLAMP="clamp",f.MIRROR="mirror",f.FLAT="flat",f.SMOOTH="smooth",f.LANDSCAPE="landscape",f.PORTRAIT="portrait",f._DEFAULT_STROKE="#000000",f._DEFAULT_FILL="#FFFFFF",f.GRID="grid",f.AXES="axes",f.LABEL="label",f.FALLBACK="fallback",f.CONTAIN="contain",f.COVER="cover",f.UNSIGNED_BYTE="unsigned-byte",f.UNSIGNED_INT="unsigned-int",f.FLOAT="float",f.HALF_FLOAT="half-float",f.RGBA="rgba"},{}],273:[function(t,x,f){function u(h){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(p){return u(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":u(p)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(d=t("./main"))&&d.__esModule?d:{default:d},d=function(h){if(h&&h.__esModule)return h;if(h===null||c(h)!=="object"&&typeof h!="function")return{default:h};var p=m();if(p&&p.has(h))return p.get(h);var y,w={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(y in h){var S;Object.prototype.hasOwnProperty.call(h,y)&&((S=b?Object.getOwnPropertyDescriptor(h,y):null)&&(S.get||S.set)?Object.defineProperty(w,y,S):w[y]=h[y])}return w.default=h,p&&p.set(h,w),w}(t("./constants"));function m(){var h;return typeof WeakMap!="function"?null:(h=new WeakMap,m=function(){return h},h)}var v=[d.ARROW,d.CROSS,d.HAND,d.MOVE,d.TEXT,d.WAIT],i=(s.default.prototype._frameRate=0,s.default.prototype._lastFrameTime=window.performance.now(),s.default.prototype._targetFrameRate=60,window.print),n=!1;function a(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function o(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}s.default.prototype.print=function(){var h;arguments.length?(h=console).log.apply(h,arguments):n||(i(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(n=!0))},s.default.prototype.frameCount=0,s.default.prototype.deltaTime=0,s.default.prototype.focused=document.hasFocus(),s.default.prototype.cursor=function(h,p,y){var w,b="auto",S=this._curElement.elt;v.includes(h)?b=h:typeof h=="string"&&(w="",p&&y&&typeof p=="number"&&typeof y=="number"&&(w="".concat(p," ").concat(y)),b=h.substring(0,7)==="http://"||h.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(h)?"url(".concat(h,") ").concat(w,", auto"):h),S.style.cursor=b},s.default.prototype.frameRate=function(h){return s.default._validateParameters("frameRate",arguments),typeof h!="number"||h<0?this._frameRate:(this._setProperty("_targetFrameRate",h),h===0&&this._setProperty("_frameRate",h),this)},s.default.prototype.getFrameRate=function(){return this.frameRate()},s.default.prototype.setFrameRate=function(h){return this.frameRate(h)},s.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},s.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},s.default.prototype.webglVersion=d.P2D,s.default.prototype.displayWidth=screen.width,s.default.prototype.displayHeight=screen.height,s.default.prototype.windowWidth=0,s.default.prototype.windowHeight=0,s.default.prototype._onresize=function(h){this._setProperty("windowWidth",a()),this._setProperty("windowHeight",o());var p=this._isGlobal?window:this;typeof p.windowResized!="function"||(p=p.windowResized(h))===void 0||p||h.preventDefault()},s.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",a()),this._setProperty("windowHeight",o())},s.default.prototype.width=0,s.default.prototype.height=0,s.default.prototype.fullscreen=function(h){if(s.default._validateParameters("fullscreen",arguments),h===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(h){if(h=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");h.requestFullscreen?h.requestFullscreen():h.mozRequestFullScreen?h.mozRequestFullScreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.msRequestFullscreen&&h.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},s.default.prototype.pixelDensity=function(h){var p;return s.default._validateParameters("pixelDensity",arguments),typeof h=="number"?(h!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=h),(p=this).resizeCanvas(this.width,this.height,!0)):p=this._pixelDensity,p},s.default.prototype.displayDensity=function(){return window.devicePixelRatio},s.default.prototype.getURL=function(){return location.href},s.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(h){return h!==""})},s.default.prototype.getURLParams=function(){for(var h,p=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,y={};(h=p.exec(location.search))!=null;)h.index===p.lastIndex&&p.lastIndex++,y[h[1]]=h[2];return y},t=s.default,f.default=t},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(v=t("../main"))&&v.__esModule?v:{default:v};t("../internationalization");function c(i,n){n=n||console.log.bind(console),s||m(),s.some(function(a){var o;if(i.message&&i.message.match("\\W?".concat(a.name,"\\W"))!==null)return o=a.type==="function"?"".concat(a.name,"()"):a.name,n("Did you just try to use p5.js's ".concat(o," ").concat(a.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(d)),!0})}var s=null,m=null,d=(u.default._friendlyError=u.default._checkForUserDefinedFunctions=u.default._fesErrorMonitor=function(){},s=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),m=function(){function i(a){return Object.getOwnPropertyNames(a).filter(function(o){return o[0]!=="_"&&!(o in n)&&(n[o]=!0)}).map(function(o){var h=typeof a[o]=="function"?"function":o===o.toUpperCase()?"constant":"variable";return{name:o,type:h}})}var n={};(s=[].concat(i(u.default.prototype),i(t("../constants")))).sort(function(a,o){return o.name.length-a.name.length})},v=(u.default.prototype._helpForMisusedAtTopLevelCode=c,document.readyState!=="complete"&&(window.addEventListener("error",c,!1),window.addEventListener("load",function(){window.removeEventListener("error",c,!1)})),u.default);f.default=v},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(u=t("../main"))&&u.__esModule?u:{default:u};t("../internationalization"),u.default._friendlyFileLoadError=function(){},t=u.default,f.default=t},{"../internationalization":281,"../main":283}],276:[function(t,x,f){function u(n){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}function c(n){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(a){return u(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":u(a)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=v(t("../main"));t("../internationalization"),m(t("../constants"));function d(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,d=function(){return n},n)}function m(n){if(n&&n.__esModule)return n;if(n===null||c(n)!=="object"&&typeof n!="function")return{default:n};var a=d();if(a&&a.has(n))return a.get(n);var o,h,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&((h=y?Object.getOwnPropertyDescriptor(n,o):null)&&(h.get||h.set)?Object.defineProperty(p,o,h):p[o]=n[o]);return p.default=n,a&&a.set(n,p),p}function v(n){return n&&n.__esModule?n:{default:n}}s.default._fesCodeReader=function(){};var i=s.default;f.default=i},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(t,x,f){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function u(){var c=/(^|@)\S+:\d+/,s=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code])?$/;return{parse:function(m){return m.stacktrace!==void 0||m["opera#sourceloc"]!==void 0?this.parseOpera(m):m.stack&&m.stack.match(s)?this.parseV8OrIE(m):m.stack?this.parseFFOrSafari(m):void 0},extractLocation:function(m){return m.indexOf(":")===-1?[m]:[(m=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(m.replace(/[()]/g,"")))[1],m[2]||void 0,m[3]||void 0]},parseV8OrIE:function(m){return m.stack.split(`
`).filter(function(v){return!!v.match(s)},this).map(function(v){var i=(v=-1<v.indexOf("(eval ")?v.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):v).replace(/^\s+/,"").replace(/\(eval code/g,"("),n=i.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(i=n?i.replace(n[0],""):i).split(/\s+/).slice(1),n=this.extractLocation(n?n[1]:i.pop());return{functionName:i.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(n[0])?void 0:n[0],lineNumber:n[1],columnNumber:n[2],source:v}},this)},parseFFOrSafari:function(m){return m.stack.split(`
`).filter(function(v){return!v.match(d)},this).map(function(v){var i,n;return(v=-1<v.indexOf(" > eval")?v.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):v).indexOf("@")===-1&&v.indexOf(":")===-1?{functionName:v}:{functionName:(n=v.match(i=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&n[1]?n[1]:void 0,fileName:(n=this.extractLocation(v.replace(i,"")))[0],lineNumber:n[1],columnNumber:n[2],source:v}},this)},parseOpera:function(m){return!m.stacktrace||-1<m.message.indexOf(`
`)&&m.message.split(`
`).length>m.stacktrace.split(`
`).length?this.parseOpera9(m):m.stack?this.parseOpera11(m):this.parseOpera10(m)},parseOpera9:function(m){for(var v=/Line (\d+).*script (?:in )?(\S+)/i,i=m.message.split(`
`),n=[],a=2,o=i.length;a<o;a+=2){var h=v.exec(i[a]);h&&n.push({fileName:h[2],lineNumber:h[1],source:i[a]})}return n},parseOpera10:function(m){for(var v=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=m.stacktrace.split(`
`),n=[],a=0,o=i.length;a<o;a+=2){var h=v.exec(i[a]);h&&n.push({functionName:h[3]||void 0,fileName:h[2],lineNumber:h[1],source:i[a]})}return n},parseOpera11:function(m){return m.stack.split(`
`).filter(function(v){return!!v.match(c)&&!v.match(/^Error created at/)},this).map(function(v){var i,a=v.split("@"),n=this.extractLocation(a.pop()),a=a.shift()||"";return{functionName:a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(i=a.match(/\(([^)]*)\)/)?a.replace(/^[^(]+\(([^)]*)\)$/,"$1"):i)===void 0||i==="[arguments not available]"?void 0:i.split(","),fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:v}},this)}}}t.default._getErrorStackParser=function(){return new u},t=t.default,f.default=t},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(t,x,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=(c=t("../main"))&&c.__esModule?c:{default:c};(function(m){if(!(m&&m.__esModule)&&!(m===null||d(m)!=="object"&&typeof m!="function")){var v=s();if(v&&v.has(m))return v.get(m);var i,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in m){var o;Object.prototype.hasOwnProperty.call(m,i)&&((o=a?Object.getOwnPropertyDescriptor(m,i):null)&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=m[i])}n.default=m,v&&v.set(m,n)}})(t("../constants")),t("../internationalization");function s(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,s=function(){return m},m)}function d(m){return(d=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(v){return u(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":u(v)})(m)}c.default._validateParameters=c.default._clearValidateParamsCache=function(){},t=c.default,f.default=t},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(t,x,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(m)}function c(m){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(v){return u(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":u(v)})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=function(m){if(m&&m.__esModule)return m;if(m===null||c(m)!=="object"&&typeof m!="function")return{default:m};var v=d();if(v&&v.has(m))return v.get(m);var i,n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in m){var o;Object.prototype.hasOwnProperty.call(m,i)&&((o=a?Object.getOwnPropertyDescriptor(m,i):null)&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=m[i])}return n.default=m,v&&v.set(m,n),n}(t("./constants"));function d(){var m;return typeof WeakMap!="function"?null:(m=new WeakMap,d=function(){return m},m)}f.default={modeAdjust:function(m,v,i,n,a){var o;return a===s.CORNER?o={x:m,y:v,w:Math.abs(i),h:Math.abs(n)}:a===s.CORNERS?o={x:Math.min(m,i),y:Math.min(v,n),w:Math.abs(i-m),h:Math.abs(n-v)}:a===s.RADIUS?o={x:m-(i=Math.abs(i)),y:v-(n=Math.abs(n)),w:2*i,h:2*n}:a===s.CENTER&&(o={x:m-.5*(i=Math.abs(i)),y:v-.5*(n=Math.abs(n)),w:i,h:n}),o}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(t,x,f){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var u=(c=t("../core/main"))&&c.__esModule?c:{default:c};t("./internationalization");var c=Promise.resolve();Promise.all([new Promise(function(s,d){document.readyState==="complete"?s():window.addEventListener("load",s,!1)}),c]).then(function(){var s;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(s=new Event("p5Ready"),window.dispatchEvent(s),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!u.default.instance&&new u.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(t,x,f){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.setTranslatorLanguage=f.currentTranslatorLanguage=f.availableTranslatorLanguages=f.initialize=f.translator=void 0;var u,c,s=m(t("i18next")),d=m(t("i18next-browser-languagedetector"));function m(n){return n&&n.__esModule?n:{default:n}}function v(n,a){for(var o=0;o<a.length;o++){var h=a[o];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(n,h.key,h)}}var i=function(){function n(h,p){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.init(h,p)}var a,o;return a=n,(o=[{key:"fetchWithTimeout",value:function(h,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(h,p),new Promise(function(w,b){return setTimeout(function(){return b(new Error("timeout"))},y)})])}},{key:"init",value:function(h){var p=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=h,this.options=p}},{key:"read",value:function(h,p,y){var w=this.options.loadPath;h===this.options.fallback?y(null,u[h][p]):c.includes(h)?(w=this.services.interpolator.interpolate(w,{lng:h,ns:p}),this.loadUrl(w,y)):y("Not found",!1)}},{key:"loadUrl",value:function(h,p){this.fetchWithTimeout(h).then(function(y){if(y.ok)return y.json();throw new Error("failed loading ".concat(h))},function(){throw new Error("failed loading ".concat(h))}).then(function(y){return p(null,y)}).catch(p)}}])&&v(a.prototype,o),n}();i.type="backend",f.translator=function(n,a){console.debug("p5.js translator called before translations were loaded"),s.default.t(n,a)},f.initialize=function(){return s.default.use(d.default).use(i).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:u}).then(function(n){f.translator=n},function(n){return console.debug("Translations failed to load (".concat(n,")"))})},f.availableTranslatorLanguages=function(){return s.default.languages},f.currentTranslatorLanguage=function(n){return s.default.language},f.setTranslatorLanguage=function(n){return s.default.changeLanguage(n||void 0,function(a){return console.debug("Translations failed to load (".concat(a,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,f.default=t},{"./main":283}],283:[function(t,x,f){function u(n){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}function c(n){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(a){return u(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":u(a)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t("./shim");var s=function(n){if(n&&n.__esModule)return n;if(n===null||c(n)!=="object"&&typeof n!="function")return{default:n};var a=d();if(a&&a.has(n))return a.get(n);var o,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in n){var y;Object.prototype.hasOwnProperty.call(n,o)&&((y=p?Object.getOwnPropertyDescriptor(n,o):null)&&(y.get||y.set)?Object.defineProperty(h,o,y):h[o]=n[o])}return h.default=n,a&&a.set(n,h),h}(t("./constants"));function d(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,d=function(){return n},n)}function m(n,a){for(var o=0;o<a.length;o++){var h=a[o];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(n,h.key,h)}}var v,i=function(){function n(h,w){var y=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=w,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var w=Object.getOwnPropertyNames(n.prototype._registeredMethods),b=!0,S=!1,k=void 0;try{for(var E,T=w[Symbol.iterator]();!(b=(E=T.next()).done);b=!0){var R=E.value;this._registeredMethods[R]=n.prototype._registeredMethods[R].slice()}}catch(H){S=!0,k=H}finally{try{b||T.return==null||T.return()}finally{if(S)throw k}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),n.prototype.callRegisteredHooksFor=function(H){var W=this||n.prototype,K=this._isGlobal?window:this;if(W._registeredMethods.hasOwnProperty(H)){var W=W._registeredMethods[H],Q=!0,H=!1,se=void 0;try{for(var A,z=W[Symbol.iterator]();!(Q=(A=z.next()).done);Q=!0){var q=A.value;typeof q=="function"&&q.call(K)}}catch(re){H=!0,se=re}finally{try{Q||z.return==null||z.return()}finally{if(H)throw se}}}},this._start=function(){y._userNode&&typeof y._userNode=="string"&&(y._userNode=document.getElementById(y._userNode));var H=y._isGlobal?window:y;if(H.preload){y.callRegisteredHooksFor("beforePreload");var W,K=document.getElementById(y._loadingScreenId),Q=(K||((K=document.createElement("div")).innerHTML="Loading...",K.style.position="absolute",K.id=y._loadingScreenId,(y._userNode||document.body).appendChild(K)),y._preloadMethods);for(W in Q){Q[W]=Q[W]||n;var se=Q[W];se!==n.prototype&&se!==n||(y._isGlobal&&(window[W]=y._wrapPreload(y,W)),se=y),y._registeredPreloadMethods[W]=se[W],se[W]=y._wrapPreload(se,W)}H.preload(),y._runIfPreloadsAreDone()}else y._setup(),y._recording||y._draw()},this._runIfPreloadsAreDone=function(){var H,W=this._isGlobal?window:this;W._preloadCount===0&&((H=document.getElementById(W._loadingScreenId))&&H.parentNode.removeChild(H),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),W._setup(),this._recording||W._draw()))},this._decrementPreload=function(){var H=this._isGlobal?window:this;H._preloadDone||typeof H.preload!="function"||(H._setProperty("_preloadCount",H._preloadCount-1),H._runIfPreloadsAreDone())},this._wrapPreload=function(H,W){var K=this;return function(){K._incrementPreload();for(var Q=arguments.length,se=new Array(Q),A=0;A<Q;A++)se[A]=arguments[A];return K._registeredPreloadMethods[W].apply(H,se)}},this._incrementPreload=function(){var H=this._isGlobal?window:this;H._preloadDone||H._setProperty("_preloadCount",H._preloadCount+1)},this._setup=function(){y.callRegisteredHooksFor("beforeSetup"),y.createCanvas(y._defaultCanvasSize.width,y._defaultCanvasSize.height,"p2d");var H=y._isGlobal?window:y;if(typeof H.preload=="function")for(var W in y._preloadMethods)H[W]=y._preloadMethods[W][W],H[W]&&y&&(H[W]=H[W].bind(y));y._millisStart=window.performance.now(),H._preloadDone=!0,typeof H.setup=="function"&&H.setup();var K=document.getElementsByTagName("canvas"),Q=!0,se=!1,A=void 0;try{for(var z,q=K[Symbol.iterator]();!(Q=(z=q.next()).done);Q=!0){var $=z.value;$.dataset.hidden==="true"&&($.style.visibility="",delete $.dataset.hidden)}}catch(ie){se=!0,A=ie}finally{try{Q||q.return==null||q.return()}finally{if(se)throw A}}y._lastTargetFrameTime=window.performance.now(),y._lastRealFrameTime=window.performance.now(),y._setupDone=!0,(y._accessibleOutputs.grid||y._accessibleOutputs.text)&&y._updateAccsOutput(),y.callRegisteredHooksFor("afterSetup")},this._draw=function(W){var W=W||window.performance.now(),K=W-y._lastTargetFrameTime,Q=1e3/y._targetFrameRate;(!y._loop||Q-5<=K)&&(y.deltaTime=W-y._lastRealFrameTime,y._setProperty("deltaTime",y.deltaTime),y._frameRate=1e3/y.deltaTime,y.redraw(),y._lastTargetFrameTime=Math.max(y._lastTargetFrameTime+Q,W),y._lastRealFrameTime=W,y._updateMouseCoords!==void 0&&(y._updateMouseCoords(),y._setProperty("movedX",0),y._setProperty("movedY",0))),y._loop&&(y._requestAnimId=window.requestAnimationFrame(y._draw))},this._setProperty=function(H,W){y[H]=W,y._isGlobal&&(window[H]=W)},this.remove=function(){y._startListener&&window.removeEventListener("load",y._startListener,!1);var H=document.getElementById(y._loadingScreenId);if(H&&(H.parentNode.removeChild(H),y._incrementPreload()),y._curElement){for(var W in y._loop=!1,y._requestAnimId&&window.cancelAnimationFrame(y._requestAnimId),y._events)window.removeEventListener(W,y._events[W]);var K=!0,H=!1,Q=void 0;try{for(var se,A=y._elements[Symbol.iterator]();!(K=(se=A.next()).done);K=!0){var z,q=se.value;for(z in q.elt&&q.elt.parentNode&&q.elt.parentNode.removeChild(q.elt),q._events)q.elt.removeEventListener(z,q._events[z])}}catch(ge){H=!0,Q=ge}finally{try{K||A.return==null||A.return()}finally{if(H)throw Q}}var $=y;y._registeredMethods.remove.forEach(function(ge){ge!==void 0&&ge.call($)})}if(y._isGlobal){for(var ie in n.prototype)try{delete window[ie]}catch{window[ie]=void 0}for(var re in y)if(y.hasOwnProperty(re))try{delete window[re]}catch{window[re]=void 0}n.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach(function(H){H!==void 0&&H.call(this)},this),this._setupPromisePreloads();var O,M,L=this._createFriendlyGlobalFunctionBinder();if(h)h(this),n._checkForUserDefinedFunctions(this);else{for(var I in this._isGlobal=!0,n.instance=this,n.prototype)typeof n.prototype[I]=="function"?(O=I.substring(2),this._events.hasOwnProperty(O)||(Math.hasOwnProperty(I)&&Math[I]===n.prototype[I]?L(I,n.prototype[I]):L(I,n.prototype[I].bind(this)))):L(I,n.prototype[I]);for(var B in this)this.hasOwnProperty(B)&&L(B,this[B])}for(M in this._events){var V=this["_on".concat(M)];V&&(V=V.bind(this),window.addEventListener(M,V,{passive:!1}),this._events[M]=V)}function G(){y._setProperty("focused",!0)}function Y(){y._setProperty("focused",!1)}window.addEventListener("focus",G),window.addEventListener("blur",Y),this.registerMethod("remove",function(){window.removeEventListener("focus",G),window.removeEventListener("blur",Y)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var a,o;return a=n,(o=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=s.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(h,p){n.prototype._preloadMethods.hasOwnProperty(h)||(n.prototype._preloadMethods[h]=p)}},{key:"registerMethod",value:function(h,p){var y=this||n.prototype;y._registeredMethods.hasOwnProperty(h)||(y._registeredMethods[h]=[]),y._registeredMethods[h].push(p)}},{key:"unregisterMethod",value:function(h,p){var y=this||n.prototype;if(y._registeredMethods.hasOwnProperty(h)){for(var w=y._registeredMethods[h],b=[],S=0;S<w.length;S++)w[S]===p&&b.push(S);for(var k=b.length-1;0<=k;k--)w.splice(b[k],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var h=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},p=h.globalObject||window;return h.log||console.log.bind(console),function(y,w){n.disableFriendlyErrors,p[y]=w}}}])&&m(a.prototype,o),n}();for(v in i.instance=null,i.disableFriendlyErrors=!1,s)i.prototype[v]=s[v];i.VERSION=s.VERSION,i.prototype._preloadMethods={loadJSON:i.prototype,loadImage:i.prototype,loadStrings:i.prototype,loadXML:i.prototype,loadBytes:i.prototype,loadTable:i.prototype,loadFont:i.prototype,loadModel:i.prototype,loadShader:i.prototype},i.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},i.prototype._registeredPreloadMethods={},f.default=i},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("./main"))&&t.__esModule?t:{default:t};function c(s,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}u.default.Element=function(){function s(i,n){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.elt=i,this._pInst=this._pixelsState=n,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var d,m,v;return d=s,v=[{key:"_adjustListener",value:function(i,n,a){return n===!1?u.default.Element._detachListener(i,a):u.default.Element._attachListener(i,n,a),this}},{key:"_attachListener",value:function(i,n,a){a._events[i]&&u.default.Element._detachListener(i,a),n=n.bind(a),a.elt.addEventListener(i,n,!1),a._events[i]=n}},{key:"_detachListener",value:function(i,n){var a=n._events[i];n.elt.removeEventListener(i,a,!1),n._events[i]=null}}],(m=[{key:"parent",value:function(i){return i===void 0?this.elt.parentNode:(typeof i=="string"?(i[0]==="#"&&(i=i.substring(1)),i=document.getElementById(i)):i instanceof u.default.Element&&(i=i.elt),i.appendChild(this.elt),this)}},{key:"id",value:function(i){return i===void 0?this.elt.id:(this.elt.id=i,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(i){return i===void 0?this.elt.className:(this.elt.className=i,this)}},{key:"mousePressed",value:function(i){return u.default.Element._adjustListener("mousedown",function(n){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(n),i.call(this,n)},this),this}},{key:"doubleClicked",value:function(i){return u.default.Element._adjustListener("dblclick",i,this),this}},{key:"mouseWheel",value:function(i){return u.default.Element._adjustListener("wheel",i,this),this}},{key:"mouseReleased",value:function(i){return u.default.Element._adjustListener("mouseup",i,this),this}},{key:"mouseClicked",value:function(i){return u.default.Element._adjustListener("click",i,this),this}},{key:"mouseMoved",value:function(i){return u.default.Element._adjustListener("mousemove",i,this),this}},{key:"mouseOver",value:function(i){return u.default.Element._adjustListener("mouseover",i,this),this}},{key:"mouseOut",value:function(i){return u.default.Element._adjustListener("mouseout",i,this),this}},{key:"touchStarted",value:function(i){return u.default.Element._adjustListener("touchstart",i,this),this}},{key:"touchMoved",value:function(i){return u.default.Element._adjustListener("touchmove",i,this),this}},{key:"touchEnded",value:function(i){return u.default.Element._adjustListener("touchend",i,this),this}},{key:"dragOver",value:function(i){return u.default.Element._adjustListener("dragover",i,this),this}},{key:"dragLeave",value:function(i){return u.default.Element._adjustListener("dragleave",i,this),this}},{key:"_setProperty",value:function(i,n){this[i]=n}}])&&c(d.prototype,m),v&&c(d,v),s}(),t=u.default.Element,f.default=t},{"./main":283}],285:[function(t,x,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(y)}function c(y){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(p=t("./main"))&&p.__esModule?p:{default:p},d=function(y){if(y&&y.__esModule)return y;if(y===null||c(y)!=="object"&&typeof y!="function")return{default:y};var w=m();if(w&&w.has(y))return w.get(y);var b,S={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in y){var E;Object.prototype.hasOwnProperty.call(y,b)&&((E=k?Object.getOwnPropertyDescriptor(y,b):null)&&(E.get||E.set)?Object.defineProperty(S,b,E):S[b]=y[b])}return S.default=y,w&&w.set(y,S),S}(t("./constants"));function m(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,m=function(){return y},y)}function v(y,w){for(var b=0;b<w.length;b++){var S=w[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}function i(y,w){return(i=Object.setPrototypeOf||function(b,S){return b.__proto__=S,b})(y,w)}function n(y){return function(){var w,b=h(y);return a(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=h(this).constructor,Reflect.construct(b,arguments,w)):b.apply(this,arguments))}}function a(y,w){return!w||c(w)!=="object"&&typeof w!="function"?o(y):w}function o(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function h(y){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(y)}s.default.Graphics=function(y){var w=S;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),y&&i(w,y);var b=n(S);function S(k,E,B,R,O){var M;if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");I=O||document.createElement("canvas"),(M=b.call(this,I,R)).canvas=I;var L,I=B||d.P2D,B=R._userNode||document.body;for(L in O||B.appendChild(M.canvas),s.default.prototype)M[L]||(typeof s.default.prototype[L]=="function"?M[L]=s.default.prototype[L].bind(o(M)):M[L]=s.default.prototype[L]);return s.default.prototype._initializeInstanceVariables.apply(o(M)),M.width=k,M.height=E,M._pixelDensity=R._pixelDensity,I===d.WEBGL?(M._renderer=new s.default.RendererGL(M.canvas,o(M),!1),k=(O=M._renderer._adjustDimensions(k,E)).adjustedWidth,E=O.adjustedHeight):M._renderer=new s.default.Renderer2D(M.canvas,o(M),!1),R._elements.push(o(M)),Object.defineProperty(o(M),"deltaTime",{get:function(){return this._pInst.deltaTime}}),M._renderer.resize(k,E),M._renderer._applyDefaults(),a(M,o(M))}return w=S,(y=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var k,E=this._pInst._elements.indexOf(this);for(k in E!==-1&&this._pInst._elements.splice(E,1),this._events)this.elt.removeEventListener(k,this._events[k]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(k){return new s.default.Framebuffer(this,k)}}])&&v(w.prototype,y),S}(s.default.Element);var p=s.default.Graphics;f.default=p},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(t,x,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=(h=t("./main"))&&h.__esModule?h:{default:h},s=function(y){if(y&&y.__esModule)return y;if(y===null||m(y)!=="object"&&typeof y!="function")return{default:y};var w=d();if(w&&w.has(y))return w.get(y);var b,S={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in y){var E;Object.prototype.hasOwnProperty.call(y,b)&&((E=k?Object.getOwnPropertyDescriptor(y,b):null)&&(E.get||E.set)?Object.defineProperty(S,b,E):S[b]=y[b])}return S.default=y,w&&w.set(y,S),S}(t("../core/constants"));function d(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,d=function(){return y},y)}function m(y){return(m=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(y)}function v(y,w){for(var b=0;b<w.length;b++){var S=w[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}function i(y,w){return(i=Object.setPrototypeOf||function(b,S){return b.__proto__=S,b})(y,w)}function n(y){return function(){var w,b,S=o(y);return w=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(w=o(this).constructor,Reflect.construct(S,arguments,w)):S.apply(this,arguments),S=this,!(b=w)||m(b)!=="object"&&typeof b!="function"?a(S):b}}function a(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function o(y){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)})(y)}var h=function(y){var w=S;if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),y&&i(w,y);var b=n(S);function S(k,E,T){var R;if(this instanceof S)return(R=b.call(this,k,E)).canvas=k,R._pixelsState=E,T?(R._isMainCanvas=!0,R._pInst._setProperty("_curElement",a(R)),R._pInst._setProperty("canvas",R.canvas),R._pInst._setProperty("width",R.width),R._pInst._setProperty("height",R.height)):(R.canvas.style.display="none",R._styles=[]),R._clipping=!1,R._clipInvert=!1,R._textSize=12,R._textLeading=15,R._textFont="sans-serif",R._textStyle=s.NORMAL,R._textAscent=null,R._textDescent=null,R._textAlign=s.LEFT,R._textBaseline=s.BASELINE,R._textWrap=s.WORD,R._rectMode=s.CORNER,R._ellipseMode=s.CENTER,R._curveTightness=0,R._imageMode=s.CORNER,R._tint=null,R._doStroke=!0,R._doFill=!0,R._strokeSet=!1,R._fillSet=!1,R._leadingSet=!1,R._pushPopDepth=0,R;throw new TypeError("Cannot call a class as a function")}return w=S,(y=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(k){this._pushPopDepth--,k.properties&&Object.assign(this,k.properties)}},{key:"beginClip",value:function(){var k=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=k.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(k,E){this.width=k,this.height=E,this.elt.width=k*this._pInst._pixelDensity,this.elt.height=E*this._pInst._pixelDensity,this.elt.style.width="".concat(k,"px"),this.elt.style.height="".concat(E,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(k,E,T,R){var O=this._pixelsState,M=O._pixelDensity,L=this.canvas;if(k===void 0&&E===void 0)k=E=0,T=O.width,R=O.height;else if(k*=M,E*=M,T===void 0&&R===void 0)return k<0||E<0||k>=L.width||E>=L.height?[0,0,0,0]:this._getPixel(k,E);return O=new c.default.Image(T*M,R*M),O.pixelDensity(M),O.canvas.getContext("2d").drawImage(L,k,E,T*M,R*M,0,0,T*M,R*M),O}},{key:"textLeading",value:function(k){return typeof k=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",k),this._pInst):this._textLeading}},{key:"textStyle",value:function(k){return k?(k!==s.NORMAL&&k!==s.ITALIC&&k!==s.BOLD&&k!==s.BOLDITALIC||this._setProperty("_textStyle",k),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(k,E){return k!==void 0?(this._setProperty("_textAlign",k),E!==void 0&&this._setProperty("_textBaseline",E),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(k){return this._setProperty("_textWrap",k),this._textWrap}},{key:"text",value:function(k,E,T,R,O){var M,L,I,B,V=this._pInst,G=this._textWrap,Y=Number.MAX_VALUE,H=T;if((this._doFill||this._doStroke)&&k!==void 0){if(M=(k=(k=typeof k!="string"?k.toString():k).replace(/(\t)/g,"  ")).split(`
`),R!==void 0){switch(this._rectMode===s.CENTER&&(E-=R/2),this._textAlign){case s.CENTER:E+=R/2;break;case s.RIGHT:E+=R}if(O!==void 0){this._rectMode===s.CENTER&&(T-=O/2,H-=O/2);var k=T,W=V.textAscent();switch(this._textBaseline){case s.BOTTOM:B=T+O,T=Math.max(B,T),H+=W;break;case s.CENTER:B=T+O/2,T=Math.max(B,T),H+=W/2}Y=T+O-W,this._textBaseline===s.CENTER&&(Y=k+O-W/2)}else this._textBaseline!==s.BOTTOM&&this._textBaseline!==s.CENTER||(H=T-(k=V.textSize()*this._textLeading)/2,Y=T+k/2);if(G===s.WORD){for(var K=[],Q=0;Q<M.length;Q++){for(var se="",A=M[Q].split(" "),z=0;z<A.length;z++)L="".concat(se+A[z])+" ",se=R<(I=this.textWidth(L))&&0<se.length?(K.push(se),"".concat(A[z])+" "):L;K.push(se)}var q=0;this._textBaseline===s.CENTER?q=(K.length-1)*V.textLeading()/2:this._textBaseline===s.BOTTOM&&(q=(K.length-1)*V.textLeading());for(var $=0;$<M.length;$++){se="",A=M[$].split(" ");for(var ie=0;ie<A.length;ie++)L="".concat(se+A[ie])+" ",R<(I=this.textWidth(L))&&0<se.length?(this._renderText(V,se.trim(),E,T-q,Y,H),se="".concat(A[ie])+" ",T+=V.textLeading()):se=L;this._renderText(V,se.trim(),E,T-q,Y,H),T+=V.textLeading()}}else{for(var re=[],fe=0;fe<M.length;fe++)for(var ge=M[fe].split(se=""),de=0;de<ge.length;de++)L="".concat(se+ge[de]),(I=this.textWidth(L))<=R?se+=ge[de]:R<I&&0<se.length&&(re.push(se),se="".concat(ge[de]));re.push(se);var me=0;this._textBaseline===s.CENTER?me=(re.length-1)*V.textLeading()/2:this._textBaseline===s.BOTTOM&&(me=(re.length-1)*V.textLeading());for(var _e=0;_e<M.length;_e++){ge=M[_e].split(se="");for(var ae=0;ae<ge.length;ae++)L="".concat(se+ge[ae]),(I=this.textWidth(L))<=R?se+=ge[ae]:R<I&&0<se.length&&(this._renderText(V,se.trim(),E,T-me,Y,H),T+=V.textLeading(),se="".concat(ge[ae]))}this._renderText(V,se.trim(),E,T-me,Y,H),T+=V.textLeading()}}else{var he=0;this._textBaseline===s.CENTER?he=(M.length-1)*V.textLeading()/2:this._textBaseline===s.BOTTOM&&(he=(M.length-1)*V.textLeading());for(var be=0;be<M.length;be++)this._renderText(V,M[be],E,T-he,Y,H-he),T+=V.textLeading()}return V}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var k=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return m(k)==="object"&&k.font&&k.font.supported}},{key:"_updateTextMetrics",value:function(){var k,E,T,R,O,M;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((k=document.createElement("span")).style.fontFamily=this._textFont,k.style.fontSize="".concat(this._textSize,"px"),k.innerHTML="ABCjgq|",(M=document.createElement("div")).style.display="inline-block",M.style.width="1px",M.style.height="0px",R=((E=document.createElement("div")).appendChild(k),E.appendChild(M),E.style.height="0px",E.style.overflow="hidden",document.body.appendChild(E),M.style.verticalAlign="baseline",p(M)),O=p(k),T=R[1]-O[1],R=(M.style.verticalAlign="bottom",p(M)),O=p(k),M=R[1]-O[1]-T,document.body.removeChild(E),this._setProperty("_textAscent",T),this._setProperty("_textDescent",M)),this}}])&&v(w.prototype,y),S}(c.default.Element);function p(y){var w=0,b=0;if(y.offsetParent)for(;w+=y.offsetLeft,b+=y.offsetTop,y=y.offsetParent;);else w+=y.offsetLeft,b+=y.offsetTop;return[w,b]}h.prototype.textSize=function(y){return typeof y=="number"?(this._setProperty("_textSize",y),this._leadingSet||this._setProperty("_textLeading",y*s._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},c.default.Renderer=h,t=c.default.Renderer,f.default=t},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(y,x,f){function u(w){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(w)}function c(w){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(w)}y("core-js/modules/es.symbol"),y("core-js/modules/es.symbol.description"),y("core-js/modules/es.symbol.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.iterator"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-own-property-descriptor"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.reflect.construct"),y("core-js/modules/es.reflect.get"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),y("core-js/modules/es.string.iterator"),y("core-js/modules/es.weak-map"),y("core-js/modules/web.dom-collections.iterator"),y("core-js/modules/es.array.concat"),y("core-js/modules/es.array.fill"),y("core-js/modules/es.array.join"),y("core-js/modules/es.array.slice"),y("core-js/modules/es.function.name"),y("core-js/modules/es.object.get-prototype-of"),y("core-js/modules/es.object.to-string"),y("core-js/modules/es.regexp.exec"),y("core-js/modules/es.regexp.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(p=y("./main"))&&p.__esModule?p:{default:p},d=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var b=m();if(b&&b.has(w))return b.get(w);var S,k={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in w){var T;Object.prototype.hasOwnProperty.call(w,S)&&((T=E?Object.getOwnPropertyDescriptor(w,S):null)&&(T.get||T.set)?Object.defineProperty(k,S,T):k[S]=w[S])}return k.default=w,b&&b.set(w,k),k}(y("./constants"));function m(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,m=function(){return w},w)}function v(w,b){for(var S=0;S<b.length;S++){var k=b[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}function i(w,b,S){return(i=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(R,E,T){var R=function(O,M){for(;!Object.prototype.hasOwnProperty.call(O,M)&&(O=o(O))!==null;);return O}(R,E);if(R)return(R=Object.getOwnPropertyDescriptor(R,E)).get?R.get.call(T):R.value})(w,b,S||w)}function n(w,b){return(n=Object.setPrototypeOf||function(S,k){return S.__proto__=k,S})(w,b)}function a(w){return function(){var b,S=o(w),S=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=o(this).constructor,Reflect.construct(S,arguments,b)):S.apply(this,arguments),this);if(!b||c(b)!=="object"&&typeof b!="function"){if(S!==void 0)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function o(w){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(w)}y("./p5.Renderer");var h="rgba(0,0,0,0)",p=function(w){var b=k;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),w&&n(b,w);var S=a(k);function k(E,T,R){if(this instanceof k)return(E=S.call(this,E,T,R)).drawingContext=E.canvas.getContext("2d"),E._pInst._setProperty("drawingContext",E.drawingContext),E;throw new TypeError("Cannot call a class as a function")}return b=k,(w=[{key:"getFilterGraphicsLayer",value:function(){var E;return this.filterGraphicsLayer||(E=(this._pInst instanceof s.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new s.default.Graphics(this.width,this.height,d.WEBGL,E)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=d.BLEND,this._setFill(d._DEFAULT_FILL),this._setStroke(d._DEFAULT_STROKE),this.drawingContext.lineCap=d.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(E,T){i(o(k.prototype),"resize",this).call(this,E,T),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var E,T;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof s.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(E=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(E,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(E=this._getFill(),T=(T=this._pInst).color.apply(T,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(T.levels),T=T.toString(),this._setFill(T),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(E),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setFill(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",E.levels)}},{key:"stroke",value:function(){var E=(E=this._pInst).color.apply(E,arguments);this._setStroke(E.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",E.levels)}},{key:"erase",value:function(E,T){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,E=this._pInst.color(255,E).toString(),this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,E=this._pInst.color(255,T).toString(),this.drawingContext.strokeStyle=E,T=this._cachedBlendMode,this.blendMode(d.REMOVE),this._cachedBlendMode=T,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},E=(i(o(k.prototype),"beginClip",this).call(this,E),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.fillStyle=E,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),E=(this.drawingContext.strokeStyle=E,this._cachedBlendMode);this.blendMode(d.BLEND),this._cachedBlendMode=E,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),i(o(k.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(E,T,R,O,M,L,I,B,V){E.gifProperties&&E._animateGif(this._pInst);try{s.default.MediaElement&&E instanceof s.default.MediaElement&&E._ensureCanvas();var G=(G=this._tint&&E.canvas?this._getTintedImageCanvas(E):G)||E.canvas||E.elt,Y=1;E.width&&0<E.width&&(Y=G.width/E.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(G,Y*T,Y*R,Y*O,Y*M,L,I,B,V),this._isErasing&&this._pInst.erase()}catch(H){if(H.name!=="NS_ERROR_NOT_AVAILABLE")throw H}}},{key:"_getTintedImageCanvas",value:function(E){if(!E.canvas)return E;E.tintCanvas||(E.tintCanvas=document.createElement("canvas")),E.tintCanvas.width!==E.canvas.width&&(E.tintCanvas.width=E.canvas.width),E.tintCanvas.height!==E.canvas.height&&(E.tintCanvas.height=E.canvas.height);var T=E.tintCanvas.getContext("2d");return T.save(),T.clearRect(0,0,E.canvas.width,E.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(T.drawImage(E.canvas,0,0),T.globalCompositeOperation="luminosity",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="color",T.drawImage(E.canvas,0,0),T.globalCompositeOperation="multiply",T.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),T.fillRect(0,0,E.canvas.width,E.canvas.height),T.globalCompositeOperation="destination-in"),T.globalAlpha=this._tint[3]/255,T.drawImage(E.canvas,0,0),T.restore(),E.tintCanvas}},{key:"blendMode",value:function(E){if(E===d.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(E!==d.BLEND&&E!==d.REMOVE&&E!==d.DARKEST&&E!==d.LIGHTEST&&E!==d.DIFFERENCE&&E!==d.MULTIPLY&&E!==d.EXCLUSION&&E!==d.SCREEN&&E!==d.REPLACE&&E!==d.OVERLAY&&E!==d.HARD_LIGHT&&E!==d.SOFT_LIGHT&&E!==d.DODGE&&E!==d.BURN&&E!==d.ADD)throw new Error("Mode ".concat(E," not recognized."));this._cachedBlendMode=E,this.drawingContext.globalCompositeOperation=E}}},{key:"blend",value:function(){for(var E=this.drawingContext.globalCompositeOperation,T=arguments.length,R=new Array(T),O=0;O<T;O++)R[O]=arguments[O];var M=R[R.length-1],L=Array.prototype.slice.call(R,0,R.length-1);this.drawingContext.globalCompositeOperation=M,s.default.prototype.copy.apply(this,L),this.drawingContext.globalCompositeOperation=E}},{key:"_getPixel",value:function(E,T){return E=this.drawingContext.getImageData(E,T,1,1).data,[E[0],E[1],E[2],E[3]]}},{key:"loadPixels",value:function(){var E=this._pixelsState,T=E._pixelDensity,R=this.width*T,T=this.height*T,R=this.drawingContext.getImageData(0,0,R,T);E._setProperty("imageData",R),E._setProperty("pixels",R.data)}},{key:"set",value:function(E,T,R){E=Math.floor(E),T=Math.floor(T);var O=this._pixelsState;if(R instanceof s.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(O._pixelDensity,O._pixelDensity),this.drawingContext.clearRect(E,T,R.width,R.height),this.drawingContext.drawImage(R.canvas,E,T),this.drawingContext.restore();else{var M=0,L=0,I=0,B=0,V=4*(T*O._pixelDensity*(this.width*O._pixelDensity)+E*O._pixelDensity);if(O.imageData||O.loadPixels(),typeof R=="number")V<O.pixels.length&&(I=L=M=R,B=255);else if(Array.isArray(R)){if(R.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");V<O.pixels.length&&(M=R[0],L=R[1],I=R[2],B=R[3])}else R instanceof s.default.Color&&V<O.pixels.length&&(M=R.levels[0],L=R.levels[1],I=R.levels[2],B=R.levels[3]);for(var G=0;G<O._pixelDensity;G++)for(var Y=0;Y<O._pixelDensity;Y++)V=4*((T*O._pixelDensity+Y)*this.width*O._pixelDensity+(E*O._pixelDensity+G)),O.pixels[V]=M,O.pixels[V+1]=L,O.pixels[V+2]=I,O.pixels[V+3]=B}}},{key:"updatePixels",value:function(E,T,R,O){var M=this._pixelsState,L=M._pixelDensity;E===void 0&&T===void 0&&R===void 0&&O===void 0&&(T=E=0,R=this.width,O=this.height),E*=L,T*=L,R*=L,O*=L,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=M.imageData),this.drawingContext.putImageData(M.imageData,0,0,E,T,R,O)}},{key:"arc",value:function(V,G,Y,H,M,L,I){var B=this.drawingContext,V=V+Y/2,G=G+H/2,Y=Y/2,H=H/2,W=!(I===d.CHORD||I===d.OPEN||(L-M)%d.TWO_PI==0);return this._doFill&&(this._clipping||B.beginPath(),B.ellipse(V,G,Y,H,0,M,L),W&&B.lineTo(V,G),B.closePath(),this._clipping||B.fill()),this._doStroke&&(this._clipping||B.beginPath(),B.ellipse(V,G,Y,H,0,M,L),I===d.PIE&&W&&B.lineTo(V,G),I!==d.PIE&&I!==d.CHORD||B.closePath(),this._clipping||B.stroke()),this}},{key:"ellipse",value:function(B){var T=this.drawingContext,R=this._doFill,O=this._doStroke,M=parseFloat(B[0]),L=parseFloat(B[1]),I=parseFloat(B[2]),B=parseFloat(B[3]);if(R&&!O){if(this._getFill()===h)return this}else if(!R&&O&&this._getStroke()===h)return this;M+=I/2,L+=B/2,I/=2,B/=2,this._clipping||T.beginPath(),T.ellipse(M,L,I,B,0,0,2*Math.PI),T.closePath(),!this._clipping&&R&&T.fill(),!this._clipping&&O&&T.stroke()}},{key:"line",value:function(E,T,R,O){var M=this.drawingContext;return this._doStroke&&this._getStroke()!==h&&(this._clipping||M.beginPath(),M.moveTo(E,T),M.lineTo(R,O),M.stroke()),this}},{key:"point",value:function(E,T){var R,O,M=this.drawingContext;return!this._doStroke||this._getStroke()===h?this:(R=this._getStroke(),O=this._getFill(),this._clipping||this._setFill(R),this._clipping||M.beginPath(),M.arc(E,T,M.lineWidth/2,0,d.TWO_PI,!1),void(this._clipping||(M.fill(),this._setFill(O))))}},{key:"quad",value:function(E,T,R,O,M,L,I,B){var V=this.drawingContext,G=this._doFill,Y=this._doStroke;if(G&&!Y){if(this._getFill()===h)return this}else if(!G&&Y&&this._getStroke()===h)return this;return this._clipping||V.beginPath(),V.moveTo(E,T),V.lineTo(R,O),V.lineTo(M,L),V.lineTo(I,B),V.closePath(),!this._clipping&&G&&V.fill(),!this._clipping&&Y&&V.stroke(),this}},{key:"rect",value:function(Y){var T,R,O=Y[0],M=Y[1],L=Y[2],I=Y[3],B=Y[4],V=Y[5],G=Y[6],Y=Y[7],H=this.drawingContext,W=this._doFill,K=this._doStroke;if(W&&!K){if(this._getFill()===h)return this}else if(!W&&K&&this._getStroke()===h)return this;return this._clipping||H.beginPath(),B===void 0?H.rect(O,M,L,I):(V===void 0&&(V=B),G===void 0&&(G=V),Y===void 0&&(Y=G),K=(W=Math.abs(L))/2,R=(T=Math.abs(I))/2,H.roundRect(O,M,L,I,[B=T<2*(B=W<2*B?K:B)?R:B,V=T<2*(V=W<2*V?K:V)?R:V,G=T<2*(G=W<2*G?K:G)?R:G,Y=T<2*(Y=W<2*Y?K:Y)?R:Y])),!this._clipping&&this._doFill&&H.fill(),!this._clipping&&this._doStroke&&H.stroke(),this}},{key:"triangle",value:function(G){var T=this.drawingContext,R=this._doFill,O=this._doStroke,M=G[0],L=G[1],I=G[2],B=G[3],V=G[4],G=G[5];if(R&&!O){if(this._getFill()===h)return this}else if(!R&&O&&this._getStroke()===h)return this;this._clipping||T.beginPath(),T.moveTo(M,L),T.lineTo(I,B),T.lineTo(V,G),T.closePath(),!this._clipping&&R&&T.fill(),!this._clipping&&O&&T.stroke()}},{key:"endShape",value:function(E,T,R,O,M,L,I){if(T.length!==0&&(this._doStroke||this._doFill)){var B,V,G,Y=E===d.CLOSE,H=(Y&&!L&&T.push(T[0]),T.length);if(R&&I===null){if(3<H){var W=[],K=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[1][0],T[1][1]),V=1;V+2<H;V++)B=T[V],W[0]=[B[0],B[1]],W[1]=[B[0]+(K*T[V+1][0]-K*T[V-1][0])/6,B[1]+(K*T[V+1][1]-K*T[V-1][1])/6],W[2]=[T[V+1][0]+(K*T[V][0]-K*T[V+2][0])/6,T[V+1][1]+(K*T[V][1]-K*T[V+2][1])/6],W[3]=[T[V+1][0],T[V+1][1]],this.drawingContext.bezierCurveTo(W[1][0],W[1][1],W[2][0],W[2][1],W[3][0],W[3][1]);Y&&this.drawingContext.lineTo(T[V+1][0],T[V+1][1]),this._doFillStrokeClose(Y)}}else if(O&&I===null){for(this._clipping||this.drawingContext.beginPath(),V=0;V<H;V++)T[V].isVert?T[V].moveTo?this.drawingContext.moveTo(T[V][0],T[V][1]):this.drawingContext.lineTo(T[V][0],T[V][1]):this.drawingContext.bezierCurveTo(T[V][0],T[V][1],T[V][2],T[V][3],T[V][4],T[V][5]);this._doFillStrokeClose(Y)}else if(M&&I===null){for(this._clipping||this.drawingContext.beginPath(),V=0;V<H;V++)T[V].isVert?T[V].moveTo?this.drawingContext.moveTo(T[V][0],T[V][1]):this.drawingContext.lineTo(T[V][0],T[V][1]):this.drawingContext.quadraticCurveTo(T[V][0],T[V][1],T[V][2],T[V][3]);this._doFillStrokeClose(Y)}else if(I===d.POINTS)for(V=0;V<H;V++)B=T[V],this._doStroke&&this._pInst.stroke(B[6]),this._pInst.point(B[0],B[1]);else if(I===d.LINES)for(V=0;V+1<H;V+=2)B=T[V],this._doStroke&&this._pInst.stroke(T[V+1][6]),this._pInst.line(B[0],B[1],T[V+1][0],T[V+1][1]);else if(I===d.TRIANGLES)for(V=0;V+2<H;V+=3)B=T[V],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(B[0],B[1]),this.drawingContext.lineTo(T[V+1][0],T[V+1][1]),this.drawingContext.lineTo(T[V+2][0],T[V+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(T[V+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(T[V+2][6]),this.drawingContext.stroke());else if(I===d.TRIANGLE_STRIP)for(V=0;V+1<H;V++)B=T[V],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[V+1][0],T[V+1][1]),this.drawingContext.lineTo(B[0],B[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[V+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[V+1][5]),V+2<H&&(this.drawingContext.lineTo(T[V+2][0],T[V+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[V+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(T[V+2][5])),this._doFillStrokeClose(Y);else if(I===d.TRIANGLE_FAN){if(2<H){for(this._clipping||this.drawingContext.beginPath(),V=2;V<H;V++)B=T[V],this.drawingContext.moveTo(T[0][0],T[0][1]),this.drawingContext.lineTo(T[V-1][0],T[V-1][1]),this.drawingContext.lineTo(B[0],B[1]),this.drawingContext.lineTo(T[0][0],T[0][1]),V<H-1&&(this._doFill&&B[5]!==T[V+1][5]||this._doStroke&&B[6]!==T[V+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(B[5]),this.drawingContext.fill(),this._pInst.fill(T[V+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(B[6]),this.drawingContext.stroke(),this._pInst.stroke(T[V+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(Y)}}else if(I===d.QUADS)for(V=0;V+3<H;V+=4){for(B=T[V],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(B[0],B[1]),G=1;G<4;G++)this.drawingContext.lineTo(T[V+G][0],T[V+G][1]);this.drawingContext.lineTo(B[0],B[1]),!this._clipping&&this._doFill&&this._pInst.fill(T[V+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[V+3][6]),this._doFillStrokeClose(Y)}else if(I===d.QUAD_STRIP){if(3<H)for(V=0;V+1<H;V+=2)B=T[V],this._clipping||this.drawingContext.beginPath(),V+3<H?(this.drawingContext.moveTo(T[V+2][0],T[V+2][1]),this.drawingContext.lineTo(B[0],B[1]),this.drawingContext.lineTo(T[V+1][0],T[V+1][1]),this.drawingContext.lineTo(T[V+3][0],T[V+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(T[V+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(T[V+3][6])):(this.drawingContext.moveTo(B[0],B[1]),this.drawingContext.lineTo(T[V+1][0],T[V+1][1])),this._doFillStrokeClose(Y)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(T[0][0],T[0][1]),V=1;V<H;V++)(B=T[V]).isVert&&(B.moveTo?(Y&&this.drawingContext.closePath(),this.drawingContext.moveTo(B[0],B[1])):this.drawingContext.lineTo(B[0],B[1]));this._doFillStrokeClose(Y)}L=M=O=R=!1,Y&&T.pop()}return this}},{key:"strokeCap",value:function(E){return E!==d.ROUND&&E!==d.SQUARE&&E!==d.PROJECT||(this.drawingContext.lineCap=E),this}},{key:"strokeJoin",value:function(E){return E!==d.ROUND&&E!==d.BEVEL&&E!==d.MITER||(this.drawingContext.lineJoin=E),this}},{key:"strokeWeight",value:function(E){return this.drawingContext.lineWidth=E===void 0||E===0?1e-4:E,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(E){E!==this._cachedFillStyle&&(this.drawingContext.fillStyle=E,this._cachedFillStyle=E)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(E){E!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=E,this._cachedStrokeStyle=E)}},{key:"bezier",value:function(E,T,R,O,M,L,I,B){return this._pInst.beginShape(),this._pInst.vertex(E,T),this._pInst.bezierVertex(R,O,M,L,I,B),this._pInst.endShape(),this}},{key:"curve",value:function(E,T,R,O,M,L,I,B){return this._pInst.beginShape(),this._pInst.curveVertex(E,T),this._pInst.curveVertex(R,O),this._pInst.curveVertex(M,L),this._pInst.curveVertex(I,B),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(E){E&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(E,T,R,O,M,L){this.drawingContext.transform(E,T,R,O,M,L)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(E){this.drawingContext.rotate(E)}},{key:"scale",value:function(E,T){return this.drawingContext.scale(E,T),this}},{key:"translate",value:function(E,T){return E instanceof s.default.Vector&&(T=E.y,E=E.x),this.drawingContext.translate(E,T),this}},{key:"_renderText",value:function(E,T,R,O,M,L){if(!(O<L||M<=O))return E.push(),this._isOpenType()?this._textFont._renderPath(T,R,O,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(T,R,O),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(d._DEFAULT_TEXT_FILL),this.drawingContext.fillText(T,R,O))),E.pop(),E}},{key:"textWidth",value:function(E){return this._isOpenType()?this._textFont._textWidth(E,this._textSize):this.drawingContext.measureText(E).width}},{key:"_applyTextProperties",value:function(){var E=this._pInst,T=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),T=this._textFont,this._isOpenType()&&(T=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),T||"sans-serif");return/\s/.exec(T)&&(T='"'.concat(T,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(T),this.drawingContext.textAlign=this._textAlign,this._textBaseline===d.CENTER?this.drawingContext.textBaseline=d._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,E}},{key:"push",value:function(){return this.drawingContext.save(),i(o(k.prototype),"push",this).call(this)}},{key:"pop",value:function(E){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,i(o(k.prototype),"pop",this).call(this,E)}}])&&v(b.prototype,w),k}(s.default.Renderer),y=(p.prototype.text=function(w,b,S,R,E){R!==void 0&&this.drawingContext.textBaseline===d.BASELINE&&(T=!0,this.drawingContext.textBaseline=d.TOP);var T,R=s.default.Renderer.prototype.text.apply(this,arguments);return T&&(this.drawingContext.textBaseline=d.BASELINE),R},s.default.Renderer2D=p,s.default.Renderer2D);f.default=y},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var u=(t=t("./main"))&&t.__esModule?t:{default:t};u.default.prototype._promisePreloads=[];function c(){return{}}var s=!(u.default.prototype.registerPromisePreload=function(d){u.default.prototype._promisePreloads.push(d)});u.default.prototype._setupPromisePreloads=function(){var d=!0,m=!1,v=void 0;try{for(var i,n=this._promisePreloads[Symbol.iterator]();!(d=(i=n.next()).done);d=!0){var a=i.value,o=this,h=a.method,p=a.addCallbacks,y=a.legacyPreloadSetup,w=a.target||this,b=w[h].bind(w);if(w===u.default.prototype){if(s)continue;o=null,b=w[h]}w[h]=this._wrapPromisePreload(o,b,p),y&&(w[y.method]=this._legacyPreloadGenerator(o,y,w[h]))}}catch(S){m=!0,v=S}finally{try{d||n.return==null||n.return()}finally{if(m)throw v}}s=!0},u.default.prototype._wrapPromisePreload=function(d,m,v){var i=function(){for(var n=this,a=(this._incrementPreload(),null),o=null,h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];if(v)for(var w=p.length-1;0<=w&&!o&&typeof p[w]=="function";w--)o=a,a=p.pop();var b=Promise.resolve(m.apply(this,p));return a&&b.then(a),o&&b.catch(o),b.then(function(){return n._decrementPreload()}),b};return i=d?i.bind(d):i},u.default.prototype._legacyPreloadGenerator=function(d,n,v){var i=n.createBaseObject||c,n=function(){var a=this;this._incrementPreload();for(var o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];var y=i.apply(this,h);return v.apply(this,h).then(function(w){Object.assign(y,w),a._decrementPreload()}),y};return n=d?n.bind(d):n}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(t,x,f){function u(n){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=(i=t("./main"))&&i.__esModule?i:{default:i},s=function(n){if(n&&n.__esModule)return n;if(n===null||m(n)!=="object"&&typeof n!="function")return{default:n};var a=d();if(a&&a.has(n))return a.get(n);var o,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in n){var y;Object.prototype.hasOwnProperty.call(n,o)&&((y=p?Object.getOwnPropertyDescriptor(n,o):null)&&(y.get||y.set)?Object.defineProperty(h,o,y):h[o]=n[o])}return h.default=n,a&&a.set(n,h),h}(t("./constants"));function d(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,d=function(){return n},n)}function m(n){return(m=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(a){return u(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":u(a)})(n)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var v="defaultCanvas0",i=(c.default.prototype.createCanvas=function(n,a,o,h){var p,y,w;if(c.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(o=s.P2D,h=arguments[2]):p=o||s.P2D,h)(w=document.getElementById(v))&&w.parentNode.removeChild(w),w=h,this._defaultGraphicsCreated=!1;else{if(p===s.WEBGL)(w=document.getElementById(v))&&(w.parentNode.removeChild(w),y=this._renderer,this._elements=this._elements.filter(function(S){return S!==y})),(w=document.createElement("canvas")).id=v,w.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)w=this.canvas;else{w=h||document.createElement("canvas");for(var b=0;document.getElementById("defaultCanvas".concat(b));)b++;v="defaultCanvas".concat(b),w.id=v,w.classList.add("p5Canvas")}this._setupDone||(w.dataset.hidden=!0,w.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(o=document.createElement("main"),document.body.appendChild(o)),document.getElementsByTagName("main")[0])).appendChild(w)}return p===s.WEBGL?(this._setProperty("_renderer",new c.default.RendererGL(w,this,!0)),this._elements.push(this._renderer),n=(h=this._renderer._adjustDimensions(n,a)).adjustedWidth,a=h.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new c.default.Renderer2D(w,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(n,a),this._renderer._applyDefaults(),this._renderer},c.default.prototype.resizeCanvas=function(n,a,o){if(c.default._validateParameters("resizeCanvas",arguments),this._renderer){var h,p,y,w={};for(h in this.drawingContext){var b=this.drawingContext[h];m(b)!=="object"&&typeof b!="function"&&(w[h]=b)}for(y in this._renderer instanceof c.default.RendererGL&&(n=(p=this._renderer._adjustDimensions(n,a)).adjustedWidth,a=p.adjustedHeight),this.width=n,this.height=a,this._renderer.resize(n,a),w)try{this.drawingContext[y]=w[y]}catch{}o||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},c.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},c.default.prototype.createGraphics=function(n,a){for(var o=arguments.length,h=new Array(2<o?o-2:0),p=2;p<o;p++)h[p-2]=arguments[p];return h[0]instanceof HTMLCanvasElement&&(h[1]=h[0],h[0]=s.P2D),c.default._validateParameters("createGraphics",arguments),new c.default.Graphics(n,a,h[0],this,h[1])},c.default.prototype.createFramebuffer=function(n){return new c.default.Framebuffer(this,n)},c.default.prototype.clearDepth=function(n){this._assert3d("clearDepth"),this._renderer.clearDepth(n)},c.default.prototype.blendMode=function(n){c.default._validateParameters("blendMode",arguments),n===s.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),n=s.BLEND),this._renderer.blendMode(n)},c.default);f.default=i},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(t,x,f){function u(a){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(a)}function c(a){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(o){return u(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":u(o)})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=i(t("../main")),d=function(a){if(a&&a.__esModule)return a;if(a===null||c(a)!=="object"&&typeof a!="function")return{default:a};var o=v();if(o&&o.has(a))return o.get(a);var h,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in a){var w;Object.prototype.hasOwnProperty.call(a,h)&&((w=y?Object.getOwnPropertyDescriptor(a,h):null)&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=a[h])}return p.default=a,o&&o.set(a,p),p}(t("../constants")),m=i(t("../helpers"));function v(){var a;return typeof WeakMap!="function"?null:(a=new WeakMap,v=function(){return a},a)}function i(a){return a&&a.__esModule?a:{default:a}}function n(a){return function(o){if(Array.isArray(o)){for(var h=0,p=new Array(o.length);h<o.length;h++)p[h]=o[h];return p}}(a)||function(o){if(Symbol.iterator in Object(o)||Object.prototype.toString.call(o)==="[object Arguments]")return Array.from(o)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),s.default.prototype._normalizeArcAngles=function(a,o,h,p,y){var w;return a-=d.TWO_PI*Math.floor(a/d.TWO_PI),o-=d.TWO_PI*Math.floor(o/d.TWO_PI),w=Math.min(Math.abs(a-o),d.TWO_PI-Math.abs(a-o)),y&&(a=a<=d.HALF_PI?Math.atan(h/p*Math.tan(a)):a>d.HALF_PI&&a<=3*d.HALF_PI?Math.atan(h/p*Math.tan(a))+d.PI:Math.atan(h/p*Math.tan(a))+d.TWO_PI,o=o<=d.HALF_PI?Math.atan(h/p*Math.tan(o)):o>d.HALF_PI&&o<=3*d.HALF_PI?Math.atan(h/p*Math.tan(o))+d.PI:Math.atan(h/p*Math.tan(o))+d.TWO_PI),o<a&&(o+=d.TWO_PI),{start:a,stop:o,correspondToSamePoint:w<1e-5}},s.default.prototype.arc=function(a,o,h,p,y,w,b,S){return s.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&y!==w&&(y=this._toRadians(y),w=this._toRadians(w),a=m.default.modeAdjust(a,o,h,p,this._renderer._ellipseMode),(o=this._normalizeArcAngles(y,w,a.w,a.h,!0)).correspondToSamePoint?this._renderer.ellipse([a.x,a.y,a.w,a.h,S]):(this._renderer.arc(a.x,a.y,a.w,a.h,o.start,o.stop,b,S),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[a.x,a.y,a.w,a.h,o.start,o.stop,b]))),this},s.default.prototype.ellipse=function(a,o,h,p,y){return s.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},s.default.prototype.circle=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];s.default._validateParameters("circle",o);var p=o.slice(0,2);return p.push(o[2],o[2]),this._renderEllipse.apply(this,n(p))},s.default.prototype._renderEllipse=function(a,o,h,p,y){return(this._renderer._doStroke||this._renderer._doFill)&&(a=m.default.modeAdjust(a,o,h,p=p===void 0?h:p,this._renderer._ellipseMode),this._renderer.ellipse([a.x,a.y,a.w,a.h,y]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[a.x,a.y,a.w,a.h])),this},s.default.prototype.line=function(){for(var a,o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];return s.default._validateParameters("line",h),this._renderer._doStroke&&(a=this._renderer).line.apply(a,h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",h),this},s.default.prototype.point=function(){for(var a,o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];return s.default._validateParameters("point",h),this._renderer._doStroke&&(h.length===1&&h[0]instanceof s.default.Vector?this._renderer.point.call(this._renderer,h[0].x,h[0].y,h[0].z):((a=this._renderer).point.apply(a,h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",h))),this},s.default.prototype.quad=function(){for(var a,o=arguments.length,h=new Array(o),p=0;p<o;p++)h[p]=arguments[p];return s.default._validateParameters("quad",h),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&h.length<12?this._renderer.quad.call(this._renderer,h[0],h[1],0,h[2],h[3],0,h[4],h[5],0,h[6],h[7],0,h[8],h[9]):((a=this._renderer).quad.apply(a,h),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",h))),this},s.default.prototype.rect=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];return s.default._validateParameters("rect",o),this._renderRect.apply(this,o)},s.default.prototype.square=function(a,o,h,p,y,w,b){return s.default._validateParameters("square",arguments),this._renderRect.call(this,a,o,h,h,p,y,w,b)},s.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var a=m.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),o=(this._renderer._rectMode===d.CORNER&&(a.w=arguments[2],a.h=arguments[3]),[a.x,a.y,a.w,a.h]),h=4;h<arguments.length;h++)o[h]=arguments[h];this._renderer.rect(o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[a.x,a.y,a.w,a.h])}return this},s.default.prototype.triangle=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];return s.default._validateParameters("triangle",o),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(o),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",o),this},t=s.default,f.default=t},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(t,x,f){function u(i){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}function c(i){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(n){return u(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":u(n)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(v=t("../main"))&&v.__esModule?v:{default:v},d=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var n=m();if(n&&n.has(i))return n.get(i);var a,o={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var p;Object.prototype.hasOwnProperty.call(i,a)&&((p=h?Object.getOwnPropertyDescriptor(i,a):null)&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=i[a])}return o.default=i,n&&n.set(i,o),o}(t("../constants"));function m(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,m=function(){return i},i)}s.default.prototype.ellipseMode=function(i){return s.default._validateParameters("ellipseMode",arguments),i!==d.CORNER&&i!==d.CORNERS&&i!==d.RADIUS&&i!==d.CENTER||(this._renderer._ellipseMode=i),this},s.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},s.default.prototype.rectMode=function(i){return s.default._validateParameters("rectMode",arguments),i!==d.CORNER&&i!==d.CORNERS&&i!==d.RADIUS&&i!==d.CENTER||(this._renderer._rectMode=i),this},s.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},s.default.prototype.strokeCap=function(i){return s.default._validateParameters("strokeCap",arguments),i!==d.ROUND&&i!==d.SQUARE&&i!==d.PROJECT||this._renderer.strokeCap(i),this},s.default.prototype.strokeJoin=function(i){return s.default._validateParameters("strokeJoin",arguments),i!==d.ROUND&&i!==d.BEVEL&&i!==d.MITER||this._renderer.strokeJoin(i),this},s.default.prototype.strokeWeight=function(i){return s.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(i),this};var v=s.default;f.default=v},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(c=t("../main"))&&c.__esModule?c:{default:c};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),u.default.prototype.bezier=function(){for(var s,d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return u.default._validateParameters("bezier",m),(this._renderer._doStroke||this._renderer._doFill)&&(s=this._renderer).bezier.apply(s,m),this},u.default.prototype.bezierDetail=function(s){return u.default._validateParameters("bezierDetail",arguments),this._bezierDetail=s,this},u.default.prototype.bezierPoint=function(s,d,m,v,i){u.default._validateParameters("bezierPoint",arguments);var n=1-i;return Math.pow(n,3)*s+3*Math.pow(n,2)*i*d+3*n*Math.pow(i,2)*m+Math.pow(i,3)*v},u.default.prototype.bezierTangent=function(s,d,m,v,i){u.default._validateParameters("bezierTangent",arguments);var n=1-i;return 3*v*Math.pow(i,2)-3*m*Math.pow(i,2)+6*m*n*i-6*d*n*i+3*d*Math.pow(n,2)-3*s*Math.pow(n,2)},u.default.prototype.curve=function(){for(var s,d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return u.default._validateParameters("curve",m),this._renderer._doStroke&&(s=this._renderer).curve.apply(s,m),this},u.default.prototype.curveDetail=function(s){return u.default._validateParameters("curveDetail",arguments),this._curveDetail=s<3?3:s,this},u.default.prototype.curveTightness=function(s){return u.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=s,this},u.default.prototype.curvePoint=function(s,d,m,v,i){u.default._validateParameters("curvePoint",arguments);var n=this._renderer._curveTightness,a=i*i*i,o=i*i;return s*((n-1)/2*a+(1-n)*o+(n-1)/2*i)+d*((n+3)/2*a+(-5-n)/2*o+1)+m*((-3-n)/2*a+(n+2)*o+(1-n)/2*i)+v*((1-n)/2*a+(n-1)/2*o)},u.default.prototype.curveTangent=function(s,d,m,v,o){u.default._validateParameters("curveTangent",arguments);var n=this._renderer._curveTightness,a=o*o*3,o=2*o;return s*((n-1)/2*a+(1-n)*o+(n-1)/2)+d*((n+3)/2*a+(-5-n)/2*o)+m*((-3-n)/2*a+(n+2)*o+(1-n)/2)+v*((1-n)/2*a+(n-1)/2*o)};var c=u.default;f.default=c},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(t,x,f){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}function c(b){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(S){return u(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":u(S)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(w=t("../main"))&&w.__esModule?w:{default:w},d=function(b){if(b&&b.__esModule)return b;if(b===null||c(b)!=="object"&&typeof b!="function")return{default:b};var S=m();if(S&&S.has(b))return S.get(b);var k,E={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(k in b){var R;Object.prototype.hasOwnProperty.call(b,k)&&((R=T?Object.getOwnPropertyDescriptor(b,k):null)&&(R.get||R.set)?Object.defineProperty(E,k,R):E[k]=b[k])}return E.default=b,S&&S.set(b,E),E}(t("../constants"));function m(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,m=function(){return b},b)}var v=null,i=[],n=[],a=!1,o=!1,h=!1,p=!1,y=!0,w=(s.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(n=[],p=!0),this},s.default.prototype.beginShape=function(b){var S;return s.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(S=this._renderer).beginShape.apply(S,arguments):(v=b===d.POINTS||b===d.LINES||b===d.TRIANGLES||b===d.TRIANGLE_FAN||b===d.TRIANGLE_STRIP||b===d.QUADS||b===d.QUAD_STRIP?b:null,i=[],n=[]),this},s.default.prototype.bezierVertex=function(){for(var b,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];if(s.default._validateParameters("bezierVertex",k),this._renderer.isP3D)(b=this._renderer).bezierVertex.apply(b,k);else if(i.length===0)s.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{a=!0;for(var T=[],R=0;R<k.length;R++)T[R]=k[R];T.isVert=!1,(p?n:i).push(T)}return this},s.default.prototype.curveVertex=function(){for(var b,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];return s.default._validateParameters("curveVertex",k),this._renderer.isP3D?(b=this._renderer).curveVertex.apply(b,k):(o=!0,this.vertex(k[0],k[1])),this},s.default.prototype.endContour=function(){if(!this._renderer.isP3D){var b=n[0].slice();b.isVert=n[0].isVert,b.moveTo=!1,n.push(b),y&&(i.push(i[0]),y=!1);for(var S=0;S<n.length;S++)i.push(n[S])}return this},s.default.prototype.endShape=function(b){var S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(s.default._validateParameters("endShape",arguments),S<1&&(console.log("🌸 p5.js says: You can not have less than one instance"),S=1),this._renderer.isP3D)this._renderer.endShape(b,o,a,h,p,v,S);else{if(S!==1&&console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode"),i.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;S=b===d.CLOSE,S&&!p&&i.push(i[0]),this._renderer.endShape(b,i,o,a,h,p,v),y=!(p=h=a=o=!1),S&&i.pop()}return this},s.default.prototype.quadraticVertex=function(){for(var b,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];if(s.default._validateParameters("quadraticVertex",k),this._renderer.isP3D)(b=this._renderer).quadraticVertex.apply(b,k);else{if(this._contourInited)return(b={}).x=k[0],b.y=k[1],b.x3=k[2],b.y3=k[3],b.type=d.QUADRATIC,this._contourVertices.push(b),this;if(0<i.length){h=!0;for(var T=[],R=0;R<k.length;R++)T[R]=k[R];T.isVert=!1,(p?n:i).push(T)}else s.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},s.default.prototype.vertex=function(b,S,k,E,T){var R;return this._renderer.isP3D?(R=this._renderer).vertex.apply(R,arguments):((R=[]).isVert=!0,R[0]=b,R[1]=S,R[2]=0,R[3]=0,R[4]=0,R[5]=this._renderer._getFill(),R[6]=this._renderer._getStroke(),k&&(R.moveTo=k),(p?(n.length===0&&(R.moveTo=!0),n):i).push(R)),this},s.default.prototype.normal=function(b,S,k){var E;return this._assert3d("normal"),s.default._validateParameters("normal",arguments),(E=this._renderer).normal.apply(E,arguments),this},s.default);f.default=w},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(t,x,f){},{}],295:[function(t,x,f){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var u=this._styles.pop();u?(this._renderer.pop(u.renderer),Object.assign(this,u.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(u){if(!this._inUserDraw&&this._setupDone){var c=parseInt(u),s=((isNaN(c)||c<1)&&(c=1),this._isGlobal?window:this);if(typeof s.draw=="function"){s.setup===void 0&&s.scale(s._pixelDensity,s._pixelDensity);for(var d=0;d<c;d++){s.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),s._renderer.isP3D&&s._renderer._update(),s._setProperty("frameCount",s.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{s.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,f.default=t},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("./main"))&&t.__esModule?t:{default:t};function c(s){return function(d){if(Array.isArray(d)){for(var m=0,v=new Array(d.length);m<d.length;m++)v[m]=d[m];return v}}(s)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}u.default.prototype.applyMatrix=function(){var s=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||s?(s=this._renderer).applyMatrix.apply(s,c(arguments.length<=0?void 0:arguments[0])):(s=this._renderer).applyMatrix.apply(s,arguments),this},u.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},u.default.prototype.rotate=function(s,d){return u.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(s),d),this},u.default.prototype.rotateX=function(s){return this._assert3d("rotateX"),u.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(s)),this},u.default.prototype.rotateY=function(s){return this._assert3d("rotateY"),u.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(s)),this},u.default.prototype.rotateZ=function(s){return this._assert3d("rotateZ"),u.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(s)),this},u.default.prototype.scale=function(s,d,m){var v;return u.default._validateParameters("scale",arguments),s instanceof u.default.Vector?(s=(v=s).x,d=v.y,m=v.z):Array.isArray(s)&&(s=(v=s)[0],d=v[1],m=v[2]||1),isNaN(d)?d=m=s:isNaN(m)&&(m=1),this._renderer.scale(s,d,m),this},u.default.prototype.shearX=function(s){return u.default._validateParameters("shearX",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,0,Math.tan(s),1,0,0),this},u.default.prototype.shearY=function(s){return u.default._validateParameters("shearY",arguments),s=this._toRadians(s),this._renderer.applyMatrix(1,Math.tan(s),0,1,0,0),this},u.default.prototype.translate=function(s,d,m){return u.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(s,d,m):this._renderer.translate(s,d),this},t=u.default,f.default=t},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(t,x,f){function u(m){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(m)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator");var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(m){return function(v){if(Array.isArray(v)){for(var i=0,n=new Array(v.length);i<v.length;i++)n[i]=v[i];return n}}(m)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(m){return(d=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(v){return u(v)}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":u(v)})(m)}c.default.prototype.storeItem=function(m,v){typeof m!="string"&&console.log("The argument that you passed to storeItem() - ".concat(m," is not a string.")),m.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(m," must not end with 'p5TypeID'.")),v===void 0&&console.log("You cannot store undefined variables using storeItem().");var i=d(v);switch(i){case"number":case"boolean":v=v.toString();break;case"object":v instanceof c.default.Color?i="p5.Color":v instanceof c.default.Vector&&(i="p5.Vector",v=[v.x,v.y,v.z]),v=JSON.stringify(v)}localStorage.setItem(m,v),m="".concat(m,"p5TypeID"),localStorage.setItem(m,i)},c.default.prototype.getItem=function(m){var v=localStorage.getItem(m),i=localStorage.getItem("".concat(m,"p5TypeID"));if(i===void 0)console.log("Unable to determine type of item stored under ".concat(m,"in local storage. Did you save the item with something other than setItem()?"));else if(v!==null)switch(i){case"number":v=parseFloat(v);break;case"boolean":v=v==="true";break;case"object":v=JSON.parse(v);break;case"p5.Color":v=JSON.parse(v),v=this.color.apply(this,s(v.levels));break;case"p5.Vector":v=JSON.parse(v),v=this.createVector.apply(this,s(v))}return v},c.default.prototype.clearStorage=function(){var m=this;Object.keys(localStorage).forEach(function(v){v.endsWith("p5TypeID")&&m.removeItem(v.replace("p5TypeID",""))})},c.default.prototype.removeItem=function(m){typeof m!="string"&&console.log("The argument that you passed to removeItem() - ".concat(m," is not a string.")),localStorage.removeItem(m),localStorage.removeItem("".concat(m,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(t,x,f){function u(h){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}function c(h){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(p){return u(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":u(p)})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),p&&m(h,p)}function m(h,p){return(m=Object.setPrototypeOf||function(y,w){return y.__proto__=w,y})(h,p)}function v(h){return function(){var p,y=i(h),y=(p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(p=i(this).constructor,Reflect.construct(y,arguments,p)):y.apply(this,arguments),this);if(!p||c(p)!=="object"&&typeof p!="function"){if(y!==void 0)return y;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return p}}function i(h){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)})(h)}function n(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function a(h,p){for(var y=0;y<p.length;y++){var w=p[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(h,w.key,w)}}function o(h,p,y){p&&a(h.prototype,p)}s.default.prototype.createStringDict=function(h,p){return s.default._validateParameters("createStringDict",arguments),new s.default.StringDict(h,p)},s.default.prototype.createNumberDict=function(h,p){return s.default._validateParameters("createNumberDict",arguments),new s.default.NumberDict(h,p)},s.default.TypedDict=function(){function h(p,y){return n(this,h),p instanceof Object?this.data=p:(this.data={},this.data[p]=y),this}return o(h,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(p){return this.data.hasOwnProperty(p)}},{key:"get",value:function(p){if(this.data.hasOwnProperty(p))return this.data[p];console.log("".concat(p," does not exist in this Dictionary"))}},{key:"set",value:function(p,y){this._validate(y)?this.data[p]=y:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(p){for(var y in p)this.set(y,p[y])}},{key:"create",value:function(p,y){p instanceof Object&&y===void 0?this._addObj(p):p!==void 0?this.set(p,y):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(p){if(!this.data.hasOwnProperty(p))throw new Error("".concat(p," does not exist in this Dictionary"));delete this.data[p]}},{key:"print",value:function(){for(var p in this.data)console.log("key:".concat(p," value:").concat(this.data[p]))}},{key:"saveTable",value:function(p){var y,w="";for(y in this.data)w+="".concat(y,",").concat(this.data[y],`
`);var b=new Blob([w],{type:"text/csv"});s.default.prototype.downloadFile(b,p||"mycsv","csv")}},{key:"saveJSON",value:function(p,y){s.default.prototype.saveJSON(this.data,p,y)}},{key:"_validate",value:function(p){return!0}}]),h}(),s.default.StringDict=function(){d(p,s.default.TypedDict);var h=v(p);function p(){n(this,p);for(var y=arguments.length,w=new Array(y),b=0;b<y;b++)w[b]=arguments[b];return h.call.apply(h,[this].concat(w))}return o(p,[{key:"_validate",value:function(y){return typeof y=="string"}}]),p}(),s.default.NumberDict=function(){d(p,s.default.TypedDict);var h=v(p);function p(){n(this,p);for(var y=arguments.length,w=new Array(y),b=0;b<y;b++)w[b]=arguments[b];return h.call.apply(h,[this].concat(w))}return o(p,[{key:"_validate",value:function(y){return typeof y=="number"}},{key:"add",value:function(y,w){this.data.hasOwnProperty(y)?this.data[y]+=w:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"sub",value:function(y,w){this.add(y,-w)}},{key:"mult",value:function(y,w){this.data.hasOwnProperty(y)?this.data[y]*=w:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"div",value:function(y,w){this.data.hasOwnProperty(y)?this.data[y]/=w:console.log("The key - ".concat(y," does not exist in this dictionary."))}},{key:"_valueTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var w,b=this.data[Object.keys(this.data)[0]];for(w in this.data)this.data[w]*y<b*y&&(b=this.data[w]);return b}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(y){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var w=Object.keys(this.data)[0],b=1;b<Object.keys(this.data).length;b++)Object.keys(this.data)[b]*y<w*y&&(w=Object.keys(this.data)[b]);return w}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),p}(),t=s.default.TypedDict,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(t,x,f){function u(b){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(b,S){for(var k=0;k<S.length;k++){var E=S[k];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(b,E.key,E)}}function d(b,S,k){S&&s(b.prototype,S),k&&s(b,k)}function m(b,S){return(m=Object.setPrototypeOf||function(k,E){return k.__proto__=E,k})(b,S)}function v(b){return function(){var S,k,E=n(b);return S=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(S=n(this).constructor,Reflect.construct(E,arguments,S)):E.apply(this,arguments),E=this,!(k=S)||o(k)!=="object"&&typeof k!="function"?i(E):k}}function i(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function n(b){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(b)}function a(b,S){if(!(b instanceof S))throw new TypeError("Cannot call a class as a function")}function o(b){return(o=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(S){return u(S)}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":u(S)})(b)}function h(b,S,k){return(S._userNode||document.body).appendChild(b),k=new(k?c.default.MediaElement:c.default.Element)(b,S),S._elements.push(k),k}c.default.prototype.select=function(b,S){return c.default._validateParameters("select",arguments),S=this._getContainer(S).querySelector(b),S?this._wrapElement(S):null},c.default.prototype.selectAll=function(b,S){c.default._validateParameters("selectAll",arguments);var k=[],E=this._getContainer(S).querySelectorAll(b);if(E)for(var T=0;T<E.length;T++){var R=this._wrapElement(E[T]);k.push(R)}return k},c.default.prototype._getContainer=function(b){var S=document;return typeof b=="string"?S=document.querySelector(b)||document:b instanceof c.default.Element?S=b.elt:b instanceof HTMLElement&&(S=b),S},c.default.prototype._wrapElement=function(b){var S,k=Array.prototype.slice.call(b.children);return b.tagName==="INPUT"&&b.type==="checkbox"?((S=new c.default.Element(b,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},S):b.tagName==="VIDEO"||b.tagName==="AUDIO"?new c.default.MediaElement(b,this):b.tagName==="SELECT"?this.createSelect(new c.default.Element(b,this)):0<k.length&&k.every(function(E){return E.tagName==="INPUT"||E.tagName==="LABEL"})&&(b.tagName==="DIV"||b.tagName==="SPAN")?this.createRadio(new c.default.Element(b,this)):new c.default.Element(b,this)},c.default.prototype.removeElements=function(b){c.default._validateParameters("removeElements",arguments),this._elements.filter(function(S){return!(S.elt instanceof HTMLCanvasElement)}).map(function(S){return S.remove()})},c.default.Element.prototype.changed=function(b){return c.default.Element._adjustListener("change",b,this),this},c.default.Element.prototype.input=function(b){return c.default.Element._adjustListener("input",b,this),this},c.default.prototype.createDiv=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",S=document.createElement("div");return S.innerHTML=b,h(S,this)},c.default.prototype.createP=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",S=document.createElement("p");return S.innerHTML=b,h(S,this)},c.default.prototype.createSpan=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",S=document.createElement("span");return S.innerHTML=b,h(S,this)},c.default.prototype.createImg=function(){c.default._validateParameters("createImg",arguments);var b,S=document.createElement("img"),k=arguments;return 1<k.length&&typeof k[1]=="string"&&(S.alt=k[1]),2<k.length&&typeof k[2]=="string"&&(S.crossOrigin=k[2]),S.src=k[0],b=h(S,this),S.addEventListener("load",function(){b.width=S.offsetWidth||S.width,b.height=S.offsetHeight||S.height;var E=k[k.length-1];typeof E=="function"&&E(b)}),b},c.default.prototype.createA=function(b,S,k){c.default._validateParameters("createA",arguments);var E=document.createElement("a");return E.href=b,E.innerHTML=S,k&&(E.target=k),h(E,this)},c.default.prototype.createSlider=function(b,S,k,E){c.default._validateParameters("createSlider",arguments);var T=document.createElement("input");return T.type="range",T.min=b,T.max=S,E===0?T.step=1e-18:E&&(T.step=E),typeof k=="number"&&(T.value=k),h(T,this)},c.default.prototype.createButton=function(b,S){c.default._validateParameters("createButton",arguments);var k=document.createElement("button");return k.innerHTML=b,S&&(k.value=S),h(k,this)},c.default.prototype.createCheckbox=function(){for(var b=arguments.length,S=new Array(b),k=0;k<b;k++)S[k]=arguments[k];c.default._validateParameters("createCheckbox",S);var E=document.createElement("div"),T=document.createElement("input"),R=(T.type="checkbox",document.createElement("label")),O=(R.appendChild(T),E.appendChild(R),h(E,this));return O.checked=function(){var M=O.elt.firstElementChild.getElementsByTagName("input")[0];if(M){if(arguments.length===0)return M.checked;M.checked=!(arguments.length<=0||!arguments[0])}return O},this.value=function(M){return O.value=M,this},S[0]&&(O.value(S[0]),(E=document.createElement("span")).innerHTML=S[0],R.appendChild(E)),S[1]&&(T.checked=!0),O},c.default.prototype.createSelect=function(){for(var b,S=arguments.length,k=new Array(S),E=0;E<S;E++)k[E]=arguments[E];c.default._validateParameters("createSelect",k);var T,R=k[0];return R instanceof c.default.Element&&R.elt instanceof HTMLSelectElement?this.elt=(b=R).elt:R instanceof HTMLSelectElement?(b=h(R,this),this.elt=R):(T=document.createElement("select"),R&&typeof R=="boolean"&&T.setAttribute("multiple","true"),b=h(T,this),this.elt=T),b.option=function(O,M){var L;if(O!==void 0){for(var I,B=0;B<this.elt.length;B+=1)if(this.elt[B].textContent===O){L=B;break}L!==void 0?M===!1?this.elt.remove(L):this.elt[L].value=M:((I=document.createElement("option")).textContent=O,I.value=M===void 0?O:M,this.elt.appendChild(I),this._pInst._elements.push(I))}},b.selected=function(O){if(O!==void 0){for(var M=0;M<this.elt.length;M+=1)this.elt[M].value.toString()===O.toString()&&(this.elt.selectedIndex=M);return this}if(this.elt.getAttribute("multiple")){var L=[],I=!0,B=!1,V=void 0;try{for(var G,Y=this.elt.selectedOptions[Symbol.iterator]();!(I=(G=Y.next()).done);I=!0){var H=G.value;L.push(H.value)}}catch(W){B=!0,V=W}finally{try{I||Y.return==null||Y.return()}finally{if(B)throw V}}return L}return this.elt.value},b.disable=function(O){if(typeof O=="string")for(var M=0;M<this.elt.length;M++)this.elt[M].value.toString()===O&&(this.elt[M].disabled=!0,this.elt[M].selected=!1);else this.elt.disabled=!0;return this},b.enable=function(O){if(typeof O=="string")for(var M=0;M<this.elt.length;M++)this.elt[M].value.toString()===O&&(this.elt[M].disabled=!1,this.elt[M].selected=!1);else{this.elt.disabled=!1;for(var L=0;L<this.elt.length;L++)this.elt[L].disabled=!1,this.elt[L].selected=!1}return this},b};var p=0;function y(b,O,k,E){var T=document.createElement(O),R=(typeof(k=k||"")=="string"&&(k=[k]),!0),O=!1,M=void 0;try{for(var L,I=k[Symbol.iterator]();!(R=(L=I.next()).done);R=!0){var B=L.value,V=document.createElement("source");V.setAttribute("src",B),T.appendChild(V)}}catch(Y){O=!0,M=Y}finally{try{R||I.return==null||I.return()}finally{if(O)throw M}}typeof E=="function"&&T.addEventListener("canplaythrough",function Y(){E(),T.removeEventListener("canplaythrough",Y)});var G=h(T,b,!0);return G.loadedmetadata=!1,T.addEventListener("loadedmetadata",function(){G.width=T.videoWidth,G.height=T.videoHeight,G.elt.width===0&&(G.elt.width=T.videoWidth),G.elt.height===0&&(G.elt.height=T.videoHeight),G.presetPlaybackRate&&(G.elt.playbackRate=G.presetPlaybackRate,delete G.presetPlaybackRate),G.loadedmetadata=!0}),G}c.default.prototype.createRadio=function(){function b(O){return O instanceof HTMLInputElement&&O.type==="radio"}function S(O){return O instanceof HTMLLabelElement}var k,E,T,R=arguments.length<=0?void 0:arguments[0];return R instanceof c.default.Element&&(R.elt instanceof HTMLDivElement||R.elt instanceof HTMLSpanElement)?(k=R,this.elt=R.elt):R instanceof HTMLDivElement||R instanceof HTMLSpanElement?(k=h(R,this),E=this.elt=R,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(T=arguments.length<=1?void 0:arguments[1])):(typeof R=="string"&&(T=R),E=document.createElement("div"),k=h(E,this),this.elt=E),k._name=T||"radioOption_".concat(p++),k._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(O){return b(O)||S(O)&&b(O.firstElementChild)}).map(function(O){return b(O)?O:O.firstElementChild})},k.option=function(O,M){var L,I,B,V=!0,G=!1,Y=void 0;try{for(var H,W=k._getOptionsArray()[Symbol.iterator]();!(V=(H=W.next()).done);V=!0){var K=H.value;if(K.value===O){L=K;break}}}catch(Q){G=!0,Y=Q}finally{try{V||W.return==null||W.return()}finally{if(G)throw Y}}return L===void 0&&((L=document.createElement("input")).setAttribute("type","radio"),L.setAttribute("value",O)),L.setAttribute("name",k._name),S(L.parentElement)?I=L.parentElement:(I=document.createElement("label")).insertAdjacentElement("afterbegin",L),I.lastElementChild instanceof HTMLSpanElement?B=I.lastElementChild:(B=document.createElement("span"),L.insertAdjacentElement("afterend",B)),B.innerHTML=M===void 0?O:M,this.elt.appendChild(I),L},k.remove=function(O){var M=!0,L=!1,I=void 0;try{for(var B,V=k._getOptionsArray()[Symbol.iterator]();!(M=(B=V.next()).done);M=!0){var G=B.value;if(G.value===O)return void(S(G.parentElement)?G.parentElement:G).remove()}}catch(Y){L=!0,I=Y}finally{try{M||V.return==null||V.return()}finally{if(L)throw I}}},k.value=function(){var O="",M=!0,L=!1,I=void 0;try{for(var B,V=k._getOptionsArray()[Symbol.iterator]();!(M=(B=V.next()).done);M=!0){var G=B.value;if(G.checked){O=G.value;break}}}catch(Y){L=!0,I=Y}finally{try{M||V.return==null||V.return()}finally{if(L)throw I}}return O},k.selected=function(O){var M=null;if(O===void 0){var L=!0,I=!1,B=void 0;try{for(var V,G=k._getOptionsArray()[Symbol.iterator]();!(L=(V=G.next()).done);L=!0){var Y=V.value;if(Y.checked){M=Y;break}}}catch(se){I=!0,B=se}finally{try{L||G.return==null||G.return()}finally{if(I)throw B}}}else{k._getOptionsArray().forEach(function(z){z.checked=!1,z.removeAttribute("checked")});var H=!0,I=!1,B=void 0;try{for(var W,K=k._getOptionsArray()[Symbol.iterator]();!(H=(W=K.next()).done);H=!0){var Q=W.value;Q.value===O&&(Q.setAttribute("checked",!0),Q.checked=!0,M=Q)}}catch(z){I=!0,B=z}finally{try{H||K.return==null||K.return()}finally{if(I)throw B}}}return M},k.disable=function(){var O=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],M=!0,L=!1,I=void 0;try{for(var B,V=k._getOptionsArray()[Symbol.iterator]();!(M=(B=V.next()).done);M=!0)B.value.setAttribute("disabled",O)}catch(G){L=!0,I=G}finally{try{M||V.return==null||V.return()}finally{if(L)throw I}}},k},c.default.prototype.createColorPicker=function(b){c.default._validateParameters("createColorPicker",arguments);var S=document.createElement("input");return S.type="color",b?b instanceof c.default.Color?S.value=b.toString("#rrggbb"):(c.default.prototype._colorMode="rgb",c.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},S.value=c.default.prototype.color(b).toString("#rrggbb")):S.value="#000000",(S=h(S,this)).color=function(){return b&&(b.mode&&(c.default.prototype._colorMode=b.mode),b.maxes&&(c.default.prototype._colorMaxes=b.maxes)),c.default.prototype.color(this.elt.value)},S},c.default.prototype.createInput=function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",S=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",k=(c.default._validateParameters("createInput",arguments),document.createElement("input"));return k.setAttribute("value",b),k.setAttribute("type",S),h(k,this)},c.default.prototype.createFileInput=function(b){var S,k=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(c.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(S=document.createElement("input")).setAttribute("type","file"),k&&S.setAttribute("multiple",!0),S.addEventListener("change",function(E){var T=!0,R=!1,O=void 0;try{for(var M,L=E.target.files[Symbol.iterator]();!(T=(M=L.next()).done);T=!0){var I=M.value;c.default.File._load(I,b)}}catch(B){R=!0,O=B}finally{try{T||L.return==null||L.return()}finally{if(R)throw O}}},!1),h(S,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},c.default.prototype.createVideo=function(b,S){return c.default._validateParameters("createVideo",arguments),y(this,"video",b,S)},c.default.prototype.createAudio=function(b,S){return c.default._validateParameters("createAudio",arguments),y(this,"audio",b,S)},c.default.prototype.VIDEO="video",c.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(b){var S=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return S?new Promise(function(k,E){S.call(navigator,b,k,E)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),c.default.prototype.createCapture=function(){for(var b=arguments.length,S=new Array(b),k=0;k<b;k++)S[k]=arguments[k];if(c.default._validateParameters("createCapture",S),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var E,T=!0,R=!0,O=!1,M=0,L=S;M<L.length;M++){var I=L[M];I===c.default.prototype.VIDEO?R=!1:I===c.default.prototype.AUDIO?T=!1:o(I)==="object"?(I.flipped!==void 0&&(O=I.flipped,delete I.flipped),B=Object.assign({},B,I)):typeof I=="function"&&(E=I)}var B=Object.assign({},{video:T,audio:R},B),V=document.createElement("video"),G=(V.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(B).then(function(Y){try{"srcObject"in V?V.srcObject=Y:V.src=window.URL.createObjectURL(Y)}catch{V.src=Y}}).catch(function(Y){Y.name==="NotFoundError"&&c.default._friendlyError("No webcam found on this device","createCapture"),Y.name==="NotAllowedError"&&c.default._friendlyError("Access to the camera was denied","createCapture"),console.error(Y)}),h(V,this,!0));return G.loadedmetadata=!1,V.addEventListener("loadedmetadata",function(){V.play(),V.width?(G.width=V.width,G.height=V.height,O&&(G.elt.style.transform="scaleX(-1)")):(G.width=G.elt.width=V.videoWidth,G.height=G.elt.height=V.videoHeight),G.loadedmetadata=!0,E&&E(V.srcObject)}),G.flipped=O,G},c.default.prototype.createElement=function(b,S){return c.default._validateParameters("createElement",arguments),b=document.createElement(b),S!==void 0&&(b.innerHTML=S),h(b,this)},c.default.Element.prototype.addClass=function(b){return this.elt.className?this.hasClass(b)||(this.elt.className=this.elt.className+" "+b):this.elt.className=b,this},c.default.Element.prototype.removeClass=function(b){return this.elt.classList.remove(b),this},c.default.Element.prototype.hasClass=function(b){return this.elt.classList.contains(b)},c.default.Element.prototype.toggleClass=function(b){return this.elt.classList.contains(b)?this.elt.classList.remove(b):this.elt.classList.add(b),this},c.default.Element.prototype.child=function(b){return b===void 0?this.elt.childNodes:(typeof b=="string"?(b[0]==="#"&&(b=b.substring(1)),b=document.getElementById(b)):b instanceof c.default.Element&&(b=b.elt),b instanceof HTMLElement&&this.elt.appendChild(b),this)},c.default.Element.prototype.center=function(b){var S=this.elt.style.display,k=this.elt.style.display==="none",E=this.parent().style.display==="none",T={x:this.elt.offsetLeft,y:this.elt.offsetTop},R=(k&&this.show(),E&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),O=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return b==="both"||b===void 0?this.position(R/2+this.parent().offsetLeft,O/2+this.parent().offsetTop):b==="horizontal"?this.position(R/2+this.parent().offsetLeft,T.y):b==="vertical"&&this.position(T.x,O/2+this.parent().offsetTop),this.style("display",S),k&&this.hide(),E&&this.parent().hide(),this},c.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},c.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},c.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var b="";return this.elt.style.transform&&(b=(b=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=b,this},c.default.Element.prototype._rotate=function(){var b="";return this.elt.style.transform&&(b=(b=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=b,this},c.default.Element.prototype.style=function(b,S){if((S=S instanceof c.default.Color?"rgba("+S.levels[0]+","+S.levels[1]+","+S.levels[2]+","+S.levels[3]/255+")":S)===void 0){if(b.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(b);for(var k=b.split(";"),E=0;E<k.length;E++){var T=k[E].split(":");T[0]&&T[1]&&(this.elt.style[T[0].trim()]=T[1].trim())}}else this.elt.style[b]=S,b!=="width"&&b!=="height"&&b!=="left"&&b!=="top"||(S=window.getComputedStyle(this.elt).getPropertyValue(b).replace(/[^\d.]/g,""),this[b]=Math.round(parseFloat(S,10)));return this},c.default.Element.prototype.attribute=function(b,S){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return S===void 0?this.elt.getAttribute(b):(this.elt.setAttribute(b,S),this);if(S===void 0)return this.elt.firstChild.getAttribute(b);for(var k=0;k<this.elt.childNodes.length;k++)this.elt.childNodes[k].setAttribute(b,S)},c.default.Element.prototype.removeAttribute=function(b){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var S=0;S<this.elt.childNodes.length;S++)this.elt.childNodes[S].removeAttribute(b);return this.elt.removeAttribute(b),this},c.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},c.default.Element.prototype.show=function(){return this.elt.style.display="block",this},c.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},c.default.Element.prototype.size=function(b,S){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var k=b,E=S,T=c.default.prototype.AUTO;if(k!==T||E!==T){if(k===T?k=S*this.width/this.height:E===T&&(E=b*this.height/this.width),this.elt instanceof HTMLCanvasElement){var R,O={},M=this.elt.getContext("2d");for(R in M)O[R]=M[R];for(R in this.elt.setAttribute("width",k*this._pInst._pixelDensity),this.elt.setAttribute("height",E*this._pInst._pixelDensity),this.elt.style.width=k+"px",this.elt.style.height=E+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),O)this.elt.getContext("2d")[R]=O[R]}else this.elt.style.width=k+"px",this.elt.style.height=E+"px",this.elt.width=k,this.elt.height=E;this.width=k,this.height=E,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",k),this._pInst._setProperty("height",E))}return this},c.default.Element.prototype.remove=function(){this instanceof c.default.MediaElement&&(this.stop(),(S=this.elt.srcObject)!==null&&S.getTracks().forEach(function(k){k.stop()}));var b,S=this._pInst._elements.indexOf(this);for(b in S!==-1&&this._pInst._elements.splice(S,1),this._events)this.elt.removeEventListener(b,this._events[b]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},c.default.Element.prototype.drop=function(b,S){var k;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",k=function(E){E.preventDefault()}),this.elt.addEventListener("dragleave",k)),c.default.Element._attachListener("drop",function(T){T.preventDefault(),typeof S=="function"&&S.call(this,T);var T=T.dataTransfer.files,R=!0,O=!1,M=void 0;try{for(var L,I=T[Symbol.iterator]();!(R=(L=I.next()).done);R=!0){var B=L.value;c.default.File._load(B,b)}}catch(V){O=!0,M=V}finally{try{R||I.return==null||I.return()}finally{if(O)throw M}}},this)):console.log("The File APIs are not fully supported in this browser."),this},c.default.Element.prototype.draggable=function(b){var S,k="ontouchstart"in window,E=0,T=0,R=0,O=0,M=k?"touchend":"mouseup",L=k?"touchmove":"mousemove";function I(V){var G;V=V||window.event,O=k?(G=V.changedTouches,E=R-parseInt(G[0].clientX),T=O-parseInt(G[0].clientY),R=parseInt(G[0].clientX),parseInt(G[0].clientY)):(E=R-parseInt(V.clientX),T=O-parseInt(V.clientY),R=parseInt(V.clientX),parseInt(V.clientY)),b.style.left=b.offsetLeft-E+"px",b.style.top=b.offsetTop-T+"px"}function B(){document.removeEventListener(M,B,!1),document.removeEventListener(L,I,!1)}return b===void 0?S=b=this.elt:b!==this.elt&&b.elt!==this.elt&&(b=b.elt,S=this.elt),S.addEventListener(k?"touchstart":"mousedown",function(V){{var G;V=V||window.event,O=k?(G=V.changedTouches,R=parseInt(G[0].clientX),parseInt(G[0].clientY)):(R=parseInt(V.clientX),parseInt(V.clientY))}return document.addEventListener(M,B,!1),document.addEventListener(L,I,!1),!1},!1),S.style.cursor="move",this};function w(b,S,k,E){a(this,w),this.callback=b,this.time=S,this.id=k,this.val=E}t=function(b){var S=E;if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),b&&m(S,b);var k=v(E);function E(T,R){a(this,E);var O=i(R=k.call(this,T,R));return R.elt.crossOrigin="anonymous",R._prevTime=0,R._cueIDCounter=0,R._cues=[],R.pixels=[],R._pixelsState=i(R),R._pixelDensity=1,R._modified=!1,R._frameOnCanvas=-1,Object.defineProperty(O,"src",{get:function(){var M=O.elt.children[0].src,L=O.elt.src===window.location.href?"":O.elt.src;return M===window.location.href?L:M},set:function(M){for(var L=0;L<O.elt.children.length;L++)O.elt.removeChild(O.elt.children[L]);var I=document.createElement("source");I.src=M,T.appendChild(I),O.elt.src=M,O.modified=!0}}),O._onended=function(){},O.elt.onended=function(){O._onended(O)},R}return d(E,[{key:"play",value:function(){var T;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(T=this.elt.play())&&T.catch&&T.catch(function(R){R.name==="NotAllowedError"?console.error(R):console.error("Media play method encountered an unexpected error",R)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var T=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(T)},{passive:!0,once:!0})}},{key:"autoplay",value:function(T){var R=this,O=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",T),T&&!O&&(T=function(){return R._setupAutoplayFailDetection()},this.elt.readyState===4?T():this.elt.addEventListener("canplay",T,{passive:!0,once:!0})),this}},{key:"volume",value:function(T){if(T===void 0)return this.elt.volume;this.elt.volume=T}},{key:"speed",value:function(T){if(T===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=T:this.presetPlaybackRate=T}},{key:"time",value:function(T){return T===void 0?this.elt.currentTime:(this.elt.currentTime=T,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var T=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&T&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),O=0;O<T;O++)R[O]=arguments[O];return c.default.Renderer2D.prototype.loadPixels.apply(this,R)}},{key:"updatePixels",value:function(T,R,O,M){return this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.updatePixels.call(this,T,R,O,M)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),O=0;O<T;O++)R[O]=arguments[O];return c.default.Renderer2D.prototype.get.apply(this,R)}},{key:"_getPixel",value:function(){this.loadPixels();for(var T=arguments.length,R=new Array(T),O=0;O<T;O++)R[O]=arguments[O];return c.default.Renderer2D.prototype._getPixel.apply(this,R)}},{key:"set",value:function(T,R,O){this.loadedmetadata&&(this._ensureCanvas(),c.default.Renderer2D.prototype.set.call(this,T,R,O),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var T=arguments.length,R=new Array(T),O=0;O<T;O++)R[O]=arguments[O];c.default.prototype.copy.apply(this,R)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var T=arguments.length,R=new Array(T),O=0;O<T;O++)R[O]=arguments[O];c.default.Image.prototype.mask.apply(this,R)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(T){this._modified=T}},{key:"onended",value:function(T){return this._onended=T,this}},{key:"connect",value:function(T){var R,O;if(typeof c.default.prototype.getAudioContext=="function")R=c.default.prototype.getAudioContext(),O=c.default.soundOut.input;else try{O=(R=T.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=R.createMediaElementSource(this.elt),this.audioSourceNode.connect(O)),T?T.input?this.audioSourceNode.connect(T.input):this.audioSourceNode.connect(T):this.audioSourceNode.connect(O)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(T,L,O){var M=this._cueIDCounter++,L=new w(L,T,M,O);return this._cues.push(L),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),M}},{key:"removeCue",value:function(T){for(var R=0;R<this._cues.length;R++)this._cues[R].id===T&&(console.log(T),this._cues.splice(R,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var T=this.time(),R=0;R<this._cues.length;R++){var O=this._cues[R].time,M=this._cues[R].val;this._prevTime<O&&O<=T&&this._cues[R].callback(M)}this._prevTime=T}}]),E}(c.default.Element),c.default.MediaElement=t,t=function(){function b(S,k){a(this,b),this.file=S,this._pInst=k,k=S.type.split("/"),this.type=k[0],this.subtype=k[1],this.name=S.name,this.size=S.size,this.data=void 0}return d(b,null,[{key:"_createLoader",value:function(S,k){var E=new FileReader;return E.onload=function(T){var R,O=new c.default.File(S);O.file.type==="application/json"?O.data=JSON.parse(T.target.result):O.file.type==="text/xml"?(R=new DOMParser().parseFromString(T.target.result,"text/xml"),O.data=new c.default.XML(R.documentElement)):O.data=T.target.result,k(O)},E}},{key:"_load",value:function(S,k){var E;/^text\//.test(S.type)||S.type==="application/json"?c.default.File._createLoader(S,k).readAsText(S):/^(video|audio)\//.test(S.type)?((E=new c.default.File(S)).data=URL.createObjectURL(S),k(E)):c.default.File._createLoader(S,k).readAsDataURL(S)}}]),b}(),c.default.File=t,t=c.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(o,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(o=o("../core/main"))&&o.__esModule?o:{default:o};u.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",u.default.prototype.accelerationX=0,u.default.prototype.accelerationY=0,u.default.prototype.accelerationZ=0,u.default.prototype.pAccelerationX=0,u.default.prototype.pAccelerationY=0,u.default.prototype.pAccelerationZ=0,u.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},u.default.prototype.rotationX=0,u.default.prototype.rotationY=0,u.default.prototype.rotationZ=0,u.default.prototype.pRotationX=0,u.default.prototype.pRotationY=0;var c=u.default.prototype.pRotationZ=0,s=0,d=0,m="clockwise",v="clockwise",i="clockwise",n=(u.default.prototype.pRotateDirectionX=void 0,u.default.prototype.pRotateDirectionY=void 0,u.default.prototype.pRotateDirectionZ=void 0,u.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},u.default.prototype.turnAxis=void 0,.5),a=30,o=(u.default.prototype.setMoveThreshold=function(h){u.default._validateParameters("setMoveThreshold",arguments),n=h},u.default.prototype.setShakeThreshold=function(h){u.default._validateParameters("setShakeThreshold",arguments),a=h},u.default.prototype._ondeviceorientation=function(h){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(h.beta)),this._setProperty("rotationY",this._fromDegrees(h.gamma)),this._setProperty("rotationZ",this._fromDegrees(h.alpha)),this._handleMotion()},u.default.prototype._ondevicemotion=function(h){this._updatePAccelerations(),this._setProperty("accelerationX",2*h.acceleration.x),this._setProperty("accelerationY",2*h.acceleration.y),this._setProperty("accelerationZ",2*h.acceleration.z),this._handleMotion()},u.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var h,p,y,w,b,S=this._isGlobal?window:this;typeof S.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>n||Math.abs(this.accelerationY-this.pAccelerationY)>n||Math.abs(this.accelerationZ-this.pAccelerationZ)>n)&&S.deviceMoved(),typeof S.deviceTurned=="function"&&(p=this._toDegrees(this.rotationX)+180,y=this._toDegrees(this.pRotationX)+180,h=c+180,0<p-y&&p-y<270||p-y<-270?m="clockwise":(p-y<0||270<p-y)&&(m="counter-clockwise"),m!==this.pRotateDirectionX&&(h=p),90<Math.abs(p-h)&&Math.abs(p-h)<270&&(h=p,this._setProperty("turnAxis","X"),S.deviceTurned()),this.pRotateDirectionX=m,c=h-180,y=this._toDegrees(this.rotationY)+180,p=this._toDegrees(this.pRotationY)+180,h=s+180,0<y-p&&y-p<270||y-p<-270?v="clockwise":(y-p<0||270<y-this.pRotationY)&&(v="counter-clockwise"),v!==this.pRotateDirectionY&&(h=y),90<Math.abs(y-h)&&Math.abs(y-h)<270&&(h=y,this._setProperty("turnAxis","Y"),S.deviceTurned()),this.pRotateDirectionY=v,s=h-180,0<(p=this._toDegrees(this.rotationZ))-(y=this._toDegrees(this.pRotationZ))&&p-y<270||p-y<-270?i="clockwise":(p-y<0||270<p-y)&&(i="counter-clockwise"),i!==this.pRotateDirectionZ&&(d=p),90<Math.abs(p-d)&&Math.abs(p-d)<270&&(d=p,this._setProperty("turnAxis","Z"),S.deviceTurned()),this.pRotateDirectionZ=i,this._setProperty("turnAxis",void 0)),typeof S.deviceShaken=="function"&&(this.pAccelerationX!==null&&(w=Math.abs(this.accelerationX-this.pAccelerationX),b=Math.abs(this.accelerationY-this.pAccelerationY)),a<w+b&&S.deviceShaken())},u.default);f.default=o},{"../core/main":283}],301:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};u.default.prototype.isKeyPressed=!1,u.default.prototype.keyIsPressed=!1,u.default.prototype.key="",u.default.prototype.keyCode=0,u.default.prototype._onkeydown=function(c){var s;this._downKeys[c.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",c.which),this._downKeys[c.which]=!0,this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(s=this._isGlobal?window:this).keyPressed!="function"||c.charCode||s.keyPressed(c)===!1&&c.preventDefault())},u.default.prototype._onkeyup=function(c){this._downKeys[c.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),this._setProperty("keyCode",c.which);var s=this._isGlobal?window:this;typeof s.keyReleased=="function"&&s.keyReleased(c)===!1&&c.preventDefault()},u.default.prototype._onkeypress=function(c){var s;c.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",c.which),this._setProperty("key",c.key||String.fromCharCode(c.which)||c.which),typeof(s=this._isGlobal?window:this).keyTyped=="function"&&s.keyTyped(c)===!1&&c.preventDefault())},u.default.prototype._onblur=function(c){this._downKeys={}},u.default.prototype.keyIsDown=function(c){return u.default._validateParameters("keyIsDown",arguments),this._downKeys[c]||!1},u.default.prototype._areDownKeys=function(){for(var c in this._downKeys)if(this._downKeys.hasOwnProperty(c)&&this._downKeys[c]===!0)return!0;return!1},t=u.default,f.default=t},{"../core/main":283}],302:[function(t,x,f){function u(v){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i})(v)}function c(v){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(i){return u(i)}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":u(i)})(v)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(s=t("../core/main"))&&s.__esModule?s:{default:s},d=function(v){if(v&&v.__esModule)return v;if(v===null||c(v)!=="object"&&typeof v!="function")return{default:v};var i=m();if(i&&i.has(v))return i.get(v);var n,a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in v){var h;Object.prototype.hasOwnProperty.call(v,n)&&((h=o?Object.getOwnPropertyDescriptor(v,n):null)&&(h.get||h.set)?Object.defineProperty(a,n,h):a[n]=v[n])}return a.default=v,i&&i.set(v,a),a}(t("../core/constants"));function m(){var v;return typeof WeakMap!="function"?null:(v=new WeakMap,m=function(){return v},v)}s.default.prototype.movedX=0,s.default.prototype.movedY=0,s.default.prototype._hasMouseInteracted=!1,s.default.prototype.mouseX=0,s.default.prototype.mouseY=0,s.default.prototype.pmouseX=0,s.default.prototype.pmouseY=0,s.default.prototype.winMouseX=0,s.default.prototype.winMouseY=0,s.default.prototype.pwinMouseX=0,s.default.prototype.pwinMouseY=0,s.default.prototype.mouseButton=0,s.default.prototype.mouseIsPressed=!1,s.default.prototype._updateNextMouseCoords=function(v){var i,n,a,o,h;this._curElement!==null&&(!v.touches||0<v.touches.length)&&(i=this._curElement.elt,n=this.width,a=this.height,(o=v)&&!o.clientX&&(o.touches?o=o.touches[0]:o.changedTouches&&(o=o.changedTouches[0])),h=i.getBoundingClientRect(),n=i.scrollWidth/n||1,i=i.scrollHeight/a||1,a={x:(o.clientX-h.left)/n,y:(o.clientY-h.top)/i,winX:o.clientX,winY:o.clientY,id:o.identifier},this._setProperty("movedX",v.movementX),this._setProperty("movedY",v.movementY),this._setProperty("mouseX",a.x),this._setProperty("mouseY",a.y),this._setProperty("winMouseX",a.winX),this._setProperty("winMouseY",a.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},s.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},s.default.prototype._setMouseButton=function(v){v.button===1?this._setProperty("mouseButton",d.CENTER):v.button===2?this._setProperty("mouseButton",d.RIGHT):this._setProperty("mouseButton",d.LEFT)},s.default.prototype._onmousemove=function(v){var i=this._isGlobal?window:this;this._updateNextMouseCoords(v),this.mouseIsPressed?typeof i.mouseDragged=="function"?i.mouseDragged(v)===!1&&v.preventDefault():typeof i.touchMoved=="function"&&i.touchMoved(v)===!1&&v.preventDefault():typeof i.mouseMoved=="function"&&i.mouseMoved(v)===!1&&v.preventDefault()},s.default.prototype._onmousedown=function(v){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(v),this._updateNextMouseCoords(v),this.touchstart||(typeof i.mousePressed=="function"?i.mousePressed(v)===!1&&v.preventDefault():typeof i.touchStarted=="function"&&i.touchStarted(v)===!1&&v.preventDefault(),this.touchstart=!1)},s.default.prototype._onmouseup=function(v){var i=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof i.mouseReleased=="function"?i.mouseReleased(v)===!1&&v.preventDefault():typeof i.touchEnded=="function"&&i.touchEnded(v)===!1&&v.preventDefault(),this.touchend=!1)},s.default.prototype._ondragend=s.default.prototype._onmouseup,s.default.prototype._ondragover=s.default.prototype._onmousemove,s.default.prototype._onclick=function(v){var i=this._isGlobal?window:this;typeof i.mouseClicked=="function"&&i.mouseClicked(v)===!1&&v.preventDefault()},s.default.prototype._ondblclick=function(v){var i=this._isGlobal?window:this;typeof i.doubleClicked=="function"&&i.doubleClicked(v)===!1&&v.preventDefault()},s.default.prototype._mouseWheelDeltaY=0,s.default.prototype._pmouseWheelDeltaY=0,s.default.prototype._onwheel=function(v){var i=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",v.deltaY),typeof i.mouseWheel=="function"&&(v.delta=v.deltaY,i.mouseWheel(v)===!1&&v.preventDefault())},s.default.prototype.requestPointerLock=function(){var v=this._curElement.elt;return v.requestPointerLock=v.requestPointerLock||v.mozRequestPointerLock,v.requestPointerLock?(v.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},s.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=s.default,f.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(u){if(this._curElement!==null){for(var c=[],s=0;s<u.touches.length;s++)c[s]=function(h,o,p,i){var n=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=h.getBoundingClientRect(),o=h.scrollWidth/o||1,h=h.scrollHeight/p||1,p=i.touches[n]||i.changedTouches[n];return{x:(p.clientX-a.left)/o,y:(p.clientY-a.top)/h,winX:p.clientX,winY:p.clientY,id:p.identifier}}(this._curElement.elt,this.width,this.height,u,s);this._setProperty("touches",c)}},t.default.prototype._ontouchstart=function(u){var c=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(u),this._updateNextMouseCoords(u),this._updateMouseCoords(),typeof c.touchStarted=="function"&&(c.touchStarted(u)===!1&&u.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(u){var c=this._isGlobal?window:this;this._updateTouchCoords(u),this._updateNextMouseCoords(u),typeof c.touchMoved=="function"?c.touchMoved(u)===!1&&u.preventDefault():typeof c.mouseDragged=="function"&&c.mouseDragged(u)===!1&&u.preventDefault()},t.default.prototype._ontouchend=function(u){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(u),this._updateNextMouseCoords(u);var c=this._isGlobal?window:this;typeof c.touchEnded=="function"&&(c.touchEnded(u)===!1&&u.preventDefault(),this.touchend=!0)},t=t.default,f.default=t},{"../core/main":283}],304:[function(t,x,f){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u,c,s,d,m={_toPixels:function(v){var i,n;return v instanceof ImageData?v.data:v.getContext("2d")?v.getContext("2d").getImageData(0,0,v.width,v.height).data:v.getContext("webgl")?(n=(i=v.getContext("webgl")).drawingBufferWidth*i.drawingBufferHeight*4,n=new Uint8Array(n),i.readPixels(0,0,v.width,v.height,i.RGBA,i.UNSIGNED_BYTE,n),n):void 0},_getARGB:function(v,i){return i*=4,v[3+i]<<24&4278190080|v[i]<<16&16711680|v[1+i]<<8&65280|255&v[2+i]},_setPixels:function(v,i){for(var n,a=0,o=v.length;a<o;a++)v[0+(n=4*a)]=(16711680&i[a])>>>16,v[1+n]=(65280&i[a])>>>8,v[2+n]=255&i[a],v[3+n]=(4278190080&i[a])>>>24},_toImageData:function(v){return v instanceof ImageData?v:v.getContext("2d").getImageData(0,0,v.width,v.height)},_createImageData:function(v,i){return m._tmpCanvas=document.createElement("canvas"),m._tmpCtx=m._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(v,i)},apply:function(v,h,n){var a=v.getContext("2d"),o=a.getImageData(0,0,v.width,v.height),h=h(o,n);h instanceof ImageData?a.putImageData(h,0,0,0,0,v.width,v.height):a.putImageData(o,0,0,0,0,v.width,v.height)},threshold:function(v){for(var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,n=m._toPixels(v),a=Math.floor(255*i),o=0;o<n.length;o+=4){var h=void 0,h=a<=.2126*n[o]+.7152*n[o+1]+.0722*n[o+2]?255:0;n[o]=n[o+1]=n[o+2]=h}},gray:function(v){for(var i=m._toPixels(v),n=0;n<i.length;n+=4){var a=i[n],o=i[n+1],h=i[n+2];i[n]=i[n+1]=i[n+2]=.2126*a+.7152*o+.0722*h}},opaque:function(v){for(var i=m._toPixels(v),n=0;n<i.length;n+=4)i[n+3]=255;return i},invert:function(v){for(var i=m._toPixels(v),n=0;n<i.length;n+=4)i[n]=255-i[n],i[n+1]=255-i[n+1],i[n+2]=255-i[n+2]},posterize:function(v){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,n=m._toPixels(v);if(i<2||255<i)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var a=i-1,o=0;o<n.length;o+=4){var h=n[o],p=n[o+1],y=n[o+2];n[o]=255*(h*i>>8)/a,n[o+1]=255*(p*i>>8)/a,n[o+2]=255*(y*i>>8)/a}},dilate:function(v){for(var i,n,a,o,h,p,y,w,b,S=m._toPixels(v),k=0,E=S.length?S.length/4:0,T=new Int32Array(E);k<E;)for(n=(i=k)+v.width;k<n;)o=a=m._getARGB(S,k),(b=k-1)<i&&(b=k),n<=(w=k+1)&&(w=k),(h=k-v.width)<0&&(h=0),E<=(p=k+v.width)&&(p=k),h=m._getARGB(S,h),b=m._getARGB(S,b),p=m._getARGB(S,p),(o=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))<(y=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))&&(a=b,o=y),o<(y=77*((b=m._getARGB(S,w))>>16&255)+151*(b>>8&255)+28*(255&b))&&(a=b,o=y),o<(w=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))&&(a=h,o=w),o<(b=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(a=p,o=b),T[k++]=a;m._setPixels(S,T)},erode:function(v){for(var i,n,a,o,h,p,y,w,b,S=m._toPixels(v),k=0,E=S.length?S.length/4:0,T=new Int32Array(E);k<E;)for(n=(i=k)+v.width;k<n;)o=a=m._getARGB(S,k),(b=k-1)<i&&(b=k),n<=(w=k+1)&&(w=k),(h=k-v.width)<0&&(h=0),E<=(p=k+v.width)&&(p=k),h=m._getARGB(S,h),b=m._getARGB(S,b),p=m._getARGB(S,p),(y=77*(b>>16&255)+151*(b>>8&255)+28*(255&b))<(o=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))&&(a=b,o=y),(y=77*((b=m._getARGB(S,w))>>16&255)+151*(b>>8&255)+28*(255&b))<o&&(a=b,o=y),(w=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))<o&&(a=h,o=w),(b=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<o&&(a=p,o=b),T[k++]=a;m._setPixels(S,T)},blur:function(v,i){for(var n,a,o,h,p,y,w,b,S,k,E=m._toPixels(v),T=v.width,R=v.height,O=T*R,M=new Int32Array(O),L=0;L<O;L++)M[L]=m._getARGB(E,L);var I,B,V,G,Y,H,W,K,Q=new Int32Array(O),se=new Int32Array(O),A=new Int32Array(O),z=new Int32Array(O),q=0,$=3.5*i|0;if(u!==($=$<1?1:$<248?$:248)){c=1+(u=$)<<1,s=new Int32Array(c),d=new Array(c);for(var ie=0;ie<c;ie++)d[ie]=new Int32Array(256);for(var re=1,fe=$-1;re<$;re++){s[$+re]=s[fe]=H=fe*fe,W=d[$+re],K=d[fe--];for(var ge=0;ge<256;ge++)W[ge]=K[ge]=H*ge}Y=s[$]=$*$,W=d[$];for(var de=0;de<256;de++)W[de]=Y*de}for(B=0;B<R;B++){for(I=0;I<T;I++){if(h=o=a=p=n=0,(y=I-u)<0)k=-y,y=0;else{if(T<=y)break;k=0}for(V=k;V<c&&!(T<=y);V++){var me=M[y+q];G=d[V],p+=G[(-16777216&me)>>>24],a+=G[(16711680&me)>>16],o+=G[(65280&me)>>8],h+=G[255&me],n+=s[V],y++}Q[w=q+I]=p/n,se[w]=a/n,A[w]=o/n,z[w]=h/n}q+=T}for(S=(b=-u)*T,B=q=0;B<R;B++){for(I=0;I<T;I++){if(h=o=a=p=n=0,b<0)k=w=-b,y=I;else{if(R<=b)break;k=0,w=b,y=I+S}for(V=k;V<c&&!(R<=w);V++)G=d[V],p+=G[Q[y]],a+=G[se[y]],o+=G[A[y]],h+=G[z[y]],n+=s[V],w++,y+=T;M[I+q]=p/n<<24|a/n<<16|o/n<<8|h/n}q+=T,S+=T,b++}m._setPixels(E,M)}};f.default=m},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=s(t("../core/main")),c=s(t("omggif"));function s(m){return m&&m.__esModule?m:{default:m}}function d(m){return function(v){if(Array.isArray(v)){for(var i=0,n=new Array(v.length);i<v.length;i++)n[i]=v[i];return n}}(m)||function(v){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]")return Array.from(v)}(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}u.default.prototype.createImage=function(m,v){return u.default._validateParameters("createImage",arguments),new u.default.Image(m,v)},u.default.prototype.saveCanvas=function(){for(var m,v,i,n,a,o,h=arguments.length,p=new Array(h),y=0;y<h;y++)p[y]=arguments[y];switch(u.default._validateParameters("saveCanvas",p),p[0]instanceof HTMLCanvasElement?(m=p[0],p.shift()):p[0]instanceof u.default.Element?(m=p[0].elt,p.shift()):p[0]instanceof u.default.Framebuffer?(n=p[0],(a=this.createGraphics(n.width,n.height)).pixelDensity(pixelDensity()),n.loadPixels(),a.loadPixels(),a.pixels.set(n.pixels),a.updatePixels(),m=a.elt,p.shift()):m=this._curElement&&this._curElement.elt,1<=p.length&&(v=p[0]),i=(i=2<=p.length?p[1]:i)||u.default.prototype._checkFileExtension(v,i)[1]||"png"){default:o="image/png";break;case"webp":o="image/webp";break;case"jpeg":case"jpg":o="image/jpeg"}m.toBlob(function(w){u.default.prototype.downloadFile(w,v,i),a&&a.remove()},o)},u.default.prototype.encodeAndDownloadGif=function(m,v){for(var i=m.gifProperties,n=i.loopLimit,a=(n===1?n=null:n===null&&(n=0),new Uint8Array(m.width*m.height*i.numFrames)),o=[],h={},p=0;p<i.numFrames;p++){for(var y=new Set,w=i.frames[p].image.data,b=w.length,S=new Uint32Array(m.width*m.height),k=0,E=0;k<b;k+=4,E++){var T=w[k+0]<<16|w[k+1]<<8|w[k+2]<<0;y.add(T),S[E]=T}var R=d(y).sort().toString();h[R]===void 0?h[R]={freq:1,frames:[p]}:(h[R].freq+=1,h[R].frames.push(p)),o.push(S)}for(var L=[],O=Object.keys(h).sort(function(A,z){return h[z].freq-h[A].freq}),M=O[0].split(",").map(function(A){return parseInt(A)}),L=L.concat(h[M].frames),I=new Set(M),B=1;B<O.length;B++){var V=O[B].split(",").map(function(A){return parseInt(A)}).filter(function(A){return!I.has(A)});if(M.length+V.length<=256){for(var G=0;G<V.length;G++)M.push(V[G]),I.add(V[G]);L=L.concat(h[O[B]].frames)}}L=new Set(L);for(var Y={},H=0;H<M.length;H++)Y[M[H]]||(Y[M[H]]=H);for(var W=1;W<M.length;)W<<=1;M.length=W;for(var n={loop:n,palette:new Uint32Array(M)},K=new c.default.GifWriter(a,m.width,m.height,n),Q={},se=0;se<i.numFrames;se++)(function(z){var q=!L.has(z),$=q?[]:M,ie=new Uint8Array(m.width*m.height),re={},fe=new Set,ge=(o[z].forEach(function(he,be){q?(re[he]===void 0&&(re[he]=$.length,$.push(he)),ie[be]=re[he]):ie[be]=Y[he],0<z&&o[z-1][be]!==he&&fe.add(he)}),{}),de=$.filter(function(he){return!fe.has(he)});if(0<de.length){var de=de[0],me=(q?re:Y)[de];if(0<z){for(var _e=0;_e<o[z].length;_e++)o[z-1][_e]===o[z][_e]&&(ie[_e]=me);ge.transparent=me,Q.frameOpts.disposal=1}}if(ge.delay=i.frames[z].delay/10,q){for(var ae=1;ae<$.length;)ae<<=1;$.length=ae,ge.palette=new Uint32Array($)}0<z&&K.addFrame(0,0,m.width,m.height,Q.pixelPaletteIndex,Q.frameOpts),Q={pixelPaletteIndex:ie,frameOpts:ge}})(se);Q.frameOpts.disposal=1,K.addFrame(0,0,m.width,m.height,Q.pixelPaletteIndex,Q.frameOpts),n=new Blob([a.slice(0,K.end())],{type:"image/gif"}),u.default.prototype.downloadFile(n,v,"gif")},u.default.prototype.saveFrames=function(m,v,i,o,a){u.default._validateParameters("saveFrames",arguments),i=u.default.prototype.constrain(i=i||3,0,15),i*=1e3;var o=u.default.prototype.constrain(o||15,0,22),h=0,p=u.default.prototype._makeFrame,y=this._curElement.elt,w=[],b=setInterval(function(){w.push(p(m+h,v,y)),h++},1e3/o);setTimeout(function(){if(clearInterval(b),a)a(w);else for(var S=0,k=w;S<k.length;S++){var E=k[S];u.default.prototype.downloadFile(E.imageData,E.filename,E.ext)}w=[]},.01+i)},u.default.prototype._makeFrame=function(m,v,a){var n,a=this?this._curElement.elt:a;if(v)switch(v.toLowerCase()){case"png":n="image/png";break;case"jpeg":case"jpg":n="image/jpeg";break;default:n="image/png"}else v="png",n="image/png";var a=(a=a.toDataURL(n)).replace(n,"image/octet-stream"),o={};return o.imageData=a,o.filename=m,o.ext=v,o},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(t,x,f){function u(y){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(y)}function c(y){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(w){return u(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":u(w)})(y)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t("regenerator-runtime/runtime");var s=a(t("../core/main")),d=a(t("../core/helpers")),m=function(y){if(y&&y.__esModule)return y;if(y===null||c(y)!=="object"&&typeof y!="function")return{default:y};var w=n();if(w&&w.has(y))return w.get(y);var b,S={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in y){var E;Object.prototype.hasOwnProperty.call(y,b)&&((E=k?Object.getOwnPropertyDescriptor(y,b):null)&&(E.get||E.set)?Object.defineProperty(S,b,E):S[b]=y[b])}return S.default=y,w&&w.set(y,S),S}(t("../core/constants")),v=a(t("omggif")),i=t("gifenc");function n(){var y;return typeof WeakMap!="function"?null:(y=new WeakMap,n=function(){return y},y)}function a(y){return y&&y.__esModule?y:{default:y}}function o(y,w,b,S,k,E,T){try{var R=y[E](T),O=R.value}catch(M){return void b(M)}R.done?w(O):Promise.resolve(O).then(S,k)}function h(y,w,b,S,k,E,T,R,O,M,L){var I,B,V,G,Y,H,W,K,Q;return y===m.COVER&&(I=w,V=b,W=E,K=T,H=R,Q=O,B=M,G=L,Y=Math.max(W/B,K/G),W/=Y,K/=Y,Y=H,H=Q,I===m.CENTER?Y+=(B-W)/2:I===m.RIGHT&&(Y+=B-W),V===m.CENTER?H+=(G-K)/2:V===m.BOTTOM&&(H+=G-K),R=(Q={x:Y,y:H,w:W,h:K}).x,O=Q.y,M=Q.w,L=Q.h),y===m.CONTAIN&&(I=w,B=b,V=S,G=k,Y=E,H=T,W=M,K=L,Q=Math.max(W/Y,K/H),W/=Q,K/=Q,Q=V,V=G,I===m.CENTER?Q+=(Y-W)/2:I===m.RIGHT&&(Q+=Y-W),B===m.CENTER?V+=(H-K)/2:B===m.BOTTOM&&(V+=H-K),S=(y={x:Q,y:V,w:W,h:K}).x,k=y.y,E=y.w,T=y.h),{sx:R,sy:O,sw:M,sh:L,dx:S,dy:k,dw:E,dh:T}}function p(y,w){return 0<y&&y<w?y:w}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.loadImage=function(y,w,b){s.default._validateParameters("loadImage",arguments);var S=new s.default.Image(1,1,this),k=this,E=new Request(y,{method:"GET",mode:"cors"});return fetch(y,E).then(function(T){var R,O=T.headers.get("content-type");O===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),O&&O.includes("image/gif")?T.arrayBuffer().then(function(M){if(M){for(var M=new Uint8Array(M),L=S,I=w,B=b,V=(function(q){k._decrementPreload()}).bind(k),G=new v.default.GifReader(M),Y=(L.width=L.canvas.width=G.width,L.height=L.canvas.height=G.height,[]),H=G.numFrames(),W=new Uint8ClampedArray(L.width*L.height*4),K=0;K<H;K++){var Q=G.frameInfo(K),se=L.drawingContext.getImageData(0,0,L.width,L.height),A=(W=se.data.slice(),function(q,$){try{$.decodeAndBlitFrameRGBA(q,W)}catch(ie){s.default._friendlyFileLoadError(8,L.src),typeof B=="function"?B(ie):console.error(ie)}}(K,G),new ImageData(W,L.width,L.height)),A=(L.drawingContext.putImageData(A,0,0),Q.delay);A===0&&(A=10),Y.push({image:L.drawingContext.getImageData(0,0,L.width,L.height),delay:10*A}),Q.disposal===2?L.drawingContext.clearRect(Q.x,Q.y,Q.width,Q.height):Q.disposal===3&&L.drawingContext.putImageData(se,0,0,Q.x,Q.y,Q.width,Q.height)}(M=G.loopCount())===null?M=1:M===0&&(M=null),L.drawingContext.putImageData(Y[0].image,0,0),1<Y.length&&(L.gifProperties={displayIndex:0,loopLimit:M,loopCount:0,frames:Y,numFrames:H,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof I=="function"&&I(L),V()}},function(M){typeof b=="function"?(b(M),k._decrementPreload()):console.error(M)}):((R=new Image).onload=function(){S.width=S.canvas.width=R.width,S.height=S.canvas.height=R.height,S.drawingContext.drawImage(R,0,0),S.modified=!0,typeof w=="function"&&w(S),k._decrementPreload()},R.onerror=function(M){s.default._friendlyFileLoadError(0,R.src),typeof b=="function"?(b(M),k._decrementPreload()):console.error(M)},y.indexOf("data:image/")!==0&&(R.crossOrigin="Anonymous"),R.src=y),S.modified=!0}).catch(function(T){s.default._friendlyFileLoadError(0,y),typeof b=="function"?(b(T),k._decrementPreload()):console.error(T)}),S},s.default.prototype.saveGif=function(){y=regeneratorRuntime.mark(function b(S,k){var E,T,R,O,M,L,I,B,V,G,Y,H,W,K,Q,se,A,z,q,$,ie,re,fe,ge,de,me,_e=arguments;return regeneratorRuntime.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(E=2<_e.length&&_e[2]!==void 0?_e[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof S!="string")throw TypeError("fileName parameter must be a string");ae.next=3;break;case 3:if(typeof k!="number")throw TypeError("Duration parameter must be a number");ae.next=5;break;case 5:if(T=E&&E.delay||0,R=E&&E.units||"seconds",O=E&&E.silent||!1,M=E&&E.notificationDuration||0,L=E&&E.notificationID||"progressBar",typeof T!="number")throw TypeError("Delay parameter must be a number");ae.next=12;break;case 12:if(R!=="seconds"&&R!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');ae.next=14;break;case 14:if(typeof O!="boolean")throw TypeError("Silent parameter must be a boolean");ae.next=16;break;case 16:if(typeof M!="number")throw TypeError("Notification duration parameter must be a number");ae.next=18;break;case 18:if(typeof L!="string")throw TypeError("Notification ID parameter must be a string");ae.next=20;break;case 20:return this._recording=!0,G=this._targetFrameRate,I=(I=1/(G=G!==1/0&&G!==void 0&&G!==0?G:60)*1e3)<20?20:I,V=(B=R==="seconds"?k*G:k)+(G=R==="seconds"?T*G:T),G=G,this.frameCount=G,Y=this._pixelDensity,this.pixelDensity(1),H=[],document.getElementById(L)!==null&&document.getElementById(L).remove(),O||((W=this.createP("")).id(L),W.style("font-size","16px"),W.style("font-family","Montserrat"),W.style("background-color","#ffffffa0"),W.style("padding","8px"),W.style("border-radius","10px"),W.position(0,0)),this._renderer instanceof s.default.RendererGL&&(Q=this.drawingContext,K=new Uint8Array(Q.drawingBufferWidth*Q.drawingBufferHeight*4)),this.noLoop(),ae.next=39,Promise.resolve();case 39:if(G<V)return this.redraw(),ge=void 0,ge=this._renderer instanceof s.default.RendererGL?(K=new Uint8Array(Q.drawingBufferWidth*Q.drawingBufferHeight*4),Q.readPixels(0,0,Q.drawingBufferWidth,Q.drawingBufferHeight,Q.RGBA,Q.UNSIGNED_BYTE,K),function(he,be,ke){for(var xe=parseInt(ke/2),we=4*be,Me=new Uint8Array(4*be),He=0;He<xe;++He){var Ie=He*we,dt=(ke-He-1)*we;Me.set(he.subarray(Ie,Ie+we)),he.copyWithin(Ie,dt,dt+we),he.set(Me,dt)}return he}(K,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,H.push(ge),G++,O||W.html("Saved frame <b>"+H.length.toString()+"</b> out of "+B.toString()),ae.next=48,new Promise(function(he){return setTimeout(he,0)});ae.next=50;break;case 48:ae.next=39;break;case 50:O||W.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(Y),se=(0,i.GIFEncoder)(),A=function(he){for(var be=new Uint8Array(he.length*he[0].length),ke=0;ke<he.length;ke++)be.set(he[ke],ke*he[0].length);var xe=(0,i.quantize)(be,256,{format:"rgba4444",oneBitAlpha:!0});return xe.length===256?xe[xe.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:xe.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),xe}(H),z={},q=function(he){for(var be=he.length/4,ke=new Uint8Array(be),xe=0;xe<be;xe++){var we=he[4*xe]<<24|he[4*xe+1]<<16|he[4*xe+2]<<8|he[4*xe+3];z[we]===void 0&&(z[we]=(0,i.nearestColorIndex)(A,he.slice(4*xe,4*(xe+1)))),ke[xe]=z[we]}return ke},$=A.length-1,ie=[],re=0;case 60:if(!(re<H.length)){ae.next=71;break}if(fe=q(H[re]),ge=fe.slice(),re===0)se.writeFrame(fe,this.width,this.height,{palette:A,delay:I,dispose:1});else{for(de=0;de<fe.length;de++)fe[de]===ie[de]&&(fe[de]=$);se.writeFrame(fe,this.width,this.height,{delay:I,transparent:!0,transparentIndex:$,dispose:1})}return ie=ge,O||W.html("Rendered frame <b>"+re.toString()+"</b> out of "+B.toString()),ae.next=68,new Promise(function(he){return setTimeout(he,0)});case 68:re++,ae.next=60;break;case 71:se.finish(),me=se.bytesView(),me=new Blob([me],{type:"image/gif"}),H=[],this._recording=!1,this.loop(),O||(W.html("Done. Downloading your gif!🌸"),0<M&&setTimeout(function(){return W.remove()},1e3*M)),s.default.prototype.downloadFile(me,S,"gif");case 80:case"end":return ae.stop()}},b,this)});var y,w=function(){var b=this,S=arguments;return new Promise(function(k,E){var T=y.apply(b,S);function R(M){o(T,k,E,R,O,"next",M)}function O(M){o(T,k,E,R,O,"throw",M)}R(void 0)})};return function(b,S){return w.apply(this,arguments)}}(),s.default.prototype.image=function(y,w,b,S,G,Y,H,W,Q,M,L,I){s.default._validateParameters("image",arguments);var K=y.width,B=y.height,V=(I=I||m.CENTER,L=L||m.CENTER,y.elt&&(K=K!==void 0?K:y.elt.width,B=B!==void 0?B:y.elt.height),y.elt&&y.elt.videoWidth&&!y.canvas&&(K=K!==void 0?K:y.elt.videoWidth,B=B!==void 0?B:y.elt.videoHeight),S||K),G=G||B,Y=Y||0,H=H||0,W=p(W!==void 0?W:K,K),K=p(Q!==void 0?Q:B,B),Q=1;y.elt&&!y.canvas&&y.elt.style.width&&(Q=y.elt.videoWidth&&!S?y.elt.videoWidth:y.elt.width,Q/=parseInt(y.elt.style.width,10)),Y*=Q,H*=Q,K*=Q,W*=Q,B=h(M,L,I,(B=d.default.modeAdjust(w,b,V,G,this._renderer._imageMode)).x,B.y,B.w,B.h,Y,H,W,K),this._renderer.image(y,B.sx,B.sy,B.sw,B.sh,B.dx,B.dy,B.dw,B.dh)},s.default.prototype.tint=function(){for(var y=arguments.length,w=new Array(y),b=0;b<y;b++)w[b]=arguments[b];s.default._validateParameters("tint",w);var S=this.color.apply(this,w);this._renderer._tint=S.levels},s.default.prototype.noTint=function(){this._renderer._tint=null},s.default.prototype._getTintedImageCanvas=s.default.Renderer2D.prototype._getTintedImageCanvas,s.default.prototype.imageMode=function(y){s.default._validateParameters("imageMode",arguments),y!==m.CORNER&&y!==m.CORNERS&&y!==m.CENTER||(this._renderer._imageMode=y)},t=s.default,f.default=t},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=s(t("../core/main")),c=s(t("./filters"));function s(m){return m&&m.__esModule?m:{default:m}}function d(m,v){for(var i=0;i<v.length;i++){var n=v[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(m,n.key,n)}}u.default.Image=function(){function m(n,a){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.width=n,this.height=a,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var v,i;return v=m,(i=[{key:"pixelDensity",value:function(n){return n!==void 0?(n<=0&&(u.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),n=1),this._pixelDensity=n,this.width/=n,this.height/=n,this):this._pixelDensity}},{key:"_animateGif",value:function(h){var a,o=this.gifProperties,h=h._lastRealFrameTime||window.performance.now();o.lastChangeTime===0&&(o.lastChangeTime=h),o.playing&&(o.timeDisplayed=h-o.lastChangeTime,a=o.frames[o.displayIndex].delay,o.timeDisplayed>=a&&(a=Math.floor(o.timeDisplayed/a),o.timeDisplayed=0,o.lastChangeTime=h,o.displayIndex+=a,o.loopCount=Math.floor(o.displayIndex/o.numFrames),o.loopLimit!==null&&o.loopCount>=o.loopLimit?o.playing=!1:(h=o.displayIndex%o.numFrames,this.drawingContext.putImageData(o.frames[h].image,0,0),o.displayIndex=h,this.setModified(!0))))}},{key:"_setProperty",value:function(n,a){this[n]=a,this.setModified(!0)}},{key:"loadPixels",value:function(){u.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(n,a,o,h){u.default.Renderer2D.prototype.updatePixels.call(this,n,a,o,h),this.setModified(!0)}},{key:"get",value:function(n,a,o,h){return u.default._validateParameters("p5.Image.get",arguments),u.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return u.default.Renderer2D.prototype._getPixel.apply(this,a)}},{key:"set",value:function(n,a,o){u.default.Renderer2D.prototype.set.call(this,n,a,o),this.setModified(!0)}},{key:"resize",value:function(n,a){n===0&&a===0?(n=this.canvas.width,a=this.canvas.height):n===0?n=this.canvas.width*a/this.canvas.height:a===0&&(a=this.canvas.height*n/this.canvas.width),n=Math.floor(n),a=Math.floor(a);var o=document.createElement("canvas");if(o.width=n,o.height=a,this.gifProperties)for(var h=this.gifProperties,p=0;p<h.numFrames;p++){for(var y=this.drawingContext.createImageData(n,a),w=(T=T=E=k=S=void 0,h.frames[p].image),b=y,S=0,k=0;k<b.height;k++)for(var E=0;E<b.width;E++){var T=Math.floor(E*w.width/b.width),T=4*(Math.floor(k*w.height/b.height)*w.width+T);b.data[S++]=w.data[T++],b.data[S++]=w.data[T++],b.data[S++]=w.data[T++],b.data[S++]=w.data[+T]}h.frames[p].image=y}o.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,o.width,o.height),this.canvas.width=this.width=n,this.canvas.height=this.height=a,this.drawingContext.drawImage(o,0,0,n,a,0,0,n,a),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];u.default.prototype.copy.apply(this,a)}},{key:"mask",value:function(n){var a=this.drawingContext.globalCompositeOperation,o=this._pixelDensity,h=1,p=[n=n===void 0?this:n,0,0,(h=n instanceof u.default.Renderer?n._pInst._pixelDensity:h)*n.width,h*n.height,0,0,o*this.width,o*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var y=0;y<this.gifProperties.frames.length;y++)this.drawingContext.putImageData(this.gifProperties.frames[y].image,0,0),this.copy.apply(this,p),this.gifProperties.frames[y].image=this.drawingContext.getImageData(0,0,o*this.width,o*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,p);this.drawingContext.globalCompositeOperation=a,this.setModified(!0)}},{key:"filter",value:function(n,a){c.default.apply(this.canvas,c.default[n],a),this.setModified(!0)}},{key:"blend",value:function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];u.default._validateParameters("p5.Image.blend",arguments),u.default.prototype.blend.apply(this,a),this.setModified(!0)}},{key:"setModified",value:function(n){this._modified=n}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(n,a){this.gifProperties?u.default.prototype.encodeAndDownloadGif(this,n):u.default.prototype.saveCanvas(this.canvas,n,a)}},{key:"reset",value:function(){var n;this.gifProperties&&((n=this.gifProperties).playing=!0,n.timeSinceStart=0,n.timeDisplayed=0,n.lastChangeTime=0,n.loopCount=0,n.displayIndex=0,this.drawingContext.putImageData(n.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var n;if(this.gifProperties)return(n=this.gifProperties).displayIndex%n.numFrames}},{key:"setFrame",value:function(n){var a;this.gifProperties&&(n<(a=this.gifProperties).numFrames&&0<=n?(a.timeDisplayed=0,a.lastChangeTime=0,a.displayIndex=n,this.drawingContext.putImageData(a.frames[n].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(n,a){if(this.gifProperties){var o=this.gifProperties;if(a<o.numFrames&&0<=a)o.frames[a].delay=n;else{var h=!0,a=!1,p=void 0;try{for(var y,w=o.frames[Symbol.iterator]();!(h=(y=w.next()).done);h=!0)y.value.delay=n}catch(S){a=!0,p=S}finally{try{h||w.return==null||w.return()}finally{if(a)throw p}}}}}}])&&d(v.prototype,i),m}(),t=u.default.Image,f.default=t},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(t,x,f){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=s(t("../core/main")),c=s(t("./filters"));function s(d){return d&&d.__esModule?d:{default:d}}t("../color/p5.Color"),u.default.prototype.pixels=[],u.default.prototype.blend=function(){for(var d,m=arguments.length,v=new Array(m),i=0;i<m;i++)v[i]=arguments[i];u.default._validateParameters("blend",v),this._renderer?(d=this._renderer).blend.apply(d,v):u.default.Renderer2D.prototype.blend.apply(this,v)},u.default.prototype.copy=function(){for(var d,m,v,i,n,a,o,h,p,y=arguments.length,w=new Array(y),b=0;b<y;b++)w[b]=arguments[b];if(u.default._validateParameters("copy",w),w.length===9)d=w[0],m=w[1],v=w[2],i=w[3],n=w[4],a=w[5],o=w[6],h=w[7],p=w[8];else{if(w.length!==8)throw new Error("Signature not supported");d=this,m=w[0],v=w[1],i=w[2],n=w[3],a=w[4],o=w[5],h=w[6],p=w[7]}u.default.prototype._copyHelper(this,d,m,v,i,n,a,o,h,p)},u.default.prototype._copyHelper=function(d,m,v,i,n,a,o,h,p,y){var w=m.canvas.width/m.width,b=0,S=0;m._renderer&&m._renderer.isP3D&&(b=m.width/2,S=m.height/2),d._renderer&&d._renderer.isP3D?(d.push(),d.resetMatrix(),d.noLights(),d.blendMode(d.BLEND),d.imageMode(d.CORNER),u.default.RendererGL.prototype.image.call(d._renderer,m,v+b,i+S,n,a,o,h,p,y),d.pop()):d.drawingContext.drawImage(m.canvas,w*(v+b),w*(i+S),w*n,w*a,o,h,p,y)},u.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},u.default.prototype.filter=function(){for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];u.default._validateParameters("filter",m);var o=(function(){var h,p={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof u.default.Shader?p.shader=arguments.length<=0?void 0:arguments[0]:(p.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(p.value=arguments.length<=1?void 0:arguments[1]),((h=arguments.length-1)<0||arguments.length<=h?void 0:arguments[h])===!1&&(p.useWebGL=!1)),p}).apply(void 0,m),i=o.shader,n=o.operation,a=o.value,o=o.useWebGL;this._renderer.isP3D&&i?u.default.RendererGL.prototype.filter.call(this._renderer,i):o||this._renderer.isP3D?(!o&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?u.default.RendererGL.prototype.filter.call(this._renderer,n,a):((i=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),i.filter.apply(i,m),this.copy(i._renderer,0,0,this.width,this.height,0,0,this.width,this.height),i.clear())):this.canvas!==void 0?c.default.apply(this.canvas,c.default[n],a):c.default.apply(this.elt,c.default[n],a)},u.default.prototype.get=function(d,m,v,i){var n;return u.default._validateParameters("get",arguments),(n=this._renderer).get.apply(n,arguments)},u.default.prototype.loadPixels=function(){for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];u.default._validateParameters("loadPixels",m),this._renderer.loadPixels()},u.default.prototype.set=function(d,m,v){this._renderer.set(d,m,v)},u.default.prototype.updatePixels=function(d,m,v,i){u.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(d,m,v,i)},t=u.default,f.default=t},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(t,x,f){function u(a){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=m(t("../core/main")),s=(t("whatwg-fetch"),t("es6-promise/auto"),m(t("fetch-jsonp"))),d=m(t("file-saver"));function m(a){return a&&a.__esModule?a:{default:a}}function v(a){return(v=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(o){return u(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":u(o)})(a)}function i(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function n(a,o){o&&o!==!0&&o!=="true"||(o="");var h="";return(a=a||"untitled")&&a.includes(".")&&(h=a.split(".").pop()),o&&h!==o&&(h=o,a="".concat(a,".").concat(h)),[a,h]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),c.default.prototype.loadJSON=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];c.default._validateParameters("loadJSON",o);for(var p,y,w,b=o[0],S={},k="json",E=1;E<o.length;E++){var T=o[E];typeof T=="string"?T!=="jsonp"&&T!=="json"||(k=T):typeof T=="function"?p?y=T:p=T:v(T)==="object"&&(T.hasOwnProperty("jsonpCallback")||T.hasOwnProperty("jsonpCallbackFunction"))&&(k="jsonp",w=T)}var R=this;return this.httpDo(b,"GET",w,k,function(O){for(var M in O)S[M]=O[M];p!==void 0&&p(O),R._decrementPreload()},function(O){if(c.default._friendlyFileLoadError(5,b),!y)throw O;y(O)}),S},c.default.prototype.loadStrings=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];c.default._validateParameters("loadStrings",o);for(var p,y,w=[],b=1;b<o.length;b++){var S=o[b];typeof S=="function"&&(p===void 0?p=S:y===void 0&&(y=S))}var k=this;return c.default.prototype.httpDo.call(this,o[0],"GET","text",function(E){for(var T=E.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),R=0,O=T.length;R<O;R+=32768)Array.prototype.push.apply(w,T.slice(R,Math.min(R+32768,O)));p!==void 0&&p(w),k._decrementPreload()},function(E){if(c.default._friendlyFileLoadError(3,E),!y)throw E;y(E)}),w},c.default.prototype.loadTable=function(a){var o,h,p,y=!1,w=a.substring(a.lastIndexOf(".")+1,a.length);w==="csv"?p=",":w==="ssv"?p=";":w==="tsv"&&(p="	");for(var b=1;b<arguments.length;b++)typeof arguments[b]=="function"?o===void 0?o=arguments[b]:h===void 0&&(h=arguments[b]):typeof arguments[b]=="string"&&(arguments[b]==="header"&&(y=!0),arguments[b]==="csv"?p=",":arguments[b]==="ssv"?p=";":arguments[b]==="tsv"&&(p="	"));var S=new c.default.Table,k=this;return this.httpDo(a,"GET","table",function(E){for(var T,R,O={},M=0,L=[],I=0,B=null,V=function(){O.currentState=M,O.token=""},G=function(){B.push(O.token),V()},Y=function(){O.currentState=4,L.push(B),B=null};;){if((T=E[I++])==null){if(O.escaped)throw new Error("Unclosed quote in file.");if(B){G(),Y();break}}if(B===null&&(O.escaped=!1,B=[],V()),O.currentState===M){if(T==='"'){O.escaped=!0,O.currentState=1;continue}O.currentState=1}if(O.currentState===1&&O.escaped)if(T==='"')E[I]==='"'?(O.token+='"',I++):(O.escaped=!1,O.currentState=2);else{if(T==="\r")continue;O.token+=T}else T==="\r"?(E[I]===`
`&&I++,G(),Y()):T===`
`?(G(),Y()):T===p?G():O.currentState===1&&(O.token+=T)}if(y)S.columns=L.shift();else for(var H=0;H<L[0].length;H++)S.columns[H]="null";for(var W=0;W<L.length;W++)(L[W].length!==1||L[W][0]!=="undefined"&&L[W][0]!=="")&&((R=new c.default.TableRow).arr=L[W],R.obj=function(K,Q){if((Q=Q||[])===void 0)for(var se=0;se<K.length;se++)Q[se.toString()]=se;return Object.fromEntries(Q.map(function(A,z){return[A,K[z]]}))}(L[W],S.columns),S.addRow(R));typeof o=="function"&&o(S),k._decrementPreload()},function(E){c.default._friendlyFileLoadError(2,a),h?h(E):console.error(E)}),S},c.default.prototype.loadXML=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];for(var p,y,w=new c.default.XML,b=1;b<o.length;b++){var S=o[b];typeof S=="function"&&(p===void 0?p=S:y===void 0&&(y=S))}var k=this;return this.httpDo(o[0],"GET","xml",function(E){for(var T in E)w[T]=E[T];p!==void 0&&p(w),k._decrementPreload()},function(E){if(c.default._friendlyFileLoadError(1,E),!y)throw E;y(E)}),w},c.default.prototype.loadBytes=function(a,o,h){var p={},y=this;return this.httpDo(a,"GET","arrayBuffer",function(w){p.bytes=new Uint8Array(w),typeof o=="function"&&o(p),y._decrementPreload()},function(w){if(c.default._friendlyFileLoadError(6,a),!h)throw w;h(w)}),p},c.default.prototype.httpGet=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];return c.default._validateParameters("httpGet",o),o.splice(1,0,"GET"),c.default.prototype.httpDo.apply(this,o)},c.default.prototype.httpPost=function(){for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];return c.default._validateParameters("httpPost",o),o.splice(1,0,"POST"),c.default.prototype.httpDo.apply(this,o)},c.default.prototype.httpDo=function(){for(var a,o,h,p={},y=0,w="text/plain",b=arguments.length-1;0<b&&typeof(b<0||arguments.length<=b?void 0:arguments[b])=="function";b--)y++;var S=arguments.length-y,k=arguments.length<=0?void 0:arguments[0];if(S==2&&typeof k=="string"&&v(arguments.length<=1?void 0:arguments[1])==="object")L=new Request(k,arguments.length<=1?void 0:arguments[1]),o=arguments.length<=2?void 0:arguments[2],h=arguments.length<=3?void 0:arguments[3];else{for(var E,T="GET",R=1;R<arguments.length;R++){var O=R<0||arguments.length<=R?void 0:arguments[R];if(typeof O=="string")O==="GET"||O==="POST"||O==="PUT"||O==="DELETE"?T=O:O==="json"||O==="jsonp"||O==="binary"||O==="arrayBuffer"||O==="xml"||O==="text"||O==="table"?a=O:E=O;else if(typeof O=="number")E=O.toString();else if(v(O)==="object")if(O.hasOwnProperty("jsonpCallback")||O.hasOwnProperty("jsonpCallbackFunction"))for(var M in O)p[M]=O[M];else w=O instanceof c.default.XML?(E=O.serialize(),"application/xml"):(E=JSON.stringify(O),"application/json");else typeof O=="function"&&(o?h=O:o=O)}var S=T==="GET"?new Headers:new Headers({"Content-Type":w}),L=new Request(k,{method:T,mode:"cors",body:E,headers:S})}return(S=(S=(a=a||(k.includes("json")?"json":k.includes("xml")?"xml":"text"))==="jsonp"?(0,s.default)(k,p):fetch(L)).then(function(I){if(!I.ok)throw(B=new Error(I.body)).status=I.status,B.ok=!1,B;var B=0;switch((B=a!=="jsonp"?I.headers.get("content-length"):B)&&64e6<B&&c.default._friendlyFileLoadError(7,k),a){case"json":case"jsonp":return I.json();case"binary":return I.blob();case"arrayBuffer":return I.arrayBuffer();case"xml":return I.text().then(function(V){return V=new DOMParser().parseFromString(V,"text/xml"),new c.default.XML(V.documentElement)});default:return I.text()}})).then(o||function(){}),S.catch(h||console.error),S},window.URL=window.URL||window.webkitURL,c.default.prototype._pWriters=[],c.default.prototype.createWriter=function(a,o){var h,p;for(p in c.default.prototype._pWriters)if(c.default.prototype._pWriters[p].name===a)return h=new c.default.PrintWriter(a+this.millis(),o),c.default.prototype._pWriters.push(h),h;return h=new c.default.PrintWriter(a,o),c.default.prototype._pWriters.push(h),h},c.default.PrintWriter=function(a,o){var h=this;this.name=a,this.content="",this.write=function(p){this.content+=p},this.print=function(p){this.content+="".concat(p,`
`)},this.clear=function(){this.content=""},this.close=function(){var p,y=[];for(p in y.push(this.content),c.default.prototype.writeFile(y,a,o),c.default.prototype._pWriters)c.default.prototype._pWriters[p].name===this.name&&c.default.prototype._pWriters.splice(p,1);h.clear(),h={}}},c.default.prototype.save=function(a,o,h){var p=arguments,y=(this._curElement||this).elt;if(p.length===0)c.default.prototype.saveCanvas(y);else if(p[0]instanceof c.default.Renderer||p[0]instanceof c.default.Graphics)c.default.prototype.saveCanvas(p[0].elt,p[1],p[2]);else if(p.length===1&&typeof p[0]=="string")c.default.prototype.saveCanvas(y,p[0]);else switch(n(p[1],p[2])[1]){case"json":return void c.default.prototype.saveJSON(p[0],p[1],p[2]);case"txt":return void c.default.prototype.saveStrings(p[0],p[1],p[2]);default:p[0]instanceof Array?c.default.prototype.saveStrings(p[0],p[1],p[2]):p[0]instanceof c.default.Table?c.default.prototype.saveTable(p[0],p[1],p[2]):p[0]instanceof c.default.Image?c.default.prototype.saveCanvas(p[0].canvas,p[1]):p[0]instanceof c.default.SoundFile&&c.default.prototype.saveSound(p[0],p[1],p[2],p[3])}},c.default.prototype.saveJSON=function(a,o,h){c.default._validateParameters("saveJSON",arguments),h=h?JSON.stringify(a):JSON.stringify(a,void 0,2),this.saveStrings(h.split(`
`),o,"json")},c.default.prototype.saveJSONObject=c.default.prototype.saveJSON,c.default.prototype.saveJSONArray=c.default.prototype.saveJSON,c.default.prototype.saveStrings=function(a,o,h,p){c.default._validateParameters("saveStrings",arguments);for(var y=this.createWriter(o,h||"txt"),w=0;w<a.length;w++)p?y.write(a[w]+`\r
`):y.write(a[w]+`
`);y.close(),y.clear()},c.default.prototype.saveTable=function(a,o,h){c.default._validateParameters("saveTable",arguments),p=h===void 0?o.substring(o.lastIndexOf(".")+1,o.length):h;var p,y=this.createWriter(o,p),w=a.columns,b=p==="tsv"?"	":",";if(p!=="html"){if(w[0]!=="0"){for(var S=0;S<w.length;S++)S<w.length-1?y.write(w[S]+b):y.write(w[S]);y.write(`
`)}for(var k=0;k<a.rows.length;k++){for(var E=void 0,E=0;E<a.rows[k].arr.length;E++)E<a.rows[k].arr.length-1?p==="csv"&&String(a.rows[k].arr[E]).includes(",")?y.write('"'+a.rows[k].arr[E]+'"'+b):y.write(a.rows[k].arr[E]+b):p==="csv"&&String(a.rows[k].arr[E]).includes(",")?y.write('"'+a.rows[k].arr[E]+'"'):y.write(a.rows[k].arr[E]);y.write(`
`)}}else{if(y.print("<html>"),y.print("<head>"),y.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),y.print("</head>"),y.print("<body>"),y.print("  <table>"),w[0]!=="0"){y.print("    <tr>");for(var T=0;T<w.length;T++){var R=i(w[T]);y.print("      <td>".concat(R)),y.print("      </td>")}y.print("    </tr>")}for(var O=0;O<a.rows.length;O++){y.print("    <tr>");for(var M=0;M<a.columns.length;M++){var L=i(a.rows[O].getString(M));y.print("      <td>".concat(L)),y.print("      </td>")}y.print("    </tr>")}y.print("  </table>"),y.print("</body>"),y.print("</html>")}y.close(),y.clear()},c.default.prototype.writeFile=function(y,o,h){var p="application/octet-stream",y=(c.default.prototype._isSafari()&&(p="text/plain"),new Blob(y,{type:p}));c.default.prototype.downloadFile(y,o,h)},c.default.prototype.downloadFile=function(a,y,w){var p,y=n(y,w),w=y[0];a instanceof Blob?d.default.saveAs(a,w):((p=document.createElement("a")).href=a,p.download=w,p.onclick=function(b){document.body.removeChild(b.target),b.stopPropagation()},p.style.display="none",document.body.appendChild(p),c.default.prototype._isSafari()&&(a=(a=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(y[1],'"'),alert(a)),p.click())},c.default.prototype._checkFileExtension=n,c.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=c.default,f.default=t},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(t,x,f){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(s,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}u.default.Table=function(){function s(){var v=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],i=this,n=s;if(!(i instanceof n))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=v}var d,m;return d=s,(m=[{key:"addRow",value:function(v){if(v=v||new u.default.TableRow,v.arr===void 0||v.obj===void 0)throw new Error("invalid TableRow: ".concat(v));return(v.table=this).rows.push(v),v}},{key:"removeRow",value:function(v){this.rows[v].table=null,v=this.rows.splice(v+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(v)}},{key:"getRow",value:function(v){return this.rows[v]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(v,i){if(typeof i=="string"){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[i]===v)return this.rows[n]}else for(var a=0;a<this.rows.length;a++)if(this.rows[a].arr[i]===v)return this.rows[a];return null}},{key:"findRows",value:function(v,i){var n=[];if(typeof i=="string")for(var a=0;a<this.rows.length;a++)this.rows[a].obj[i]===v&&n.push(this.rows[a]);else for(var o=0;o<this.rows.length;o++)this.rows[o].arr[i]===v&&n.push(this.rows[o]);return n}},{key:"matchRow",value:function(v,i){if(typeof i=="number"){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[i].match(v))return this.rows[n]}else for(var a=0;a<this.rows.length;a++)if(this.rows[a].obj[i].match(v))return this.rows[a];return null}},{key:"matchRows",value:function(v,i){var n=[];if(typeof i=="number")for(var a=0;a<this.rows.length;a++)this.rows[a].arr[i].match(v)&&n.push(this.rows[a]);else for(var o=0;o<this.rows.length;o++)this.rows[o].obj[i].match(v)&&n.push(this.rows[o]);return n}},{key:"getColumn",value:function(v){var i=[];if(typeof v=="string")for(var n=0;n<this.rows.length;n++)i.push(this.rows[n].obj[v]);else for(var a=0;a<this.rows.length;a++)i.push(this.rows[a].arr[v]);return i}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(v){this.columns.push(v||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(v,i){for(var n=[],a=0;a<v.length;a++)n.push(v.charAt(a).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var o=new RegExp(n.join("|"),"g");if(i===void 0)for(var h=0;h<this.columns.length;h++)for(var p=0;p<this.rows.length;p++){var y=(y=this.rows[p].arr[h]).replace(o,"");this.rows[p].arr[h]=y,this.rows[p].obj[this.columns[h]]=y}else if(typeof i=="string")for(var w=0;w<this.rows.length;w++){var b=(b=this.rows[w].obj[i]).replace(o,""),S=(this.rows[w].obj[i]=b,this.columns.indexOf(i));this.rows[w].arr[S]=b}else for(var k=0;k<this.rows.length;k++){var E=(E=this.rows[k].arr[i]).replace(o,"");this.rows[k].arr[i]=E,this.rows[k].obj[this.columns[i]]=E}}},{key:"trim",value:function(v){var i=new RegExp(" ","g");if(v===void 0)for(var n=0;n<this.columns.length;n++)for(var a=0;a<this.rows.length;a++){var o=(o=this.rows[a].arr[n]).replace(i,"");this.rows[a].arr[n]=o,this.rows[a].obj[this.columns[n]]=o}else if(typeof v=="string")for(var h=0;h<this.rows.length;h++){var p=(p=this.rows[h].obj[v]).replace(i,""),y=(this.rows[h].obj[v]=p,this.columns.indexOf(v));this.rows[h].arr[y]=p}else for(var w=0;w<this.rows.length;w++){var b=(b=this.rows[w].arr[v]).replace(i,"");this.rows[w].arr[v]=b,this.rows[w].obj[this.columns[v]]=b}}},{key:"removeColumn",value:function(a){typeof a=="string"?n=this.columns.indexOf(i=a):i=this.columns[n=a];var i,n,a=this.columns.splice(n+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(a);for(var o=0;o<this.rows.length;o++){var h=this.rows[o].arr,p=h.splice(n+1,h.length);h.pop(),this.rows[o].arr=h.concat(p),delete this.rows[o].obj[i]}}},{key:"set",value:function(v,i,n){this.rows[v].set(i,n)}},{key:"setNum",value:function(v,i,n){this.rows[v].setNum(i,n)}},{key:"setString",value:function(v,i,n){this.rows[v].setString(i,n)}},{key:"get",value:function(v,i){return this.rows[v].get(i)}},{key:"getNum",value:function(v,i){return this.rows[v].getNum(i)}},{key:"getString",value:function(v,i){return this.rows[v].getString(i)}},{key:"getObject",value:function(v){for(var i,n={},a=0;a<this.rows.length;a++)if(i=this.rows[a].obj,typeof v=="string"){if(!(0<=this.columns.indexOf(v)))throw new Error('This table has no column named "'.concat(v,'"'));n[i[v]]=i}else n[a]=this.rows[a].obj;return n}},{key:"getArray",value:function(){for(var v=[],i=0;i<this.rows.length;i++)v.push(this.rows[i].arr);return v}}])&&c(d.prototype,m),s}(),t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(t,x,f){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function u(c,s){for(var d=0;d<s.length;d++){var m=s[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}t.default.TableRow=function(){function c(m,v){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var i=[];m&&(i=m.split(v=v||",")),this.arr=i,this.obj=Object.fromEntries(i.entries()),this.table=null}var s,d;return s=c,(d=[{key:"set",value:function(m,v){if(typeof m=="string"){var i=this.table.columns.indexOf(m);if(!(0<=i))throw new Error('This table has no column named "'.concat(m,'"'));this.obj[m]=v,this.arr[i]=v}else{if(!(m<this.table.columns.length))throw new Error("Column #".concat(m," is out of the range of this table"));this.arr[m]=v,i=this.table.columns[m],this.obj[i]=v}}},{key:"setNum",value:function(m,v){v=parseFloat(v),this.set(m,v)}},{key:"setString",value:function(m,v){v=v.toString(),this.set(m,v)}},{key:"get",value:function(m){return(typeof m=="string"?this.obj:this.arr)[m]}},{key:"getNum",value:function(m){var v=parseFloat(typeof m=="string"?this.obj[m]:this.arr[m]);if(v.toString()==="NaN")throw"Error: ".concat(this.obj[m]," is NaN (Not a Number)");return v}},{key:"getString",value:function(m){return(typeof m=="string"?this.obj:this.arr)[m].toString()}}])&&u(s.prototype,d),c}(),t=t.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(d,m){for(var v=0;v<m.length;v++){var i=m[v];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(d,i.key,i)}}function s(d){for(var m=[],v=0;v<d.length;v++)m.push(new u.default.XML(d[v]));return m}u.default.XML=function(){function d(i){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");i?this.DOM=i:(i=document.implementation.createDocument(null,"doc"),this.DOM=i.createElement("root"))}var m,v;return m=d,(v=[{key:"getParent",value:function(){return new u.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(i){var n=this.DOM.innerHTML,a=this.DOM.attributes,o=document.implementation.createDocument(null,"default").createElement(i);o.innerHTML=n;for(var h=0;h<a.length;h++)o.setAttribute(a[h].nodeName,a[h].nodeValue);this.DOM=o}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var i=[],n=0;n<this.DOM.childNodes.length;n++)i.push(this.DOM.childNodes[n].nodeName);return i}},{key:"getChildren",value:function(i){return s(i?this.DOM.getElementsByTagName(i):this.DOM.children)}},{key:"getChild",value:function(i){if(typeof i!="string")return new u.default.XML(this.DOM.children[i]);var n=!0,a=!1,o=void 0;try{for(var h,p=this.DOM.children[Symbol.iterator]();!(n=(h=p.next()).done);n=!0){var y=h.value;if(y.tagName===i)return new u.default.XML(y)}}catch(w){a=!0,o=w}finally{try{n||p.return==null||p.return()}finally{if(a)throw o}}}},{key:"addChild",value:function(i){i instanceof u.default.XML&&this.DOM.appendChild(i.DOM)}},{key:"removeChild",value:function(i){var n=-1;if(typeof i=="string"){for(var a=0;a<this.DOM.children.length;a++)if(this.DOM.children[a].tagName===i){n=a;break}}else n=i;n!==-1&&this.DOM.removeChild(this.DOM.children[n])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var i=[],n=!0,a=!1,o=void 0;try{for(var h,p=this.DOM.attributes[Symbol.iterator]();!(n=(h=p.next()).done);n=!0){var y=h.value;i.push(y.nodeName)}}catch(w){a=!0,o=w}finally{try{n||p.return==null||p.return()}finally{if(a)throw o}}return i}},{key:"hasAttribute",value:function(i){var n={},a=!0,o=!1,h=void 0;try{for(var p,y=this.DOM.attributes[Symbol.iterator]();!(a=(p=y.next()).done);a=!0){var w=p.value;n[w.nodeName]=w.nodeValue}}catch(b){o=!0,h=b}finally{try{a||y.return==null||y.return()}finally{if(o)throw h}}return!!n[i]}},{key:"getNum",value:function(i,n){var a={},o=!0,h=!1,p=void 0;try{for(var y,w=this.DOM.attributes[Symbol.iterator]();!(o=(y=w.next()).done);o=!0){var b=y.value;a[b.nodeName]=b.nodeValue}}catch(S){h=!0,p=S}finally{try{o||w.return==null||w.return()}finally{if(h)throw p}}return Number(a[i])||n||0}},{key:"getString",value:function(i,n){var a={},o=!0,h=!1,p=void 0;try{for(var y,w=this.DOM.attributes[Symbol.iterator]();!(o=(y=w.next()).done);o=!0){var b=y.value;a[b.nodeName]=b.nodeValue}}catch(S){h=!0,p=S}finally{try{o||w.return==null||w.return()}finally{if(h)throw p}}return a[i]?String(a[i]):n||null}},{key:"setAttribute",value:function(i,n){this.DOM.setAttribute(i,n)}},{key:"getContent",value:function(i){var n=this.DOM.textContent;return(n=n.replace(/\s\s+/g,","))||i||null}},{key:"setContent",value:function(i){this.DOM.children.length||(this.DOM.textContent=i)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&c(m.prototype,v),d}(),t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(s){return function(d){if(Array.isArray(d)){for(var m=0,v=new Array(d.length);m<d.length;m++)v[m]=d[m];return v}}(s)||function(d){if(Symbol.iterator in Object(d)||Object.prototype.toString.call(d)==="[object Arguments]")return Array.from(d)}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}u.default.prototype.abs=Math.abs,u.default.prototype.ceil=Math.ceil,u.default.prototype.constrain=function(s,d,m){return u.default._validateParameters("constrain",arguments),Math.max(Math.min(s,m),d)},u.default.prototype.dist=function(){for(var s=arguments.length,d=new Array(s),m=0;m<s;m++)d[m]=arguments[m];return u.default._validateParameters("dist",d),d.length===4?Math.hypot(d[2]-d[0],d[3]-d[1]):d.length===6?Math.hypot(d[3]-d[0],d[4]-d[1],d[5]-d[2]):void 0},u.default.prototype.exp=Math.exp,u.default.prototype.floor=Math.floor,u.default.prototype.lerp=function(s,d,m){return u.default._validateParameters("lerp",arguments),m*(d-s)+s},u.default.prototype.log=Math.log,u.default.prototype.mag=function(s,d){return u.default._validateParameters("mag",arguments),Math.hypot(s,d)},u.default.prototype.map=function(s,d,m,v,i,n){return u.default._validateParameters("map",arguments),s=(s-d)/(m-d)*(i-v)+v,n?v<i?this.constrain(s,v,i):this.constrain(s,i,v):s},u.default.prototype.max=function(){for(var s=function(i){return Math.max.apply(Math,c(i))},d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return Array.isArray(m[0])?s(m[0]):s(m)},u.default.prototype.min=function(){for(var s=function(i){return Math.min.apply(Math,c(i))},d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return Array.isArray(m[0])?s(m[0]):s(m)},u.default.prototype.norm=function(s,d,m){return u.default._validateParameters("norm",arguments),this.map(s,d,m,0,1)},u.default.prototype.pow=Math.pow,u.default.prototype.round=function(s,d){return d?(d=Math.pow(10,d),Math.round(s*d)/d):Math.round(s)},u.default.prototype.sq=function(s){return s*s},u.default.prototype.sqrt=Math.sqrt,u.default.prototype.fract=function(v){u.default._validateParameters("fract",arguments);var d,m=0,v=Number(v);return isNaN(v)||Math.abs(v)===1/0?v:(v<0&&(v=-v,m=1),String(v).includes(".")&&!String(v).includes("e")?(d=String(v),d=+("0"+d.slice(d.indexOf("."))),Math.abs(m-d)):v<1?Math.abs(m-v):0)},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(t,x,f){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(d,m,v){return(c=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(i,n,a){var o=[null];return o.push.apply(o,n),n=new(Function.bind.apply(i,o)),a&&s(n,a.prototype),n}).apply(null,arguments)}function s(d,m){return(s=Object.setPrototypeOf||function(v,i){return v.__proto__=i,v})(d,m)}u.default.prototype.createVector=function(d,m,v){return this instanceof u.default?c(u.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new u.default.Vector(d,m,v)},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(v,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,v=(v=v("../core/main"))&&v.__esModule?v:{default:v};function u(i){return .5*(1-Math.cos(i*Math.PI))}var c,s=4095,d=4,m=.5,v=(v.default.prototype.noise=function(i){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(c==null){c=new Array(4096);for(var o=0;o<4096;o++)c[o]=Math.random()}i<0&&(i=-i),n<0&&(n=-n),a<0&&(a=-a);for(var h,p,y=Math.floor(i),w=Math.floor(n),b=Math.floor(a),S=i-y,k=n-w,E=a-b,T=0,R=.5,O=0;O<d;O++){var M=y+(w<<4)+(b<<8),L=u(S),I=u(k),B=c[M&s];B+=L*(c[M+1&s]-B),h=c[M+16&s],B+=I*((h+=L*(c[M+16+1&s]-h))-B),h=c[(M+=256)&s],h+=L*(c[M+1&s]-h),p=c[M+16&s],h+=I*((p+=L*(c[M+16+1&s]-p))-h),T+=(B+=u(E)*(h-B))*R,R*=m,y<<=1,w<<=1,b<<=1,1<=(S*=2)&&(y++,S--),1<=(k*=2)&&(w++,k--),1<=(E*=2)&&(b++,E--)}return T},v.default.prototype.noiseDetail=function(i,n){0<i&&(d=i),0<n&&(m=n)},v.default.prototype.noiseSeed=function(i){o=4294967296;var n,a,o,h={setSeed:function(y){a=n=(y??Math.random()*o)>>>0},getSeed:function(){return n},rand:function(){return(a=(1664525*a+1013904223)%o)/o}};h.setSeed(i),c=new Array(4096);for(var p=0;p<4096;p++)c[p]=h.rand()},v.default);f.default=v},{"../core/main":283}],316:[function(t,x,f){function u(n){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}function c(n){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(a){return u(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":u(a)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(i=t("../core/main"))&&i.__esModule?i:{default:i},d=function(n){if(n&&n.__esModule)return n;if(n===null||c(n)!=="object"&&typeof n!="function")return{default:n};var a=m();if(a&&a.has(n))return a.get(n);var o,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in n){var y;Object.prototype.hasOwnProperty.call(n,o)&&((y=p?Object.getOwnPropertyDescriptor(n,o):null)&&(y.get||y.set)?Object.defineProperty(h,o,y):h[o]=n[o])}return h.default=n,a&&a.set(n,h),h}(t("../core/constants"));function m(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,m=function(){return n},n)}function v(n,a){for(var o=0;o<a.length;o++){var h=a[o];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(n,h.key,h)}}s.default.Vector=function(){function n(){var b=this,p=n;if(!(b instanceof p))throw new TypeError("Cannot call a class as a function");var y,w,b=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],y=(arguments.length<=2?void 0:arguments[2])||0,w=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(y=(arguments.length<=0?void 0:arguments[0])||0,w=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=y,this.y=w,this.z=b}var a,o,h;return a=n,h=[{key:"fromAngle",value:function(p){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new s.default.Vector(y*Math.cos(p),y*Math.sin(p),0)}},{key:"fromAngles",value:function(E,S){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,b=Math.cos(S),S=Math.sin(S),k=Math.cos(E),E=Math.sin(E);return new s.default.Vector(w*E*S,-w*k,w*E*b)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*d.TWO_PI)}},{key:"random3D",value:function(){var p=Math.random()*d.TWO_PI,y=2*Math.random()-1,b=Math.sqrt(1-y*y),w=b*Math.cos(p),b=b*Math.sin(p);return new s.default.Vector(w,b,y)}},{key:"copy",value:function(p){return p.copy(p)}},{key:"add",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return k?k.set(b):(k=b.copy(),y.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),k.add(S),k}},{key:"rem",value:function(p,y){if(p instanceof s.default.Vector&&y instanceof s.default.Vector)return(p=p.copy()).rem(y),p}},{key:"sub",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return k?k.set(b):(k=b.copy(),y.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),k.sub(S),k}},{key:"mult",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return k?k.set(b):(k=b.copy(),y.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),k.mult(S),k}},{key:"rotate",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return y.length===2?k=b.copy():(k instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),k.set(b)),k.rotate(S),k}},{key:"div",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return k?k.set(b):(k=b.copy(),y.length===3&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),k.div(S),k}},{key:"dot",value:function(p,y){return p.dot(y)}},{key:"cross",value:function(p,y){return p.cross(y)}},{key:"dist",value:function(p,y){return p.dist(y)}},{key:"lerp",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2],E=y[3];return E?E.set(b):(E=b.copy(),y.length===4&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),E.lerp(S,k),E}},{key:"slerp",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2],E=y[3];return E?E.set(b):(E=b.copy(),y.length===4&&s.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),E.slerp(S,k),E}},{key:"mag",value:function(p){return p.mag()}},{key:"magSq",value:function(p){return p.magSq()}},{key:"normalize",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1];return y.length<2?S=b.copy():(S instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),S.set(b)),S.normalize()}},{key:"limit",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return y.length<3?k=b.copy():(k instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),k.set(b)),k.limit(S)}},{key:"setMag",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return y.length<3?k=b.copy():(k instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),k.set(b)),k.setMag(S)}},{key:"heading",value:function(p){return p.heading()}},{key:"angleBetween",value:function(p,y){return p.angleBetween(y)}},{key:"reflect",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];return y.length<3?k=b.copy():(k instanceof s.default.Vector||s.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),k.set(b)),k.reflect(S)}},{key:"array",value:function(p){return p.array()}},{key:"equals",value:function(p,y){var w;return p instanceof s.default.Vector?w=p:Array.isArray(p)?w=new s.default.Vector().set(p):s.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),w.equals(y)}}],(o=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(p,y,w){return p instanceof s.default.Vector?(this.x=p.x||0,this.y=p.y||0,this.z=p.z||0):Array.isArray(p)?(this.x=p[0]||0,this.y=p[1]||0,this.z=p[2]||0):(this.x=p||0,this.y=y||0,this.z=w||0),this}},{key:"copy",value:function(){return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new s.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(p,y,w){return p instanceof s.default.Vector?(this.x+=p.x||0,this.y+=p.y||0,this.z+=p.z||0):Array.isArray(p)?(this.x+=p[0]||0,this.y+=p[1]||0,this.z+=p[2]||0):(this.x+=p||0,this.y+=y||0,this.z+=w||0),this}},{key:"calculateRemainder2D",value:function(p,y){return p!==0&&(this.x=this.x%p),y!==0&&(this.y=this.y%y),this}},{key:"calculateRemainder3D",value:function(p,y,w){return p!==0&&(this.x=this.x%p),y!==0&&(this.y=this.y%y),w!==0&&(this.z=this.z%w),this}},{key:"rem",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b,S,k,E=y[0],T=y[1],R=y[2];if(E instanceof s.default.Vector){if([E.x,E.y,E.z].every(Number.isFinite))return b=parseFloat(E.x),S=parseFloat(E.y),k=parseFloat(E.z),this.calculateRemainder3D(b,S,k)}else if(Array.isArray(E)){if(E.every(Number.isFinite))return E.length===2?this.calculateRemainder2D(E[0],E[1]):E.length===3?this.calculateRemainder3D(E[0],E[1],E[2]):void 0}else if(y.length===1){if(Number.isFinite(E)&&E!==0)return this.x=this.x%E,this.y=this.y%E,this.z=this.z%E,this}else if(y.length===2){if(y.every(Number.isFinite))return this.calculateRemainder2D(E,T)}else if(y.length===3&&y.every(Number.isFinite))return this.calculateRemainder3D(E,T,R)}},{key:"sub",value:function(p,y,w){return p instanceof s.default.Vector?(this.x-=p.x||0,this.y-=p.y||0,this.z-=p.z||0):Array.isArray(p)?(this.x-=p[0]||0,this.y-=p[1]||0,this.z-=p[2]||0):(this.x-=p||0,this.y-=y||0,this.z-=w||0),this}},{key:"mult",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b,S=y[0],k=y[1],E=y[2];return S instanceof s.default.Vector?Number.isFinite(S.x)&&Number.isFinite(S.y)&&Number.isFinite(S.z)&&typeof S.x=="number"&&typeof S.y=="number"&&typeof S.z=="number"?(this.x*=S.x,this.y*=S.y,this.z*=S.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(S)?S.every(function(T){return Number.isFinite(T)})&&S.every(function(T){return typeof T=="number"})?S.length===1?(this.x*=S[0],this.y*=S[0],this.z*=S[0]):S.length===2?(this.x*=S[0],this.y*=S[1]):S.length===3&&(this.x*=S[0],this.y*=S[1],this.z*=S[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(b=y).every(function(T){return Number.isFinite(T)})&&b.every(function(T){return typeof T=="number"})?(y.length===1&&(this.x*=S,this.y*=S,this.z*=S),y.length===2&&(this.x*=S,this.y*=k),y.length===3&&(this.x*=S,this.y*=k,this.z*=E)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var p=arguments.length,y=new Array(p),w=0;w<p;w++)y[w]=arguments[w];var b=y[0],S=y[1],k=y[2];if(b instanceof s.default.Vector)if(Number.isFinite(b.x)&&Number.isFinite(b.y)&&Number.isFinite(b.z)&&typeof b.x=="number"&&typeof b.y=="number"&&typeof b.z=="number"){var E=b.z===0&&this.z===0;if(b.x===0||b.y===0||!E&&b.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=b.x,this.y/=b.y,E||(this.z/=b.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(b))if(b.every(Number.isFinite)&&b.every(function(T){return typeof T=="number"})){if(b.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;b.length===1?(this.x/=b[0],this.y/=b[0],this.z/=b[0]):b.length===2?(this.x/=b[0],this.y/=b[1]):b.length===3&&(this.x/=b[0],this.y/=b[1],this.z/=b[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(y.every(Number.isFinite)&&y.every(function(T){return typeof T=="number"})){if(y.some(function(T){return T===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;y.length===1&&(this.x/=b,this.y/=b,this.z/=b),y.length===2&&(this.x/=b,this.y/=S),y.length===3&&(this.x/=b,this.y/=S,this.z/=k)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var p=this.x,y=this.y,w=this.z;return p*p+y*y+w*w}},{key:"dot",value:function(p,y,w){return p instanceof s.default.Vector?this.dot(p.x,p.y,p.z):this.x*(p||0)+this.y*(y||0)+this.z*(w||0)}},{key:"cross",value:function(b){var y=this.y*b.z-this.z*b.y,w=this.z*b.x-this.x*b.z,b=this.x*b.y-this.y*b.x;return this.isPInst?new s.default.Vector(this._fromRadians,this._toRadians,y,w,b):new s.default.Vector(y,w,b)}},{key:"dist",value:function(p){return p.copy().sub(this).mag()}},{key:"normalize",value:function(){var p=this.mag();return p!==0&&this.mult(1/p),this}},{key:"limit",value:function(p){var y=this.magSq();return p*p<y&&this.div(Math.sqrt(y)).mult(p),this}},{key:"setMag",value:function(p){return this.normalize().mult(p)}},{key:"heading",value:function(){var p=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(p):p}},{key:"setHeading",value:function(p){this.isPInst&&(p=this._toRadians(p));var y=this.mag();return this.x=y*Math.cos(p),this.y=y*Math.sin(p),this}},{key:"rotate",value:function(y){var y=this.heading()+y,w=(this.isPInst&&(y=this._toRadians(y)),this.mag());return this.x=Math.cos(y)*w,this.y=Math.sin(y)*w,this}},{key:"angleBetween",value:function(p){var y;return this.magSq()*p.magSq()==0?NaN:(y=this.cross(p),p=Math.atan2(y.mag(),this.dot(p))*Math.sign(y.z||1),this.isPInst?this._fromRadians(p):p)}},{key:"lerp",value:function(p,y,w,b){return p instanceof s.default.Vector?this.lerp(p.x,p.y,p.z,y):(this.x+=(p-this.x)*b||0,this.y+=(y-this.y)*b||0,this.z+=(w-this.z)*b||0,this)}},{key:"slerp",value:function(p,y){if(y!==0){if(y===1)return this.set(p);var w=this.mag(),b=p.mag();if(w*b==0)this.mult(1-y).add(p.x*y,p.y*y,p.z*y);else{var S=this.cross(p),k=S.mag(),E=Math.atan2(k,this.dot(p));if(0<k)S.x/=k,S.y/=k,S.z/=k;else{if(E<.5*Math.PI)return this.mult(1-y).add(p.x*y,p.y*y,p.z*y),this;this.z===0&&p.z===0?S.set(0,0,1):this.x!==0?S.set(this.y,-this.x,0).normalize():S.set(1,0,0)}k=S.cross(this),p=1-y+y*b/w,S=p*Math.cos(y*E),b=p*Math.sin(y*E),this.x=this.x*S+k.x*b,this.y=this.y*S+k.y*b,this.z=this.z*S+k.z*b}}return this}},{key:"reflect",value:function(p){return p=s.default.Vector.normalize(p),this.sub(p.mult(2*this.dot(p)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(k,y,w){var b,S,k=k instanceof s.default.Vector?(b=k.x||0,S=k.y||0,k.z||0):Array.isArray(k)?(b=k[0]||0,S=k[1]||0,k[2]||0):(b=k||0,S=y||0,w||0);return this.x===b&&this.y===S&&this.z===k}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(p){return Math.abs(+(p||0))<=Number.EPSILON?0:p}}])&&v(a.prototype,o),h&&v(a,h),n}();var i=s.default.Vector;f.default=i},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(m,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(m=m("../core/main"))&&m.__esModule?m:{default:m},c="_lcg_random_state",s=4294967296,d=0,m=(u.default.prototype._lcg=function(v){return this[v]=(1664525*this[v]+1013904223)%s,this[v]/s},u.default.prototype._lcgSetSeed=function(v,i){this[v]=(i??Math.random()*s)>>>0},u.default.prototype.randomSeed=function(v){this._lcgSetSeed(c,v),this._gaussian_previous=!1},u.default.prototype.random=function(v,i){var n,a;return u.default._validateParameters("random",arguments),n=this[c]!=null?this._lcg(c):Math.random(),v===void 0?n:i===void 0?Array.isArray(v)?v[Math.floor(n*v.length)]:n*v:(i<v&&(a=v,v=i,i=a),n*(i-v)+v)},u.default.prototype.randomGaussian=function(v){var i,n,a,o,h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)i=d,this._gaussian_previous=!1;else{for(;1<=(o=(n=this.random(2)-1)*n+(a=this.random(2)-1)*a););i=n*(o=Math.sqrt(-2*Math.log(o)/o)),d=a*o,this._gaussian_previous=!0}return i*h+(v||0)},u.default);f.default=m},{"../core/main":283}],318:[function(t,x,f){function u(i){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}function c(i){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(n){return u(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":u(n)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},d=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var n=m();if(n&&n.has(i))return n.get(i);var a,o={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var p;Object.prototype.hasOwnProperty.call(i,a)&&((p=h?Object.getOwnPropertyDescriptor(i,a):null)&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=i[a])}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function m(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,m=function(){return i},i)}s.default.prototype._angleMode=d.RADIANS,s.default.prototype.acos=function(i){return this._fromRadians(Math.acos(i))},s.default.prototype.asin=function(i){return this._fromRadians(Math.asin(i))},s.default.prototype.atan=function(i){return this._fromRadians(Math.atan(i))},s.default.prototype.atan2=function(i,n){return this._fromRadians(Math.atan2(i,n))},s.default.prototype.cos=function(i){return Math.cos(this._toRadians(i))},s.default.prototype.sin=function(i){return Math.sin(this._toRadians(i))},s.default.prototype.tan=function(i){return Math.tan(this._toRadians(i))},s.default.prototype.degrees=function(i){return i*d.RAD_TO_DEG},s.default.prototype.radians=function(i){return i*d.DEG_TO_RAD},s.default.prototype.angleMode=function(i){if(s.default._validateParameters("angleMode",arguments),i===void 0)return this._angleMode;i!==d.DEGREES&&i!==d.RADIANS||i!==this._angleMode&&(i===d.RADIANS?(this._setProperty("pRotationX",this.pRotationX*d.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*d.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*d.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*d.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*d.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*d.RAD_TO_DEG)),this._angleMode=i)},s.default.prototype._toRadians=function(i){return this._angleMode===d.DEGREES?i*d.DEG_TO_RAD:i},s.default.prototype._toDegrees=function(i){return this._angleMode===d.RADIANS?i*d.RAD_TO_DEG:i},s.default.prototype._fromRadians=function(i){return this._angleMode===d.DEGREES?i*d.RAD_TO_DEG:i},s.default.prototype._fromDegrees=function(i){return this._angleMode===d.RADIANS?i*d.DEG_TO_RAD:i};var v=s.default;f.default=v},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(t,x,f){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};u.default.prototype.textAlign=function(c,s){var d;return u.default._validateParameters("textAlign",arguments),(d=this._renderer).textAlign.apply(d,arguments)},u.default.prototype.textLeading=function(c){var s;return u.default._validateParameters("textLeading",arguments),(s=this._renderer).textLeading.apply(s,arguments)},u.default.prototype.textSize=function(c){var s;return u.default._validateParameters("textSize",arguments),(s=this._renderer).textSize.apply(s,arguments)},u.default.prototype.textStyle=function(c){var s;return u.default._validateParameters("textStyle",arguments),(s=this._renderer).textStyle.apply(s,arguments)},u.default.prototype.textWidth=function(){for(var c=arguments.length,s=new Array(c),d=0;d<c;d++)s[d]=arguments[d];if(s[0]+="",u.default._validateParameters("textWidth",s),s[0].length===0)return 0;for(var m=s[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),v=[],i=0;i<m.length;i++)v.push(this._renderer.textWidth(m[i]));return Math.max.apply(Math,v)},u.default.prototype.textAscent=function(){for(var c=arguments.length,s=new Array(c),d=0;d<c;d++)s[d]=arguments[d];return u.default._validateParameters("textAscent",s),this._renderer.textAscent()},u.default.prototype.textDescent=function(){for(var c=arguments.length,s=new Array(c),d=0;d<c;d++)s[d]=arguments[d];return u.default._validateParameters("textDescent",s),this._renderer.textDescent()},u.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},u.default.prototype.textWrap=function(c){return u.default._validateParameters("textWrap",[c]),this._renderer.textWrap(c)},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(t,x,f){function u(a){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(a)}function c(a){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(o){return u(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":u(o)})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(n=t("../core/main"))&&n.__esModule?n:{default:n},d=i(t("../core/constants")),m=i(t("opentype.js"));function v(){var a;return typeof WeakMap!="function"?null:(a=new WeakMap,v=function(){return a},a)}function i(a){if(a&&a.__esModule)return a;if(a===null||c(a)!=="object"&&typeof a!="function")return{default:a};var o=v();if(o&&o.has(a))return o.get(a);var h,p,y={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&((p=w?Object.getOwnPropertyDescriptor(a,h):null)&&(p.get||p.set)?Object.defineProperty(y,h,p):y[h]=a[h]);return y.default=a,o&&o.set(a,y),y}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.loadFont=function(a,o,h){s.default._validateParameters("loadFont",arguments);var p=new s.default.Font(this),y=this;return m.load(a,function(S,k){if(S)return s.default._friendlyFileLoadError(4,a),h!==void 0?h(S):void console.error(S,a);p.font=k,o!==void 0&&o(p),y._decrementPreload();var S=a.split("\\").pop().split("/").pop(),k=S.lastIndexOf("."),E=k<1?null:S.slice(k+1);["ttf","otf","woff","woff2"].includes(E)&&(E=S.slice(0,k!==-1?k:0),(S=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(E,`;
src: url(`).concat(a,`);
}
`))),document.head.appendChild(S))}),p},s.default.prototype.text=function(a,o,h,p,y){var w;return s.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(w=this._renderer).text.apply(w,arguments):this},s.default.prototype.textFont=function(a,o){if(s.default._validateParameters("textFont",arguments),arguments.length){if(a)return this._renderer._setProperty("_textFont",a),o&&(this._renderer._setProperty("_textSize",o),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",o*d._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var n=s.default;f.default=n},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(t,x,f){function u(T){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(T)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=(c=t("../core/main"))&&c.__esModule?c:{default:c},s=function(T){if(T&&T.__esModule)return T;if(T===null||m(T)!=="object"&&typeof T!="function")return{default:T};var R=d();if(R&&R.has(T))return R.get(T);var O,M={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(O in T){var I;Object.prototype.hasOwnProperty.call(T,O)&&((I=L?Object.getOwnPropertyDescriptor(T,O):null)&&(I.get||I.set)?Object.defineProperty(M,O,I):M[O]=T[O])}return M.default=T,R&&R.set(T,M),M}(t("../core/constants"));function d(){var T;return typeof WeakMap!="function"?null:(T=new WeakMap,d=function(){return T},T)}function m(T){return(m=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(R){return u(R)}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":u(R)})(T)}function v(T,R){for(var O=0;O<R.length;O++){var M=R[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(T,M.key,M)}}function i(T,R){var O=T.length;return T[R<0?R%O+O:R%O]}function n(T,R,O,M){var L,I,B;return M?(n.tmpPoint1===void 0&&(n.tmpPoint1=[],n.tmpPoint2=[]),I=n.tmpPoint1,B=n.tmpPoint2,I.x=R.x-T.x,I.y=R.y-T.y,B.x=O.x-R.x,B.y=O.y-R.y,L=I.x*B.x+I.y*B.y,I=Math.sqrt(I.x*I.x+I.y*I.y),B=Math.sqrt(B.x*B.x+B.y*B.y),Math.acos(L/(I*B))<M):(R[0]-T[0])*(O[1]-T[1])-(O[0]-T[0])*(R[1]-T[1])==0}function a(z,$,q,ie,re,I,B,V,G){var Y=1-G,W=Math.pow(Y,3),K=Math.pow(Y,2),A=G*G,Q=A*G,H=W*z+3*K*G*q+3*Y*G*G*re+Q*B,W=W*$+3*K*G*ie+3*Y*G*G*I+Q*V,K=z+2*G*(q-z)+A*(re-2*q+z),Q=$+2*G*(ie-$)+A*(I-2*ie+$),se=q+2*G*(re-q)+A*(B-2*re+q),A=ie+2*G*(I-ie)+A*(V-2*I+ie),z=Y*z+G*q,q=Y*$+G*ie,$=Y*re+G*B,ie=Y*I+G*V,re=90-180*Math.atan2(K-se,Q-A)/Math.PI;return(se<K||Q<A)&&(re+=180),{x:H,y:W,m:{x:K,y:Q},n:{x:se,y:A},start:{x:z,y:q},end:{x:$,y:ie},alpha:re}}function o(T,R,O,M,L,I,B,V,G){return G==null?k(T,R,O,M,L,I,B,V):a(T,R,O,M,L,I,B,V,function(Y,H,W,K,Q,se,A,z,q){if(!(q<0||k(Y,H,W,K,Q,se,A,z)<q)){var $,ie=.5,re=1-ie;for($=k(Y,H,W,K,Q,se,A,z,re);.01<Math.abs($-q);)$=k(Y,H,W,K,Q,se,A,z,re+=($<q?1:-1)*(ie/=2));return re}}(T,R,O,M,L,I,B,V,G))}function h(T,R,O){for(var M,L,I,B,V,G=0,Y=0,H=(T=function(W,K){function Q(xe,we,Me){var He,Ie;if(!xe)return["C",we.x,we.y,we.x,we.y,we.x,we.y];switch(xe[0]in{T:1,Q:1}||(we.qx=we.qy=null),xe[0]){case"M":we.X=xe[1],we.Y=xe[2];break;case"A":xe=["C"].concat(y.apply(0,[we.x,we.y].concat(xe.slice(1))));break;case"S":Ie=Me==="C"||Me==="S"?(He=2*we.x-we.bx,2*we.y-we.by):(He=we.x,we.y),xe=["C",He,Ie].concat(xe.slice(1));break;case"T":Me==="Q"||Me==="T"?(we.qx=2*we.x-we.qx,we.qy=2*we.y-we.qy):(we.qx=we.x,we.qy=we.y),xe=["C"].concat(S(we.x,we.y,we.qx,we.qy,xe[1],xe[2]));break;case"Q":we.qx=xe[1],we.qy=xe[2],xe=["C"].concat(S(we.x,we.y,xe[1],xe[2],xe[3],xe[4]));break;case"L":xe=["C"].concat(b(we.x,we.y,xe[1],xe[2]));break;case"H":xe=["C"].concat(b(we.x,we.y,xe[1],we.y));break;case"V":xe=["C"].concat(b(we.x,we.y,we.x,xe[1]));break;case"Z":xe=["C"].concat(b(we.x,we.y,we.X,we.Y))}return xe}function se(xe,we){if(7<xe[we].length){xe[we].shift();for(var Me=xe[we];Me.length;)fe[we]="A",$&&(ge[we]="A"),xe.splice(we++,0,["C"].concat(Me.splice(0,6)));xe.splice(we,1),z=Math.max(q.length,$&&$.length||0)}}function A(xe,we,Me,He,Ie){xe&&we&&xe[Ie][0]==="M"&&we[Ie][0]!=="M"&&(we.splice(Ie,0,["M",He.x,He.y]),Me.bx=0,Me.by=0,Me.x=xe[Ie][1],Me.y=xe[Ie][2],z=Math.max(q.length,$&&$.length||0))}var z,q=p(W),$=K&&p(K),ie={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},re={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},fe=[],ge=[],de="",me="";z=Math.max(q.length,$&&$.length||0);for(var _e=0;_e<z;_e++){(de=q[_e]?q[_e][0]:de)!=="C"&&(fe[_e]=de,_e&&(me=fe[_e-1])),q[_e]=Q(q[_e],ie,me),fe[_e]!=="A"&&de==="C"&&(fe[_e]="C"),se(q,_e),$&&((de=$[_e]?$[_e][0]:de)!=="C"&&(ge[_e]=de,_e&&(me=ge[_e-1])),$[_e]=Q($[_e],re,me),ge[_e]!=="A"&&de==="C"&&(ge[_e]="C"),se($,_e)),A(q,$,ie,re,_e),A($,q,re,ie,_e);var ae=q[_e],he=$&&$[_e],be=ae.length,ke=$&&he.length;ie.x=ae[be-2],ie.y=ae[be-1],ie.bx=parseFloat(ae[be-4])||ie.x,ie.by=parseFloat(ae[be-3])||ie.y,re.bx=$&&(parseFloat(he[ke-4])||re.x),re.by=$&&(parseFloat(he[ke-3])||re.y),re.x=$&&he[ke-2],re.y=$&&he[ke-1]}return $?[q,$]:q}(T)).length;Y<H;Y++){if((I=T[Y])[0]==="M")M=+I[1],L=+I[2];else{if(R<G+(B=o(M,L,I[1],I[2],I[3],I[4],I[5],I[6]))&&!O)return{x:(V=o(M,L,I[1],I[2],I[3],I[4],I[5],I[6],R-G)).x,y:V.y,alpha:V.alpha};G+=B,M=+I[5],L=+I[6]}I.shift()}return V=(V=O?G:a(M,L,I[0],I[1],I[2],I[3],I[4],I[5],1)).alpha?{x:V.x,y:V.y,alpha:V.alpha}:V}function p(T){var R=[],O=0,M=0,L=0,I=0,B=0;if(T){T[0][0]==="M"&&(L=O=+T[0][1],I=M=+T[0][2],B++,R[0]=["M",O,M]);for(var V,G,Y=T.length===3&&T[0][0]==="M"&&T[1][0].toUpperCase()==="R"&&T[2][0].toUpperCase()==="Z",H=B,W=T.length;H<W;H++){if(R.push(V=[]),(G=T[H])[0]!==G[0].toUpperCase())switch(V[0]=G[0].toUpperCase(),V[0]){case"A":V[1]=G[1],V[2]=G[2],V[3]=G[3],V[4]=G[4],V[5]=G[5],V[6]=+(G[6]+O),V[7]=+(G[7]+M);break;case"V":V[1]=+G[1]+M;break;case"H":V[1]=+G[1]+O;break;case"R":for(var K,Q=2,se=(K=[O,M].concat(G.slice(1))).length;Q<se;Q++)K[Q]=+K[Q]+O,K[++Q]=+K[Q]+M;R.pop(),R=R.concat(w(K,Y));break;case"M":L=+G[1]+O,I=+G[2]+M;break;default:for(var A=1,z=G.length;A<z;A++)V[A]=+G[A]+(A%2?O:M)}else if(G[0]==="R")K=[O,M].concat(G.slice(1)),R.pop(),R=R.concat(w(K,Y)),V=["R"].concat(G.slice(-2));else for(var q=0,$=G.length;q<$;q++)V[q]=G[q];switch(V[0]){case"Z":O=L,M=I;break;case"H":O=V[1];break;case"V":M=V[1];break;case"M":L=V[V.length-2],I=V[V.length-1];break;default:O=V[V.length-2],M=V[V.length-1]}}}return R}function y(T,R,O,M,$,fe,ie,V,G,Y){function H(ke,xe,we){return{x:ke*Math.cos(we)-xe*Math.sin(we),y:ke*Math.sin(we)+xe*Math.cos(we)}}var W,z=Math.PI,q=120*z/180,K=z/180*(+$||0),Q=[],se=(Y?(_e=Y[0],W=Y[1],de=Y[2],me=Y[3]):(T=(re=H(T,R,-K)).x,R=re.y,1<(se=(A=(T-(V=(re=H(V,G,-K)).x))/2)*A/(O*O)+(re=(R-(G=re.y))/2)*re/(M*M))&&(O*=se=Math.sqrt(se),M*=se),se=O*O,ge=M*M,de=(fe=(fe===ie?-1:1)*Math.sqrt(Math.abs((se*ge-se*re*re-ge*A*A)/(se*re*re+ge*A*A))))*O*re/M+(T+V)/2,me=fe*-M*A/O+(R+G)/2,_e=Math.asin(((R-me)/M).toFixed(9)),W=Math.asin(((G-me)/M).toFixed(9)),(_e=T<de?z-_e:_e)<0&&(_e=2*z+_e),(W=V<de?z-W:W)<0&&(W=2*z+W),ie&&W<_e&&(_e-=2*z),!ie&&_e<W&&(W-=2*z)),W-_e),A=(Math.abs(se)>q&&(ge=W,re=V,fe=G,W=_e+q*(ie&&_e<W?1:-1),Q=y(V=de+O*Math.cos(W),G=me+M*Math.sin(W),O,M,$,0,ie,re,fe,[W,ge,de,me])),se=W-_e,Math.cos(_e)),z=Math.sin(_e),q=Math.cos(W),$=Math.sin(W),ie=Math.tan(se/4),re=4/3*O*ie,fe=4/3*M*ie,ge=[T,R],de=[T+re*z,R-fe*A],me=[V+re*$,G-fe*q],_e=[V,G];if(de[0]=2*ge[0]-de[0],de[1]=2*ge[1]-de[1],Y)return[de,me,_e].concat(Q);for(var ae=[],he=0,be=(Q=[de,me,_e].concat(Q).join().split(",")).length;he<be;he++)ae[he]=he%2?H(Q[he-1],Q[he],K).y:H(Q[he],Q[he+1],K).x;return ae}function w(T,R){for(var O=[],M=0,L=T.length;M<L-2*!R;M+=2){var I=[{x:+T[M-2],y:+T[M-1]},{x:+T[M],y:+T[M+1]},{x:+T[M+2],y:+T[M+3]},{x:+T[M+4],y:+T[M+5]}];R?M?L-4===M?I[3]={x:+T[0],y:+T[1]}:L-2===M&&(I[2]={x:+T[0],y:+T[1]},I[3]={x:+T[2],y:+T[3]}):I[0]={x:+T[L-2],y:+T[L-1]}:L-4===M?I[3]=I[2]:M||(I[0]={x:+T[M],y:+T[M+1]}),O.push(["C",(-I[0].x+6*I[1].x+I[2].x)/6,(-I[0].y+6*I[1].y+I[2].y)/6,(I[1].x+6*I[2].x-I[3].x)/6,(I[1].y+6*I[2].y-I[3].y)/6,I[2].x,I[2].y])}return O}function b(T,R,O,M){return[T,R,O,M,O,M]}function S(T,R,O,M,L,I){return[1/3*T+2/3*O,1/3*R+2/3*M,1/3*L+2/3*O,1/3*I+2/3*M,L,I]}function k(T,R,O,M,L,I,B,V,G){for(var Y=(G=1<(G=G??1)?1:G<0?0:G)/2,H=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],W=0,K=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Q=0;Q<12;Q++){var A=Y*H[Q]+Y,se=E(A,T,O,L,B),A=E(A,R,M,I,V);W+=K[Q]*Math.sqrt(se*se+A*A)}return Y*W}function E(T,R,O,M,L){return T*(T*(-3*R+9*O-9*M+3*L)+6*R-12*O+6*M)-3*R+3*O}c.default.Font=function(){function T(M){if(!(this instanceof T))throw new TypeError("Cannot call a class as a function");this.parent=M,this.cache={},this.font=void 0}var R,O;return R=T,(O=[{key:"textBounds",value:function(M){var L=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,Y=3<arguments.length?arguments[3]:void 0,B=4<arguments.length?arguments[4]:void 0,V=B&&B.renderer&&B.renderer._pInst||this.parent,G=V._renderer.drawingContext,Y=(G.textAlign||s.LEFT,G.textBaseline||s.BASELINE,Y||V._renderer._textSize);if(!re){for(var H=[],W=[],K=[],Q=(K[0]=[],[]),se=this._scale(Y),A=V._renderer.textLeading(),z=0,q=(this.font.forEachGlyph(M,L,I,Y,B,function(de,me,_e,ae){var he=de.getMetrics();de.index===0?K[z+=1]=[]:(K[z].push(me+he.xMin*se),K[z].push(me+he.xMax*se),Q.push(_e+z*A+-he.yMin*se),Q.push(_e+z*A+-he.yMax*se))}),0<K[z].length&&(H[z]=Math.min.apply(null,K[z]),W[z]=Math.max.apply(null,K[z])),0),$=0;$<=z;$++){H[$]=Math.min.apply(null,K[$]),W[$]=Math.max.apply(null,K[$]);var ie=W[$]-H[$];q<ie&&(q=ie)}var G=Math.min.apply(null,H),re={x:G,y:I=Math.min.apply(null,Q),h:Math.max.apply(null,Q)-I,w:q,advance:G-L},Y=this._handleAlignment(V._renderer,M,re.x,re.y,re.w+re.advance);re.x=Y.x,re.y=Y.y}return re}},{key:"textToPoints",value:function(M,L,I,B,V){var G,Y=L,H=[],W=this.parent,K=M.split(/\r?\n|\r|\n/g);B=B||this.parent._renderer._textSize;for(var Q,se,A,z=0;z<K.length;z++){var q=0;L=Y;for(var $=($=K[z]).replace("	","  "),ie=this._getGlyphs($),re=0;re<ie.length;re++){if(se=$,!((A=ie)[Q=re].name&&A[Q].name==="space"||se.length===A.length&&se[Q]===" "))for(var fe=function(_e){for(var ae,he=[],be=0;be<_e.length;be++)_e[be].type==="M"&&(ae&&he.push(ae),ae=[]),ae.push(function(ke){var xe=[ke.type];return ke.type==="M"||ke.type==="L"?xe.push(ke.x,ke.y):ke.type==="C"?xe.push(ke.x1,ke.y1,ke.x2,ke.y2,ke.x,ke.y):ke.type==="Q"&&xe.push(ke.x1,ke.y1,ke.x,ke.y),xe}(_e[be]));return he.push(ae),he}(ie[re].getPath(L,I,B).commands),ge=0;ge<fe.length;ge++)for(var de=function(_e,ae){for(var ae=function(Me,He){if(m(Me)!=="object")Me=He;else for(var Ie in He)Me[Ie]===void 0&&(Me[Ie]=He[Ie]);return Me}(ae,{sampleFactor:.1,simplifyThreshold:0}),he=h(_e,0,1),be=he/(he*ae.sampleFactor),ke=[],xe=0;xe<he;xe+=be)ke.push(h(_e,xe));return ae.simplifyThreshold&&function(we){for(var Me=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,He=0,Ie=we.length-1;3<we.length&&0<=Ie;--Ie)n(i(we,Ie-1),i(we,Ie),i(we,Ie+1),Me)&&(we.splice(Ie%we.length,1),He++)}(ke,ae.simplifyThreshold),ke}(fe[ge],V),me=0;me<de.length;me++)de[me].x+=q,G=this._handleAlignment(W._renderer,$,de[me].x,de[me].y),de[me].x=G.x,de[me].y=G.y,H.push(de[me]);q+=ie[re].advanceWidth*this._scale(B)}I+=this.parent._renderer._textLeading}return H}},{key:"_getGlyphs",value:function(M){return this.font.stringToGlyphs(M)}},{key:"_getPath",value:function(M,G,I,B){var V=(B&&B.renderer&&B.renderer._pInst||this.parent)._renderer,G=this._handleAlignment(V,M,G,I);return this.font.getPath(M,G.x,G.y,V._textSize,B)}},{key:"_getPathData",value:function(M,L,I,B){var V=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,L,I,B):m(L)==="object"&&(B=L),B&&typeof B.decimals=="number"&&(V=B.decimals),M.toPathData(V)}},{key:"_getSVG",value:function(M,L,I,B){var V=3;return typeof M=="string"&&2<arguments.length?M=this._getPath(M,L,I,B):m(L)==="object"&&(B=L),B&&(typeof B.decimals=="number"&&(V=B.decimals),typeof B.strokeWidth=="number"&&(M.strokeWidth=B.strokeWidth),B.fill!==void 0&&(M.fill=B.fill),B.stroke!==void 0&&(M.stroke=B.stroke)),M.toSVG(V)}},{key:"_renderPath",value:function(Y,W,K,B){var V=B&&B.renderer||this.parent._renderer,G=V.drawingContext,Y=(m(Y)==="object"&&Y.commands?Y:this._getPath(Y,W,K,B)).commands,H=(V._clipping||G.beginPath(),!0),W=!1,K=void 0;try{for(var Q,se=Y[Symbol.iterator]();!(H=(Q=se.next()).done);H=!0){var A=Q.value;A.type==="M"?G.moveTo(A.x,A.y):A.type==="L"?G.lineTo(A.x,A.y):A.type==="C"?G.bezierCurveTo(A.x1,A.y1,A.x2,A.y2,A.x,A.y):A.type==="Q"?G.quadraticCurveTo(A.x1,A.y1,A.x,A.y):A.type==="Z"&&G.closePath()}}catch(z){W=!0,K=z}finally{try{H||se.return==null||se.return()}finally{if(W)throw K}}return V._doStroke&&V._strokeSet&&!V._clipping&&G.stroke(),V._doFill&&!V._clipping&&(V._fillSet||V._setFill(s._DEFAULT_TEXT_FILL),G.fill()),this}},{key:"_textWidth",value:function(M,L){return this.font.getAdvanceWidth(M,L)}},{key:"_textAscent",value:function(M){return this.font.ascender*this._scale(M)}},{key:"_textDescent",value:function(M){return-this.font.descender*this._scale(M)}},{key:"_scale",value:function(M){return 1/this.font.unitsPerEm*(M||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(M,L,I,B,V){var G=M._textSize;switch(V===void 0&&(V=this._textWidth(L,G)),M._textAlign){case s.CENTER:I-=V/2;break;case s.RIGHT:I-=V}switch(M._textBaseline){case s.TOP:B+=this._textAscent(G);break;case s.CENTER:B+=this._textAscent(G)/2;break;case s.BOTTOM:B-=this._textDescent(G)}return{x:I,y:B}}}])&&v(R.prototype,O),T}(),t=c.default,f.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(t,x,f){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(u,c){return u.push(c),u},t.default.prototype.arrayCopy=function(u,c,s,d,m){var v,i;u=m!==void 0?(i=Math.min(m,u.length),v=d,u.slice(c,i+c)):(i=s!==void 0?(i=s,Math.min(i,u.length)):u.length,s=c,u.slice(v=0,i)),Array.prototype.splice.apply(s,[v,i].concat(u))},t.default.prototype.concat=function(u,c){return u.concat(c)},t.default.prototype.reverse=function(u){return u.reverse()},t.default.prototype.shorten=function(u){return u.pop(),u},t.default.prototype.shuffle=function(u,c){for(var s,d,m=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(u),v=(u=c||m?u:u.slice()).length;1<v;)s=this.random(0,1)*v|0,d=u[--v],u[v]=u[s],u[s]=d;return u},t.default.prototype.sort=function(u,d){var s=d?u.slice(0,Math.min(d,u.length)):u,d=d?u.slice(Math.min(d,u.length)):[];return(s=typeof s[0]=="string"?s.sort():s.sort(function(m,v){return m-v})).concat(d)},t.default.prototype.splice=function(u,c,s){return Array.prototype.splice.apply(u,[s,0].concat(c)),u},t.default.prototype.subset=function(u,c,s){return s!==void 0?u.slice(c,c+s):u.slice(c,u.length)},t=t.default,f.default=t},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(t,x,f){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};u.default.prototype.float=function(c){return c instanceof Array?c.map(parseFloat):parseFloat(c)},u.default.prototype.int=function(c){var s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return c===1/0||c==="Infinity"?1/0:c===-1/0||c==="-Infinity"?-1/0:typeof c=="string"?parseInt(c,s):typeof c=="number"?0|c:typeof c=="boolean"?c?1:0:c instanceof Array?c.map(function(d){return u.default.prototype.int(d,s)}):void 0},u.default.prototype.str=function(c){return c instanceof Array?c.map(u.default.prototype.str):String(c)},u.default.prototype.boolean=function(c){return typeof c=="number"?c!==0:typeof c=="string"?c.toLowerCase()==="true":typeof c=="boolean"?c:c instanceof Array?c.map(u.default.prototype.boolean):void 0},u.default.prototype.byte=function(c){return c=u.default.prototype.int(c,10),typeof c=="number"?(c+128)%256-128:c instanceof Array?c.map(u.default.prototype.byte):void 0},u.default.prototype.char=function(c){return typeof c!="number"||isNaN(c)?c instanceof Array?c.map(u.default.prototype.char):typeof c=="string"?u.default.prototype.char(parseInt(c,10)):void 0:String.fromCharCode(c)},u.default.prototype.unchar=function(c){return typeof c=="string"&&c.length===1?c.charCodeAt(0):c instanceof Array?c.map(u.default.prototype.unchar):void 0},u.default.prototype.hex=function(c,s){if(s=s??8,c instanceof Array)return c.map(function(m){return u.default.prototype.hex(m,s)});if(c===1/0||c===-1/0)return(c===1/0?"F":"0").repeat(s);if(typeof c=="number"){c<0&&(c=4294967295+c+1);for(var d=Number(c).toString(16).toUpperCase();d.length<s;)d="0".concat(d);return d=d.length>=s?d.substring(d.length-s,d.length):d}},u.default.prototype.unhex=function(c){return c instanceof Array?c.map(u.default.prototype.unhex):parseInt("0x".concat(c),16)},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(i=t("../core/main"))&&i.__esModule?i:{default:i};function c(n,a){return function(o){if(Array.isArray(o))return o}(n)||function(o,h){if(Symbol.iterator in Object(o)||Object.prototype.toString.call(o)==="[object Arguments]"){var p=[],y=!0,w=!1,b=void 0;try{for(var S,k=o[Symbol.iterator]();!(y=(S=k.next()).done)&&(p.push(S.value),!h||p.length!==h);y=!0);}catch(E){w=!0,b=E}finally{try{y||k.return==null||k.return()}finally{if(w)throw b}}return p}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(n,a,o){var h,p=n<0,w=c((n=Math.abs(n)).toString().split("."),2),y=w[0],w=w[1];return o===void 0?(y=y.padStart(a,"0"),h=w?y+"."+w:y,p?"-"+h:h):(y=(h=c(n.toFixed(o).toString().split("."),2))[0],w=h[1],y=y.padStart(a,"0"),n=w===void 0?y:y+"."+w,p?"-"+n:n)}function d(p,a){var o=(p=p.toString()).indexOf("."),h=o!==-1?p.substring(o):"",p=(p=o!==-1?p.substring(0,o):p).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(a===0)h="";else if(a!==void 0)if(a>h.length)for(var y=a-(h+=o===-1?".":"").length+1,w=0;w<y;w++)h+="0";else h=h.substring(0,a+1);return p+h}function m(n){return 0<parseFloat(n)?"+".concat(n.toString()):n.toString()}function v(n){return 0<=parseFloat(n)?" ".concat(n.toString()):n.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),u.default.prototype.join=function(n,a){return u.default._validateParameters("join",arguments),n.join(a)},u.default.prototype.match=function(n,a){return u.default._validateParameters("match",arguments),n.match(a)},u.default.prototype.matchAll=function(n,a){u.default._validateParameters("matchAll",arguments);for(var o=new RegExp(a,"g"),h=o.exec(n),p=[];h!==null;)p.push(h),h=o.exec(n);return p},u.default.prototype.nf=function(n,a,o){return u.default._validateParameters("nf",arguments),n instanceof Array?n.map(function(h){return s(h,a,o)}):Object.prototype.toString.call(n)==="[object Arguments]"?n.length===3?this.nf(n[0],n[1],n[2]):n.length===2?this.nf(n[0],n[1]):this.nf(n[0]):s(n,a,o)},u.default.prototype.nfc=function(n,a){return u.default._validateParameters("nfc",arguments),n instanceof Array?n.map(function(o){return d(o,a)}):d(n,a)},u.default.prototype.nfp=function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];u.default._validateParameters("nfp",a);var h=u.default.prototype.nf.apply(this,a);return h instanceof Array?h.map(m):m(h)},u.default.prototype.nfs=function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];u.default._validateParameters("nfs",a);var h=u.default.prototype.nf.apply(this,a);return h instanceof Array?h.map(v):v(h)},u.default.prototype.split=function(n,a){return u.default._validateParameters("split",arguments),n.split(a)},u.default.prototype.splitTokens=function(n,a){var o,h;return u.default._validateParameters("splitTokens",arguments),h=a!==void 0?(h=/\]/g.exec(a=a),(o=/\[/g.exec(a))&&h?(a=a.slice(0,h.index)+a.slice(h.index+1),o=/\[/g.exec(a),a=a.slice(0,o.index)+a.slice(o.index+1),new RegExp("[\\[".concat(a,"\\]]"),"g")):h?(a=a.slice(0,h.index)+a.slice(h.index+1),new RegExp("[".concat(a,"\\]]"),"g")):o?(a=a.slice(0,o.index)+a.slice(o.index+1),new RegExp("[".concat(a,"\\[]"),"g")):new RegExp("[".concat(a,"]"),"g")):/\s/g,n.split(h).filter(function(p){return p})},u.default.prototype.trim=function(n){return u.default._validateParameters("trim",arguments),n instanceof Array?n.map(this.trim):n.trim()};var i=u.default;f.default=i},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,f.default=t},{"../core/main":283}],326:[function(t,x,f){function u(n){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(n)}function c(n){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(a){return u(a)}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":u(a)})(n)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(i=t("../core/main"))&&i.__esModule?i:{default:i},d=(t("./p5.Geometry"),function(n){if(n&&n.__esModule)return n;if(n===null||c(n)!=="object"&&typeof n!="function")return{default:n};var a=m();if(a&&a.has(n))return a.get(n);var o,h={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in n){var y;Object.prototype.hasOwnProperty.call(n,o)&&((y=p?Object.getOwnPropertyDescriptor(n,o):null)&&(y.get||y.set)?Object.defineProperty(h,o,y):h[o]=n[o])}return h.default=n,a&&a.set(n,h),h}(t("../core/constants")));function m(){var n;return typeof WeakMap!="function"?null:(n=new WeakMap,m=function(){return n},n)}s.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},s.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},s.default.prototype.buildGeometry=function(n){return this._renderer.buildGeometry(n)},s.default.prototype.freeGeometry=function(n){this._renderer._freeBuffers(n.gid)},s.default.prototype.plane=function(){var n,a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:a,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=(this._assert3d("plane"),s.default._validateParameters("plane",arguments),"plane|".concat(h,"|").concat(p));return this._renderer.geometryInHash(y)||((n=new s.default.Geometry(h,p,function(){for(var w,b,S=0;S<=this.detailY;S++)for(var k=S/this.detailY,E=0;E<=this.detailX;E++)w=E/this.detailX,b=new s.default.Vector(w-.5,k-.5,0),this.vertices.push(b),this.uvs.push(w,k)})).computeFaces().computeNormals(),h<=1&&p<=1?n._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(y,n)),this._renderer.drawBuffersScaled(y,a,o,1),this},s.default.prototype.box=function(n,a,o,h,p){this._assert3d("box"),s.default._validateParameters("box",arguments),n===void 0&&(n=50),a===void 0&&(a=n),o===void 0&&(o=a);var y,w=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,w=(p===void 0&&(p=w?1:4),"box|".concat(h=h===void 0?w?1:4:h,"|").concat(p));return this._renderer.geometryInHash(w)||((y=new s.default.Geometry(h,p,function(){var b=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(S,k){for(var k=4*k,E=0;E<4;E++){var T=S[E],T=new s.default.Vector((2*(1&T)-1)/2,((2&T)-1)/2,((4&T)/2-1)/2);b.vertices.push(T),b.uvs.push(1&E,(2&E)/2)}b.faces.push([k,1+k,2+k]),b.faces.push([2+k,1+k,3+k])})})).computeNormals(),h<=4&&p<=4?y._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(w,y)),this._renderer.drawBuffersScaled(w,n,a,o),this},s.default.prototype.sphere=function(){var n=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),s.default._validateParameters("sphere",arguments),this.ellipsoid(n,n,n,a,o),this};function v(n,a,o,h,p,y,w){n=n<=0?1:n,a=a<0?0:a,o=o<=0?n:o,h=h<3?3:h;for(var b,S,k=(y=y===void 0||y)?-2:0,E=(p=p<1?1:p)+((w=w===void 0?a!==0:w)?2:0),T=Math.atan2(n-a,o),R=Math.sin(T),O=Math.cos(T),M=k;M<=E;++M){var L=M/p,I=o*L,B=void 0,B=M<0?(L=I=0,n):p<M?(I=o,L=1,a):n+(a-n)*L;for(M!==-2&&M!==p+2||(B=0),I-=o/2,b=0;b<h;++b){var V=b/(h-1),Y=2*Math.PI*V,G=Math.sin(Y),Y=Math.cos(Y),H=(this.vertices.push(new s.default.Vector(G*B,I,Y*B)),void 0),H=M<0?new s.default.Vector(0,-1,0):p<M&&a?new s.default.Vector(0,1,0):new s.default.Vector(G*O,R,Y*O);this.vertexNormals.push(H),this.uvs.push(V,L)}}var W=0;if(y){for(S=0;S<h;++S)this.faces.push([W+S,W+h+(S+1)%h,W+h+S]);W+=2*h}for(M=0;M<p;++M){for(b=0;b<h;++b){var K=(b+1)%h;this.faces.push([W+b,W+K,W+h+K]),this.faces.push([W+b,W+h+K,W+h+b])}W+=h}if(w)for(W+=h,b=0;b<h;++b)this.faces.push([W+b,W+(b+1)%h,W+h])}s.default.prototype.cylinder=function(){var n,a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:a,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],b=(this._assert3d("cylinder"),s.default._validateParameters("cylinder",arguments),"cylinder|".concat(h,"|").concat(p,"|").concat(y,"|").concat(w));return this._renderer.geometryInHash(b)||(n=new s.default.Geometry(h,p),v.call(n,1,1,1,h,p,y,w),h<=24&&p<=16?n._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(b,n)),this._renderer.drawBuffersScaled(b,a,o,a),this},s.default.prototype.cone=function(){var n,a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:a,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,y=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],w=(this._assert3d("cone"),s.default._validateParameters("cone",arguments),"cone|".concat(h,"|").concat(p,"|").concat(y));return this._renderer.geometryInHash(w)||(n=new s.default.Geometry(h,p),v.call(n,1,0,1,h,p,y,!1),h<=24&&p<=16?n._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,n)),this._renderer.drawBuffersScaled(w,a,o,a),this},s.default.prototype.ellipsoid=function(){var n,a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:a,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:a,p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,y=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,w=(this._assert3d("ellipsoid"),s.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(p,"|").concat(y));return this._renderer.geometryInHash(w)||((n=new s.default.Geometry(p,y,function(){for(var b=0;b<=this.detailY;b++)for(var S=b/this.detailY,k=Math.PI*S-Math.PI/2,E=Math.cos(k),T=Math.sin(k),R=0;R<=this.detailX;R++){var O=R/this.detailX,L=2*Math.PI*O,M=Math.cos(L),L=Math.sin(L),L=new s.default.Vector(E*L,T,E*M);this.vertices.push(L),this.vertexNormals.push(L),this.uvs.push(O,S)}})).computeFaces(),p<=24&&y<=24?n._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(w,n)),this._renderer.drawBuffersScaled(w,a,o,h),this},s.default.prototype.torus=function(n,w,o,h){if(this._assert3d("torus"),s.default._validateParameters("torus",arguments),n===void 0)n=50;else if(!n)return;if(w===void 0)w=10;else if(!w)return;o===void 0&&(o=24),h===void 0&&(h=16);var p,y=(w/n).toPrecision(4),w="torus|".concat(y,"|").concat(o,"|").concat(h);return this._renderer.geometryInHash(w)||((p=new s.default.Geometry(o,h,function(){for(var b=0;b<=this.detailY;b++)for(var S=b/this.detailY,k=2*Math.PI*S,E=Math.cos(k),T=Math.sin(k),R=1+y*E,O=0;O<=this.detailX;O++){var M=O/this.detailX,L=2*Math.PI*M,B=Math.cos(L),L=Math.sin(L),I=new s.default.Vector(R*B,R*L,y*T),B=new s.default.Vector(E*B,E*L,T);this.vertices.push(I),this.vertexNormals.push(B),this.uvs.push(M,S)}})).computeFaces(),o<=24&&h<=16?p._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(w,p)),this._renderer.drawBuffersScaled(w,n,n,n),this},s.default.RendererGL.prototype.point=function(n,a){var o=[];return o.push(new s.default.Vector(n,a,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(o,this.immediateMode.buffers.point),this},s.default.RendererGL.prototype.triangle=function(w){var a=w[0],o=w[1],h=w[2],p=w[3],y=w[4],w=w[5],b=(this.geometryInHash("tri")||((b=new s.default.Geometry(1,1,function(){var E=[];E.push(new s.default.Vector(0,0,0)),E.push(new s.default.Vector(1,0,0)),E.push(new s.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=E,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),b.computeNormals(),this.createBuffers("tri",b)),this.uModelMatrix.copy());try{var S=Math.sign(a*p-h*o+h*w-y*p+y*o-a*w),k=new s.default.Matrix([h-a,p-o,0,0,y-a,w-o,0,0,0,0,S,0,a,o,0,1]).mult(this.uModelMatrix);this.uModelMatrix=k,this.drawBuffers("tri")}finally{this.uModelMatrix=b}return this},s.default.RendererGL.prototype.ellipse=function(n){this.arc(n[0],n[1],n[2],n[3],0,d.TWO_PI,d.OPEN,n[4])},s.default.RendererGL.prototype.arc=function(){var n,a=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],h=arguments.length<=2?void 0:arguments[2],p=arguments.length<=3?void 0:arguments[3],y=arguments.length<=4?void 0:arguments[4],w=arguments.length<=5?void 0:arguments[5],b=arguments.length<=6?void 0:arguments[6],S=(arguments.length<=7?void 0:arguments[7])||25,k=(Math.abs(w-y)>=d.TWO_PI?"".concat(E="ellipse","|"):"".concat(E="arc","|").concat(y,"|").concat(w,"|").concat(b,"|")).concat(S,"|"),E=(this.geometryInHash(k)||((n=new s.default.Geometry(S,1,function(){if(y.toFixed(10)!==w.toFixed(10)){b!==d.PIE&&b!==void 0||(this.vertices.push(new s.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var T=0;T<=S;T++){var O=(w-y)*(T/S)+y,R=.5+Math.cos(O)/2,O=.5+Math.sin(O)/2;this.vertices.push(new s.default.Vector(R,O,0)),this.uvs.push([R,O]),T<S-1&&(this.faces.push([0,T+1,T+2]),this.edges.push([T+1,T+2]))}switch(b){case d.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case d.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case d.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),S<=50?n._edgesToVertices(n):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(E," with more than 50 detail")),this.createBuffers(k,n)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([a,o,0]),this.uModelMatrix.scale(h,p,1),this.drawBuffers(k)}finally{this.uModelMatrix=E}return this},s.default.RendererGL.prototype.rect=function(n){var a=n[0],o=n[1],h=n[2],p=n[3];if(n[4]===void 0){var b=this._pInst._glAttributes.perPixelLighting,y=n[4]||(b?1:24),w=n[5]||(b?1:16),b="rect|".concat(y,"|").concat(w),S=(this.geometryInHash(b)||((S=new s.default.Geometry(y,w,function(){for(var H=0;H<=this.detailY;H++)for(var W=H/this.detailY,K=0;K<=this.detailX;K++){var Q=K/this.detailX,se=new s.default.Vector(Q,W,0);this.vertices.push(se),this.uvs.push(Q,W)}0<y&&0<w&&(this.edges=[[0,y],[y,(y+1)*(w+1)-1],[(y+1)*(w+1)-1,(y+1)*w],[(y+1)*w,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(b,S)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([a,o,0]),this.uModelMatrix.scale(h,p,1),this.drawBuffers(b)}finally{this.uModelMatrix=S}}else{var b=n[4],S=n[5]===void 0?b:n[5],k=n[6]===void 0?S:n[6],n=n[7]===void 0?k:n[7],L=h,E=p,O=((L+=a)<a&&(O=a,a=L,L=O),(E+=o)<o&&(O=o,o=E,E=O),Math.min((L-a)/2,(E-o)/2)),T=(O<b&&(b=O),O<S&&(S=O),O<k&&(k=O),O<n&&(n=O),a),R=o,O=L,a=E,M=(this.beginShape(),S!==0?(this.vertex(O-S,R),this.quadraticVertex(O,R,O,R+S)):this.vertex(O,R),k!==0?(this.vertex(O,a-k),this.quadraticVertex(O,a,O-k,a)):this.vertex(O,a),n!==0?(this.vertex(T+n,a),this.quadraticVertex(T,a,T,a-n)):this.vertex(T,a),b!==0?(this.vertex(T,R+b),this.quadraticVertex(T,R,T+b,R)):this.vertex(T,R),!(this.immediateMode.geometry.uvs.length=0)),o=!1,L=void 0;try{for(var I,B=this.immediateMode.geometry.vertices[Symbol.iterator]();!(M=(I=B.next()).done);M=!0){var V=I.value,G=(V.x-T)/h,Y=(V.y-R)/p;this.immediateMode.geometry.uvs.push(G,Y)}}catch(A){o=!0,L=A}finally{try{M||B.return==null||B.return()}finally{if(o)throw L}}this.endShape(d.CLOSE)}return this},s.default.RendererGL.prototype.quad=function(n,a,o,h,p,y,w,b,S,k,E,T){var R=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,O=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,M="quad|".concat(n,"|").concat(a,"|").concat(o,"|").concat(h,"|").concat(p,"|").concat(y,"|").concat(w,"|").concat(b,"|").concat(S,"|").concat(k,"|").concat(E,"|").concat(T,"|").concat(R,"|").concat(O);if(!this.geometryInHash(M)){var L=new s.default.Geometry(R,O,function(){for(var K=1/(this.detailX-1),Q=1/(this.detailY-1),se=0;se<this.detailY;se++)for(var A=0;A<this.detailX;A++){var z=A*K,q=se*Q;this.vertices.push(new s.default.Vector((1-z)*((1-q)*n+q*k)+z*((1-q)*h+q*w),(1-z)*((1-q)*a+q*E)+z*((1-q)*p+q*b),(1-z)*((1-q)*o+q*T)+z*((1-q)*y+q*S))),this.uvs.push([z,q])}});L.faces=[];for(var I=0;I<O-1;I++)for(var B=0;B<R-1;B++){var V=B+I*R,G=B+1+(I+1)*R,Y=B+(I+1)*R;L.faces.push([V,B+1+I*R,G]),L.faces.push([V,G,Y])}L.computeNormals();for(var H=[L.edges.length=0,2,3,1],W=0;W<H.length;W++)L.edges.push([H[W],H[(W+1)%H.length]]);L._edgesToVertices(),this.createBuffers(M,L)}return this.drawBuffers(M),this},s.default.RendererGL.prototype.bezier=function(n,a,o,h,p,y,w,b,S,k,E,T){arguments.length===8&&(E=b,k=w,b=y,w=p,p=h,h=o,o=y=S=T=0);var R=this._pInst._bezierDetail||20;this.beginShape();for(var O=0;O<=R;O++){var M=Math.pow(1-O/R,3),L=O/R*3*Math.pow(1-O/R,2),I=3*Math.pow(O/R,2)*(1-O/R),B=Math.pow(O/R,3);this.vertex(n*M+h*L+w*I+k*B,a*M+p*L+b*I+E*B,o*M+y*L+S*I+T*B)}return this.endShape(),this},s.default.RendererGL.prototype.curve=function(n,a,o,h,p,y,w,b,S,k,E,T){arguments.length===8&&(k=w,E=b,w=p,b=h,p=h=o,o=y=S=T=0);var R=this._pInst._curveDetail;this.beginShape();for(var O=0;O<=R;O++){var M=.5*Math.pow(O/R,3),L=.5*Math.pow(O/R,2),I=O/R*.5;this.vertex(M*(3*h-n-3*w+k)+L*(2*n-5*h+4*w-k)+I*(-n+w)+2*h*.5,M*(3*p-a-3*b+E)+L*(2*a-5*p+4*b-E)+I*(-a+b)+2*p*.5,M*(3*y-o-3*S+T)+L*(2*o-5*y+4*S-T)+I*(-o+S)+2*y*.5)}return this.endShape(),this},s.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(d.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},s.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var n,a,o,h,p,y,w=[],b=[],S=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var k=1/this._lutBezierDetail,E=k,T=1,R=0;E<1;){if(y=parseFloat(E.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(y),T.toFixed(6)===k.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(y);break}E+=k,T-=k,++R}}for(var O=this._lookUpTableBezier.length,M=[],L=0;L<4;L++)M.push([]);M[0]=this.immediateMode.geometry.vertexColors.slice(-4),M[3]=this.curFillColor.slice();var I=[];for(L=0;L<4;L++)I.push([]);if(I[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),I[3]=this.curStrokeColor.slice(),S===6){this.isBezier=!0;var w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],B=Math.hypot(w[0]-w[1],b[0]-b[1]),G=Math.hypot(w[1]-w[2],b[1]-b[2]),V=Math.hypot(w[2]-w[3],b[2]-b[3]),G=B+G+V;for(B/=G,V/=G,p=0;p<4;p++)M[1].push(M[0][p]*(1-B)+M[3][p]*B),M[2].push(M[0][p]*V+M[3][p]*(1-V)),I[1].push(I[0][p]*(1-B)+I[3][p]*B),I[2].push(I[0][p]*V+I[3][p]*(1-V));for(h=0;h<O;h++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=n=a=0;L<4;L++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[h][L]*M[L][p],this.curStrokeColor[p]+=this._lookUpTableBezier[h][L]*I[L][p];n+=w[L]*this._lookUpTableBezier[h][L],a+=b[L]*this._lookUpTableBezier[h][L]}this.vertex(n,a)}this.curFillColor=M[3],this.curStrokeColor=I[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(S===9){this.isBezier=!0,w=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],b=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var Y=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],H=Math.hypot(w[0]-w[1],b[0]-b[1],Y[0]-Y[1]),G=Math.hypot(w[1]-w[2],b[1]-b[2],Y[1]-Y[2]),W=Math.hypot(w[2]-w[3],b[2]-b[3],Y[2]-Y[3]),S=H+G+W;for(H/=S,W/=S,p=0;p<4;p++)M[1].push(M[0][p]*(1-H)+M[3][p]*H),M[2].push(M[0][p]*W+M[3][p]*(1-W)),I[1].push(I[0][p]*(1-H)+I[3][p]*H),I[2].push(I[0][p]*W+I[3][p]*(1-W));for(h=0;h<O;h++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=n=a=o=0;L<4;L++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableBezier[h][L]*M[L][p],this.curStrokeColor[p]+=this._lookUpTableBezier[h][L]*I[L][p];n+=w[L]*this._lookUpTableBezier[h][L],a+=b[L]*this._lookUpTableBezier[h][L],o+=Y[L]*this._lookUpTableBezier[h][L]}this.vertex(n,a,o)}this.curFillColor=M[3],this.curStrokeColor=I[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},s.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var n,a,o,h,p,y,w=[],b=[],S=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var k=1/this._lutQuadraticDetail,E=k,T=1,R=0;E<1;){if(y=parseFloat(E.toFixed(6)),this._lookUpTableQuadratic[R]=this._quadraticCoefficients(y),T.toFixed(6)===k.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++R,this._lookUpTableQuadratic[R]=this._quadraticCoefficients(y);break}E+=k,T-=k,++R}}for(var O=this._lookUpTableQuadratic.length,M=[],L=0;L<3;L++)M.push([]);M[0]=this.immediateMode.geometry.vertexColors.slice(-4),M[2]=this.curFillColor.slice();var I=[];for(L=0;L<3;L++)I.push([]);if(I[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),I[2]=this.curStrokeColor.slice(),S===4){this.isQuadratic=!0;var w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],B=Math.hypot(w[0]-w[1],b[0]-b[1]);for(B/=B+Math.hypot(w[1]-w[2],b[1]-b[2]),p=0;p<4;p++)M[1].push(M[0][p]*(1-B)+M[2][p]*B),I[1].push(I[0][p]*(1-B)+I[2][p]*B);for(h=0;h<O;h++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=n=a=0;L<3;L++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[h][L]*M[L][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[h][L]*I[L][p];n+=w[L]*this._lookUpTableQuadratic[h][L],a+=b[L]*this._lookUpTableQuadratic[h][L]}this.vertex(n,a)}this.curFillColor=M[2],this.curStrokeColor=I[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(S===6){this.isQuadratic=!0,w=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],b=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var V=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],G=Math.hypot(w[0]-w[1],b[0]-b[1],V[0]-V[1]);for(G/=G+Math.hypot(w[1]-w[2],b[1]-b[2],V[1]-V[2]),p=0;p<4;p++)M[1].push(M[0][p]*(1-G)+M[2][p]*G),I[1].push(I[0][p]*(1-G)+I[2][p]*G);for(h=0;h<O;h++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],L=n=a=o=0;L<3;L++){for(p=0;p<4;p++)this.curFillColor[p]+=this._lookUpTableQuadratic[h][L]*M[L][p],this.curStrokeColor[p]+=this._lookUpTableQuadratic[h][L]*I[L][p];n+=w[L]*this._lookUpTableQuadratic[h][L],a+=b[L]*this._lookUpTableQuadratic[h][L],o+=V[L]*this._lookUpTableQuadratic[h][L]}this.vertex(n,a,o)}this.curFillColor=M[2],this.curStrokeColor=I[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},s.default.RendererGL.prototype.curveVertex=function(){var n,a,o,h,p,y,w=[],b=[],S=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var k=1/this._lutBezierDetail,E=k,T=1,R=0;E<1;){if(y=parseFloat(E.toFixed(6)),this._lookUpTableBezier[R]=this._bezierCoefficients(y),T.toFixed(6)===k.toFixed(6)){y=parseFloat(T.toFixed(6))+parseFloat(E.toFixed(6)),++R,this._lookUpTableBezier[R]=this._bezierCoefficients(y);break}E+=k,T-=k,++R}}var O=this._lookUpTableBezier.length;if(S===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),p=0;p<O;p++)a=w[0]*this._lookUpTableBezier[p][0]+w[1]*this._lookUpTableBezier[p][1]+w[2]*this._lookUpTableBezier[p][2]+w[3]*this._lookUpTableBezier[p][3],o=b[0]*this._lookUpTableBezier[p][0]+b[1]*this._lookUpTableBezier[p][1]+b[2]*this._lookUpTableBezier[p][2]+b[3]*this._lookUpTableBezier[p][3],this.vertex(a,o);for(p=0;p<S;p++)this.immediateMode._curveVertex.shift()}}else if(S===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,w=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),b=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),n=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),p=0;p<O;p++)a=w[0]*this._lookUpTableBezier[p][0]+w[1]*this._lookUpTableBezier[p][1]+w[2]*this._lookUpTableBezier[p][2]+w[3]*this._lookUpTableBezier[p][3],o=b[0]*this._lookUpTableBezier[p][0]+b[1]*this._lookUpTableBezier[p][1]+b[2]*this._lookUpTableBezier[p][2]+b[3]*this._lookUpTableBezier[p][3],h=n[0]*this._lookUpTableBezier[p][0]+n[1]*this._lookUpTableBezier[p][1]+n[2]*this._lookUpTableBezier[p][2]+n[3]*this._lookUpTableBezier[p][3],this.vertex(a,o,h);for(p=0;p<S;p++)this.immediateMode._curveVertex.shift()}},s.default.RendererGL.prototype.image=function(n,T,o,R,p,y,w,b,S){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(n),this._pInst.textureMode(d.NORMAL);var k=0,E=(T<=n.width&&(k=T/n.width),1),T=(T+R<=n.width&&(E=(T+R)/n.width),0),R=(o<=n.height&&(T=o/n.height),1);o+p<=n.height&&(R=(o+p)/n.height),this.beginShape(),this.vertex(y,w,0,k,T),this.vertex(y+b,w,0,E,T),this.vertex(y+b,w+S,0,E,R),this.vertex(y,w+S,0,k,R),this.endShape(d.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(d.REMOVE)};var i=s.default;f.default=i},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(t,x,f){function u(a){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(a)}function c(a){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(o){return u(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":u(o)})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(n=t("../core/main"))&&n.__esModule?n:{default:n},d=function(a){if(a&&a.__esModule)return a;if(a===null||c(a)!=="object"&&typeof a!="function")return{default:a};var o=m();if(o&&o.has(a))return o.get(a);var h,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in a){var w;Object.prototype.hasOwnProperty.call(a,h)&&((w=y?Object.getOwnPropertyDescriptor(a,h):null)&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=a[h])}return p.default=a,o&&o.set(a,p),p}(t("../core/constants"));function m(){var a;return typeof WeakMap!="function"?null:(a=new WeakMap,m=function(){return a},a)}function v(a){return function(o){if(Array.isArray(o)){for(var h=0,p=new Array(o.length);h<o.length;h++)p[h]=o[h];return p}}(a)||function(o){if(Symbol.iterator in Object(o)||Object.prototype.toString.call(o)==="[object Arguments]")return Array.from(o)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(a,o){for(var h=0;h<o.length;h++){var p=o[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(a,p.key,p)}}var n=function(){function a(p){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");(this.renderer=p)._pInst.push(),this.identityMatrix=new s.default.Matrix,p.uModelMatrix=new s.default.Matrix,this.geometry=new s.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(a.nextGeometryId),a.nextGeometryId++,this.hasTransform=!1}var o,h;return o=a,(h=[{key:"transformVertices",value:function(p){var y=this;return this.hasTransform?p.map(function(w){return y.renderer.uModelMatrix.multiplyPoint(w)}):p}},{key:"transformNormals",value:function(p){var y=this;return this.hasTransform?p.map(function(w){return y.renderer.uNMatrix.multiplyVec3(w)}):p}},{key:"addGeometry",value:function(p){for(var y,w=this,b=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(k,E){return k===w.identityMatrix.mat4[E]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),S=((y=this.geometry.vertices).push.apply(y,v(this.transformVertices(p.vertices))),(y=this.geometry.vertexNormals).push.apply(y,v(this.transformNormals(p.vertexNormals))),(y=this.geometry.uvs).push.apply(y,v(p.uvs)),this.renderer._doFill&&(y=this.geometry.faces).push.apply(y,v(p.faces.map(function(k){return k.map(function(E){return E+b})}))),this.renderer._doStroke&&(y=this.geometry.edges).push.apply(y,v(p.edges.map(function(k){return k.map(function(E){return E+b})}))),v(p.vertexColors));S.length<4*p.vertices.length;)S.push.apply(S,v(this.renderer.curFillColor));(y=this.geometry.vertexColors).push.apply(y,v(S))}},{key:"addImmediate",value:function(){var p=this.renderer.immediateMode.geometry,y=this.renderer.immediateMode.shapeMode,w=[];if(this.renderer._doFill)if(y===d.TRIANGLE_STRIP||y===d.QUAD_STRIP)for(var b=2;b<p.vertices.length;b++)b%2==0?w.push([b,b-1,b-2]):w.push([b,b-2,b-1]);else if(y===d.TRIANGLE_FAN)for(var S=2;S<p.vertices.length;S++)w.push([0,S-1,S]);else for(var k=0;k<p.vertices.length;k+=3)w.push([k,k+1,k+2]);this.addGeometry(Object.assign({},p,{faces:w}))}},{key:"addRetained",value:function(p){this.addGeometry(p.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&i(o.prototype,h),a}();n.nextGeometryId=0,f.default=n},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(t,x,f){function u(i){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var c=(v=t("../core/main"))&&v.__esModule?v:{default:v},s=function(i){if(i&&i.__esModule)return i;if(i===null||m(i)!=="object"&&typeof i!="function")return{default:i};var n=d();if(n&&n.has(i))return n.get(i);var a,o={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var p;Object.prototype.hasOwnProperty.call(i,a)&&((p=h?Object.getOwnPropertyDescriptor(i,a):null)&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=i[a])}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function d(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,d=function(){return i},i)}function m(i){return(m=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(n){return u(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":u(n)})(i)}c.default.prototype.orbitControl=function(i,n,a,S){var h=this,p=(this._assert3d("orbitControl"),c.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);i===void 0&&(i=1),n===void 0&&(n=i),a===void 0&&(a=1),m(S)!=="object"&&(S={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var E=S.disableTouchActions;this.touchActionsDisabled===!0||E!==void 0&&!E||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var y,w,b,E=S.freeRotation,S=E!==void 0&&E,k=[],E=(this.touches.forEach(function(B){h._renderer.prevTouches.forEach(function(V){B.id===V.id&&(V={x:B.x,y:B.y,px:V.x,py:V.y},k.push(V))})}),this._renderer.prevTouches=this.touches,0),T=0,R=0,O=0,M=0,L=this.height<this.width?this.height:this.width,I=!1;return 0<k.length?(I=0<k[0].x&&k[0].x<this.width&&0<k[0].y&&k[0].y<this.height,k.length===1?(T=-i*((y=k[0]).x-y.px)/L,R=n*(y.y-y.py)/L):(y=k[0],w=k[1],E=-(Math.hypot(y.x-w.x,y.y-w.y)-Math.hypot(y.px-w.px,y.py-w.py))*a*4e-4,O=.5*(y.x+w.x)-.5*(y.px+w.px),M=.5*(y.y+w.y)-.5*(y.py+w.py)),0<this.touches.length?I&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(I=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(E=Math.sign(this._mouseWheelDeltaY)*a,E*=.01,this._mouseWheelDeltaY=0,I&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(T=-i*this.movedX/L,R=n*this.movedY/L):this.mouseButton===this.RIGHT&&(O=this.movedX,M=this.movedY*p.yScale),I&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),E!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=E),.001<Math.abs(this._renderer.zoomVelocity)?(S?p._orbitFree(0,0,this._renderer.zoomVelocity):p._orbit(0,0,this._renderer.zoomVelocity),p.projMatrix.mat4[15]!==0&&(p.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),p.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=p.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=p.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,T===0&&R===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*T,.6*R),1e-6<this._renderer.rotateVelocity.magSq()?(S?p._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):p._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),O===0&&M===0||!this._renderer.executeRotateAndMove||(y=2*O/this.width,w=2*-M/this.height,this._renderer.moveVelocity.add(.15*y,.15*w)),1e-6<this._renderer.moveVelocity.magSq()?(a=p._getLocalAxes(),i=p.eyeX-p.centerX,n=p.eyeY-p.centerY,L=p.eyeZ-p.centerZ,I=Math.sqrt(i*i+n*n+L*L),E=new c.default.Vector(p.centerX,p.centerY,p.centerZ),E=p.cameraMatrix.multiplyPoint(E),(E=this._renderer.uPMatrix.multiplyAndNormalizePoint(E)).x-=this._renderer.moveVelocity.x,E.y-=this._renderer.moveVelocity.y,R=(T=this._renderer.uPMatrix.mat4)[15]===0?(b=(T[8]+E.x)/T[0]*I,(T[9]+E.y)/T[5]*I):(b=(E.x-T[12])/T[0],(E.y-T[13])/T[5]),p.setPosition(p.eyeX+b*a.x[0]+R*a.y[0],p.eyeY+b*a.x[1]+R*a.y[1],p.eyeZ+b*a.x[2]+R*a.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},c.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];c.default._validateParameters("debugMode",n);for(var o=this._registeredMethods.post.length-1;0<=o;o--)this._registeredMethods.post[o].toString()!==this._grid().toString()&&this._registeredMethods.post[o].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(o,1);n[0]===s.GRID?this.registerMethod("post",this._grid(n[1],n[2],n[3],n[4],n[5])):n[0]===s.AXES?this.registerMethod("post",this._axesIcon(n[1],n[2],n[3],n[4])):(this.registerMethod("post",this._grid(n[0],n[1],n[2],n[3],n[4])),this.registerMethod("post",this._axesIcon(n[5],n[6],n[7],n[8])))},c.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var i=this._registeredMethods.post.length-1;0<=i;i--)this._registeredMethods.post[i].toString()!==this._grid().toString()&&this._registeredMethods.post[i].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(i,1)},c.default.prototype._grid=function(i,n,a,o,h){i===void 0&&(i=this.width/2),n===void 0&&(n=Math.round(i/30)<4?4:Math.round(i/30)),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0);var p=i/n,y=i/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var w=0;w<=n;w++)this.beginShape(this.LINES),this.vertex(-y+a,o,w*p-y+h),this.vertex(y+a,o,w*p-y+h),this.endShape();for(var b=0;b<=n;b++)this.beginShape(this.LINES),this.vertex(b*p-y+a,o,-y+h),this.vertex(b*p-y+a,o,y+h),this.endShape();this.pop()}},c.default.prototype._axesIcon=function(i,n,a,o){return i===void 0&&(i=40<this.width/20?this.width/20:40),n===void 0&&(n=-this.width/4),a===void 0&&(a=n),o===void 0&&(o=n),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(n,a,o),this.vertex(n+i,a,o),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(n,a,o),this.vertex(n,a+i,o),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(n,a,o),this.vertex(n,a,o+i),this.endShape(),this.pop()}};var v=c.default;f.default=v},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(t,x,f){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};u.default.prototype.ambientLight=function(c,s,d,m){this._assert3d("ambientLight"),u.default._validateParameters("ambientLight",arguments);var v=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(v._array[0],v._array[1],v._array[2]),this._renderer._enableLighting=!0,this},u.default.prototype.specularColor=function(c,s,d){this._assert3d("specularColor"),u.default._validateParameters("specularColor",arguments);var m=this.color.apply(this,arguments);return this._renderer.specularColors=[m._array[0],m._array[1],m._array[2]],this},u.default.prototype.directionalLight=function(c,h,o,m,v,i){this._assert3d("directionalLight"),u.default._validateParameters("directionalLight",arguments),c=c instanceof u.default.Color?c:this.color(c,h,o);var n,a,h=arguments[arguments.length-1],o=typeof h=="number"?(n=arguments[arguments.length-3],a=arguments[arguments.length-2],arguments[arguments.length-1]):(n=h.x,a=h.y,h.z),h=Math.sqrt(n*n+a*a+o*o);return this._renderer.directionalLightDirections.push(n/h,a/h,o/h),this._renderer.directionalLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},u.default.prototype.pointLight=function(c,o,h,m,v,i){this._assert3d("pointLight"),u.default._validateParameters("pointLight",arguments),c=c instanceof u.default.Color?c:this.color(c,o,h);var n,a,o=arguments[arguments.length-1],h=typeof o=="number"?(n=arguments[arguments.length-3],a=arguments[arguments.length-2],arguments[arguments.length-1]):(n=o.x,a=o.y,o.z);return this._renderer.pointLightPositions.push(n,a,h),this._renderer.pointLightDiffuseColors.push(c._array[0],c._array[1],c._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},u.default.prototype.imageLight=function(c){this._renderer.activeImageLight=c,this._renderer._enableLighting=!0},u.default.prototype.panorama=function(c){this.filter(this._renderer._getSphereMapping(c))},u.default.prototype.lights=function(){this._assert3d("lights");var c=this.color("rgb(128,128,128)");return this.ambientLight(c),this.directionalLight(c,0,0,-1),this},u.default.prototype.lightFalloff=function(c,s,d){return this._assert3d("lightFalloff"),u.default._validateParameters("lightFalloff",arguments),c<0&&(c=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),s<0&&(s=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),c===0&&s===0&&d===0&&(c=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=c,this._renderer.linearAttenuation=s,this._renderer.quadraticAttenuation=d,this},u.default.prototype.spotLight=function(c,s,d,m,v,i,n,a,o,h,p){this._assert3d("spotLight"),u.default._validateParameters("spotLight",arguments);var y,w,b,S=arguments.length;switch(S){case 11:case 10:y=this.color(c,s,d),w=new u.default.Vector(m,v,i),b=new u.default.Vector(n,a,o);break;case 9:c instanceof u.default.Color?(y=c,w=new u.default.Vector(s,d,m),b=new u.default.Vector(v,i,n),h=a,p=o):m instanceof u.default.Vector?(y=this.color(c,s,d),w=m,b=new u.default.Vector(v,i,n),h=a,p=o):n instanceof u.default.Vector?(y=this.color(c,s,d),w=new u.default.Vector(m,v,i),b=n,h=a,p=o):(y=this.color(c,s,d),w=new u.default.Vector(m,v,i),b=new u.default.Vector(n,a,o));break;case 8:h=(b=c instanceof u.default.Color?(y=c,w=new u.default.Vector(s,d,m),new u.default.Vector(v,i,n)):m instanceof u.default.Vector?(y=this.color(c,s,d),w=m,new u.default.Vector(v,i,n)):(y=this.color(c,s,d),w=new u.default.Vector(m,v,i),n),a);break;case 7:c instanceof u.default.Color&&s instanceof u.default.Vector?(y=c,w=s,b=new u.default.Vector(d,m,v),h=i,p=n):c instanceof u.default.Color&&v instanceof u.default.Vector?(y=c,w=new u.default.Vector(s,d,m),b=v,h=i,p=n):m instanceof u.default.Vector&&v instanceof u.default.Vector?(y=this.color(c,s,d),w=m,b=v,h=i,p=n):b=c instanceof u.default.Color?(y=c,w=new u.default.Vector(s,d,m),new u.default.Vector(v,i,n)):m instanceof u.default.Vector?(y=this.color(c,s,d),w=m,new u.default.Vector(v,i,n)):(y=this.color(c,s,d),w=new u.default.Vector(m,v,i),n);break;case 6:m instanceof u.default.Vector&&v instanceof u.default.Vector?(y=this.color(c,s,d),w=m,b=v,h=i):c instanceof u.default.Color&&v instanceof u.default.Vector?(y=c,w=new u.default.Vector(s,d,m),b=v,h=i):c instanceof u.default.Color&&s instanceof u.default.Vector&&(y=c,w=s,b=new u.default.Vector(d,m,v),h=i);break;case 5:c instanceof u.default.Color&&s instanceof u.default.Vector&&d instanceof u.default.Vector?(y=c,w=s,b=d,h=m,p=v):m instanceof u.default.Vector&&v instanceof u.default.Vector?(y=this.color(c,s,d),w=m,b=v):c instanceof u.default.Color&&v instanceof u.default.Vector?(y=c,w=new u.default.Vector(s,d,m),b=v):c instanceof u.default.Color&&s instanceof u.default.Vector&&(y=c,w=s,b=new u.default.Vector(d,m,v));break;case 4:y=c,w=s,b=d,h=m;break;case 3:y=c,w=s,b=d;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(S<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(y._array[0],y._array[1],y._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(w.x,w.y,w.z),b.normalize(),this._renderer.spotLightDirections.push(b.x,b.y,b.z),h===void 0&&(h=Math.PI/3),p!==void 0&&p<1?(p=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):p===void 0&&(p=100),h=this._renderer._pInst._toRadians(h),this._renderer.spotLightAngle.push(Math.cos(h)),this._renderer.spotLightConc.push(p),this._renderer._enableLighting=!0,this},u.default.prototype.noLights=function(){this._assert3d("noLights");for(var c=arguments.length,s=new Array(c),d=0;d<c;d++)s[d]=arguments[d];return u.default._validateParameters("noLights",s),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=u.default,f.default=t},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(t,x,f){function u(h){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t("regenerator-runtime/runtime");var c=(o=t("../core/main"))&&o.__esModule?o:{default:o};function s(h){return function(p){if(Array.isArray(p)){for(var y=0,w=new Array(p.length);y<p.length;y++)w[y]=p[y];return w}}(h)||function(p){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]")return Array.from(p)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(h,p,y,w,b,S,k){try{var E=h[S](k),T=E.value}catch(R){return void y(R)}E.done?p(T):Promise.resolve(T).then(w,b)}function m(h){return function(){var p=this,y=arguments;return new Promise(function(w,b){var S=h.apply(p,y);function k(T){d(S,w,b,k,E,"next",T)}function E(T){d(S,w,b,k,E,"throw",T)}k(void 0)})}}function v(h){return(v=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(p){return u(p)}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":u(p)})(h)}function i(h,p,y){for(var w=2<arguments.length&&y!==void 0?y:{},b={v:[],vt:[],vn:[]},S={},k=null,E=new Set,T=!1,R=!1,O=0;O<p.length;++O){var M=p[O].trim().split(/\b\s+/);if(0<M.length){if(M[0]==="usemtl")k=M[1];else if(M[0]==="v"||M[0]==="vn"){var L=new c.default.Vector(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3]));b[M[0]].push(L)}else if(M[0]==="vt")L=[parseFloat(M[1]),1-parseFloat(M[2])],b[M[0]].push(L);else if(M[0]==="f")for(var I=3;I<M.length;++I){for(var B=[],V=[1,I-1,I],G=0;G<V.length;++G){for(var Y,H=M[V[G]],W=H.split("/"),K=0;K<W.length;K++)W[K]=parseInt(W[K])-1;S[H]||(S[H]={}),S[H][k]===void 0?(Y=h.vertices.length,h.vertices.push(b.v[W[0]].copy()),h.uvs.push(b.vt[W[1]]?b.vt[W[1]].slice():[0,0]),h.vertexNormals.push(b.vn[W[2]]?b.vn[W[2]].copy():new c.default.Vector),S[H][k]=Y,B.push(Y),k&&w[k]&&w[k].diffuseColor&&E.add(b.v[W[0]])):B.push(S[H][k])}if(B[0]!==B[1]&&B[0]!==B[2]&&B[1]!==B[2])if(h.faces.push(B),k&&w[k]&&w[k].diffuseColor)for(var T=T=!0,Q=w[k].diffuseColor,se=0;se<B.length;se++)h.vertexColors.push(Q[0]),h.vertexColors.push(Q[1]),h.vertexColors.push(Q[2]);else R=!0}}}if(h.vertexNormals.length===0&&h.computeNormals(),T===R)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function n(h,p){if(function(_e){for(var ae=new DataView(_e),he=[115,111,108,105,100],be=0;be<5;be++)if(function(ke,xe,we){for(var Me=0,He=ke.length;Me<He;Me++)if(ke[Me]!==xe.getUint8(we+Me,!1))return;return 1}(he,ae,be))return;return 1}(p)){for(var y,w,b,S,k,E,T,R=h,O=new DataView(p),M=O.getUint32(80,!0),L=!1,I=0;I<70;I++)O.getUint32(I,!1)===1129270351&&O.getUint8(I+4)===82&&O.getUint8(I+5)===61&&(L=!0,S=[],k=O.getUint8(I+6)/255,E=O.getUint8(I+7)/255,T=O.getUint8(I+8)/255);for(var B=0;B<M;B++){for(var V,G=84+50*B,Y=O.getFloat32(G,!0),H=O.getFloat32(4+G,!0),W=O.getFloat32(8+G,!0),K=(L&&(V=O.getUint16(48+G,!0),b=32768&V?(y=k,w=E,T):(y=(31&V)/31,w=(V>>5&31)/31,(V>>10&31)/31)),new c.default.Vector(Y,H,W)),Q=1;Q<=3;Q++){var se=G+12*Q,se=new c.default.Vector(O.getFloat32(se,!0),O.getFloat32(4+se,!0),O.getFloat32(8+se,!0));R.vertices.push(se),R.vertexNormals.push(K),L&&S.push(y,w,b)}R.faces.push([3*B,3*B+1,3*B+2]),R.uvs.push([0,0],[0,0],[0,0])}}else if(p=new DataView(p),"TextDecoder"in window)for(var A,z,q=h,$=new TextDecoder("utf-8").decode(p).split(`
`),ie="",re=[],fe=0;fe<$.length;++fe){for(var ge=$[fe].trim(),de=ge.split(" "),me=0;me<de.length;++me)de[me]===""&&de.splice(me,1);if(de.length!==0)switch(ie){case"":if(de[0]!=="solid")return console.error(ge),void console.error('Invalid state "'.concat(de[0],'", should be "solid"'));ie="solid";break;case"solid":if(de[0]!=="facet"||de[1]!=="normal")return console.error(ge),void console.error('Invalid state "'.concat(de[0],'", should be "facet normal"'));A=new c.default.Vector(parseFloat(de[2]),parseFloat(de[3]),parseFloat(de[4])),q.vertexNormals.push(A,A,A),ie="facet normal";break;case"facet normal":if(de[0]!=="outer"||de[1]!=="loop")return console.error(ge),void console.error('Invalid state "'.concat(de[0],'", should be "outer loop"'));ie="vertex";break;case"vertex":if(de[0]==="vertex")z=new c.default.Vector(parseFloat(de[1]),parseFloat(de[2]),parseFloat(de[3])),q.vertices.push(z),q.uvs.push([0,0]),re.push(q.vertices.indexOf(z));else{if(de[0]!=="endloop")return console.error(ge),void console.error('Invalid state "'.concat(de[0],'", should be "vertex" or "endloop"'));q.faces.push(re),re=[],ie="endloop"}break;case"endloop":if(de[0]!=="endfacet")return console.error(ge),void console.error('Invalid state "'.concat(de[0],'", should be "endfacet"'));ie="endfacet";break;case"endfacet":if(de[0]!=="endsolid"){if(de[0]!=="facet"||de[1]!=="normal")return console.error(ge),void console.error('Invalid state "'.concat(de[0],'", should be "endsolid" or "facet normal"'));A=new c.default.Vector(parseFloat(de[2]),parseFloat(de[3]),parseFloat(de[4])),q.vertexNormals.push(A,A,A),ie="facet normal"}break;default:console.error('Invalid state "'.concat(ie,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}t("./p5.Geometry"),c.default.prototype.loadModel=function(h,p){c.default._validateParameters("loadModel",arguments);var y,w,b=!1,S=!1,k=!1,E=h.slice(-4),T=(p&&v(p)==="object"?(b=p.normalize||!1,y=p.successCallback,w=p.failureCallback,E=p.fileType||E,S=p.flipU||!1,k=p.flipV||!1):typeof p=="boolean"?(b=p,y=arguments[2],w=arguments[3],arguments[4]!==void 0&&(E=arguments[4])):(y=typeof p=="function"?p:void 0,w=arguments[2],arguments[3]!==void 0&&(E=arguments[3])),new c.default.Geometry),R=(T.gid="".concat(h,"|").concat(b),this);function O(){return(O=m(regeneratorRuntime.mark(function L(I){var B,V,G,Y;return regeneratorRuntime.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:for(B=[],V=0;V<I.length;V++)(G=I[V].match(/^mtllib (.+)/))&&function(){var W="",K=G[1],Q=h.split("/");W=1<Q.length?(Q.pop(),Q.join("/")+"/"+K):K,B.push(function(){return M.apply(this,arguments)}(W).then(function(se){return se?(A=R,z=W,new Promise(function(q,$){var ie=null,re={};A.loadStrings(z,function(fe){for(var ge=0;ge<fe.length;++ge){var de,me=fe[ge].trim().split(/\s+/);me[0]==="newmtl"?(de=me[1],re[ie=de]={}):me[0]==="Kd"?re[ie].diffuseColor=[parseFloat(me[1]),parseFloat(me[2]),parseFloat(me[3])]:me[0]==="Ka"?re[ie].ambientColor=[parseFloat(me[1]),parseFloat(me[2]),parseFloat(me[3])]:me[0]==="Ks"?re[ie].specularColor=[parseFloat(me[1]),parseFloat(me[2]),parseFloat(me[3])]:me[0]==="map_Kd"&&(re[ie].texturePath=me[1])}q(re)},$)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(W)),{});var A,z}).catch(function(se){return console.warn("Error loading MTL file: ".concat(W),se),{}}))}();return H.prev=2,H.next=5,Promise.all(B);case 5:return Y=H.sent,Y=Object.assign.apply(Object,[{}].concat(s(Y))),H.abrupt("return",Y);case 10:return H.prev=10,H.t0=H.catch(2),H.abrupt("return",{});case 13:case"end":return H.stop()}},L,null,[[2,10]])}))).apply(this,arguments)}function M(){return(M=m(regeneratorRuntime.mark(function L(I){var B;return regeneratorRuntime.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.prev=0,V.next=3,fetch(I,{method:"HEAD"});case 3:return B=V.sent,V.abrupt("return",B.ok);case 7:return V.prev=7,V.t0=V.catch(0),V.abrupt("return",!1);case 10:case"end":return V.stop()}},L,null,[[0,7]])}))).apply(this,arguments)}return E.match(/\.stl$/i)?this.httpDo(h,"GET","arrayBuffer",function(L){n(T,L),b&&T.normalize(),S&&T.flipU(),k&&T.flipV(),R._decrementPreload(),typeof y=="function"&&y(T)},w):E.match(/\.obj$/i)?this.loadStrings(h,function(){var L=m(regeneratorRuntime.mark(function I(B){var V;return regeneratorRuntime.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.prev=0,G.next=3,function(){return O.apply(this,arguments)}(B);case 3:V=G.sent,i(T,B,V),G.next=11;break;case 7:return G.prev=7,G.t0=G.catch(0),w?w(G.t0):c.default._friendlyError("Error during parsing: "+G.t0.message),G.abrupt("return");case 11:return G.prev=11,b&&T.normalize(),S&&T.flipU(),k&&T.flipV(),T._makeTriangleEdges(),R._decrementPreload(),typeof y=="function"&&y(T),G.finish(11);case 19:case"end":return G.stop()}},I,null,[[0,7,11,19]])}));return function(I){return L.apply(this,arguments)}}(),w):(c.default._friendlyFileLoadError(3,h),w?w():c.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),T},c.default.prototype.model=function(h){this._assert3d("model"),c.default._validateParameters("model",arguments),0<h.vertices.length&&(this._renderer.geometryInHash(h.gid)||(h._edgesToVertices(),this._renderer.createBuffers(h.gid,h)),this._renderer.drawBuffers(h.gid))};var a=0,o=(c.default.prototype.createModel=function(h){var p,y,w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",E=2<arguments.length?arguments[2]:void 0,b=(c.default._validateParameters("createModel",arguments),!1),S=!1,k=!1,E=(E&&v(E)==="object"?(b=E.normalize||!1,p=E.successCallback,y=E.failureCallback,S=E.flipU||!1,k=E.flipV||!1):y=typeof E=="boolean"?(b=E,p=arguments[3],arguments[4]):(p=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new c.default.Geometry);if(E.gid="".concat(w,"|").concat(b,"|").concat(a++),w.match(/\.stl$/i))try{n(E,new TextEncoder().encode(h).buffer)}catch(T){return void(y?y(T):c.default._friendlyError("Error during parsing: "+T.message))}else if(w.match(/\.obj$/i))try{i(E,h.split(`
`))}catch(T){return void(y?y(T):c.default._friendlyError("Error during parsing: "+T.message))}else c.default._friendlyFileLoadError(3,h),y?y():c.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return b&&E.normalize(),S&&E.flipU(),k&&E.flipV(),E._makeTriangleEdges(),typeof p=="function"&&p(E),E},c.default);f.default=o},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(t,x,f){function u(i){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}function c(i){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(n){return u(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":u(n)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},d=function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var n=m();if(n&&n.has(i))return n.get(i);var a,o={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var p;Object.prototype.hasOwnProperty.call(i,a)&&((p=h?Object.getOwnPropertyDescriptor(i,a):null)&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=i[a])}return o.default=i,n&&n.set(i,o),o}(t("../core/constants"));function m(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,m=function(){return i},i)}t("./p5.Texture"),s.default.prototype.loadShader=function(i,n,a,o){s.default._validateParameters("loadShader",arguments),o=o||console.error;function h(){y._decrementPreload(),a&&a(p)}var p=new s.default.Shader,y=this,w=!1,b=!1;return this.loadStrings(i,function(S){p._vertSrc=S.join(`
`),b=!0,w&&h()},o),this.loadStrings(n,function(S){p._fragSrc=S.join(`
`),w=!0,b&&h()},o),p},s.default.prototype.createShader=function(i,n,a){return s.default._validateParameters("createShader",arguments),new s.default.Shader(this._renderer,i,n,a)},s.default.prototype.createFilterShader=function(i){s.default._validateParameters("createFilterShader",arguments);var n=i.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,n=new s.default.Shader(this._renderer,n,i);return this._renderer.GL?n.ensureCompiledOnContext(this):n.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),n},s.default.prototype.shader=function(i){return this._assert3d("shader"),s.default._validateParameters("shader",arguments),i.ensureCompiledOnContext(this),i.isStrokeShader()?this._renderer.userStrokeShader=i:(this._renderer.userFillShader=i,this._renderer._useNormalMaterial=!1),i.setDefaultUniforms(),this},s.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},s.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},s.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},s.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},s.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},s.default.prototype.texture=function(i){return this._assert3d("texture"),s.default._validateParameters("texture",arguments),i.gifProperties&&i._animateGif(this),this._renderer.drawMode=d.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=i,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.textureMode=function(i){i!==d.IMAGE&&i!==d.NORMAL?console.warn("You tried to set ".concat(i," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=i},s.default.prototype.textureWrap=function(i){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:i,a=(this._renderer.textureWrapX=i,this._renderer.textureWrapY=n,!0),o=!1,h=void 0;try{for(var p,y=this._renderer.textures.values()[Symbol.iterator]();!(a=(p=y.next()).done);a=!0)p.value.setWrapMode(i,n)}catch(w){o=!0,h=w}finally{try{a||y.return==null||y.return()}finally{if(o)throw h}}},s.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return s.default._validateParameters("normalMaterial",n),this._renderer.drawMode=d.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},s.default.prototype.ambientMaterial=function(i,n,a){this._assert3d("ambientMaterial"),s.default._validateParameters("ambientMaterial",arguments);var o=s.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=o._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},s.default.prototype.emissiveMaterial=function(i,n,a,o){this._assert3d("emissiveMaterial"),s.default._validateParameters("emissiveMaterial",arguments);var h=s.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=h._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},s.default.prototype.specularMaterial=function(i,n,a,o){this._assert3d("specularMaterial"),s.default._validateParameters("specularMaterial",arguments);var h=s.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=h._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},s.default.prototype.shininess=function(i){return this._assert3d("shininess"),s.default._validateParameters("shininess",arguments),this._renderer._useShininess=i=i<1?1:i,this},s.default.prototype.metalness=function(i){return this._assert3d("metalness"),i=1-Math.exp(-i/100),this._renderer._useMetalness=i,this},s.default.RendererGL.prototype._applyColorBlend=function(i,h){var a=this.GL,o=this.drawMode===d.TEXTURE,h=h||this.userFillShader||this.userStrokeShader||this.userPointShader||o||this.curBlendMode!==d.BLEND||i[i.length-1]<1||this._isErasing;return h!==this._isBlending&&(h||this.curBlendMode!==d.BLEND&&this.curBlendMode!==d.ADD?a.enable(a.BLEND):a.disable(a.BLEND),a.depthMask(!0),this._isBlending=h),this._applyBlendMode(),i},s.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var i=this.GL;switch(this.curBlendMode){case d.BLEND:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case d.ADD:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE);break;case d.REMOVE:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ZERO,i.ONE_MINUS_SRC_ALPHA);break;case d.MULTIPLY:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA);break;case d.SCREEN:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_COLOR);break;case d.EXCLUSION:i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE_MINUS_DST_COLOR,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE);break;case d.REPLACE:i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO);break;case d.SUBTRACT:i.blendEquationSeparate(i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case d.DARKEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case d.LIGHTEST:this.blendExt?(i.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var v=s.default;f.default=v},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(t,x,f){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(s,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}u.default.prototype.camera=function(){var s;this._assert3d("camera");for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return u.default._validateParameters("camera",m),(s=this._renderer._curCamera).camera.apply(s,m),this},u.default.prototype.perspective=function(){var s;this._assert3d("perspective");for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return u.default._validateParameters("perspective",m),(s=this._renderer._curCamera).perspective.apply(s,m),this},u.default.prototype.linePerspective=function(s){if(u.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof u.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(s===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=s},u.default.prototype.ortho=function(){var s;this._assert3d("ortho");for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return u.default._validateParameters("ortho",m),(s=this._renderer._curCamera).ortho.apply(s,m),this},u.default.prototype.frustum=function(){var s;this._assert3d("frustum");for(var d=arguments.length,m=new Array(d),v=0;v<d;v++)m[v]=arguments[v];return u.default._validateParameters("frustum",m),(s=this._renderer._curCamera).frustum.apply(s,m),this},u.default.prototype.createCamera=function(){this._assert3d("createCamera");var s=new u.default.Camera(this._renderer);return s._computeCameraDefaultSettings(),s._setDefaultCamera(),this._renderer._curCamera=s},u.default.Camera=function(){function s(v){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this._renderer=v,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new u.default.Matrix,this.projMatrix=new u.default.Matrix,this.yScale=1}var d,m;return d=s,(m=[{key:"perspective",value:function(o,i,n,a){this.cameraType=0<arguments.length?"custom":"default",o===void 0?(o=this.defaultCameraFOV,this.cameraFOV=o):this.cameraFOV=this._renderer._pInst._toRadians(o),i===void 0&&(i=this.defaultAspectRatio),n===void 0&&(n=this.defaultCameraNear),a===void 0&&(a=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),a<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=i,this.cameraNear=n,this.cameraFar=a,this.projMatrix=u.default.Matrix.identity();var o=1/Math.tan(this.cameraFOV/2),h=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(o/i,0,0,0,0,-o*this.yScale,0,0,0,0,(a+n)*h,-1,0,0,2*a*n*h,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(E,k,n,a,o,h){var T=this.fbo||this._renderer,T=(E===void 0&&(E=-T.width/2),k===void 0&&(k=+T.width/2),n===void 0&&(n=-T.height/2),a===void 0&&(a=+T.height/2),o===void 0&&(o=0),h===void 0&&(h=Math.max(T.width,T.height)+800),this.cameraNear=o,k-E),p=a-n,y=(this.cameraFar=h)-o,w=2/T,b=2/p*this.yScale,S=-2/y,k=-(k+E)/T,E=-(a+n)/p,T=-(h+o)/y;this.projMatrix=u.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-b,0,0,0,0,S,0,k,E,T,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(E,k,n,a,o,h){E===void 0&&(E=.05*-this._renderer.width),k===void 0&&(k=.05*+this._renderer.width),n===void 0&&(n=.05*+this._renderer.height),a===void 0&&(a=.05*-this._renderer.height),o===void 0&&(o=this.defaultCameraNear),h===void 0&&(h=this.defaultCameraFar),this.cameraNear=o;var T=k-E,p=a-n,y=(this.cameraFar=h)-o,w=2*o/T,b=2*o/p*this.yScale,S=-2*h*o/y,k=(k+E)/T,E=(a+n)/p,T=-(h+o)/y;this.projMatrix=u.default.Matrix.identity(),this.projMatrix.set(w,0,0,0,0,-b,0,0,k,E,T,-1,0,0,S,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(w,i,n,a){var o=this.centerX,h=this.centerY,p=this.centerZ,y=(o-=this.eyeX,h-=this.eyeY,p-=this.eyeZ,u.default.Matrix.identity(this._renderer._pInst)),w=(y.rotate(this._renderer._pInst._toRadians(w),i,n,a),[o*y.mat4[0]+h*y.mat4[4]+p*y.mat4[8],o*y.mat4[1]+h*y.mat4[5]+p*y.mat4[9],o*y.mat4[2]+h*y.mat4[6]+p*y.mat4[10]]);w[0]+=this.eyeX,w[1]+=this.eyeY,w[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,w[0],w[1],w[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(n){var i=this._getLocalAxes(),n=u.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(n),i.z[0],i.z[1],i.z[2]).rotateVector(new u.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,n.x,n.y,n.z)}},{key:"pan",value:function(v){var i=this._getLocalAxes();this._rotateView(v,i.y[0],i.y[1],i.y[2])}},{key:"tilt",value:function(v){var i=this._getLocalAxes();this._rotateView(v,i.x[0],i.x[1],i.x[2])}},{key:"lookAt",value:function(v,i,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,v,i,n,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(v,i,n,a,o,h,p,y,w){return v===void 0&&(v=this.defaultEyeX,i=this.defaultEyeY,n=this.defaultEyeZ,a=v,o=i,y=1,w=p=h=0),this.eyeX=v,this.eyeY=i,this.eyeZ=n,a!==void 0&&(this.centerX=a,this.centerY=o,this.centerZ=h),p!==void 0&&(this.upX=p,this.upY=y,this.upZ=w),a=this._getLocalAxes(),this.cameraMatrix.set(a.x[0],a.y[0],a.z[0],0,a.x[1],a.y[1],a.z[1],0,a.x[2],a.y[2],a.z[2],0,0,0,0,1),o=-v,this.cameraMatrix.translate([o,-i,-n]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(a,o,n){var h=this._getLocalAxes(),a=[h.x[0]*a,h.x[1]*a,h.x[2]*a],o=[h.y[0]*o,h.y[1]*o,h.y[2]*o],h=[h.z[0]*n,h.z[1]*n,h.z[2]*n];this.camera(this.eyeX+a[0]+o[0]+h[0],this.eyeY+a[1]+o[1]+h[1],this.eyeZ+a[2]+o[2]+h[2],this.centerX+a[0]+o[0]+h[0],this.centerY+a[1]+o[1]+h[1],this.centerZ+a[2]+o[2]+h[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(v,i,n){var a=v-this.eyeX,o=i-this.eyeY,h=n-this.eyeZ;this.camera(v,i,n,this.centerX+a,this.centerY+o,this.centerZ+h,this.upX,this.upY,this.upZ)}},{key:"set",value:function(v){for(var i=0,n=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];i<n.length;i++){var a=n[i];this[a]=v[a]}this.cameraMatrix=v.cameraMatrix.copy(),this.projMatrix=v.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(v,i,n){var a,o,h,p,y,w,b,S,k,E,T,R,O,M,L,I,B,V;n===0?this.set(v):n===1?this.set(i):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=v.projMatrix.mat4[0]*Math.pow(i.projMatrix.mat4[0]/v.projMatrix.mat4[0],n),this.projMatrix.mat4[5]=v.projMatrix.mat4[5]*Math.pow(i.projMatrix.mat4[5]/v.projMatrix.mat4[5],n),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),p=new u.default.Vector(v.eyeX,v.eyeY,v.eyeZ),y=new u.default.Vector(i.eyeX,i.eyeY,i.eyeZ),I=new u.default.Vector(v.centerX,v.centerY,v.centerZ),V=new u.default.Vector(i.centerX,i.centerY,i.centerZ),h=u.default.Vector.dist(p,I),a=u.default.Vector.dist(y,V),a=h*Math.pow(a/h,n),h=u.default.Vector.sub(p,y),o=1,1e-6<(B=(M=p.copy().sub(y).sub(I).add(V)).magSq())&&(o=u.default.Vector.dot(h,M)/B,o=Math.max(0,Math.min(o,1))),h=u.default.Vector.lerp(u.default.Vector.lerp(p,I,o),u.default.Vector.lerp(y,V,o),n),M=v.cameraMatrix.createSubMatrix3x3(),B=i.cameraMatrix.createSubMatrix3x3(),p=M.row(2),I=B.row(2),y=M.row(1),V=B.row(1),v=new u.default.Vector,i=new u.default.Vector,w=new u.default.Vector,b=new u.default.Vector,1-(S=.5*((M=(B=B.mult3x3(M.copy().transpose3x3())).diagonal())[0]+M[1]+M[2]-1))<1e-7?(v.set(u.default.Vector.lerp(p,I,n)).normalize(),w.set(v).mult(o*a).add(h),b.set(v).mult((o-1)*a).add(h),i.set(u.default.Vector.lerp(y,V,n)).normalize()):(I=1/(1-S),V=Math.max(M[0],M[1],M[2]),R=B.mat3[1]+B.mat3[3],O=B.mat3[2]+B.mat3[6],L=B.mat3[5]+B.mat3[7],V=V===M[0]?(E=.5*R*(I/=k=Math.sqrt((M[0]-S)*I)),T=.5*O*I,.5*(B.mat3[7]-B.mat3[5])/k):V===M[1]?(T=.5*L*(I/=E=Math.sqrt((M[1]-S)*I)),k=.5*R*I,.5*(B.mat3[2]-B.mat3[6])/E):(k=.5*O*(I/=T=Math.sqrt((M[2]-S)*I)),E=.5*L*I,.5*(B.mat3[3]-B.mat3[1])/T),R=n*Math.atan2(V,S),O=Math.cos(R),M=Math.sin(R),(V=new u.default.Matrix("mat3",[O+(L=1-O)*k*k,L*(I=k*E)+M*T,L*(B=T*k)-M*E,L*I-M*T,O+L*E*E,L*(n=E*T)+M*k,L*B+M*E,L*n-M*k,O+L*T*T])).multiplyVec3(p,v),w.set(v).mult(o*a).add(h),b.set(v).mult((o-1)*a).add(h),V.multiplyVec3(y,i)),this.camera(w.x,w.y,w.z,b.x,b.y,b.z,i.x,i.y,i.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var v=new u.default.Camera(this._renderer);return v.cameraFOV=this.cameraFOV,v.aspectRatio=this.aspectRatio,v.eyeX=this.eyeX,v.eyeY=this.eyeY,v.eyeZ=this.eyeZ,v.centerX=this.centerX,v.centerY=this.centerY,v.centerZ=this.centerZ,v.upX=this.upX,v.upY=this.upY,v.upZ=this.upZ,v.cameraNear=this.cameraNear,v.cameraFar=this.cameraFar,v.cameraType=this.cameraType,v.useLinePerspective=this.useLinePerspective,v.cameraMatrix=this.cameraMatrix.copy(),v.projMatrix=this.projMatrix.copy(),v.yScale=this.yScale,v}},{key:"_getLocalAxes",value:function(){var v=this.eyeX-this.centerX,i=this.eyeY-this.centerY,n=this.eyeZ-this.centerZ,p=Math.sqrt(v*v+i*i+n*n),p=(p!==0&&(v/=p,i/=p,n/=p),this.upX),a=(y=this.upY)*n-(w=this.upZ)*i,o=-p*n+w*v,h=p*i-y*v,p=i*h-n*o,y=-v*h+n*a,w=v*o-i*a,b=Math.sqrt(a*a+o*o+h*h),b=(b!==0&&(a/=b,o/=b,h/=b),Math.sqrt(p*p+y*y+w*w));return b!==0&&(p/=b,y/=b,w/=b),{x:[a,o,h],y:[p,y,w],z:[v,i,n]}}},{key:"_orbit",value:function(v,b,w){var o=this.eyeX-this.centerX,h=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,a=Math.hypot(o,h,p),o=new u.default.Vector(o,h,p).normalize(),h=new u.default.Vector(this.upX,this.upY,this.upZ).normalize(),p=u.default.Vector.cross(h,o).normalize(),y=u.default.Vector.cross(p,h),w=((a=(a*=Math.pow(10,w))<this.cameraNear?this.cameraNear:a)>this.cameraFar&&(a=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,u.default.Vector.dot(o,h))))+b),b=v;(w<=0||w>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),h.mult(Math.cos(w)),y.mult(Math.cos(b)*Math.sin(w)),p.mult(Math.sin(b)*Math.sin(w)),o.set(h).add(y).add(p),this.eyeX=a*o.x+this.centerX,this.eyeY=a*o.y+this.centerY,this.eyeZ=a*o.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(w,b,k){var o=this.eyeX-this.centerX,h=this.eyeY-this.centerY,p=this.eyeZ-this.centerZ,a=Math.hypot(o,h,p),o=new u.default.Vector(o,h,p).normalize(),h=new u.default.Vector(this.upX,this.upY,this.upZ),p=u.default.Vector.cross(h,o).normalize(),y=u.default.Vector.cross(o,p),E=Math.atan2(b,w),E=(y.mult(Math.sin(E)),p.mult(Math.cos(E)).add(y),Math.sqrt(w*w+b*b)),y=u.default.Vector.cross(o,p),w=((a=(a*=Math.pow(10,k))<this.cameraNear?this.cameraNear:a)>this.cameraFar&&(a=this.cameraFar),Math.cos(E)),b=Math.sin(E),k=h.dot(o),E=h.dot(p),S=k*w+E*b,k=-k*b+E*w,E=h.dot(y);h.x=S*o.x+k*p.x+E*y.x,h.y=S*o.y+k*p.y+E*y.y,h.z=S*o.z+k*p.z+E*y.z,p.mult(-b),o.mult(w).add(p).mult(a),this.camera(o.x+this.centerX,o.y+this.centerY,o.z+this.centerZ,this.centerX,this.centerY,this.centerZ,h.x,h.y,h.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&c(d.prototype,m),s}(),u.default.prototype.setCamera=function(s){this._renderer._curCamera=s,this._renderer.uPMatrix.set(s.projMatrix),this._renderer.uViewMatrix.set(s.cameraMatrix)},t=u.default.Camera,f.default=t},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(t,x,f){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function u(c,s){for(var d=0;d<s.length;d++){var m=s[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}t.default.DataArray=function(){function c(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,v=this,i=c;if(!(v instanceof i))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(m),this.initialLength=m}var s,d;return s=c,(d=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var m;this.length<this.data.length/2&&(m=1<<Math.ceil(Math.log2(this.length)),(m=new Float32Array(m)).set(this.data.subarray(0,this.length),0),this.data=m)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var m=arguments.length,v=new Array(m),i=0;i<m;i++)v[i]=arguments[i];this.ensureLength(this.length+v.length),this.data.set(v,this.length),this.length+=v.length}},{key:"slice",value:function(m,v){return this.data.slice(m,Math.min(v,this.length))}},{key:"subArray",value:function(m,v){return this.data.subarray(m,Math.min(v,this.length))}},{key:"ensureLength",value:function(m){for(;this.data.length<m;){var v=new Float32Array(2*this.data.length);v.set(this.data,0),this.data=v}}}])&&u(s.prototype,d),c}(),t=t.default.DataArray,f.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(R,x,f){function u(O){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(O)}function c(O){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(M){return u(M)}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":u(M)})(O)}R("core-js/modules/es.symbol"),R("core-js/modules/es.symbol.description"),R("core-js/modules/es.symbol.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-own-property-descriptor"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.reflect.construct"),R("core-js/modules/es.reflect.get"),R("core-js/modules/es.regexp.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.string.iterator"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),R("core-js/modules/es.weak-map"),R("core-js/modules/web.dom-collections.iterator"),R("core-js/modules/es.array.fill"),R("core-js/modules/es.array.includes"),R("core-js/modules/es.array.iterator"),R("core-js/modules/es.object.get-prototype-of"),R("core-js/modules/es.object.to-string"),R("core-js/modules/es.string.includes"),R("core-js/modules/es.typed-array.float32-array"),R("core-js/modules/es.typed-array.uint8-array"),R("core-js/modules/es.typed-array.uint8-clamped-array"),R("core-js/modules/es.typed-array.copy-within"),R("core-js/modules/es.typed-array.every"),R("core-js/modules/es.typed-array.fill"),R("core-js/modules/es.typed-array.filter"),R("core-js/modules/es.typed-array.find"),R("core-js/modules/es.typed-array.find-index"),R("core-js/modules/es.typed-array.for-each"),R("core-js/modules/es.typed-array.includes"),R("core-js/modules/es.typed-array.index-of"),R("core-js/modules/es.typed-array.iterator"),R("core-js/modules/es.typed-array.join"),R("core-js/modules/es.typed-array.last-index-of"),R("core-js/modules/es.typed-array.map"),R("core-js/modules/es.typed-array.reduce"),R("core-js/modules/es.typed-array.reduce-right"),R("core-js/modules/es.typed-array.reverse"),R("core-js/modules/es.typed-array.set"),R("core-js/modules/es.typed-array.slice"),R("core-js/modules/es.typed-array.some"),R("core-js/modules/es.typed-array.sort"),R("core-js/modules/es.typed-array.subarray"),R("core-js/modules/es.typed-array.to-locale-string"),R("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(T=R("../core/main"))&&T.__esModule?T:{default:T},d=function(O){if(O&&O.__esModule)return O;if(O===null||c(O)!=="object"&&typeof O!="function")return{default:O};var M=i();if(M&&M.has(O))return M.get(O);var L,I={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(L in O){var V;Object.prototype.hasOwnProperty.call(O,L)&&((V=B?Object.getOwnPropertyDescriptor(O,L):null)&&(V.get||V.set)?Object.defineProperty(I,L,V):I[L]=O[L])}return I.default=O,M&&M.set(O,I),I}(R("../core/constants")),m=R("./p5.Texture"),v=R("./p5.RendererGL");function i(){var O;return typeof WeakMap!="function"?null:(O=new WeakMap,i=function(){return O},O)}function n(O,M){return function(L){if(Array.isArray(L))return L}(O)||function(L,I){if(Symbol.iterator in Object(L)||Object.prototype.toString.call(L)==="[object Arguments]"){var B=[],V=!0,G=!1,Y=void 0;try{for(var H,W=L[Symbol.iterator]();!(V=(H=W.next()).done)&&(B.push(H.value),!I||B.length!==I);V=!0);}catch(K){G=!0,Y=K}finally{try{V||W.return==null||W.return()}finally{if(G)throw Y}}return B}}(O,M)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(O,M,L){return M in O?Object.defineProperty(O,M,{value:L,enumerable:!0,configurable:!0,writable:!0}):O[M]=L,O}function o(O,M){if(!(O instanceof M))throw new TypeError("Cannot call a class as a function")}function h(O,M){for(var L=0;L<M.length;L++){var I=M[L];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(O,I.key,I)}}function p(O,M,L){M&&h(O.prototype,M)}function y(O,M,L){return(y=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(G,B,V){var G=function(Y,H){for(;!Object.prototype.hasOwnProperty.call(Y,H)&&(Y=S(Y))!==null;);return Y}(G,B);if(G)return(G=Object.getOwnPropertyDescriptor(G,B)).get?G.get.call(V):G.value})(O,M,L||O)}function w(O,M){return(w=Object.setPrototypeOf||function(L,I){return L.__proto__=I,L})(O,M)}function b(O){return function(){var M,L=S(O),L=(M=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(M=S(this).constructor,Reflect.construct(L,arguments,M)):L.apply(this,arguments),this);if(!M||c(M)!=="object"&&typeof M!="function"){if(L!==void 0)return L;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return M}}function S(O){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(O)}var k=function(O){var M=I;if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(O&&O.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),O&&w(M,O);var L=b(I);function I(B){var V;return o(this,I),(V=L.call(this,B.target._renderer)).fbo=B,V.yScale=-1,V}return p(I,[{key:"_computeCameraDefaultSettings",value:function(){y(S(I.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),I}(s.default.Camera),E=(s.default.FramebufferCamera=k,function(){function O(M,L){o(this,O),this.framebuffer=M,this.property=L}return p(O,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),O}()),T=(s.default.FramebufferTexture=E,function(){function O(M){var L=this,I=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},B=(o(this,O),this.target=M,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=I.format||d.UNSIGNED_BYTE,this.channels=I.channels||(M._renderer._pInst._glAttributes.alpha?d.RGBA:d.RGB),this.useDepth=I.depth===void 0||I.depth,this.depthFormat=I.depthFormat||d.FLOAT,this.textureFiltering=I.textureFiltering||d.LINEAR,I.antialias===void 0?this.antialiasSamples=M._renderer._pInst._glAttributes.antialias?2:0:typeof I.antialias=="number"?this.antialiasSamples=I.antialias:this.antialiasSamples=I.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&M.webglVersion!==d.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=I.density||M.pixelDensity(),M._renderer.GL);if(this.gl=B,I.width&&I.height?(V=M._renderer._adjustDimensions(I.width,I.height),this.width=V.adjustedWidth,this.height=V.adjustedHeight,this._autoSized=!1):(I.width===void 0!=(I.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=M.width,this.height=M.height,this._autoSized=!0),this._checkIfFormatsAvailable(),I.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(I.stencil===void 0||I.stencil),this.framebuffer=B.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=B.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var V=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=V,this.draw(function(){return L.target.clear()})}return p(O,[{key:"resize",value:function(M,L){this._autoSized=!1;var I=this.target._renderer._adjustDimensions(M,L);M=I.adjustedWidth,L=I.adjustedHeight,this.width=M,this.height=L,this._handleResize()}},{key:"pixelDensity",value:function(M){if(!M)return this.density;this._autoSized=!1,this.density=M,this._handleResize()}},{key:"autoSized",value:function(M){if(M===void 0)return this._autoSized;this._autoSized=M,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var M=this.gl,M=(this.useDepth&&this.target.webglVersion===d.WEBGL&&!M.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===d.WEBGL&&this.depthFormat===d.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),[d.UNSIGNED_BYTE,d.FLOAT,d.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&![d.UNSIGNED_INT,d.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=d.FLOAT),(0,m.checkWebGLCapabilities)(this.target._renderer));M.float||this.format!==d.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.useDepth&&!M.float&&this.depthFormat===d.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=d.UNSIGNED_INT),M.halfFloat||this.format!==d.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=d.UNSIGNED_BYTE),this.channels===d.RGB&&[d.FLOAT,d.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=d.RGBA)}},{key:"_recreateTextures",value:function(){var M=this.gl,L=(this._updateSize(),M.getParameter(M.TEXTURE_BINDING_2D)),I=M.getParameter(M.FRAMEBUFFER_BINDING),B=M.createTexture();if(!B)throw new Error("Unable to create color texture");M.bindTexture(M.TEXTURE_2D,B);var V=this._glColorFormat();if(M.texImage2D(M.TEXTURE_2D,0,V.internalFormat,this.width*this.density,this.height*this.density,0,V.format,V.type,null),this.colorTexture=B,M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,B,0),this.useDepth){var B=M.createTexture();if(!B)throw new Error("Unable to create depth texture");var G=this._glDepthFormat();M.bindTexture(M.TEXTURE_2D,B),M.texImage2D(M.TEXTURE_2D,0,G.internalFormat,this.width*this.density,this.height*this.density,0,G.format,G.type,null),M.framebufferTexture2D(M.FRAMEBUFFER,this.useStencil?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT,M.TEXTURE_2D,B,0),this.depthTexture=B}this.antialias&&(this.colorRenderbuffer=M.createRenderbuffer(),M.bindRenderbuffer(M.RENDERBUFFER,this.colorRenderbuffer),M.renderbufferStorageMultisample(M.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,M.getParameter(M.MAX_SAMPLES))),V.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(G=this._glDepthFormat(),this.depthRenderbuffer=M.createRenderbuffer(),M.bindRenderbuffer(M.RENDERBUFFER,this.depthRenderbuffer),M.renderbufferStorageMultisample(M.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,M.getParameter(M.MAX_SAMPLES))),G.internalFormat,this.width*this.density,this.height*this.density)),M.bindFramebuffer(M.FRAMEBUFFER,this.aaFramebuffer),M.framebufferRenderbuffer(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&M.framebufferRenderbuffer(M.FRAMEBUFFER,this.useStencil?M.DEPTH_STENCIL_ATTACHMENT:M.DEPTH_ATTACHMENT,M.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new E(this,"depthTexture"),B=M.NEAREST,this.depthP5Texture=new s.default.Texture(this.target._renderer,this.depth,{minFilter:B,magFilter:B}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new E(this,"colorTexture"),V=this.textureFiltering===d.LINEAR?M.LINEAR:M.NEAREST,this.colorP5Texture=new s.default.Texture(this.target._renderer,this.color,{minFilter:V,magFilter:V}),this.target._renderer.textures.set(this.color,this.colorP5Texture),M.bindTexture(M.TEXTURE_2D,L),M.bindFramebuffer(M.FRAMEBUFFER,I)}},{key:"_glColorFormat",value:function(){var M,L,I=this.gl,B=this.format===d.FLOAT?I.FLOAT:this.format===d.HALF_FLOAT?this.target.webglVersion===d.WEBGL2?I.HALF_FLOAT:I.getExtension("OES_texture_half_float").HALF_FLOAT_OES:I.UNSIGNED_BYTE,V=this.channels===d.RGBA?I.RGBA:I.RGB;return{internalFormat:this.target.webglVersion===d.WEBGL2?(a(L={},I.FLOAT,a({},I.RGBA,I.RGBA32F)),a(L,I.HALF_FLOAT,a({},I.RGBA,I.RGBA16F)),a(L,I.UNSIGNED_BYTE,(a(M={},I.RGBA,I.RGBA8),a(M,I.RGB,I.RGB8),M)),L[B][V]):this.format===d.HALF_FLOAT?I.RGBA:V,format:V,type:B}}},{key:"_glDepthFormat",value:function(){var I=this.gl,M=this.useStencil?this.depthFormat===d.FLOAT?I.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===d.WEBGL2?I.UNSIGNED_INT_24_8:I.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===d.FLOAT?I.FLOAT:I.UNSIGNED_INT,L=this.useStencil?I.DEPTH_STENCIL:I.DEPTH_COMPONENT,I=this.useStencil?this.depthFormat===d.FLOAT?I.DEPTH32F_STENCIL8:this.target.webglVersion===d.WEBGL2?I.DEPTH24_STENCIL8:I.DEPTH_STENCIL:this.target.webglVersion===d.WEBGL2?this.depthFormat===d.FLOAT?I.DEPTH_COMPONENT32F:I.DEPTH_COMPONENT24:I.DEPTH_COMPONENT;return{internalFormat:I,format:L,type:M}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var B=this.color,M=this.depth,L=this.colorRenderbuffer,I=this.depthRenderbuffer,B=(this._deleteTexture(B),M&&this._deleteTexture(M),this.gl);L&&B.deleteRenderbuffer(L),I&&B.deleteRenderbuffer(I),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var M=new k(this);return M._computeCameraDefaultSettings(),M._setDefaultCamera(),this.target._renderer._curCamera=M}},{key:"_deleteTexture",value:function(M){this.gl.deleteTexture(M.rawTexture()),this.target._renderer.textures.delete(M)}},{key:"remove",value:function(){var M=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),M.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&M.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&M.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&M.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var M=this.gl,L=(M.bindFramebuffer(M.READ_FRAMEBUFFER,this.aaFramebuffer),M.bindFramebuffer(M.DRAW_FRAMEBUFFER,this.framebuffer),[[M.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&L.push([M.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var I=0,B=L;I<B.length;I++){var G=n(B[I],2),V=G[0],G=G[1];M.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,V,G)}}}},{key:"end",value:function(){var M=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(M.bindFramebuffer(M.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(M){this.begin(),M(),this.end()}},{key:"loadPixels",value:function(){var M=this.gl,L=this.target._renderer.activeFramebuffer(),I=(M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,v.readPixelsWebGL)(this.pixels,M,this.framebuffer,0,0,this.width*this.density,this.height*this.density,I.format,I.type),L?M.bindFramebuffer(M.FRAMEBUFFER,L._framebufferToBind()):M.bindFramebuffer(M.FRAMEBUFFER,null)}},{key:"get",value:function(M,L,I,B){s.default._validateParameters("p5.Framebuffer.get",arguments);var V=this._glColorFormat();if(M===void 0&&L===void 0)L=M=0,I=this.width,B=this.height;else if(I===void 0&&B===void 0)return(M<0||L<0||M>=this.width||L>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),M=this.target.constrain(M,0,this.width-1),L=this.target.constrain(L,0,this.height-1)),(0,v.readPixelWebGL)(this.gl,this.framebuffer,M*this.density,L*this.density,V.format,V.type);M=this.target.constrain(M,0,this.width-1),L=this.target.constrain(L,0,this.height-1),I=this.target.constrain(I,1,this.width-M),B=this.target.constrain(B,1,this.height-L);for(var G=(0,v.readPixelsWebGL)(void 0,this.gl,this.framebuffer,M*this.density,L*this.density,I*this.density,B*this.density,V.format,V.type),Y=new Uint8ClampedArray(I*B*this.density*this.density*4),H=(Y.fill(255),V.type===this.gl.RGB?3:4),W=0;W<B*this.density;W++)for(var K=0;K<I*this.density;K++)for(var Q=0;Q<4;Q++){var se,A=4*(W*I*this.density+K)+Q;Q<H&&(se=H==4?A:(W*I*this.density+K)*H+Q,Y[A]=G[se])}return M=new s.default.Image(I*this.density,B*this.density),M.imageData=M.canvas.getContext("2d").createImageData(M.width,M.height),M.imageData.data.set(Y),M.pixels=M.imageData.data,M.updatePixels(),this.density!==1&&M.resize(I,B),M}},{key:"updatePixels",value:function(){var M=this.gl,L=(this.colorP5Texture.bindTexture(),this._glColorFormat()),I=L.format===M.RGBA?4:3,I=this.width*this.height*this.density*this.density*I,B=L.type===M.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof B)||this.pixels.length!==I)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");M.texImage2D(M.TEXTURE_2D,0,L.internalFormat,this.width*this.density,this.height*this.density,0,L.format,L.type,this.pixels),this.colorP5Texture.unbindTexture(),B=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(M.clearDepth(1),M.clear(M.DEPTH_BUFFER_BIT)),this.end()):(M.bindFramebuffer(M.FRAMEBUFFER,this.framebuffer),this.useDepth&&(M.clearDepth(1),M.clear(M.DEPTH_BUFFER_BIT)),B?M.bindFramebuffer(M.FRAMEBUFFER,B._framebufferToBind()):M.bindFramebuffer(M.FRAMEBUFFER,null))}}]),O}()),R=s.default.Framebuffer=T;f.default=R},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(t,x,f){function u(o){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(o)}function c(o){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(h){return u(h)}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":u(h)})(o)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(a=t("../core/main"))&&a.__esModule?a:{default:a},d=function(o){if(o&&o.__esModule)return o;if(o===null||c(o)!=="object"&&typeof o!="function")return{default:o};var h=m();if(h&&h.has(o))return h.get(o);var p,y={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(p in o){var b;Object.prototype.hasOwnProperty.call(o,p)&&((b=w?Object.getOwnPropertyDescriptor(o,p):null)&&(b.get||b.set)?Object.defineProperty(y,p,b):y[p]=o[p])}return y.default=o,h&&h.set(o,y),y}(t("../core/constants"));function m(){var o;return typeof WeakMap!="function"?null:(o=new WeakMap,m=function(){return o},o)}function v(o){return function(h){if(Array.isArray(h)){for(var p=0,y=new Array(h.length);p<h.length;p++)y[p]=h[p];return y}}(o)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(o,h){return function(p){if(Array.isArray(p))return p}(o)||function(p,y){if(Symbol.iterator in Object(p)||Object.prototype.toString.call(p)==="[object Arguments]"){var w=[],b=!0,S=!1,k=void 0;try{for(var E,T=p[Symbol.iterator]();!(b=(E=T.next()).done)&&(w.push(E.value),!y||w.length!==y);b=!0);}catch(R){S=!0,k=R}finally{try{b||T.return==null||T.return()}finally{if(S)throw k}}return w}}(o,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(o,h){for(var p=0;p<h.length;p++){var y=h[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(o,y.key,y)}}s.default.Geometry=function(){function o(y,w,b){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new s.default.DataArray,this.lineTangentsIn=new s.default.DataArray,this.lineTangentsOut=new s.default.DataArray,this.lineSides=new s.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new s.default.DataArray,this.detailX=y!==void 0?y:1,this.detailY=w!==void 0?w:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,b instanceof Function&&b.call(this)}var h,p;return h=o,(p=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var y=new s.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),w=new s.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),b=0;b<this.vertices.length;b++){var S=this.vertices[b];y.x=Math.min(y.x,S.x),y.y=Math.min(y.y,S.y),y.z=Math.min(y.z,S.z),w.x=Math.max(w.x,S.x),w.y=Math.max(w.y,S.y),w.z=Math.max(w.z,S.z)}var k=new s.default.Vector(w.x-y.x,w.y-y.y,w.z-y.z),E=new s.default.Vector((y.x+w.x)/2,(y.y+w.y)/2,(y.z+w.z)/2);this.boundingBoxCache={min:y,max:w,size:k,offset:E}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var y=0;y<this.vertexColors.length;y+=4)if(this.vertexColors[y+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var y=0;y<this.lineVertexColors.length;y+=4)if(this.lineVertexColors[y+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var y=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",b="";if(this.vertices.forEach(function(E){b+="v ".concat(E.x," ").concat(E.y," ").concat(E.z,`
`)}),this.uvs&&0<this.uvs.length)for(var S=0;S<this.uvs.length;S+=2)b+="vt ".concat(this.uvs[S]," ").concat(this.uvs[S+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(E){b+="vn ".concat(E.x," ").concat(E.y," ").concat(E.z,`
`)}),this.faces.forEach(function(E){var T="f";E.forEach(function(R){T=T+" "+(R+1),(0<y.vertexNormals.length||0<y.uvs.length)&&(T+="/",0<y.uvs.length&&(T+=R+1),T+="/",0<y.vertexNormals.length&&(T+=R+1))}),b+=T+`
`});var k=new Blob([b],{type:"text/plain"});s.default.prototype.downloadFile(k,w,"obj")}},{key:"saveStl",value:function(){var y=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",w=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,w=w!==void 0&&w,b=y.substring(0,y.lastIndexOf(".")),S=[],k=!0,E=!1,T=void 0;try{for(var R,O=this.faces[Symbol.iterator]();!(k=(R=O.next()).done);k=!0){var M=R.value,L=s.default.Vector.sub(this.vertices[M[1]],this.vertices[M[0]]),I=s.default.Vector.sub(this.vertices[M[2]],this.vertices[M[0]]),B=L.y*I.z-L.z*I.y,V=L.z*I.x-L.x*I.z,G=L.x*I.y-L.y*I.x;S.push(new s.default.Vector(B,V,G).normalize())}}catch(we){E=!0,T=we}finally{try{k||O.return==null||O.return()}finally{if(E)throw T}}if(w){var Y,H=80,E=2*this.faces.length+3*this.faces.length*4*4+80+4,T=new ArrayBuffer(E);(Y=new DataView(T)).setUint32(H,this.faces.length,!0),H+=4;for(var W=0,K=Object.entries(this.faces);W<K.length;W++){var Q=i(K[W],2),A=Q[0],Q=Q[1],A=S[A],se=(Y.setFloat32(H,A.x,!0),H+=4,Y.setFloat32(H,A.y,!0),H+=4,Y.setFloat32(H,A.z,!0),H+=4,!0),A=!1,z=void 0;try{for(var q,$=Q[Symbol.iterator]();!(se=(q=$.next()).done);se=!0){var ie=q.value,re=this.vertices[ie];Y.setFloat32(H,re.x,!0),H+=4,Y.setFloat32(H,re.y,!0),H+=4,Y.setFloat32(H,re.z,!0),H+=4}}catch(He){A=!0,z=He}finally{try{se||$.return==null||$.return()}finally{if(A)throw z}}Y.setUint16(H,0,!0),H+=2}}else{Y="solid "+b+`
`;for(var fe=0,ge=Object.entries(this.faces);fe<ge.length;fe++){var de=i(ge[fe],2),_e=de[0],de=de[1],_e=S[_e],me=(Y=Y+(" facet norm "+_e.x+" "+_e.y+" "+_e.z+`
`)+`  outer loop
`,!0),_e=!1,ae=void 0;try{for(var he,be=de[Symbol.iterator]();!(me=(he=be.next()).done);me=!0){var ke=he.value,xe=this.vertices[ke];Y+="   vertex "+xe.x+" "+xe.y+" "+xe.z+`
`}}catch(we){_e=!0,ae=we}finally{try{me||be.return==null||be.return()}finally{if(_e)throw ae}}Y=Y+`  endloop
 endfacet
`}Y+="endsolid "+b+`
`}w=new Blob([Y],{type:"text/plain"}),s.default.prototype.downloadFile(w,y,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(y,w){return w%2==0?1-y:y})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(y,w){return w%2==0?y:1-y})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var y,w,b,S=this.detailX+1,k=0;k<this.detailY;k++)for(var E=0;E<this.detailX;E++)w=(k+1)*S+E+1,this.faces.push([k*S+E,y=k*S+E+1,b=(k+1)*S+E]),this.faces.push([b,y,w]);return this}},{key:"_getFaceNormal",value:function(w){var w=this.faces[w],b=this.vertices[w[0]],k=this.vertices[w[1]],w=this.vertices[w[2]],k=s.default.Vector.sub(k,b),w=s.default.Vector.sub(w,b),b=s.default.Vector.cross(k,w),S=s.default.Vector.mag(b),k=S/(s.default.Vector.mag(k)*s.default.Vector.mag(w));return k===0||isNaN(k)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),b):(1<k&&(k=1),b.mult(Math.asin(k)/S))}},{key:"computeNormals",value:function(){var y,w=this,b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:d.FLAT,S=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,k=this.vertexNormals,E=this.vertices,T=this.faces;if(b===d.SMOOTH){for(var R={},O=[],M=Math.pow(10,S===void 0?3:S),L=function(Y){return Math.round(Y*M)/M},I=function(Y){return"".concat(L(Y.x),",").concat(L(Y.y),",").concat(L(Y.z))},B=0;B<E.length;B++){var V=E[B],G=I(V);R[G]===void 0&&(R[G]=O.length,O.push(V))}T.forEach(function(Y){for(var H=0;H<3;++H){var W=Y[H],W=E[W],W=I(W);Y[H]=R[W]}}),this.edges.forEach(function(Y){for(var H=0;H<2;++H){var W=Y[H],W=E[W],W=I(W);Y[H]=R[W]}}),this.vertices=E=O}for(y=k.length=0;y<E.length;++y)k.push(new s.default.Vector);for(T.forEach(function(Y,H){for(var W=w._getFaceNormal(H),K=0;K<3;++K){var Q=Y[K];k[Q].add(W)}}),y=0;y<E.length;++y)k[y].normalize();return this}},{key:"averageNormals",value:function(){for(var y=0;y<=this.detailY;y++){var w=this.detailX+1,b=s.default.Vector.add(this.vertexNormals[y*w],this.vertexNormals[y*w+this.detailX]),b=s.default.Vector.div(b,2);this.vertexNormals[y*w]=b,this.vertexNormals[y*w+this.detailX]=b}return this}},{key:"averagePoleNormals",value:function(){for(var y=new s.default.Vector(0,0,0),w=0;w<this.detailX;w++)y.add(this.vertexNormals[w]);for(var y=s.default.Vector.div(y,this.detailX),b=0;b<this.detailX;b++)this.vertexNormals[b]=y;y=new s.default.Vector(0,0,0);for(var S=this.vertices.length-1;S>this.vertices.length-1-this.detailX;S--)y.add(this.vertexNormals[S]);y=s.default.Vector.div(y,this.detailX);for(var k=this.vertices.length-1;k>this.vertices.length-1-this.detailX;k--)this.vertexNormals[k]=y;return this}},{key:"_makeTriangleEdges",value:function(){for(var y=this.edges.length=0;y<this.faces.length;y++)this.edges.push([this.faces[y][0],this.faces[y][1]]),this.edges.push([this.faces[y][1],this.faces[y][2]]),this.edges.push([this.faces[y][2],this.faces[y][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var y,w=new Map,b=new Set,S=0;S<this.edges.length;S++){var k,E=this.edges[S-1],T=this.edges[S],R=this.vertices[T[0]],O=this.vertices[T[1]],M=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*T[0],4*(T[0]+1)):[0,0,0,0],L=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*T[1],4*(T[1]+1)):[0,0,0,0],I=O.copy().sub(R).normalize(),B=0<I.magSq();B&&this._addSegment(R,O,M,L,I),0<S&&E[1]===T[0]?b.has(T[0])||(b.add(T[0]),w.delete(T[0]),y&&B&&I.dot(y)<1-1e-8&&this._addJoin(R,y,I,M)):(B&&!b.has(T[0])&&((k=w.get(T[0]))?(this._addJoin(R,k.dir,I,M),w.delete(T[0]),b.add(T[0])):w.set(T[0],{point:R,dir:I.copy().mult(-1),color:M})),y&&!b.has(E[1])&&((k=w.get(E[1]))?(this._addJoin(this.vertices[E[1]],y,k.dir.copy().mult(-1),M),w.delete(E[1]),b.add(E[1])):w.set(E[1],{point:this.vertices[E[1]],dir:y,color:M}),y=void 0)),S!==this.edges.length-1||b.has(T[1])||((R=w.get(T[1]))?(this._addJoin(O,I,R.dir.copy().mult(-1),L),w.delete(T[1]),b.add(T[1])):w.set(T[1],{point:O,dir:I,color:L})),B&&(y=I)}var V=!0,G=!1,Y=void 0;try{for(var H,W=w.values()[Symbol.iterator]();!(V=(H=W.next()).done);V=!0){var K=H.value,Q=K.point,se=K.dir,A=K.color;this._addCap(Q,se,A)}}catch(z){G=!0,Y=z}finally{try{V||W.return==null||W.return()}finally{if(G)throw Y}}return this}},{key:"_addSegment",value:function(E,T,b,S,k){var E=E.array(),T=T.array(),R=k.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var O=0,M=[this.lineTangentsIn,this.lineTangentsOut];O<M.length;O++)for(var L=M[O],I=0;I<6;I++)L.push.apply(L,v(R));return(k=this.lineVertices).push.apply(k,v(E).concat(v(T),v(E),v(T),v(T),v(E))),(k=this.lineVertexColors).push.apply(k,v(b).concat(v(S),v(b),v(S),v(S),v(b))),this}},{key:"_addCap",value:function(y,w,b){for(var S,k=y.array(),E=w.array(),T=[0,0,0],R=0;R<6;R++)(S=this.lineVertices).push.apply(S,v(k)),(S=this.lineTangentsIn).push.apply(S,v(E)),(S=this.lineTangentsOut).push.apply(S,T),(S=this.lineVertexColors).push.apply(S,v(b));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(y,w,b,S){for(var k,E=y.array(),T=w.array(),R=b.array(),O=0;O<12;O++)(k=this.lineVertices).push.apply(k,v(E)),(k=this.lineTangentsIn).push.apply(k,v(T)),(k=this.lineTangentsOut).push.apply(k,v(R)),(k=this.lineVertexColors).push.apply(k,v(S));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var y=this.vertices[0].copy(),w=this.vertices[0].copy(),b=0;b<this.vertices.length;b++)y.x=Math.max(y.x,this.vertices[b].x),w.x=Math.min(w.x,this.vertices[b].x),y.y=Math.max(y.y,this.vertices[b].y),w.y=Math.min(w.y,this.vertices[b].y),y.z=Math.max(y.z,this.vertices[b].z),w.z=Math.min(w.z,this.vertices[b].z);for(var S=s.default.Vector.lerp(y,w,.5),k=s.default.Vector.sub(y,w),E=200/Math.max(Math.max(k.x,k.y),k.z),T=0;T<this.vertices.length;T++)this.vertices[T].sub(S),this.vertices[T].mult(E)}return this}}])&&n(h.prototype,p),o}();var a=s.default.Geometry;f.default=a},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(m,x,f){m("core-js/modules/es.array.iterator"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.typed-array.float32-array"),m("core-js/modules/es.typed-array.copy-within"),m("core-js/modules/es.typed-array.every"),m("core-js/modules/es.typed-array.fill"),m("core-js/modules/es.typed-array.filter"),m("core-js/modules/es.typed-array.find"),m("core-js/modules/es.typed-array.find-index"),m("core-js/modules/es.typed-array.for-each"),m("core-js/modules/es.typed-array.includes"),m("core-js/modules/es.typed-array.index-of"),m("core-js/modules/es.typed-array.iterator"),m("core-js/modules/es.typed-array.join"),m("core-js/modules/es.typed-array.last-index-of"),m("core-js/modules/es.typed-array.map"),m("core-js/modules/es.typed-array.reduce"),m("core-js/modules/es.typed-array.reduce-right"),m("core-js/modules/es.typed-array.reverse"),m("core-js/modules/es.typed-array.set"),m("core-js/modules/es.typed-array.slice"),m("core-js/modules/es.typed-array.some"),m("core-js/modules/es.typed-array.sort"),m("core-js/modules/es.typed-array.subarray"),m("core-js/modules/es.typed-array.to-locale-string"),m("core-js/modules/es.typed-array.to-string"),m("core-js/modules/es.array.iterator"),m("core-js/modules/es.object.to-string"),m("core-js/modules/es.typed-array.float32-array"),m("core-js/modules/es.typed-array.copy-within"),m("core-js/modules/es.typed-array.every"),m("core-js/modules/es.typed-array.fill"),m("core-js/modules/es.typed-array.filter"),m("core-js/modules/es.typed-array.find"),m("core-js/modules/es.typed-array.find-index"),m("core-js/modules/es.typed-array.for-each"),m("core-js/modules/es.typed-array.includes"),m("core-js/modules/es.typed-array.index-of"),m("core-js/modules/es.typed-array.iterator"),m("core-js/modules/es.typed-array.join"),m("core-js/modules/es.typed-array.last-index-of"),m("core-js/modules/es.typed-array.map"),m("core-js/modules/es.typed-array.reduce"),m("core-js/modules/es.typed-array.reduce-right"),m("core-js/modules/es.typed-array.reverse"),m("core-js/modules/es.typed-array.set"),m("core-js/modules/es.typed-array.slice"),m("core-js/modules/es.typed-array.some"),m("core-js/modules/es.typed-array.sort"),m("core-js/modules/es.typed-array.subarray"),m("core-js/modules/es.typed-array.to-locale-string"),m("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(m=m("../core/main"))&&m.__esModule?m:{default:m};function c(v,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(v,a.key,a)}}var s=Array,d=function(v){return Array.isArray(v)},m=(typeof Float32Array<"u"&&(s=Float32Array,d=function(v){return Array.isArray(v)||v instanceof Float32Array}),u.default.Matrix=function(){function v(){var o=this,h=v;if(o instanceof h)return arguments.length&&((o=arguments.length-1)<0||arguments.length<=o?void 0:arguments[o])instanceof u.default&&(this.p5=(h=arguments.length-1)<0||arguments.length<=h?void 0:arguments[h]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new s([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var i,n,a;return i=v,a=[{key:"identity",value:function(o){return new u.default.Matrix(o)}}],(n=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(o){var h=arguments;if(o instanceof u.default.Matrix?h=o.mat4:d(o)&&(h=o),h.length!==16)u.default._friendlyError("Expected 16 values but received ".concat(h.length,"."),"p5.Matrix.set");else for(var p=0;p<16;p++)this.mat4[p]=h[p];return this}},{key:"get",value:function(){return new u.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var o;return this.mat3!==void 0?((o=new u.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],o.mat3[1]=this.mat3[1],o.mat3[2]=this.mat3[2],o.mat3[3]=this.mat3[3],o.mat3[4]=this.mat3[4],o.mat3[5]=this.mat3[5],o.mat3[6]=this.mat3[6],o.mat3[7]=this.mat3[7],o.mat3[8]=this.mat3[8]):((o=new u.default.Matrix(this.p5)).mat4[0]=this.mat4[0],o.mat4[1]=this.mat4[1],o.mat4[2]=this.mat4[2],o.mat4[3]=this.mat4[3],o.mat4[4]=this.mat4[4],o.mat4[5]=this.mat4[5],o.mat4[6]=this.mat4[6],o.mat4[7]=this.mat4[7],o.mat4[8]=this.mat4[8],o.mat4[9]=this.mat4[9],o.mat4[10]=this.mat4[10],o.mat4[11]=this.mat4[11],o.mat4[12]=this.mat4[12],o.mat4[13]=this.mat4[13],o.mat4[14]=this.mat4[14],o.mat4[15]=this.mat4[15]),o}},{key:"transpose",value:function(o){var h,p,y,w,b,S;return o instanceof u.default.Matrix?(h=o.mat4[1],p=o.mat4[2],y=o.mat4[3],w=o.mat4[6],b=o.mat4[7],S=o.mat4[11],this.mat4[0]=o.mat4[0],this.mat4[1]=o.mat4[4],this.mat4[2]=o.mat4[8],this.mat4[3]=o.mat4[12],this.mat4[4]=h,this.mat4[5]=o.mat4[5],this.mat4[6]=o.mat4[9],this.mat4[7]=o.mat4[13],this.mat4[8]=p,this.mat4[9]=w,this.mat4[10]=o.mat4[10],this.mat4[11]=o.mat4[14],this.mat4[12]=y,this.mat4[13]=b,this.mat4[14]=S,this.mat4[15]=o.mat4[15]):d(o)&&(h=o[1],p=o[2],y=o[3],w=o[6],b=o[7],S=o[11],this.mat4[0]=o[0],this.mat4[1]=o[4],this.mat4[2]=o[8],this.mat4[3]=o[12],this.mat4[4]=h,this.mat4[5]=o[5],this.mat4[6]=o[9],this.mat4[7]=o[13],this.mat4[8]=p,this.mat4[9]=w,this.mat4[10]=o[10],this.mat4[11]=o[14],this.mat4[12]=y,this.mat4[13]=b,this.mat4[14]=S,this.mat4[15]=o[15]),this}},{key:"invert",value:function(G){G instanceof u.default.Matrix?(h=G.mat4[0],p=G.mat4[1],y=G.mat4[2],w=G.mat4[3],b=G.mat4[4],S=G.mat4[5],k=G.mat4[6],E=G.mat4[7],T=G.mat4[8],R=G.mat4[9],O=G.mat4[10],M=G.mat4[11],L=G.mat4[12],I=G.mat4[13],B=G.mat4[14],V=G.mat4[15]):d(G)&&(h=G[0],p=G[1],y=G[2],w=G[3],b=G[4],S=G[5],k=G[6],E=G[7],T=G[8],R=G[9],O=G[10],M=G[11],L=G[12],I=G[13],B=G[14],V=G[15]);var h,p,y,w,b,S,k,E,T,R,O,M,L,I,B,V,G=h*S-p*b,Y=h*k-y*b,H=h*E-w*b,W=p*k-y*S,K=p*E-w*S,Q=y*E-w*k,se=T*I-R*L,A=T*B-O*L,z=T*V-M*L,q=R*B-O*I,$=R*V-M*I,ie=O*V-M*B,re=G*ie-Y*$+H*q+W*z-K*A+Q*se;return re?(this.mat4[0]=(S*ie-k*$+E*q)*(re=1/re),this.mat4[1]=(y*$-p*ie-w*q)*re,this.mat4[2]=(I*Q-B*K+V*W)*re,this.mat4[3]=(O*K-R*Q-M*W)*re,this.mat4[4]=(k*z-b*ie-E*A)*re,this.mat4[5]=(h*ie-y*z+w*A)*re,this.mat4[6]=(B*H-L*Q-V*Y)*re,this.mat4[7]=(T*Q-O*H+M*Y)*re,this.mat4[8]=(b*$-S*z+E*se)*re,this.mat4[9]=(p*z-h*$-w*se)*re,this.mat4[10]=(L*K-I*H+V*G)*re,this.mat4[11]=(R*H-T*K-M*G)*re,this.mat4[12]=(S*A-b*q-k*se)*re,this.mat4[13]=(h*q-p*A+y*se)*re,this.mat4[14]=(I*Y-L*W-B*G)*re,this.mat4[15]=(T*W-R*Y+O*G)*re,this):null}},{key:"invert3x3",value:function(){var o=this.mat3[0],h=this.mat3[1],p=this.mat3[2],y=this.mat3[3],w=this.mat3[4],b=this.mat3[5],S=this.mat3[6],k=this.mat3[7],E=this.mat3[8],T=E*w-b*k,R=-E*y+b*S,O=k*y-w*S,M=o*T+h*R+p*O;return M?(this.mat3[0]=T*(M=1/M),this.mat3[1]=(-E*h+p*k)*M,this.mat3[2]=(b*h-p*w)*M,this.mat3[3]=R*M,this.mat3[4]=(E*o-p*S)*M,this.mat3[5]=(-b*o+p*y)*M,this.mat3[6]=O*M,this.mat3[7]=(-k*o+h*S)*M,this.mat3[8]=(w*o-h*y)*M,this):null}},{key:"transpose3x3",value:function(o){var h=(o=o===void 0?this.mat3:o)[1],p=o[2],y=o[5];return this.mat3[0]=o[0],this.mat3[1]=o[3],this.mat3[2]=o[6],this.mat3[3]=h,this.mat3[4]=o[4],this.mat3[5]=o[7],this.mat3[6]=p,this.mat3[7]=y,this.mat3[8]=o[8],this}},{key:"inverseTranspose",value:function(o){if(o=o.mat4,this.mat3===void 0?u.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=o[0],this.mat3[1]=o[1],this.mat3[2]=o[2],this.mat3[3]=o[4],this.mat3[4]=o[5],this.mat3[5]=o[6],this.mat3[6]=o[8],this.mat3[7]=o[9],this.mat3[8]=o[10]),o=this.invert3x3(),o)o.transpose3x3(this.mat3);else for(var h=0;h<9;h++)this.mat3[h]=0;return this}},{key:"determinant",value:function(){var o=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],h=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],p=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],y=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],w=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],b=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],S=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],k=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],E=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],T=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],R=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return o*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-h*R+p*T+y*E-w*k+b*S}},{key:"mult",value:function(p){var h;if(p===this||p===this.mat4)h=this.copy().mat4;else if(p instanceof u.default.Matrix)h=p.mat4;else if(d(p))h=p;else{if(arguments.length!==16)return;h=arguments}var p=this.mat4[0],y=this.mat4[1],w=this.mat4[2],b=this.mat4[3];return this.mat4[0]=p*h[0]+y*h[4]+w*h[8]+b*h[12],this.mat4[1]=p*h[1]+y*h[5]+w*h[9]+b*h[13],this.mat4[2]=p*h[2]+y*h[6]+w*h[10]+b*h[14],this.mat4[3]=p*h[3]+y*h[7]+w*h[11]+b*h[15],p=this.mat4[4],y=this.mat4[5],w=this.mat4[6],b=this.mat4[7],this.mat4[4]=p*h[0]+y*h[4]+w*h[8]+b*h[12],this.mat4[5]=p*h[1]+y*h[5]+w*h[9]+b*h[13],this.mat4[6]=p*h[2]+y*h[6]+w*h[10]+b*h[14],this.mat4[7]=p*h[3]+y*h[7]+w*h[11]+b*h[15],p=this.mat4[8],y=this.mat4[9],w=this.mat4[10],b=this.mat4[11],this.mat4[8]=p*h[0]+y*h[4]+w*h[8]+b*h[12],this.mat4[9]=p*h[1]+y*h[5]+w*h[9]+b*h[13],this.mat4[10]=p*h[2]+y*h[6]+w*h[10]+b*h[14],this.mat4[11]=p*h[3]+y*h[7]+w*h[11]+b*h[15],p=this.mat4[12],y=this.mat4[13],w=this.mat4[14],b=this.mat4[15],this.mat4[12]=p*h[0]+y*h[4]+w*h[8]+b*h[12],this.mat4[13]=p*h[1]+y*h[5]+w*h[9]+b*h[13],this.mat4[14]=p*h[2]+y*h[6]+w*h[10]+b*h[14],this.mat4[15]=p*h[3]+y*h[7]+w*h[11]+b*h[15],this}},{key:"apply",value:function(p){var h;if(p===this||p===this.mat4)h=this.copy().mat4;else if(p instanceof u.default.Matrix)h=p.mat4;else if(d(p))h=p;else{if(arguments.length!==16)return;h=arguments}var p=this.mat4,y=p[0],w=p[4],b=p[8],S=p[12],y=(p[0]=h[0]*y+h[1]*w+h[2]*b+h[3]*S,p[4]=h[4]*y+h[5]*w+h[6]*b+h[7]*S,p[8]=h[8]*y+h[9]*w+h[10]*b+h[11]*S,p[12]=h[12]*y+h[13]*w+h[14]*b+h[15]*S,p[1]),w=p[5],b=p[9],S=p[13],y=(p[1]=h[0]*y+h[1]*w+h[2]*b+h[3]*S,p[5]=h[4]*y+h[5]*w+h[6]*b+h[7]*S,p[9]=h[8]*y+h[9]*w+h[10]*b+h[11]*S,p[13]=h[12]*y+h[13]*w+h[14]*b+h[15]*S,p[2]),w=p[6],b=p[10],S=p[14],y=(p[2]=h[0]*y+h[1]*w+h[2]*b+h[3]*S,p[6]=h[4]*y+h[5]*w+h[6]*b+h[7]*S,p[10]=h[8]*y+h[9]*w+h[10]*b+h[11]*S,p[14]=h[12]*y+h[13]*w+h[14]*b+h[15]*S,p[3]),w=p[7],b=p[11],S=p[15];return p[3]=h[0]*y+h[1]*w+h[2]*b+h[3]*S,p[7]=h[4]*y+h[5]*w+h[6]*b+h[7]*S,p[11]=h[8]*y+h[9]*w+h[10]*b+h[11]*S,p[15]=h[12]*y+h[13]*w+h[14]*b+h[15]*S,this}},{key:"scale",value:function(o,h,p){return o instanceof u.default.Vector?(h=o.y,p=o.z,o=o.x):o instanceof Array&&(h=o[1],p=o[2],o=o[0]),this.mat4[0]*=o,this.mat4[1]*=o,this.mat4[2]*=o,this.mat4[3]*=o,this.mat4[4]*=h,this.mat4[5]*=h,this.mat4[6]*=h,this.mat4[7]*=h,this.mat4[8]*=p,this.mat4[9]*=p,this.mat4[10]*=p,this.mat4[11]*=p,this}},{key:"rotate",value:function(G,$,q,y){$ instanceof u.default.Vector?(q=$.y,y=$.z,$=$.x):$ instanceof Array&&(q=$[1],y=$[2],$=$[0]);var w=Math.sqrt($*$+q*q+y*y),w=($*=1/w,q*=1/w,y*=1/w,this.mat4[0]),b=this.mat4[1],S=this.mat4[2],k=this.mat4[3],E=this.mat4[4],T=this.mat4[5],R=this.mat4[6],O=this.mat4[7],M=this.mat4[8],L=this.mat4[9],I=this.mat4[10],B=this.mat4[11],V=Math.sin(G),G=Math.cos(G),Y=1-G,H=$*$*Y+G,W=q*$*Y+y*V,K=y*$*Y-q*V,Q=$*q*Y-y*V,se=q*q*Y+G,A=y*q*Y+$*V,z=$*y*Y+q*V,q=q*y*Y-$*V,$=y*y*Y+G;return this.mat4[0]=w*H+E*W+M*K,this.mat4[1]=b*H+T*W+L*K,this.mat4[2]=S*H+R*W+I*K,this.mat4[3]=k*H+O*W+B*K,this.mat4[4]=w*Q+E*se+M*A,this.mat4[5]=b*Q+T*se+L*A,this.mat4[6]=S*Q+R*se+I*A,this.mat4[7]=k*Q+O*se+B*A,this.mat4[8]=w*z+E*q+M*$,this.mat4[9]=b*z+T*q+L*$,this.mat4[10]=S*z+R*q+I*$,this.mat4[11]=k*z+O*q+B*$,this}},{key:"translate",value:function(y){var h=y[0],p=y[1],y=y[2]||0;this.mat4[12]+=this.mat4[0]*h+this.mat4[4]*p+this.mat4[8]*y,this.mat4[13]+=this.mat4[1]*h+this.mat4[5]*p+this.mat4[9]*y,this.mat4[14]+=this.mat4[2]*h+this.mat4[6]*p+this.mat4[10]*y,this.mat4[15]+=this.mat4[3]*h+this.mat4[7]*p+this.mat4[11]*y}},{key:"rotateX",value:function(o){this.rotate(o,1,0,0)}},{key:"rotateY",value:function(o){this.rotate(o,0,1,0)}},{key:"rotateZ",value:function(o){this.rotate(o,0,0,1)}},{key:"perspective",value:function(w,h,p,y){var w=1/Math.tan(w/2),b=1/(p-y);return this.mat4[0]=w/h,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=w,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(y+p)*b,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*y*p*b,this.mat4[15]=0,this}},{key:"ortho",value:function(o,h,p,y,w,b){var S=1/(o-h),k=1/(p-y),E=1/(w-b);return this.mat4[0]=-2*S,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*k,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*E,this.mat4[11]=0,this.mat4[12]=(o+h)*S,this.mat4[13]=(y+p)*k,this.mat4[14]=(b+w)*E,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(o,h,p,y){var w=new Array(4),b=this.mat4;return w[0]=b[0]*o+b[4]*h+b[8]*p+b[12]*y,w[1]=b[1]*o+b[5]*h+b[9]*p+b[13]*y,w[2]=b[2]*o+b[6]*h+b[10]*p+b[14]*y,w[3]=b[3]*o+b[7]*h+b[11]*p+b[15]*y,w}},{key:"multiplyPoint",value:function(p){var y=p.x,h=p.y,p=p.z,y=this.multiplyVec4(y,h,p,1);return new u.default.Vector(y[0],y[1],y[2])}},{key:"multiplyAndNormalizePoint",value:function(p){var y=p.x,h=p.y,p=p.z,y=this.multiplyVec4(y,h,p,1);return y[0]/=y[3],y[1]/=y[3],y[2]/=y[3],new u.default.Vector(y[0],y[1],y[2])}},{key:"multiplyDirection",value:function(p){var y=p.x,h=p.y,p=p.z,y=this.multiplyVec4(y,h,p,0);return new u.default.Vector(y[0],y[1],y[2])}},{key:"mult3x3",value:function(p){var h;if(p===this||p===this.mat3)h=this.copy().mat3;else if(p instanceof u.default.Matrix)h=p.mat3;else if(d(p))h=p;else{if(arguments.length!==9)return;h=arguments}var p=this.mat3[0],y=this.mat3[1],w=this.mat3[2];return this.mat3[0]=p*h[0]+y*h[3]+w*h[6],this.mat3[1]=p*h[1]+y*h[4]+w*h[7],this.mat3[2]=p*h[2]+y*h[5]+w*h[8],p=this.mat3[3],y=this.mat3[4],w=this.mat3[5],this.mat3[3]=p*h[0]+y*h[3]+w*h[6],this.mat3[4]=p*h[1]+y*h[4]+w*h[7],this.mat3[5]=p*h[2]+y*h[5]+w*h[8],p=this.mat3[6],y=this.mat3[7],w=this.mat3[8],this.mat3[6]=p*h[0]+y*h[3]+w*h[6],this.mat3[7]=p*h[1]+y*h[4]+w*h[7],this.mat3[8]=p*h[2]+y*h[5]+w*h[8],this}},{key:"column",value:function(o){return new u.default.Vector(this.mat3[3*o],this.mat3[3*o+1],this.mat3[3*o+2])}},{key:"row",value:function(o){return new u.default.Vector(this.mat3[o],this.mat3[o+3],this.mat3[o+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(o,h){return(h=h===void 0?o.copy():h).x=this.row(0).dot(o),h.y=this.row(1).dot(o),h.z=this.row(2).dot(o),h}},{key:"createSubMatrix3x3",value:function(){var o=new u.default.Matrix("mat3");return o.mat3[0]=this.mat4[0],o.mat3[1]=this.mat4[1],o.mat3[2]=this.mat4[2],o.mat3[3]=this.mat4[4],o.mat3[4]=this.mat4[5],o.mat3[5]=this.mat4[6],o.mat3[6]=this.mat4[8],o.mat3[7]=this.mat4[9],o.mat3[8]=this.mat4[10],o}}])&&c(i.prototype,n),a&&c(i,a),v}(),u.default.Matrix);f.default=m},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(t,x,f){Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(s,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(s,v.key,v)}}u.default.Quat=function(){function s(i,n,a,o){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.w=i,this.vec=new u.default.Vector(n,a,o)}var d,m,v;return d=s,v=[{key:"fromAxisAngle",value:function(i,p,a,o){var h=Math.cos(i/2),p=new u.default.Vector(p,a,o).normalize().mult(Math.sin(i/2));return new u.default.Quat(h,p.x,p.y,p.z)}}],(m=[{key:"conjugate",value:function(){return new u.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(i){return new u.default.Quat(this.w*i.w-this.vec.x*i.vec.x-this.vec.y*i.vec.y-this.vec.z-i.vec.z,this.w*i.vec.x+this.vec.x*i.w+this.vec.y*i.vec.z-this.vec.z*i.vec.y,this.w*i.vec.y-this.vec.x*i.vec.z+this.vec.y*i.w+this.vec.z*i.vec.x,this.w*i.vec.z+this.vec.x*i.vec.y-this.vec.y*i.vec.x+this.vec.z*i.w)}},{key:"rotateVector",value:function(i){return new u.default.Vector.mult(i,this.w*this.w-this.vec.dot(this.vec)).add(u.default.Vector.mult(this.vec,2*i.dot(this.vec))).add(u.default.Vector.mult(this.vec,2*this.w).cross(i)).clampToZero()}},{key:"rotateBy",value:function(i){return i.multiply(this).multiply(i.conjugate()).vec.clampToZero()}}])&&c(d.prototype,m),v&&c(d,v),s}(),t=u.default.Quat,f.default=t},{"../core/main":283}],338:[function(t,x,f){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function u(c,s){for(var d=0;d<s.length;d++){var m=s[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(c,m.key,m)}}t.default.RenderBuffer=function(){function c(m,v,i,n,a,o){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.size=m,this.src=v,this.dst=i,this.attr=n,this._renderer=a,this.map=o}var s,d;return s=c,(d=[{key:"_prepareBuffer",value:function(m,v){var i,n,a,p=v.attributes,o=this._renderer.GL,h=m.model||m,p=p[this.attr];p&&(i=m[this.dst],0<(n=h[this.src]).length?((a=!i)&&(m[this.dst]=i=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,i),!a&&h.dirtyFlags[this.src]===!1||(a=(m=this.map)?m(n):n,this._renderer._bindBuffer(i,o.ARRAY_BUFFER,a),h.dirtyFlags[this.src]=!1),v.enableAttrib(p,this.size)):(m=p.location)!==-1&&this._renderer.registerEnabled.has(m)&&(o.disableVertexAttribArray(m),this._renderer.registerEnabled.delete(m)))}}])&&u(s.prototype,d),c}(),t=t.default.RenderBuffer,f.default=t},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(t,x,f){function u(a){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(a)}function c(a){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(o){return u(o)}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":u(o)})(a)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(n=t("../core/main"))&&n.__esModule?n:{default:n},d=function(a){if(a&&a.__esModule)return a;if(a===null||c(a)!=="object"&&typeof a!="function")return{default:a};var o=m();if(o&&o.has(a))return o.get(a);var h,p={},y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(h in a){var w;Object.prototype.hasOwnProperty.call(a,h)&&((w=y?Object.getOwnPropertyDescriptor(a,h):null)&&(w.get||w.set)?Object.defineProperty(p,h,w):p[h]=a[h])}return p.default=a,o&&o.set(a,p),p}(t("../core/constants"));function m(){var a;return typeof WeakMap!="function"?null:(a=new WeakMap,m=function(){return a},a)}function v(a){return function(o){if(Array.isArray(o)){for(var h=0,p=new Array(o.length);h<o.length;h++)p[h]=o[h];return p}}(a)||function(o){if(Symbol.iterator in Object(o)||Object.prototype.toString.call(o)==="[object Arguments]")return Array.from(o)}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),s.default.RendererGL.prototype.beginShape=function(a){return this.immediateMode.shapeMode=a!==void 0?a:d.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var i={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},n=(s.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==d.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},s.default.RendererGL.prototype.vertex=function(a,o){if(this.immediateMode.shapeMode===d.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var h in i){var p=i[h],h=this.immediateMode.geometry[h];h.push.apply(h,v(h.slice(h.length-3*p,h.length-2*p)).concat(v(h.slice(h.length-p,h.length))))}var y,w,b=y=w=0,S=(arguments.length===3?b=arguments[2]:arguments.length===4?(y=arguments[2],w=arguments[3]):arguments.length===5&&(b=arguments[2],y=arguments[3],w=arguments[4]),new s.default.Vector(a,o,b)),S=(this.immediateMode.geometry.vertices.push(S),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),S=(this.immediateMode.geometry.vertexColors.push(S[0],S[1],S[2],S[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(S[0],S[1],S[2],S[3]),this.textureMode!==d.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(y/=this._tex.width,w/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(y,w),this.immediateMode._bezierVertex[0]=a,this.immediateMode._bezierVertex[1]=o,this.immediateMode._bezierVertex[2]=b,this.immediateMode._quadraticVertex[0]=a,this.immediateMode._quadraticVertex[1]=o,this.immediateMode._quadraticVertex[2]=b,this},s.default.RendererGL.prototype.normal=function(a,o,h){return a instanceof s.default.Vector?this._currentNormal=a:this._currentNormal=new s.default.Vector(a,o,h),this},s.default.RendererGL.prototype.endShape=function(a,o,h,p,y,w){var b,S=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===d.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===d.TESS&&(this.immediateMode.shapeMode=d.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),b=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==d.LINE_STRIP&&this.immediateMode.shapeMode!==d.LINES||(this.immediateMode.shapeMode=d.TRIANGLE_FAN,b=!0),this.immediateMode.shapeMode===d.QUADS?this.immediateMode.shapeMode=d.TRIANGLES:this.immediateMode.shapeMode===d.QUAD_STRIP&&(this.immediateMode.shapeMode=d.TRIANGLE_STRIP),this._doFill&&!b&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(S),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},s.default.RendererGL.prototype._processVertices=function(a){var o;this.immediateMode.geometry.vertices.length!==0&&(o=this._doStroke,a=a===d.CLOSE,o&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,a),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),o=this.immediateMode.shapeMode===d.TESS,a=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||o||a)&&this.immediateMode.shapeMode!==d.LINES&&this._tesselateShape())},s.default.RendererGL.prototype._calculateEdges=function(a,o,h){var p=[],y=0,w=this.immediateMode.contourIndices.slice(),b=0;switch(a){case d.TRIANGLE_STRIP:for(y=0;y<o.length-2;y++)p.push([y,y+1]),p.push([y,y+2]);p.push([y,y+1]);break;case d.TRIANGLE_FAN:for(y=1;y<o.length-1;y++)p.push([0,y]),p.push([y,y+1]);p.push([0,o.length-1]);break;case d.TRIANGLES:for(y=0;y<o.length-2;y+=3)p.push([y,y+1]),p.push([y+1,y+2]),p.push([y+2,y]);break;case d.LINES:for(y=0;y<o.length-1;y+=2)p.push([y,y+1]);break;case d.QUADS:for(y=0;y<o.length-5;y+=6)p.push([y,y+1]),p.push([y+1,y+2]),p.push([y+3,y+5]),p.push([y+4,y+5]);break;case d.QUAD_STRIP:for(y=0;y<o.length-2;y+=2)p.push([y,y+1]),p.push([y,y+2]),p.push([y+1,y+3]);p.push([y,y+1]);break;default:for(y=0;y<o.length;y++)y+1<o.length&&y+1!==w[0]?p.push([y,y+1]):((h||b)&&p.push([y,b]),0<w.length&&(b=w.shift()))}return a!==d.TESS&&h&&p.push([o.length-1,0]),p},s.default.RendererGL.prototype._tesselateShape=function(){for(var a=this,o=(this.immediateMode.shapeMode=d.TRIANGLES,[[]]),h=0;h<this.immediateMode.geometry.vertices.length;h++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===h&&(this.immediateMode.contourIndices.shift(),o.push([])),o[o.length-1].push(this.immediateMode.geometry.vertices[h].x,this.immediateMode.geometry.vertices[h].y,this.immediateMode.geometry.vertices[h].z,this.immediateMode.geometry.uvs[2*h],this.immediateMode.geometry.uvs[2*h+1],this.immediateMode.geometry.vertexColors[4*h],this.immediateMode.geometry.vertexColors[4*h+1],this.immediateMode.geometry.vertexColors[4*h+2],this.immediateMode.geometry.vertexColors[4*h+3],this.immediateMode.geometry.vertexNormals[h].x,this.immediateMode.geometry.vertexNormals[h].y,this.immediateMode.geometry.vertexNormals[h].z);for(var p,y=this._triangulate(o),w=this.immediateMode.geometry.vertices,b=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),S=0,k=y.length;S<k;S+=s.default.RendererGL.prototype.tessyVertexSize)b.push.apply(b,v(y.slice(S+5,S+9))),this.normal.apply(this,v(y.slice(S+9,S+12))),this.vertex.apply(this,v(y.slice(S,S+5)));this.geometryBuilder&&(p=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(E){return E.map(function(T){if(!p.has(T)){var R=w[T],O=a.immediateMode.geometry.vertices.findIndex(function(Y){return R.x===Y.x&&R.y===Y.y&&R.z===Y.z});if(O===-1){for(var M=1/0,L=0,I=0;I<a.immediateMode.geometry.vertices.length;I++){var V=a.immediateMode.geometry.vertices[I],G=R.x-V.x,B=R.y-V.y,V=R.z-V.z,G=G*G+B*B+V*V;G<M&&(M=G,L=I)}O=L}p.set(T,O)}return p.get(T)})})),this.immediateMode.geometry.vertexColors=b},s.default.RendererGL.prototype._drawImmediateFill=function(){var a,o=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,h=this.GL,p=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,a=this._getImmediateFillShader(),this._setFillUniforms(a),!0),y=!1,w=void 0;try{for(var b,S=this.immediateMode.buffers.fill[Symbol.iterator]();!(p=(b=S.next()).done);p=!0)b.value._prepareBuffer(this.immediateMode.geometry,a)}catch(k){y=!0,w=k}finally{try{p||S.return==null||S.return()}finally{if(y)throw w}}if(a.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),o===1)h.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{h.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,o)}catch{console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode")}a.unbindShader()},s.default.RendererGL.prototype._drawImmediateStroke=function(){var a=this.GL,o=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),h=(this._setStrokeUniforms(o),!0),p=!1,y=void 0;try{for(var w,b=this.immediateMode.buffers.stroke[Symbol.iterator]();!(h=(w=b.next()).done);h=!0)w.value._prepareBuffer(this.immediateMode.geometry,o)}catch(S){p=!0,y=S}finally{try{h||b.return==null||b.return()}finally{if(p)throw y}}o.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),a.drawArrays(a.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),o.unbindShader()},s.default.RendererGL);f.default=n},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(t,x,f){function u(i){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(i)}function c(i){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(n){return u(n)}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":u(n)})(i)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var s=(v=t("../core/main"))&&v.__esModule?v:{default:v},d=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(i){if(i&&i.__esModule)return i;if(i===null||c(i)!=="object"&&typeof i!="function")return{default:i};var n=m();if(n&&n.has(i))return n.get(i);var a,o={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in i){var p;Object.prototype.hasOwnProperty.call(i,a)&&((p=h?Object.getOwnPropertyDescriptor(i,a):null)&&(p.get||p.set)?Object.defineProperty(o,a,p):o[a]=i[a])}return o.default=i,n&&n.set(i,o),o}(t("../core/constants")));function m(){var i;return typeof WeakMap!="function"?null:(i=new WeakMap,m=function(){return i},i)}s.default.RendererGL.prototype.freeGeometry=function(i){i.gid?this._freeBuffers(i.gid):console.warn("The model you passed to freeGeometry does not have an id!")},s.default.RendererGL.prototype._initBufferDefaults=function(i){var n;return this._freeBuffers(i),1e3<Object.keys(this.retainedMode.geometry).length&&(n=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(n)),this.retainedMode.geometry[i]={}},s.default.RendererGL.prototype._freeBuffers=function(i){var n,a=this.retainedMode.geometry[i];function o(h){var p=!0,y=!1,w=void 0;try{for(var b,S=h[Symbol.iterator]();!(p=(b=S.next()).done);p=!0){var k=b.value;a[k.dst]&&(n.deleteBuffer(a[k.dst]),a[k.dst]=null)}}catch(E){y=!0,w=E}finally{try{p||S.return==null||S.return()}finally{if(y)throw w}}}a&&(delete this.retainedMode.geometry[i],n=this.GL,a.indexBuffer&&n.deleteBuffer(a.indexBuffer),o(this.retainedMode.buffers.stroke),o(this.retainedMode.buffers.fill))},s.default.RendererGL.prototype.createBuffers=function(y,n){var a,o,h,p=this.GL,y=this._initBufferDefaults(y),w=(y.model=n,y.indexBuffer);return n.faces.length?(w=w||(y.indexBuffer=p.createBuffer()),h=(o=(a=s.default.RendererGL.prototype._flatten(n.faces)).some(function(b){return 65535<b}))?Uint32Array:Uint16Array,this._bindBuffer(w,p.ELEMENT_ARRAY_BUFFER,a,h),y.indexBufferType=o?p.UNSIGNED_INT:p.UNSIGNED_SHORT,y.vertexCount=3*n.faces.length):(w&&(p.deleteBuffer(w),y.indexBuffer=null),y.vertexCount=n.vertices?n.vertices.length:0),y.lineVertexCount=n.lineVertices?n.lineVertices.length/3:0,y},s.default.RendererGL.prototype.drawBuffers=function(i){var n=this.GL,a=this.retainedMode.geometry[i];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[i].vertexCount){this._useVertexColor=0<a.model.vertexColors.length;var o=this._getRetainedFillShader(),h=(this._setFillUniforms(o),!0),p=!1,y=void 0;try{for(var w,b=this.retainedMode.buffers.fill[Symbol.iterator]();!(h=(w=b.next()).done);h=!0)w.value._prepareBuffer(a,o)}catch(R){p=!0,y=R}finally{try{h||b.return==null||b.return()}finally{if(p)throw y}}o.disableRemainingAttributes(),a.indexBuffer&&this._bindBuffer(a.indexBuffer,n.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,a.model.hasFillTransparency()),this._drawElements(n.TRIANGLES,i),o.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<a.lineVertexCount){this._useLineColor=0<a.model.vertexStrokeColors.length;var S=this._getRetainedStrokeShader(),k=(this._setStrokeUniforms(S),!0),p=!1,y=void 0;try{for(var E,T=this.retainedMode.buffers.stroke[Symbol.iterator]();!(k=(E=T.next()).done);k=!0)E.value._prepareBuffer(a,S)}catch(M){p=!0,y=M}finally{try{k||T.return==null||T.return()}finally{if(p)throw y}}S.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,a.model.hasStrokeTransparency()),this._drawArrays(n.TRIANGLES,i),S.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(a),this},s.default.RendererGL.prototype.drawBuffersScaled=function(i,n,a,o){var h=this.uModelMatrix.copy();try{this.uModelMatrix.scale(n,a,o),this.drawBuffers(i)}finally{this.uModelMatrix=h}},s.default.RendererGL.prototype._drawArrays=function(i,n){return this.GL.drawArrays(i,0,this.retainedMode.geometry[n].lineVertexCount),this},s.default.RendererGL.prototype._drawElements=function(i,a){var a=this.retainedMode.geometry[a],o=this.GL;if(a.indexBuffer){if(this._pInst.webglVersion!==d.WEBGL2&&a.indexBufferType===o.UNSIGNED_INT&&!o.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");o.drawElements(o.TRIANGLES,a.vertexCount,a.indexBufferType,0)}else o.drawArrays(i||o.TRIANGLES,0,a.vertexCount)},s.default.RendererGL.prototype._drawPoints=function(i,n){var a=this.GL,o=this._getImmediatePointShader();this._setPointUniforms(o),this._bindBuffer(n,a.ARRAY_BUFFER,this._vToNArray(i),Float32Array,a.STATIC_DRAW),o.enableAttrib(o.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),a.drawArrays(a.Points,0,i.length),o.unbindShader()};var v=s.default.RendererGL;f.default=v},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(I,x,f){function u(W){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K})(W)}function c(W){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(K){return u(K)}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":u(K)})(W)}I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.concat"),I("core-js/modules/es.array.copy-within"),I("core-js/modules/es.array.every"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.flat"),I("core-js/modules/es.array.flat-map"),I("core-js/modules/es.array.from"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.array.map"),I("core-js/modules/es.array.slice"),I("core-js/modules/es.array.some"),I("core-js/modules/es.array.unscopables.flat"),I("core-js/modules/es.array.unscopables.flat-map"),I("core-js/modules/es.map"),I("core-js/modules/es.object.assign"),I("core-js/modules/es.object.get-own-property-descriptor"),I("core-js/modules/es.object.get-prototype-of"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.reflect.construct"),I("core-js/modules/es.reflect.get"),I("core-js/modules/es.regexp.to-string"),I("core-js/modules/es.set"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.float64-array"),I("core-js/modules/es.typed-array.int16-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint16-array"),I("core-js/modules/es.typed-array.uint32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/es.weak-map"),I("core-js/modules/web.dom-collections.iterator"),I("core-js/modules/es.symbol"),I("core-js/modules/es.symbol.description"),I("core-js/modules/es.symbol.iterator"),I("core-js/modules/es.array.concat"),I("core-js/modules/es.array.copy-within"),I("core-js/modules/es.array.every"),I("core-js/modules/es.array.fill"),I("core-js/modules/es.array.flat"),I("core-js/modules/es.array.flat-map"),I("core-js/modules/es.array.from"),I("core-js/modules/es.array.includes"),I("core-js/modules/es.array.iterator"),I("core-js/modules/es.array.map"),I("core-js/modules/es.array.slice"),I("core-js/modules/es.array.some"),I("core-js/modules/es.array.unscopables.flat"),I("core-js/modules/es.array.unscopables.flat-map"),I("core-js/modules/es.map"),I("core-js/modules/es.object.assign"),I("core-js/modules/es.object.to-string"),I("core-js/modules/es.set"),I("core-js/modules/es.string.includes"),I("core-js/modules/es.string.iterator"),I("core-js/modules/es.typed-array.float32-array"),I("core-js/modules/es.typed-array.float64-array"),I("core-js/modules/es.typed-array.int16-array"),I("core-js/modules/es.typed-array.uint8-array"),I("core-js/modules/es.typed-array.uint16-array"),I("core-js/modules/es.typed-array.uint32-array"),I("core-js/modules/es.typed-array.copy-within"),I("core-js/modules/es.typed-array.every"),I("core-js/modules/es.typed-array.fill"),I("core-js/modules/es.typed-array.filter"),I("core-js/modules/es.typed-array.find"),I("core-js/modules/es.typed-array.find-index"),I("core-js/modules/es.typed-array.for-each"),I("core-js/modules/es.typed-array.includes"),I("core-js/modules/es.typed-array.index-of"),I("core-js/modules/es.typed-array.iterator"),I("core-js/modules/es.typed-array.join"),I("core-js/modules/es.typed-array.last-index-of"),I("core-js/modules/es.typed-array.map"),I("core-js/modules/es.typed-array.reduce"),I("core-js/modules/es.typed-array.reduce-right"),I("core-js/modules/es.typed-array.reverse"),I("core-js/modules/es.typed-array.set"),I("core-js/modules/es.typed-array.slice"),I("core-js/modules/es.typed-array.some"),I("core-js/modules/es.typed-array.sort"),I("core-js/modules/es.typed-array.subarray"),I("core-js/modules/es.typed-array.to-locale-string"),I("core-js/modules/es.typed-array.to-string"),I("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.readPixelsWebGL=Y,f.readPixelWebGL=H,f.default=void 0;var s=a(I("../core/main")),d=function(W){if(W&&W.__esModule)return W;if(W===null||c(W)!=="object"&&typeof W!="function")return{default:W};var K=n();if(K&&K.has(W))return K.get(W);var Q,se={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Q in W){var z;Object.prototype.hasOwnProperty.call(W,Q)&&((z=A?Object.getOwnPropertyDescriptor(W,Q):null)&&(z.get||z.set)?Object.defineProperty(se,Q,z):se[Q]=W[Q])}return se.default=W,K&&K.set(W,se),se}(I("../core/constants")),m=a(I("./GeometryBuilder")),v=a(I("libtess")),i=(I("./p5.Shader"),I("./p5.Camera"),I("../core/p5.Renderer"),I("./p5.Matrix"),I("./p5.Framebuffer"),I("path"),I("./p5.Texture"));function n(){var W;return typeof WeakMap!="function"?null:(W=new WeakMap,n=function(){return W},W)}function a(W){return W&&W.__esModule?W:{default:W}}function o(W){return function(K){if(Array.isArray(K)){for(var Q=0,se=new Array(K.length);Q<K.length;Q++)se[Q]=K[Q];return se}}(W)||function(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}(W)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(W,K){for(var Q=0;Q<K.length;Q++){var se=K[Q];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(W,se.key,se)}}function p(W,K,Q){return(p=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(q,A,z){var q=function($,ie){for(;!Object.prototype.hasOwnProperty.call($,ie)&&($=S($))!==null;);return $}(q,A);if(q)return(q=Object.getOwnPropertyDescriptor(q,A)).get?q.get.call(z):q.value})(W,K,Q||W)}function y(W,K){return(y=Object.setPrototypeOf||function(Q,se){return Q.__proto__=se,Q})(W,K)}function w(W){return function(){var K,Q,se=S(W);return K=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(K=S(this).constructor,Reflect.construct(se,arguments,K)):se.apply(this,arguments),se=this,!(Q=K)||c(Q)!=="object"&&typeof Q!="function"?b(se):Q}}function b(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}function S(W){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)})(W)}function k(W,K,Q){K in W?Object.defineProperty(W,K,{value:Q,enumerable:!0,configurable:!0,writable:!0}):W[K]=Q}function E(W,K){L+="#define STROKE_CAP_".concat(W," ").concat(K,`
`),O[d[W]]=K}function T(W,K){L+="#define STROKE_JOIN_".concat(W," ").concat(K,`
`),M[d[W]]=K}var R,O={},M={},L="",I=(E("ROUND",0),E("PROJECT",1),E("SQUARE",2),T("ROUND",0),T("MITER",1),T("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 seperate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),B={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:I+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:I+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:L+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(-0.00045, -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:L+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},V=B.sphereMappingFrag;for(R in B)B[R]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+B[R];k(I={},d.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),k(I,d.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),k(I,d.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),k(I,d.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),k(I,d.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),k(I,d.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),k(I,d.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),k(I,d.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var G=I;function Y(W,K,ge,se,A,z,q,$,ie,re){var fe=K.getParameter(K.FRAMEBUFFER_BINDING),ge=(K.bindFramebuffer(K.FRAMEBUFFER,ge),$===K.RGBA?4:3),de=z*q*ge,me=ie===K.UNSIGNED_BYTE?Uint8Array:Float32Array;if(W instanceof me&&W.length===de||(W=new me(de)),K.readPixels(se,re?re-A-q:A,z,q,$,ie,W),K.bindFramebuffer(K.FRAMEBUFFER,fe),re)for(var _e=Math.floor(q/2),ae=new me(z*ge),he=0;he<_e;he++){var be=he*z*4,ke=(q-he-1)*z*4;ae.set(W.subarray(be,be+4*z)),W.copyWithin(be,ke,ke+4*z),W.set(ae,ke)}return W}function H(W,ie,Q,se,A,z,q){var $=W.getParameter(W.FRAMEBUFFER_BINDING),ie=(W.bindFramebuffer(W.FRAMEBUFFER,ie),A===W.RGBA?4:3),ie=new(z===W.UNSIGNED_BYTE?Uint8Array:Float32Array)(ie);return W.readPixels(Q,q?q-se-1:se,1,1,A,z,ie),W.bindFramebuffer(W.FRAMEBUFFER,$),Array.from(ie)}s.default.prototype.setAttributes=function(W,K){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Q=!0;if(K!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[W]!==K&&(this._glAttributes[W]=K,Q=!1)):W instanceof Object&&this._glAttributes!==W&&(this._glAttributes=W,Q=!1),this._renderer.isP3D&&!Q){if(!this._setupDone){for(var se in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(se))return void s.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},s.default.RendererGL=function(W){var K=se;if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(W&&W.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),W&&y(K,W);var Q=w(se);function se(A,z,q,$){if(this instanceof se)return(A=Q.call(this,A,z,q))._setAttributeDefaults(z),A._initContext(),A.isP3D=!0,A.geometryBuilder=void 0,A.GL=A.drawingContext,A._pInst._setProperty("drawingContext",A.drawingContext),A._isErasing=!1,A._clipDepths=[],A._isClipApplied=!1,A._stencilTestOn=!1,A._enableLighting=!1,A.ambientLightColors=[],A.mixedAmbientLight=[],A.mixedSpecularColor=[],A.specularColors=[1,1,1],A.directionalLightDirections=[],A.directionalLightDiffuseColors=[],A.directionalLightSpecularColors=[],A.pointLightPositions=[],A.pointLightDiffuseColors=[],A.pointLightSpecularColors=[],A.spotLightPositions=[],A.spotLightDirections=[],A.spotLightDiffuseColors=[],A.spotLightSpecularColors=[],A.spotLightAngle=[],A.spotLightConc=[],A.activeImageLight=null,A.diffusedTextures=new Map,A.specularTextures=new Map,A.drawMode=d.FILL,A.curFillColor=A._cachedFillStyle=[1,1,1,1],A.curAmbientColor=A._cachedFillStyle=[1,1,1,1],A.curSpecularColor=A._cachedFillStyle=[0,0,0,0],A.curEmissiveColor=A._cachedFillStyle=[0,0,0,0],A.curStrokeColor=A._cachedStrokeStyle=[0,0,0,1],A.curBlendMode=d.BLEND,A.preEraseBlend=void 0,A._cachedBlendMode=void 0,A.webglVersion===d.WEBGL2?A.blendExt=A.GL:A.blendExt=A.GL.getExtension("EXT_blend_minmax"),A._isBlending=!1,A._hasSetAmbient=!1,A._useSpecularMaterial=!1,A._useEmissiveMaterial=!1,A._useNormalMaterial=!1,A._useShininess=1,A._useMetalness=0,A._useLineColor=!1,A._useVertexColor=!1,A.registerEnabled=new Set,A._tint=[255,255,255,255],A.constantAttenuation=1,A.linearAttenuation=0,A.quadraticAttenuation=0,A.uModelMatrix=new s.default.Matrix,A.uViewMatrix=new s.default.Matrix,A.uMVMatrix=new s.default.Matrix,A.uPMatrix=new s.default.Matrix,A.uNMatrix=new s.default.Matrix("mat3"),A.curMatrix=new s.default.Matrix("mat3"),A._currentNormal=new s.default.Vector(0,0,1),A._curCamera=new s.default.Camera(b(A)),A._curCamera._computeCameraDefaultSettings(),A._curCamera._setDefaultCamera(),A.filterCamera=new s.default.Camera(b(A)),A.filterCamera._computeCameraDefaultSettings(),A.filterCamera._setDefaultCamera(),A.prevTouches=[],A.zoomVelocity=0,A.rotateVelocity=new s.default.Vector(0,0),A.moveVelocity=new s.default.Vector(0,0),A.executeZoom=!1,A.executeRotateAndMove=!1,A.specularShader=void 0,A.sphereMapping=void 0,A.diffusedShader=void 0,A._defaultLightShader=void 0,A._defaultImmediateModeShader=void 0,A._defaultNormalShader=void 0,A._defaultColorShader=void 0,A._defaultPointShader=void 0,A.userFillShader=void 0,A.userStrokeShader=void 0,A.userPointShader=void 0,A.retainedMode={geometry:{},buffers:{stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",b(A)),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",b(A)),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",b(A)),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",b(A)),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",b(A))],fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(A),A._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",b(A),A._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",b(A)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",b(A)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(A),A._flatten)],text:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(A),A._vToNArray),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(A),A._flatten)]}},A.immediateMode={geometry:new s.default.Geometry,shapeMode:d.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new s.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",b(A),A._vToNArray),new s.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",b(A),A._vToNArray),new s.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",b(A)),new s.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",b(A)),new s.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",b(A),A._flatten)],stroke:[new s.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",b(A)),new s.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",b(A)),new s.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",b(A)),new s.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",b(A)),new s.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",b(A))],point:A.GL.createBuffer()}},A.pointSize=5,A.curStrokeWeight=1,A.curStrokeCap=d.ROUND,A.curStrokeJoin=d.ROUND,A.textures=new Map,A.framebuffers=new Set,A.activeFramebuffers=[],A.filterShader=void 0,A.filterLayer=void 0,A.filterLayerTemp=void 0,A.defaultFilterShaders={},A.textureMode=d.IMAGE,A.textureWrapX=d.CLAMP,A.textureWrapY=d.CLAMP,A._tex=null,A._curveTightness=6,A._lookUpTableBezier=[],A._lookUpTableQuadratic=[],A._lutBezierDetail=0,A._lutQuadraticDetail=0,A.isProcessingVertices=!1,A._tessy=A._initTessy(),A.fontInfos={},A._curShader=void 0,A;throw new TypeError("Cannot call a class as a function")}return K=se,(W=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new m.default(this)}},{key:"endGeometry",value:function(){var A;if(this.geometryBuilder)return A=this.geometryBuilder.finish(),this.geometryBuilder=void 0,A;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(A){return this.beginGeometry(),A(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(A){var z={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};A._glAttributes===null?A._glAttributes=z:A._glAttributes=Object.assign(z,A._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?d.WEBGL2:d.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var A=this.drawingContext;A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL),A.viewport(0,0,A.drawingBufferWidth,A.drawingBufferHeight),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var A=this.drawingContext;return A.getParameter(A.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(A,z){this._maxTextureSize||(this._maxTextureSize=this._getParam());var $=this._maxTextureSize,$=(s.default.prototype._maxAllowedPixelDimensions,Math.floor($/this.pixelDensity())),q=Math.min(A,$),$=Math.min(z,$);return q===A&&$===z||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(q,", height: ").concat($,".")),{adjustedWidth:q,adjustedHeight:$}}},{key:"_resetContext",value:function(A,z){var q,$=this.width,ie=this.height,fe=this.canvas.id,re=this._pInst instanceof s.default.Graphics,fe=(re?((q=this._pInst).canvas.parentNode.removeChild(q.canvas),q.canvas=document.createElement("canvas"),(q._pInst._userNode||document.body).appendChild(q.canvas),s.default.Element.call(q,q.canvas,q._pInst),q.width=$,q.height=ie):((q=this.canvas)&&q.parentNode.removeChild(q),(q=document.createElement("canvas")).id=fe,(this._pInst._userNode||document.body).appendChild(q),this._pInst.canvas=q,this.canvas=q),new s.default.RendererGL(this._pInst.canvas,this._pInst,!re));this._pInst._setProperty("_renderer",fe),fe.resize($,ie),fe._applyDefaults(),re||this._pInst._elements.push(fe),typeof z=="function"&&setTimeout(function(){z.apply(window._renderer,A)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var $=($=this._pInst).color.apply($,arguments),A=$.levels[0]/255,z=$.levels[1]/255,q=$.levels[2]/255,$=$.levels[3]/255;this.clear(A,z,q,$)}},{key:"fill",value:function(A,z,q,$){var ie=s.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=ie._array,this.drawMode=d.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(A,z,q,$){var ie=s.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=ie._array}},{key:"strokeCap",value:function(A){this.curStrokeCap=A}},{key:"strokeJoin",value:function(A){this.curStrokeJoin=A}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(A,z){A.width===z.width&&A.height===z.height||A.resize(z.width,z.height),A.pixelDensity()!==z.pixelDensity()&&A.pixelDensity(z.pixelDensity())}},{key:"filter",value:function(){var A,z,q=this,$=this.getFilterLayer(),ie=void 0,re=void 0,fe=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(re=arguments.length<=0?void 0:arguments[0],k(A={},d.BLUR,3),k(A,d.POSTERIZE,4),k(A,d.THRESHOLD,.5),ie=re in(A=A)&&(arguments.length<=1?void 0:arguments[1])===void 0?A[re]:arguments.length<=1?void 0:arguments[1],re in this.defaultFilterShaders||(this.defaultFilterShaders[re]=new s.default.Shader($._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,G[re])),this.filterShader=this.defaultFilterShaders[re]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),ge=(this.matchSize($,fe),$.draw(function(){return q._pInst.clear()}),[1/(fe.width*fe.pixelDensity()),1/(fe.height*fe.pixelDensity())]);re===d.BLUR?(z=this.getFilterLayerTemp(),this.matchSize(z,fe),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(d.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",ge),this.filterShader.setUniform("canvasSize",[fe.width,fe.height]),this.filterShader.setUniform("radius",Math.max(1,ie)),z.draw(function(){q.filterShader.setUniform("direction",[1,0]),q.filterShader.setUniform("tex0",fe),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(fe.width,fe.height)}),$.draw(function(){q.filterShader.setUniform("direction",[0,1]),q.filterShader.setUniform("tex0",z),q._pInst.clear(),q._pInst.shader(q.filterShader),q._pInst.noLights(),q._pInst.plane(fe.width,fe.height)}),this._pInst.pop()):$.draw(function(){q._pInst.noStroke(),q._pInst.blendMode(d.BLEND),q._pInst.shader(q.filterShader),q.filterShader.setUniform("tex0",fe),q.filterShader.setUniform("texelSize",ge),q.filterShader.setUniform("canvasSize",[fe.width,fe.height]),q.filterShader.setUniform("filterParameter",ie),q._pInst.noLights(),q._pInst.plane(fe.width,fe.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(d.CORNER),this._pInst.blendMode(d.BLEND),fe.filterCamera._resize(),this._pInst.setCamera(fe.filterCamera),this._pInst.resetMatrix(),this._pInst.image($,-fe.width/2,-fe.height/2,fe.width,fe.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(A){return A?this._pInst.pixelDensity(A):this._pInst.pixelDensity()}},{key:"blendMode",value:function(A){A===d.DARKEST||A===d.LIGHTEST||A===d.ADD||A===d.BLEND||A===d.SUBTRACT||A===d.SCREEN||A===d.EXCLUSION||A===d.REPLACE||A===d.MULTIPLY||A===d.REMOVE?this.curBlendMode=A:A!==d.BURN&&A!==d.OVERLAY&&A!==d.HARD_LIGHT&&A!==d.SOFT_LIGHT&&A!==d.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(A,z){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(d.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,A/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,z/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var A=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},A=(p(S(se.prototype),"beginClip",this).call(this,A),this.drawTarget()._isClipApplied=!0,this.GL);A.clearStencil(0),A.clear(A.STENCIL_BUFFER_BIT),A.enable(A.STENCIL_TEST),this._stencilTestOn=!0,A.stencilFunc(A.ALWAYS,1,255),A.stencilOp(A.KEEP,A.KEEP,A.REPLACE),A.disable(A.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var A=this.GL;A.stencilOp(A.KEEP,A.KEEP,A.KEEP),A.stencilFunc(this._clipInvert?A.EQUAL:A.NOTEQUAL,0,255),A.enable(A.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),p(S(se.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(A){this.curStrokeWeight!==A&&(this.pointSize=A,this.curStrokeWeight=A)}},{key:"_getPixel",value:function(A,z){var q=this.GL;return H(q,null,A,z,q.RGBA,q.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var A,z,q=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(A=this._pInst._pixelDensity,z=this.GL,q._setProperty("pixels",Y(q.pixels,z,null,0,0,this.width*A,this.height*A,z.RGBA,z.UNSIGNED_BYTE,this.height*A)))}},{key:"updatePixels",value:function(){var A=this._getTempFramebuffer();A.pixels=this._pixelsState.pixels,A.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(d.CENTER),this._pInst.image(A,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:d.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:d.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(A){return this.retainedMode.geometry[A]!==void 0}},{key:"viewport",value:function(A,z){this._viewport=[0,0,A,z],this.GL.viewport(0,0,A,z)}},{key:"resize",value:function(ie,$){s.default.Renderer.prototype.resize.call(this,ie,$),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var ie=this._pixelsState,q=(ie.pixels!==void 0&&ie._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),$=!1,ie=void 0;try{for(var re,fe=this.framebuffers[Symbol.iterator]();!(q=(re=fe.next()).done);q=!0)re.value._canvasSizeChanged()}catch(ge){$=!0,ie=ge}finally{try{q||fe.return==null||fe.return()}finally{if($)throw ie}}}},{key:"clear",value:function(){var A=(arguments.length<=0?void 0:arguments[0])||0,z=(arguments.length<=1?void 0:arguments[1])||0,q=(arguments.length<=2?void 0:arguments[2])||0,$=(arguments.length<=3?void 0:arguments[3])||0,ie=this.activeFramebuffer();ie&&ie.format===d.UNSIGNED_BYTE&&!ie.antialias&&$===0&&($=1e-10),this.GL.clearColor(A*$,z*$,q*$,$),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(A,z,q,$,ie,re){arguments.length===16?s.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([A,z,0,0,q,$,0,0,0,0,1,0,ie,re,0,1])}},{key:"translate",value:function(A,z,q){return A instanceof s.default.Vector&&(q=A.z,z=A.y,A=A.x),this.uModelMatrix.translate([A,z,q]),this}},{key:"scale",value:function(A,z,q){return this.uModelMatrix.scale(A,z,q),this}},{key:"rotate",value:function(A,z){return z===void 0?this.rotateZ(A):(s.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(A){return this.rotate(A,1,0,0),this}},{key:"rotateY",value:function(A){return this.rotate(A,0,1,0),this}},{key:"rotateZ",value:function(A){return this.rotate(A,0,0,1),this}},{key:"push",value:function(){var A=s.default.Renderer.prototype.push.apply(this),z=A.properties;return z.uModelMatrix=this.uModelMatrix.copy(),z.uViewMatrix=this.uViewMatrix.copy(),z.uPMatrix=this.uPMatrix.copy(),z._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),z.ambientLightColors=this.ambientLightColors.slice(),z.specularColors=this.specularColors.slice(),z.directionalLightDirections=this.directionalLightDirections.slice(),z.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),z.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),z.pointLightPositions=this.pointLightPositions.slice(),z.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),z.pointLightSpecularColors=this.pointLightSpecularColors.slice(),z.spotLightPositions=this.spotLightPositions.slice(),z.spotLightDirections=this.spotLightDirections.slice(),z.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),z.spotLightSpecularColors=this.spotLightSpecularColors.slice(),z.spotLightAngle=this.spotLightAngle.slice(),z.spotLightConc=this.spotLightConc.slice(),z.userFillShader=this.userFillShader,z.userStrokeShader=this.userStrokeShader,z.userPointShader=this.userPointShader,z.pointSize=this.pointSize,z.curStrokeWeight=this.curStrokeWeight,z.curStrokeColor=this.curStrokeColor,z.curFillColor=this.curFillColor,z.curAmbientColor=this.curAmbientColor,z.curSpecularColor=this.curSpecularColor,z.curEmissiveColor=this.curEmissiveColor,z._hasSetAmbient=this._hasSetAmbient,z._useSpecularMaterial=this._useSpecularMaterial,z._useEmissiveMaterial=this._useEmissiveMaterial,z._useShininess=this._useShininess,z._useMetalness=this._useMetalness,z.constantAttenuation=this.constantAttenuation,z.linearAttenuation=this.linearAttenuation,z.quadraticAttenuation=this.quadraticAttenuation,z._enableLighting=this._enableLighting,z._useNormalMaterial=this._useNormalMaterial,z._tex=this._tex,z.drawMode=this.drawMode,z._currentNormal=this._currentNormal,z.curBlendMode=this.curBlendMode,z.activeImageLight=this.activeImageLight,z.textureMode=this.textureMode,A}},{key:"pop",value:function(){var A;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var z=arguments.length,q=new Array(z),$=0;$<z;$++)q[$]=arguments[$];(A=p(S(se.prototype),"pop",this)).call.apply(A,[this].concat(q)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var A=this.drawTarget();A._isClipApplied!==this._stencilTestOn&&(A._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var A=this.userStrokeShader;return A&&A.isStrokeShader()?A:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(A){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(V)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",A),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var A=this.userFillShader;if(this._useNormalMaterial&&(!A||!A.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!A||!A.isLightShader())return this._getLightShader()}else if(this._tex){if(!A||!A.isTextureShader())return this._getLightShader()}else if(!A)return this._getImmediateModeShader();return A}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var A=this.userFillShader;if(this._enableLighting){if(!A||!A.isLightShader())return this._getLightShader()}else if(this._tex){if(!A||!A.isTextureShader())return this._getLightShader()}else if(!A)return this._getColorShader();return A}},{key:"_getImmediatePointShader",value:function(){var A=this.userPointShader;return A&&A.isPointShader()?A:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+B.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+B.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+B.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+B.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+B.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+B.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+B.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+B.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+B.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+B.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+B.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+B.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+B.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+B.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===d.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new s.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+B.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+B.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(A,z){var q="";return this.webglVersion===d.WEBGL2&&(q+=`#version 300 es
#define WEBGL2
`),A==="vert"?q+=`#define VERTEX_SHADER
`:A==="frag"&&(q+=`#define FRAGMENT_SHADER
`),z&&(q+="precision ".concat(z,` float;
`)),q}},{key:"_getEmptyTexture",value:function(){var A;return this._emptyTexture||((A=new s.default.Image(1,1)).set(0,0,255),this._emptyTexture=new s.default.Texture(this,A)),this._emptyTexture}},{key:"getTexture",value:function(A){A instanceof s.default.Framebuffer&&(A=A.color);var z=this.textures.get(A);return z||(z=new s.default.Texture(this,A),this.textures.set(A,z),z)}},{key:"getDiffusedTexture",value:function(A){var z,q,$=this;return this.diffusedTextures.get(A)!=null?this.diffusedTextures.get(A):(z=Math.floor(A.height/A.width*200),q=this._pInst.createFramebuffer({width:200,height:z,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(B.imageLightVert,B.imageLightDiffusedFrag)),q.draw(function(){$._pInst.shader($.diffusedShader),$.diffusedShader.setUniform("environmentMap",A),$._pInst.noStroke(),$._pInst.rectMode(d.CENTER),$._pInst.noLights(),$._pInst.rect(0,0,200,z)}),this.diffusedTextures.set(A,q),q)}},{key:"getSpecularTexture",value:function(A){var z=this;if(this.specularTextures.get(A)!=null)return this.specularTextures.get(A);for(var q,$=[],ie=this._pInst.createFramebuffer({width:512,height:512,density:1}),re=Math.log(512)/Math.log(2),fe=(this.specularShader||(this.specularShader=this._pInst.createShader(B.imageLightVert,B.imageLightSpecularFrag)),512);1<=fe;fe/=2)(function(ge){ie.resize(ge,ge);var de=1-Math.log(ge)/Math.log(2)/re;ie.draw(function(){z._pInst.shader(z.specularShader),z._pInst.clear(),z.specularShader.setUniform("environmentMap",A),z.specularShader.setUniform("roughness",de),z._pInst.noStroke(),z._pInst.noLights(),z._pInst.plane(ge,ge)}),$.push(ie.get().drawingContext.getImageData(0,0,ge,ge))})(fe);return ie.remove(),q=new i.MipmapTexture(this,$,{}),this.specularTextures.set(A,q),q}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(A){return new s.default.Framebuffer(this,A)}},{key:"_setStrokeUniforms",value:function(A){A.bindShader(),A.setUniform("uUseLineColor",this._useLineColor),A.setUniform("uMaterialColor",this.curStrokeColor),A.setUniform("uStrokeWeight",this.curStrokeWeight),A.setUniform("uStrokeCap",O[this.curStrokeCap]),A.setUniform("uStrokeJoin",M[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(A){var z=this,q=(A.bindShader(),this.mixedSpecularColor=o(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function($,ie){return z.curFillColor[ie]*z._useMetalness+$*(1-z._useMetalness)})),A.setUniform("uUseVertexColor",this._useVertexColor),A.setUniform("uMaterialColor",this.curFillColor),A.setUniform("isTexture",!!this._tex),this._tex&&A.setUniform("uSampler",this._tex),A.setUniform("uTint",this._tint),A.setUniform("uHasSetAmbient",this._hasSetAmbient),A.setUniform("uAmbientMatColor",this.curAmbientColor),A.setUniform("uSpecularMatColor",this.mixedSpecularColor),A.setUniform("uEmissiveMatColor",this.curEmissiveColor),A.setUniform("uSpecular",this._useSpecularMaterial),A.setUniform("uEmissive",this._useEmissiveMaterial),A.setUniform("uShininess",this._useShininess),A.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(A),A.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),q=(A.setUniform("uPointLightCount",q),A.setUniform("uPointLightLocation",this.pointLightPositions),A.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),A.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),q=(A.setUniform("uDirectionalLightCount",q),A.setUniform("uLightingDirection",this.directionalLightDirections),A.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),A.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),q=(this.mixedAmbientLight=o(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function($){return $-=z._useMetalness,Math.max(0,$)})),A.setUniform("uAmbientLightCount",q),A.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);A.setUniform("uSpotLightCount",q),A.setUniform("uSpotLightAngle",this.spotLightAngle),A.setUniform("uSpotLightConc",this.spotLightConc),A.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),A.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),A.setUniform("uSpotLightLocation",this.spotLightPositions),A.setUniform("uSpotLightDirection",this.spotLightDirections),A.setUniform("uConstantAttenuation",this.constantAttenuation),A.setUniform("uLinearAttenuation",this.linearAttenuation),A.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),A.bindTextures()}},{key:"_setImageLightUniforms",value:function(A){var z;A.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(z=this.getDiffusedTexture(this.activeImageLight),A.setUniform("environmentMapDiffused",z),z=this.getSpecularTexture(this.activeImageLight),A.setUniform("environmentMapSpecular",z))}},{key:"_setPointUniforms",value:function(A){A.bindShader(),A.setUniform("uMaterialColor",this.curStrokeColor),A.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(A,z,q,$,ie){z=z||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(z,A),q!==void 0&&((A=q)instanceof s.default.DataArray?A=q.dataArray():A instanceof($||Float32Array)||(A=new($||Float32Array)(A)),this.GL.bufferData(z,A,ie||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(A,z){return A.length===z.length&&A.every(function(q,$){return q===z[$]})}},{key:"_isTypedArray",value:function(A){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(z){return A instanceof z})}},{key:"_flatten",value:function(A){return A.flat()}},{key:"_vToNArray",value:function(A){return A.flatMap(function(z){return[z.x,z.y,z.z]})}},{key:"_bezierCoefficients",value:function(A){var z=A*A,q=1-A,$=q*q;return[$*q,3*$*A,3*q*z,z*A]}},{key:"_quadraticCoefficients",value:function(A){var z=1-A;return[z*z,2*z*A,A*A]}},{key:"_bezierToCatmull",value:function(A){return[A[1],A[1]+(A[2]-A[0])/this._curveTightness,A[2]-(A[3]-A[1])/this._curveTightness,A[2]]}},{key:"_initTessy",value:function(){var A=new v.default.GluTesselator;return A.gluTessCallback(v.default.gluEnum.GLU_TESS_VERTEX_DATA,function(z,q){var $=!0,ie=!1,re=void 0;try{for(var fe,ge=z[Symbol.iterator]();!($=(fe=ge.next()).done);$=!0){var de=fe.value;q.push(de)}}catch(me){ie=!0,re=me}finally{try{$||ge.return==null||ge.return()}finally{if(ie)throw re}}}),A.gluTessCallback(v.default.gluEnum.GLU_TESS_BEGIN,function(z){z!==v.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(z))}),A.gluTessCallback(v.default.gluEnum.GLU_TESS_ERROR,function(z){console.log("error callback"),console.log("error number: ".concat(z))}),A.gluTessCallback(v.default.gluEnum.GLU_TESS_COMBINE,function(z,q,$){for(var ie=new Array(s.default.RendererGL.prototype.tessyVertexSize).fill(0),re=0;re<$.length;re++)for(var fe=0;fe<ie.length;fe++)$[re]!==0&&q[re]&&(ie[fe]+=q[re][fe]*$[re]);return ie}),A.gluTessCallback(v.default.gluEnum.GLU_TESS_EDGE_FLAG,function(z){}),A.gluTessProperty(v.default.gluEnum.GLU_TESS_WINDING_RULE,v.default.windingRule.GLU_TESS_WINDING_NONZERO),A}},{key:"_triangulate",value:function(A){var z=A[0]?A[0][2]:void 0,q=!0,$=!0,de=!1,_e=void 0;try{for(var ie,re=A[Symbol.iterator]();!($=(ie=re.next()).done);$=!0)for(var fe=ie.value,ge=0;ge<fe.length;ge+=s.default.RendererGL.prototype.tessyVertexSize)if(fe[ge+2]!==z){q=!1;break}}catch(Me){de=!0,_e=Me}finally{try{$||re.return==null||re.return()}finally{if(de)throw _e}}q?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var de=[],me=(this._tessy.gluTessBeginPolygon(de),!0),_e=!1,ae=void 0;try{for(var he,be=A[Symbol.iterator]();!(me=(he=be.next()).done);me=!0){var ke=he.value;this._tessy.gluTessBeginContour();for(var xe=0;xe<ke.length;xe+=s.default.RendererGL.prototype.tessyVertexSize){var we=ke.slice(xe,xe+s.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(we,we)}this._tessy.gluTessEndContour()}}catch(Me){_e=!0,ae=Me}finally{try{me||be.return==null||be.return()}finally{if(_e)throw ae}}return this._tessy.gluTessEndPolygon(),de}}])&&h(K.prototype,W),se}(s.default.Renderer),s.default.prototype._assert3d=function(W){if(!this._renderer.isP3D)throw new Error("".concat(W,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},s.default.RendererGL.prototype.tessyVertexSize=12,I=s.default.RendererGL,f.default=I},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(t,x,f){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var u=(t=t("../core/main"))&&t.__esModule?t:{default:t};function c(d,m){return function(v){if(Array.isArray(v))return v}(d)||function(v,i){if(Symbol.iterator in Object(v)||Object.prototype.toString.call(v)==="[object Arguments]"){var n=[],a=!0,o=!1,h=void 0;try{for(var p,y=v[Symbol.iterator]();!(a=(p=y.next()).done)&&(n.push(p.value),!i||n.length!==i);a=!0);}catch(w){o=!0,h=w}finally{try{a||y.return==null||y.return()}finally{if(o)throw h}}return n}}(d,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(d,m){for(var v=0;v<m.length;v++){var i=m[v];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(d,i.key,i)}}u.default.Shader=function(){function d(i,n,a){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},h=this,p=d;if(!(h instanceof p))throw new TypeError("Cannot call a class as a function");this._renderer=i,this._vertSrc=n,this._fragSrc=a,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:o.uniforms||{},declarations:o.declarations,helpers:o.helpers||{},vertex:o.vertex||{},fragment:o.fragment||{},modified:{vertex:o.modified&&o.modified.vertex||{},fragment:o.modified&&o.modified.fragment||{}}}}var m,v;return m=d,(v=[{key:"shaderSrc",value:function(b,n){var a,o,h,p,y,b=c(b.split("void main"),2),w=b[0],b=b[1],S="";for(a in this.hooks.uniforms)S+="uniform ".concat(a,`;
`);for(o in this.hooks.declarations&&(S+=this.hooks.declarations+`
`),this.hooks[n].declarations&&(S+=this.hooks[n].declarations+`
`),this.hooks.helpers)S+="".concat(o).concat(this.hooks.helpers[o],`
`);for(h in this.hooks[n])h!=="declarations"&&(p=(y=c(h.split(" "),2))[0],y=y[1],this.hooks.modified[n][h]&&(S+="#define AUGMENTED_HOOK_"+y+`
`),S+=p+" HOOK_"+y+this.hooks[n][h]+`
`);return w+S+"void main"+b}},{key:"version",value:function(){var i=/#version (.+)$/.exec(this.vertSrc());return i?i[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var i in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[i]?"[MODIFIED] ":"")+i+this.hooks.vertex[i]);for(var n in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[n]?"[MODIFIED] ":"")+n+this.hooks.fragment[n]);for(var a in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(a+this.hooks.helpers[a])}},{key:"modify",value:function(i){u.default._validateParameters("p5.Shader.modify",arguments);var n,a={vertex:{},fragment:{},helpers:{}};for(n in i)n!=="declarations"&&n!=="uniforms"&&(n==="vertexDeclarations"?a.vertex.declarations=(a.vertex.declarations||"")+`
`+i[n]:n==="fragmentDeclarations"?a.fragment.declarations=(a.fragment.declarations||"")+`
`+i[n]:this.hooks.vertex[n]?a.vertex[n]=i[n]:this.hooks.fragment[n]?a.fragment[n]=i[n]:a.helpers[n]=i[n]);var o,h,p=Object.assign({},this.hooks.modified.vertex),y=Object.assign({},this.hooks.modified.fragment);for(o in a.vertex)o!=="declarations"&&(p[o]=!0);for(h in a.fragment)h!=="declarations"&&(y[h]=!0);return new u.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(i.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,i.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,a.fragment),vertex:Object.assign({},this.hooks.vertex,a.vertex),helpers:Object.assign({},this.hooks.helpers,a.helpers),modified:{vertex:p,fragment:y}})}},{key:"init",value:function(){if(this._glProgram===0){var i,n=this._renderer.GL;if(this._vertShader=n.createShader(n.VERTEX_SHADER),n.shaderSource(this._vertShader,this.vertSrc()),n.compileShader(this._vertShader),!n.getShaderParameter(this._vertShader,n.COMPILE_STATUS))return i=n.getShaderInfoLog(this._vertShader),console.error(i),null;if(this._fragShader=n.createShader(n.FRAGMENT_SHADER),n.shaderSource(this._fragShader,this.fragSrc()),n.compileShader(this._fragShader),!n.getShaderParameter(this._fragShader,n.COMPILE_STATUS))return i=n.getShaderInfoLog(this._fragShader),console.error(i),null;this._glProgram=n.createProgram(),n.attachShader(this._glProgram,this._vertShader),n.attachShader(this._glProgram,this._fragShader),n.linkProgram(this._glProgram),n.getProgramParameter(this._glProgram,n.LINK_STATUS)||u.default._friendlyError("Snap! Error linking shader program: ".concat(n.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var i in this.hooks.uniforms){var n=c(i.split(" "),2)[1],i=this.hooks.uniforms[i],a=void 0;(a=i instanceof Function?i():i)!=null&&this.setUniform(n,a)}}},{key:"copyToContext",value:function(i){var n=new u.default.Shader(i._renderer,this._vertSrc,this._fragSrc);return n.ensureCompiledOnContext(i),n}},{key:"ensureCompiledOnContext",value:function(i){if(this._glProgram!==0&&this._renderer!==i._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=i._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var i=this._renderer.GL,n=i.getProgramParameter(this._glProgram,i.ACTIVE_ATTRIBUTES),a=0;a<n;++a){var o=i.getActiveAttrib(this._glProgram,a),h=o.name,p=i.getAttribLocation(this._glProgram,h),y={};y.name=h,y.location=p,y.index=a,y.type=o.type,y.size=o.size,this.attributes[h]=y}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var i=this._renderer.GL,n=i.getProgramParameter(this._glProgram,i.ACTIVE_UNIFORMS),a=0,o=0;o<n;++o){var h=i.getActiveUniform(this._glProgram,o),p={},y=(p.location=i.getUniformLocation(this._glProgram,h.name),p.size=h.size,h.name);1<h.size&&(y=y.substring(0,y.indexOf("[0]"))),p.name=y,p.type=h.type,p._cachedData=void 0,p.type===i.SAMPLER_2D&&(p.samplerIndex=a,a++,this.samplers.push(p)),p.isArray=1<h.size||p.type===i.FLOAT_MAT3||p.type===i.FLOAT_MAT4||p.type===i.FLOAT_VEC2||p.type===i.FLOAT_VEC3||p.type===i.FLOAT_VEC4||p.type===i.INT_VEC2||p.type===i.INT_VEC4||p.type===i.INT_VEC3,this.uniforms[y]=p}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var i=this._renderer.GL,n=!0,a=!1,o=void 0;try{for(var h,p=this.samplers[Symbol.iterator]();!(n=(h=p.next()).done);n=!0){var y=h.value,w=y.texture;w===void 0&&(w=this._renderer._getEmptyTexture()),i.activeTexture(i.TEXTURE0+y.samplerIndex),w.bindTexture(),w.update(),i.uniform1i(y.location,y.samplerIndex)}}catch(b){a=!0,o=b}finally{try{n||p.return==null||p.return()}finally{if(a)throw o}}}},{key:"updateTextures",value:function(){var i=!0,n=!1,a=void 0;try{for(var o,h=this.samplers[Symbol.iterator]();!(i=(o=h.next()).done);i=!0){var p=o.value.texture;p&&p.update()}}catch(y){n=!0,a=y}finally{try{i||h.return==null||h.return()}finally{if(n)throw a}}}},{key:"unbindTextures",value:function(){var i=!0,n=!1,a=void 0;try{for(var o,h=this.samplers[Symbol.iterator]();!(i=(o=h.next()).done);i=!0){var p=o.value;this.setUniform(p.name,this._renderer._getEmptyTexture())}}catch(y){n=!0,a=y}finally{try{i||h.return==null||h.return()}finally{if(n)throw a}}}},{key:"_setMatrixUniforms",value:function(){var i=this._renderer.uModelMatrix,n=this._renderer.uViewMatrix,a=this._renderer.uPMatrix,o=i.copy().mult(n),h=(this._renderer.uMVMatrix=o).copy();h.mult(a),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",n.mat4),this.setUniform("uProjectionMatrix",a.mat4),this.setUniform("uModelMatrix",i.mat4),this.setUniform("uModelViewMatrix",o.mat4),this.setUniform("uModelViewProjectionMatrix",h.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var i=this._renderer.GL;return this._renderer._curShader!==this&&(i.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(i,n){var a=this.uniforms[i];if(a){var o=this._renderer.GL;if(a.isArray){if(a._cachedData&&this._renderer._arraysEqual(a._cachedData,n))return;a._cachedData=n.slice(0)}else{if(a._cachedData&&a._cachedData===n)return;Array.isArray(n)?a._cachedData=n.slice(0):a._cachedData=n}var h=a.location;switch(this.useProgram(),a.type){case o.BOOL:n===!0?o.uniform1i(h,1):o.uniform1i(h,0);break;case o.INT:1<a.size?n.length&&o.uniform1iv(h,n):o.uniform1i(h,n);break;case o.FLOAT:1<a.size?n.length&&o.uniform1fv(h,n):o.uniform1f(h,n);break;case o.FLOAT_MAT3:o.uniformMatrix3fv(h,!1,n);break;case o.FLOAT_MAT4:o.uniformMatrix4fv(h,!1,n);break;case o.FLOAT_VEC2:1<a.size?n.length&&o.uniform2fv(h,n):o.uniform2f(h,n[0],n[1]);break;case o.FLOAT_VEC3:1<a.size?n.length&&o.uniform3fv(h,n):o.uniform3f(h,n[0],n[1],n[2]);break;case o.FLOAT_VEC4:1<a.size?n.length&&o.uniform4fv(h,n):o.uniform4f(h,n[0],n[1],n[2],n[3]);break;case o.INT_VEC2:1<a.size?n.length&&o.uniform2iv(h,n):o.uniform2i(h,n[0],n[1]);break;case o.INT_VEC3:1<a.size?n.length&&o.uniform3iv(h,n):o.uniform3i(h,n[0],n[1],n[2]);break;case o.INT_VEC4:1<a.size?n.length&&o.uniform4iv(h,n):o.uniform4i(h,n[0],n[1],n[2],n[3]);break;case o.SAMPLER_2D:o.activeTexture(o.TEXTURE0+a.samplerIndex),a.texture=n instanceof u.default.Texture?n:this._renderer.getTexture(n),o.uniform1i(h,a.samplerIndex),a.texture.src.gifProperties&&a.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(i){return i!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(i,n,a,o,h,p){var y;return i&&(i=i.location)!==-1&&(y=this._renderer.GL,this._renderer.registerEnabled.has(i)||(y.enableVertexAttribArray(i),this._renderer.registerEnabled.add(i)),this._renderer.GL.vertexAttribPointer(i,n,a||y.FLOAT,o||!1,h||0,p||0)),this}},{key:"disableRemainingAttributes",value:function(){var i=this,n=!0,a=!1,o=void 0;try{for(var h,p=this._renderer.registerEnabled.values()[Symbol.iterator]();!(n=(h=p.next()).done);n=!0)(function(){var y=h.value;Object.keys(i.attributes).some(function(w){return i.attributes[w].location===y})||(i._renderer.GL.disableVertexAttribArray(y),i._renderer.registerEnabled.delete(y))})()}catch(y){a=!0,o=y}finally{try{n||p.return==null||p.return()}finally{if(a)throw o}}}}])&&s(m.prototype,v),d}(),t=u.default.Shader,f.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(t,x,f){function u(w){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(w)}function c(w){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(f,"__esModule",{value:!0}),f.checkWebGLCapabilities=y,f.default=f.MipmapTexture=void 0;var s=(p=t("../core/main"))&&p.__esModule?p:{default:p},d=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var b=m();if(b&&b.has(w))return b.get(w);var S,k={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in w){var T;Object.prototype.hasOwnProperty.call(w,S)&&((T=E?Object.getOwnPropertyDescriptor(w,S):null)&&(T.get||T.set)?Object.defineProperty(k,S,T):k[S]=w[S])}return k.default=w,b&&b.set(w,k),k}(t("../core/constants"));function m(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,m=function(){return w},w)}function v(w,b){return(v=Object.setPrototypeOf||function(S,k){return S.__proto__=k,S})(w,b)}function i(w){return function(){var b,S=n(w),S=(b=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(b=n(this).constructor,Reflect.construct(S,arguments,b)):S.apply(this,arguments),this);if(!b||c(b)!=="object"&&typeof b!="function"){if(S!==void 0)return S;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return b}}function n(w){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)})(w)}function a(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function o(w,b){for(var S=0;S<b.length;S++){var k=b[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}function h(w,b,S){b&&o(w.prototype,b)}s.default.Texture=function(){function w(R,S,T){a(this,w),this._renderer=R;var E=this._renderer.GL,T=(T=T||{},this.src=S,this.glTex=void 0,this.glTarget=E.TEXTURE_2D,this.glFormat=T.format||E.RGBA,this.mipmaps=!1,this.glMinFilter=T.minFilter||E.LINEAR,this.glMagFilter=T.magFilter||E.LINEAR,this.glWrapS=T.wrapS||E.CLAMP_TO_EDGE,this.glWrapT=T.wrapT||E.CLAMP_TO_EDGE,this.glDataType=T.dataType||E.UNSIGNED_BYTE,y(R)),R=(this.glFormat!==E.HALF_FLOAT||T.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=E.FLOAT),this.glFormat!==E.HALF_FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||T.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.glFormat!==E.FLOAT||T.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=E.UNSIGNED_BYTE),this.glFormat!==E.FLOAT||this.glMinFilter!==E.LINEAR&&this.glMagFilter!==E.LINEAR||T.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===E.LINEAR&&(this.glMinFilter=E.NEAREST),this.glMagFilter===E.LINEAR&&(this.glMagFilter=E.NEAREST)),this.isSrcMediaElement=s.default.MediaElement!==void 0&&S instanceof s.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=s.default.Element!==void 0&&S instanceof s.default.Element&&!(S instanceof s.default.Graphics)&&!(S instanceof s.default.Renderer),this.isSrcP5Image=S instanceof s.default.Image,this.isSrcP5Graphics=S instanceof s.default.Graphics,this.isSrcP5Renderer=S instanceof s.default.Renderer,this.isImageData=typeof ImageData<"u"&&S instanceof ImageData,this.isFramebufferTexture=S instanceof s.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=R.width,this.height=R.height,this.init(R),this}return h(w,[{key:"_getTextureDataFromSource",value:function(){var b;return this.isFramebufferTexture?b=this.src.rawTexture():this.isSrcP5Image?b=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),b=this.src.canvas||this.src.elt):this.isImageData&&(b=this.src),b}},{key:"init",value:function(b){var S,k=this._renderer.GL;this.isFramebufferTexture||(this.glTex=k.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,this.glMagFilter),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(S=new Uint8Array([1,1,1,1]),k.texImage2D(this.glTarget,0,k.RGBA,1,1,0,this.glFormat,this.glDataType,S)):k.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,b))}},{key:"update",value:function(){var b,S,k,E=this.src;return E.width!==0&&E.height!==0&&!this.isFramebufferTexture&&(b=this._getTextureDataFromSource(),S=!1,k=this._renderer.GL,b.width!==this.width||b.height!==this.height?(S=!0,this.width=b.width||E.width,this.height=b.height||E.height,this.isSrcP5Image?E.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&E.setModified(!0)):this.isSrcP5Image?E.isModified()&&E.setModified(!(S=!0)):this.isSrcMediaElement?E.isModified()?E.setModified(!(S=!0)):E.loadedmetadata&&this._videoPrevUpdateTime!==E.time()&&(this._videoPrevUpdateTime=E.time(),S=!0):this.isImageData?E._dirty&&(S=!(E._dirty=!1)):S=!0,S&&(this.bindTexture(),k.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,b)),S)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(b,S){var k=this._renderer.GL;this.glMinFilter=this.glFilter(b),this.glMagFilter=this.glFilter(S),this.bindTexture(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,this.glMinFilter),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(b){var S=this._renderer.GL;return b===d.NEAREST?S.NEAREST:S.LINEAR}},{key:"setWrapMode",value:function(b,S){function k(O){return(O&O-1)==0}var E=this._renderer.GL,R=this._getTextureDataFromSource(),R=R.naturalWidth&&R.naturalHeight?(T=R.naturalWidth,R.naturalHeight):(T=this.width,this.height),T=k(T),R=k(R);b===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapS=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):b===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapS=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=E.CLAMP_TO_EDGE):this.glWrapS=E.CLAMP_TO_EDGE,S===d.REPEAT?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapT=E.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):S===d.MIRROR?this._renderer.webglVersion===d.WEBGL2||T&&R?this.glWrapT=E.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=E.CLAMP_TO_EDGE):this.glWrapT=E.CLAMP_TO_EDGE,this.bindTexture(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this.glWrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),w}();var p=function(w){var b=k;if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),w&&v(b,w);var S=i(k);function k(E,T,R){return a(this,k),T=(E=S.call(this,E,T,R))._renderer.GL,E.glMinFilter===T.LINEAR&&(E.glMinFilter=T.LINEAR_MIPMAP_LINEAR),E}return h(k,[{key:"glFilter",value:function(E){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(E){var T=this._renderer.GL;this.glTex=T.createTexture(),this.bindTexture();for(var R=0;R<E.length;R++)T.texImage2D(this.glTarget,R,this.glFormat,this.glFormat,this.glDataType,E[R]);this.glMinFilter=T.LINEAR_MIPMAP_LINEAR,T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,this.glMagFilter),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),k}(s.default.Texture);function y(E){var b=E.GL,E=E.webglVersion,S=E===d.WEBGL2?b.getExtension("EXT_color_buffer_float")&&b.getExtension("EXT_float_blend"):b.getExtension("OES_texture_float"),k=S&&b.getExtension("OES_texture_float_linear"),E=E===d.WEBGL2?b.getExtension("EXT_color_buffer_float"):b.getExtension("OES_texture_half_float");return{float:S,floatLinear:k,halfFloat:E,halfFloatLinear:E&&b.getExtension("OES_texture_half_float_linear")}}f.MipmapTexture=p,t=s.default.Texture,f.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(t,x,f){function u(w){return(u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(w)}function c(w){return(c=typeof Symbol=="function"&&u(Symbol.iterator)==="symbol"?function(b){return u(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":u(b)})(w)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var s,d=(s=t("../core/main"))&&s.__esModule?s:{default:s},m=function(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var b=v();if(b&&b.has(w))return b.get(w);var S,k={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(S in w){var T;Object.prototype.hasOwnProperty.call(w,S)&&((T=E?Object.getOwnPropertyDescriptor(w,S):null)&&(T.get||T.set)?Object.defineProperty(k,S,T):k[S]=w[S])}return k.default=w,b&&b.set(w,k),k}(t("../core/constants"));function v(){var w;return typeof WeakMap!="function"?null:(w=new WeakMap,v=function(){return w},w)}function i(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}function n(w,b){for(var S=0;S<b.length;S++){var k=b[S];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(w,k.key,k)}}function a(w,b,S){b&&n(w.prototype,b)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),d.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},d.default.RendererGL.prototype.textWidth=function(w){return this._isOpenType()?this._textFont._textWidth(w,this._textSize):0};var o=function(){function w(b,S){i(this,w),this.width=b,this.height=S,this.infos=[]}return a(w,[{key:"findImage",value:function(b){var S,k,E=this.width*this.height;if(E<b)throw new Error("font is too complex to render in 3D");for(var T=this.infos.length-1;0<=T;--T){var R=this.infos[T];if(R.index+b<E){k=(S=R).imageData;break}}if(!S){try{k=new ImageData(this.width,this.height)}catch{var O=document.getElementsByTagName("canvas")[0],M=!O,L=(O||((O=document.createElement("canvas")).style.display="none",document.body.appendChild(O)),O.getContext("2d"));L&&(k=L.createImageData(this.width,this.height)),M&&document.body.removeChild(O)}this.infos.push(S={index:0,imageData:k})}return L=S.index,S.index+=b,k._dirty=!0,{imageData:k,index:L}}}]),w}();function h(R,b,S,k,E){var T=R.imageData.data,R=4*R.index++;T[R++]=b,T[R++]=S,T[R++]=k,T[+R]=E}var p=Math.sqrt(3),y=function(){function w(b){i(this,w),this.font=b,this.strokeImageInfos=new o(64,64),this.colDimImageInfos=new o(64,64),this.rowDimImageInfos=new o(64,64),this.colCellImageInfos=new o(64,64),this.rowCellImageInfos=new o(64,64),this.glyphInfos={}}return a(w,[{key:"getGlyphInfo",value:function(b){var S=this.glyphInfos[b.index];if(!S){var k=b.getBoundingBox(),E=k.x1,T=k.y1,R=k.x2-E,O=k.y2-T,M=b.path.commands;if(R==0||O==0||!M.length)return this.glyphInfos[b.index]={};for(var L=[],I=[],B=[],V=8;0<=V;--V)B.push([]);for(V=8;0<=V;--V)I.push([]);var G,Y,H,W,K=function(){function nt(ot,ut,ct,Ae){i(this,nt),this.p0=ot,this.c0=ut,this.c1=ct,this.p1=Ae}return a(nt,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return d.default.Vector.sub(d.default.Vector.sub(this.p1,this.p0),d.default.Vector.mult(d.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Xe){var ut=d.default.Vector.lerp(this.p0,this.c0,Xe),Ae=d.default.Vector.lerp(this.c0,this.c1,Xe),ct=d.default.Vector.lerp(ut,Ae,Xe),Ae=(this.c1=d.default.Vector.lerp(this.c1,this.p1,Xe),this.c0=d.default.Vector.lerp(Ae,this.c1,Xe),d.default.Vector.lerp(ct,this.c0,Xe)),Xe=new nt(this.p0,ut,ct,Ae);return this.p0=Ae,Xe}},{key:"splitInflections",value:function(){var ot=d.default.Vector.sub(this.c0,this.p0),ut=d.default.Vector.sub(d.default.Vector.sub(this.c1,this.c0),ot),ct=d.default.Vector.sub(d.default.Vector.sub(d.default.Vector.sub(this.p1,this.c1),ot),d.default.Vector.mult(ut,2)),Ae=[],Xe=ut.x*ct.y-ut.y*ct.x;return Xe!==0&&0<=(ot=(ct=ot.x*ct.y-ot.y*ct.x)*ct-4*Xe*(ot.x*ut.y-ot.y*ut.x))&&(Xe<0&&(Xe=-Xe,ct=-ct),ot=(-ct+(ut=Math.sqrt(ot)))/(2*Xe),0<(ct=(-ct-ut)/(2*Xe))&&ct<1&&(Ae.push(this.split(ct)),ot=1-(1-ot)/(1-ct)),0<ot&&ot<1&&Ae.push(this.split(ot))),Ae.push(this),Ae}}]),nt}(),Q=!0,se=!1,A=void 0;try{for(var z,q=M[Symbol.iterator]();!(Q=(z=q.next()).done);Q=!0){var $=z.value,ie=($.x-E)/R,re=($.y-T)/O;if(!Ie(G,Y,ie,re)){switch($.type){case"M":H=ie,W=re;break;case"L":He(G,Y,ie,re);break;case"Q":var fe=($.x1-E)/R,ge=($.y1-T)/O;we([G,ie,fe],[Y,re,ge],{x:G,y:Y,cx:fe,cy:ge});break;case"Z":Ie(G,Y,H,W)?L.push({x:G,y:Y}):(He(G,Y,H,W),L.push({x:H,y:W}));break;case"C":for(var de=function(ce,De,Ge,ct,Ae,Xe,Le,oe){var ce=new K(new d.default.Vector(ce,De),new d.default.Vector(Ge,ct),new d.default.Vector(Ae,Xe),new d.default.Vector(Le,oe)).splitInflections(),ne=[],pe=30/p,Ee=!0,De=!1,Ge=void 0;try{for(var Ke,it=ce[Symbol.iterator]();!(Ee=(Ke=it.next()).done);Ee=!0){for(var at=Ke.value,ht=[],Pt=void 0;!(.125<=(Pt=pe/at.quadError()));){var Ot=Math.pow(Pt,.3333333333333333),gt=at.split(Ot),Dt=at.split(1-Ot/(1-Ot));ne.push(gt),ht.push(at),at=Dt}Pt<1&&ne.push(at.split(.5)),ne.push(at),Array.prototype.push.apply(ne,ht.reverse())}}catch(Ct){De=!0,Ge=Ct}finally{try{Ee||it.return==null||it.return()}finally{if(De)throw Ge}}return ne}(G,Y,($.x1-E)/R,($.y1-T)/O,($.x2-E)/R,($.y2-T)/O,ie,re),me=0;me<de.length;me++){var _e=de[me].toQuadratic();we([_e.x,_e.x1,_e.cx],[_e.y,_e.y1,_e.cy],_e)}break;default:throw new Error("unknown command type: ".concat($.type))}G=ie,Y=re}}}catch(nt){se=!0,A=nt}finally{try{Q||q.return==null||q.return()}finally{if(se)throw A}}for(var ae=L.length,he=this.strokeImageInfos.findImage(ae),be=he.index,ke=0;ke<ae;++ke){var xe=L[ke];h(he,Me(xe.x),Me(xe.y),Me(xe.cx),Me(xe.cy))}(S=this.glyphInfos[b.index]={glyph:b,uGlyphRect:[k.x1,-k.y1,k.x2,-k.y2],strokeImageInfo:he,strokes:L,colInfo:dt(B,this.colDimImageInfos,this.colCellImageInfos),rowInfo:dt(I,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[S.colInfo.dimOffset,S.rowInfo.dimOffset]}return S;function we(nt,ot,ut){var ct=L.length;function Ae(ne,pe,Ee){for(var De=ne.length;0<De--;){var Ge=ne[De];Ge<pe&&(pe=Ge),Ee<Ge&&(Ee=Ge)}return{min:pe,max:Ee}}L.push(ut);for(var ut=Ae(nt,1,0),nt=Math.max(Math.floor(9*ut.min-.5),0),Xe=Math.min(Math.ceil(9*ut.max+.5),9),Le=nt;Le<Xe;++Le)B[Le].push(ct);for(var ut=Ae(ot,1,0),nt=Math.max(Math.floor(9*ut.min-.5),0),oe=Math.min(Math.ceil(9*ut.max+.5),9),ce=nt;ce<oe;++ce)I[ce].push(ct)}function Me(nt){return(nt=(ut=255)*nt)<(ot=0)?ot:ut<nt?ut:nt;var ot,ut}function He(nt,ot,ut,ct){we([nt,ut],[ot,ct],{x:nt,y:ot,cx:(nt+ut)/2,cy:(ot+ct)/2})}function Ie(nt,ot,ut,ct){return Math.abs(ut-nt)<1e-5&&Math.abs(ct-ot)<1e-5}function dt(nt,ot,ut){for(var ct=nt.length,Ae=ot.findImage(ct),ot=Ae.index,Xe=0,Le=0;Le<ct;++Le)Xe+=nt[Le].length;for(var oe=ut.findImage(Xe),ce=0;ce<ct;++ce){var ne=nt[ce],pe=ne.length,Ee=oe.index;h(Ae,Ee>>7,127&Ee,pe>>7,127&pe);for(var De=0;De<pe;++De){var Ge=ne[De]+be;h(oe,Ge>>7,127&Ge,0,0)}}return{cellImageInfo:oe,dimOffset:ot,dimImageInfo:Ae}}}}]),w}();d.default.RendererGL.prototype._renderText=function(w,b,S,k,E){if(this._textFont&&typeof this._textFont!="string"){if(!(E<=k)&&this._doFill){if(this._isOpenType()){w.push();var E=this._doStroke,T=this.drawMode,R=(this._doStroke=!1,this.drawMode=m.TEXTURE,this._textFont.font),O=(O=this._textFont._fontInfo)||(this._textFont._fontInfo=new y(R)),S=this._textFont._handleAlignment(this,b,S,k),k=this._textSize/R.unitsPerEm,M=(this.translate(S.x,S.y,0),this.scale(k,k,1),this.GL),S=!this._defaultFontShader,L=this._getFontShader(),I=(L.init(),L.bindShader(),S&&(L.setUniform("uGridImageSize",[64,64]),L.setUniform("uCellsImageSize",[64,64]),L.setUniform("uStrokeImageSize",[64,64]),L.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),B=(I||((k=this._textGeom=new d.default.Geometry(1,1,function(){for(var me=0;me<=1;me++)for(var _e=0;_e<=1;_e++)this.vertices.push(new d.default.Vector(_e,me,0)),this.uvs.push(_e,me)})).computeFaces().computeNormals(),I=this.createBuffers("glyph",k)),!0),S=!1,k=void 0;try{for(var V,G=this.retainedMode.buffers.text[Symbol.iterator]();!(B=(V=G.next()).done);B=!0)V.value._prepareBuffer(I,L)}catch(me){S=!0,k=me}finally{try{B||G.return==null||G.return()}finally{if(S)throw k}}this._bindBuffer(I.indexBuffer,M.ELEMENT_ARRAY_BUFFER),L.setUniform("uMaterialColor",this.curFillColor),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var Y=0,H=null,W=R.stringToGlyphs(b),K=!0,Q=!1,se=void 0;try{for(var A,z=W[Symbol.iterator]();!(K=(A=z.next()).done);K=!0){var q,$,ie=A.value,re=(H&&(Y+=R.getKerningValue(H,ie)),O.getGlyphInfo(ie));re.uGlyphRect&&(q=re.rowInfo,$=re.colInfo,L.setUniform("uSamplerStrokes",re.strokeImageInfo.imageData),L.setUniform("uSamplerRowStrokes",q.cellImageInfo.imageData),L.setUniform("uSamplerRows",q.dimImageInfo.imageData),L.setUniform("uSamplerColStrokes",$.cellImageInfo.imageData),L.setUniform("uSamplerCols",$.dimImageInfo.imageData),L.setUniform("uGridOffset",re.uGridOffset),L.setUniform("uGlyphRect",re.uGlyphRect),L.setUniform("uGlyphOffset",Y),L.bindTextures(),M.drawElements(M.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),Y+=ie.advanceWidth,H=ie}}catch(me){Q=!0,se=me}finally{try{K||z.return==null||z.return()}finally{if(Q)throw se}}}finally{L.unbindShader(),this._doStroke=E,this.drawMode=T,M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),w.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return w}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})}(Nh)),Nh.exports}var $2=Q2();const mv=Qh($2);var Tc={exports:{}};/*!
 * matter-js 0.20.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var K2=Tc.exports,sg;function J2(){return sg||(sg=1,function(D,r){(function(t,x){D.exports=x()})(K2,function(){return function(g){var t={};function x(f){if(t[f])return t[f].exports;var u=t[f]={i:f,l:!1,exports:{}};return g[f].call(u.exports,u,u.exports,x),u.l=!0,u.exports}return x.m=g,x.c=t,x.d=function(f,u,c){x.o(f,u)||Object.defineProperty(f,u,{enumerable:!0,get:c})},x.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},x.t=function(f,u){if(u&1&&(f=x(f)),u&8||u&4&&typeof f=="object"&&f&&f.__esModule)return f;var c=Object.create(null);if(x.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:f}),u&2&&typeof f!="string")for(var s in f)x.d(c,s,(function(d){return f[d]}).bind(null,s));return c},x.n=function(f){var u=f&&f.__esModule?function(){return f.default}:function(){return f};return x.d(u,"a",u),u},x.o=function(f,u){return Object.prototype.hasOwnProperty.call(f,u)},x.p="",x(x.s=20)}([function(g,t){var x={};g.exports=x,function(){x._baseDelta=1e3/60,x._nextId=0,x._seed=0,x._nowStartTime=+new Date,x._warnedOnce={},x._decomp=null,x.extend=function(u,c){var s,d;typeof c=="boolean"?(s=2,d=c):(s=1,d=!0);for(var m=s;m<arguments.length;m++){var v=arguments[m];if(v)for(var i in v)d&&v[i]&&v[i].constructor===Object&&(!u[i]||u[i].constructor===Object)?(u[i]=u[i]||{},x.extend(u[i],d,v[i])):u[i]=v[i]}return u},x.clone=function(u,c){return x.extend({},c,u)},x.keys=function(u){if(Object.keys)return Object.keys(u);var c=[];for(var s in u)c.push(s);return c},x.values=function(u){var c=[];if(Object.keys){for(var s=Object.keys(u),d=0;d<s.length;d++)c.push(u[s[d]]);return c}for(var m in u)c.push(u[m]);return c},x.get=function(u,c,s,d){c=c.split(".").slice(s,d);for(var m=0;m<c.length;m+=1)u=u[c[m]];return u},x.set=function(u,c,s,d,m){var v=c.split(".").slice(d,m);return x.get(u,c,0,-1)[v[v.length-1]]=s,s},x.shuffle=function(u){for(var c=u.length-1;c>0;c--){var s=Math.floor(x.random()*(c+1)),d=u[c];u[c]=u[s],u[s]=d}return u},x.choose=function(u){return u[Math.floor(x.random()*u.length)]},x.isElement=function(u){return typeof HTMLElement<"u"?u instanceof HTMLElement:!!(u&&u.nodeType&&u.nodeName)},x.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},x.isFunction=function(u){return typeof u=="function"},x.isPlainObject=function(u){return typeof u=="object"&&u.constructor===Object},x.isString=function(u){return toString.call(u)==="[object String]"},x.clamp=function(u,c,s){return u<c?c:u>s?s:u},x.sign=function(u){return u<0?-1:1},x.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-x._nowStartTime},x.random=function(u,c){return u=typeof u<"u"?u:0,c=typeof c<"u"?c:1,u+f()*(c-u)};var f=function(){return x._seed=(x._seed*9301+49297)%233280,x._seed/233280};x.colorToNumber=function(u){return u=u.replace("#",""),u.length==3&&(u=u.charAt(0)+u.charAt(0)+u.charAt(1)+u.charAt(1)+u.charAt(2)+u.charAt(2)),parseInt(u,16)},x.logLevel=1,x.log=function(){console&&x.logLevel>0&&x.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.info=function(){console&&x.logLevel>0&&x.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.warn=function(){console&&x.logLevel>0&&x.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},x.warnOnce=function(){var u=Array.prototype.slice.call(arguments).join(" ");x._warnedOnce[u]||(x.warn(u),x._warnedOnce[u]=!0)},x.deprecated=function(u,c,s){u[c]=x.chain(function(){x.warnOnce("🔅 deprecated 🔅",s)},u[c])},x.nextId=function(){return x._nextId++},x.indexOf=function(u,c){if(u.indexOf)return u.indexOf(c);for(var s=0;s<u.length;s++)if(u[s]===c)return s;return-1},x.map=function(u,c){if(u.map)return u.map(c);for(var s=[],d=0;d<u.length;d+=1)s.push(c(u[d]));return s},x.topologicalSort=function(u){var c=[],s=[],d=[];for(var m in u)!s[m]&&!d[m]&&x._topologicalSort(m,s,d,u,c);return c},x._topologicalSort=function(u,c,s,d,m){var v=d[u]||[];s[u]=!0;for(var i=0;i<v.length;i+=1){var n=v[i];s[n]||c[n]||x._topologicalSort(n,c,s,d,m)}s[u]=!1,c[u]=!0,m.push(u)},x.chain=function(){for(var u=[],c=0;c<arguments.length;c+=1){var s=arguments[c];s._chained?u.push.apply(u,s._chained):u.push(s)}var d=function(){for(var m,v=new Array(arguments.length),i=0,n=arguments.length;i<n;i++)v[i]=arguments[i];for(i=0;i<u.length;i+=1){var a=u[i].apply(m,v);typeof a<"u"&&(m=a)}return m};return d._chained=u,d},x.chainPathBefore=function(u,c,s){return x.set(u,c,x.chain(s,x.get(u,c)))},x.chainPathAfter=function(u,c,s){return x.set(u,c,x.chain(x.get(u,c),s))},x.setDecomp=function(u){x._decomp=u},x.getDecomp=function(){var u=x._decomp;try{!u&&typeof window<"u"&&(u=window.decomp),!u&&typeof Ma<"u"&&(u=Ma.decomp)}catch{u=null}return u}}()},function(g,t){var x={};g.exports=x,function(){x.create=function(f){var u={min:{x:0,y:0},max:{x:0,y:0}};return f&&x.update(u,f),u},x.update=function(f,u,c){f.min.x=1/0,f.max.x=-1/0,f.min.y=1/0,f.max.y=-1/0;for(var s=0;s<u.length;s++){var d=u[s];d.x>f.max.x&&(f.max.x=d.x),d.x<f.min.x&&(f.min.x=d.x),d.y>f.max.y&&(f.max.y=d.y),d.y<f.min.y&&(f.min.y=d.y)}c&&(c.x>0?f.max.x+=c.x:f.min.x+=c.x,c.y>0?f.max.y+=c.y:f.min.y+=c.y)},x.contains=function(f,u){return u.x>=f.min.x&&u.x<=f.max.x&&u.y>=f.min.y&&u.y<=f.max.y},x.overlaps=function(f,u){return f.min.x<=u.max.x&&f.max.x>=u.min.x&&f.max.y>=u.min.y&&f.min.y<=u.max.y},x.translate=function(f,u){f.min.x+=u.x,f.max.x+=u.x,f.min.y+=u.y,f.max.y+=u.y},x.shift=function(f,u){var c=f.max.x-f.min.x,s=f.max.y-f.min.y;f.min.x=u.x,f.max.x=u.x+c,f.min.y=u.y,f.max.y=u.y+s}}()},function(g,t){var x={};g.exports=x,function(){x.create=function(f,u){return{x:f||0,y:u||0}},x.clone=function(f){return{x:f.x,y:f.y}},x.magnitude=function(f){return Math.sqrt(f.x*f.x+f.y*f.y)},x.magnitudeSquared=function(f){return f.x*f.x+f.y*f.y},x.rotate=function(f,u,c){var s=Math.cos(u),d=Math.sin(u);c||(c={});var m=f.x*s-f.y*d;return c.y=f.x*d+f.y*s,c.x=m,c},x.rotateAbout=function(f,u,c,s){var d=Math.cos(u),m=Math.sin(u);s||(s={});var v=c.x+((f.x-c.x)*d-(f.y-c.y)*m);return s.y=c.y+((f.x-c.x)*m+(f.y-c.y)*d),s.x=v,s},x.normalise=function(f){var u=x.magnitude(f);return u===0?{x:0,y:0}:{x:f.x/u,y:f.y/u}},x.dot=function(f,u){return f.x*u.x+f.y*u.y},x.cross=function(f,u){return f.x*u.y-f.y*u.x},x.cross3=function(f,u,c){return(u.x-f.x)*(c.y-f.y)-(u.y-f.y)*(c.x-f.x)},x.add=function(f,u,c){return c||(c={}),c.x=f.x+u.x,c.y=f.y+u.y,c},x.sub=function(f,u,c){return c||(c={}),c.x=f.x-u.x,c.y=f.y-u.y,c},x.mult=function(f,u){return{x:f.x*u,y:f.y*u}},x.div=function(f,u){return{x:f.x/u,y:f.y/u}},x.perp=function(f,u){return u=u===!0?-1:1,{x:u*-f.y,y:u*f.x}},x.neg=function(f){return{x:-f.x,y:-f.y}},x.angle=function(f,u){return Math.atan2(u.y-f.y,u.x-f.x)},x._temp=[x.create(),x.create(),x.create(),x.create(),x.create(),x.create()]}()},function(g,t,x){var f={};g.exports=f;var u=x(2),c=x(0);(function(){f.create=function(s,d){for(var m=[],v=0;v<s.length;v++){var i=s[v],n={x:i.x,y:i.y,index:v,body:d,isInternal:!1};m.push(n)}return m},f.fromPath=function(s,d){var m=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,v=[];return s.replace(m,function(i,n,a){v.push({x:parseFloat(n),y:parseFloat(a)})}),f.create(v,d)},f.centre=function(s){for(var d=f.area(s,!0),m={x:0,y:0},v,i,n,a=0;a<s.length;a++)n=(a+1)%s.length,v=u.cross(s[a],s[n]),i=u.mult(u.add(s[a],s[n]),v),m=u.add(m,i);return u.div(m,6*d)},f.mean=function(s){for(var d={x:0,y:0},m=0;m<s.length;m++)d.x+=s[m].x,d.y+=s[m].y;return u.div(d,s.length)},f.area=function(s,d){for(var m=0,v=s.length-1,i=0;i<s.length;i++)m+=(s[v].x-s[i].x)*(s[v].y+s[i].y),v=i;return d?m/2:Math.abs(m)/2},f.inertia=function(s,d){for(var m=0,v=0,i=s,n,a,o=0;o<i.length;o++)a=(o+1)%i.length,n=Math.abs(u.cross(i[a],i[o])),m+=n*(u.dot(i[a],i[a])+u.dot(i[a],i[o])+u.dot(i[o],i[o])),v+=n;return d/6*(m/v)},f.translate=function(s,d,m){m=typeof m<"u"?m:1;var v=s.length,i=d.x*m,n=d.y*m,a;for(a=0;a<v;a++)s[a].x+=i,s[a].y+=n;return s},f.rotate=function(s,d,m){if(d!==0){var v=Math.cos(d),i=Math.sin(d),n=m.x,a=m.y,o=s.length,h,p,y,w;for(w=0;w<o;w++)h=s[w],p=h.x-n,y=h.y-a,h.x=n+(p*v-y*i),h.y=a+(p*i+y*v);return s}},f.contains=function(s,d){for(var m=d.x,v=d.y,i=s.length,n=s[i-1],a,o=0;o<i;o++){if(a=s[o],(m-n.x)*(a.y-n.y)+(v-n.y)*(n.x-a.x)>0)return!1;n=a}return!0},f.scale=function(s,d,m,v){if(d===1&&m===1)return s;v=v||f.centre(s);for(var i,n,a=0;a<s.length;a++)i=s[a],n=u.sub(i,v),s[a].x=v.x+n.x*d,s[a].y=v.y+n.y*m;return s},f.chamfer=function(s,d,m,v,i){typeof d=="number"?d=[d]:d=d||[8],m=typeof m<"u"?m:-1,v=v||2,i=i||14;for(var n=[],a=0;a<s.length;a++){var o=s[a-1>=0?a-1:s.length-1],h=s[a],p=s[(a+1)%s.length],y=d[a<d.length?a:d.length-1];if(y===0){n.push(h);continue}var w=u.normalise({x:h.y-o.y,y:o.x-h.x}),b=u.normalise({x:p.y-h.y,y:h.x-p.x}),S=Math.sqrt(2*Math.pow(y,2)),k=u.mult(c.clone(w),y),E=u.normalise(u.mult(u.add(w,b),.5)),T=u.sub(h,u.mult(E,S)),R=m;m===-1&&(R=Math.pow(y,.32)*1.75),R=c.clamp(R,v,i),R%2===1&&(R+=1);for(var O=Math.acos(u.dot(w,b)),M=O/R,L=0;L<R;L++)n.push(u.add(u.rotate(k,M*L),T))}return n},f.clockwiseSort=function(s){var d=f.mean(s);return s.sort(function(m,v){return u.angle(d,m)-u.angle(d,v)}),s},f.isConvex=function(s){var d=0,m=s.length,v,i,n,a;if(m<3)return null;for(v=0;v<m;v++)if(i=(v+1)%m,n=(v+2)%m,a=(s[i].x-s[v].x)*(s[n].y-s[i].y),a-=(s[i].y-s[v].y)*(s[n].x-s[i].x),a<0?d|=1:a>0&&(d|=2),d===3)return!1;return d!==0?!0:null},f.hull=function(s){var d=[],m=[],v,i;for(s=s.slice(0),s.sort(function(n,a){var o=n.x-a.x;return o!==0?o:n.y-a.y}),i=0;i<s.length;i+=1){for(v=s[i];m.length>=2&&u.cross3(m[m.length-2],m[m.length-1],v)<=0;)m.pop();m.push(v)}for(i=s.length-1;i>=0;i-=1){for(v=s[i];d.length>=2&&u.cross3(d[d.length-2],d[d.length-1],v)<=0;)d.pop();d.push(v)}return d.pop(),m.pop(),d.concat(m)}})()},function(g,t,x){var f={};g.exports=f;var u=x(3),c=x(2),s=x(7),d=x(0),m=x(1),v=x(11);(function(){f._timeCorrection=!0,f._inertiaScale=4,f._nextCollidingGroupId=1,f._nextNonCollidingGroupId=-1,f._nextCategory=1,f._baseDelta=1e3/60,f.create=function(n){var a={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},o=d.extend(a,n);return i(o,n),o},f.nextGroup=function(n){return n?f._nextNonCollidingGroupId--:f._nextCollidingGroupId++},f.nextCategory=function(){return f._nextCategory=f._nextCategory<<1,f._nextCategory};var i=function(n,a){a=a||{},f.set(n,{bounds:n.bounds||m.create(n.vertices),positionPrev:n.positionPrev||c.clone(n.position),anglePrev:n.anglePrev||n.angle,vertices:n.vertices,parts:n.parts||[n],isStatic:n.isStatic,isSleeping:n.isSleeping,parent:n.parent||n}),u.rotate(n.vertices,n.angle,n.position),v.rotate(n.axes,n.angle),m.update(n.bounds,n.vertices,n.velocity),f.set(n,{axes:a.axes||n.axes,area:a.area||n.area,mass:a.mass||n.mass,inertia:a.inertia||n.inertia});var o=n.isStatic?"#14151f":d.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),h=n.isStatic?"#555":"#ccc",p=n.isStatic&&n.render.fillStyle===null?1:0;n.render.fillStyle=n.render.fillStyle||o,n.render.strokeStyle=n.render.strokeStyle||h,n.render.lineWidth=n.render.lineWidth||p,n.render.sprite.xOffset+=-(n.bounds.min.x-n.position.x)/(n.bounds.max.x-n.bounds.min.x),n.render.sprite.yOffset+=-(n.bounds.min.y-n.position.y)/(n.bounds.max.y-n.bounds.min.y)};f.set=function(n,a,o){var h;typeof a=="string"&&(h=a,a={},a[h]=o);for(h in a)if(Object.prototype.hasOwnProperty.call(a,h))switch(o=a[h],h){case"isStatic":f.setStatic(n,o);break;case"isSleeping":s.set(n,o);break;case"mass":f.setMass(n,o);break;case"density":f.setDensity(n,o);break;case"inertia":f.setInertia(n,o);break;case"vertices":f.setVertices(n,o);break;case"position":f.setPosition(n,o);break;case"angle":f.setAngle(n,o);break;case"velocity":f.setVelocity(n,o);break;case"angularVelocity":f.setAngularVelocity(n,o);break;case"speed":f.setSpeed(n,o);break;case"angularSpeed":f.setAngularSpeed(n,o);break;case"parts":f.setParts(n,o);break;case"centre":f.setCentre(n,o);break;default:n[h]=o}},f.setStatic=function(n,a){for(var o=0;o<n.parts.length;o++){var h=n.parts[o];a?(h.isStatic||(h._original={restitution:h.restitution,friction:h.friction,mass:h.mass,inertia:h.inertia,density:h.density,inverseMass:h.inverseMass,inverseInertia:h.inverseInertia}),h.restitution=0,h.friction=1,h.mass=h.inertia=h.density=1/0,h.inverseMass=h.inverseInertia=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.angularVelocity=0,h.speed=0,h.angularSpeed=0,h.motion=0):h._original&&(h.restitution=h._original.restitution,h.friction=h._original.friction,h.mass=h._original.mass,h.inertia=h._original.inertia,h.density=h._original.density,h.inverseMass=h._original.inverseMass,h.inverseInertia=h._original.inverseInertia,h._original=null),h.isStatic=a}},f.setMass=function(n,a){var o=n.inertia/(n.mass/6);n.inertia=o*(a/6),n.inverseInertia=1/n.inertia,n.mass=a,n.inverseMass=1/n.mass,n.density=n.mass/n.area},f.setDensity=function(n,a){f.setMass(n,a*n.area),n.density=a},f.setInertia=function(n,a){n.inertia=a,n.inverseInertia=1/n.inertia},f.setVertices=function(n,a){a[0].body===n?n.vertices=a:n.vertices=u.create(a,n),n.axes=v.fromVertices(n.vertices),n.area=u.area(n.vertices),f.setMass(n,n.density*n.area);var o=u.centre(n.vertices);u.translate(n.vertices,o,-1),f.setInertia(n,f._inertiaScale*u.inertia(n.vertices,n.mass)),u.translate(n.vertices,n.position),m.update(n.bounds,n.vertices,n.velocity)},f.setParts=function(n,a,o){var h;for(a=a.slice(0),n.parts.length=0,n.parts.push(n),n.parent=n,h=0;h<a.length;h++){var p=a[h];p!==n&&(p.parent=n,n.parts.push(p))}if(n.parts.length!==1){if(o=typeof o<"u"?o:!0,o){var y=[];for(h=0;h<a.length;h++)y=y.concat(a[h].vertices);u.clockwiseSort(y);var w=u.hull(y),b=u.centre(w);f.setVertices(n,w),u.translate(n.vertices,b)}var S=f._totalProperties(n);n.area=S.area,n.parent=n,n.position.x=S.centre.x,n.position.y=S.centre.y,n.positionPrev.x=S.centre.x,n.positionPrev.y=S.centre.y,f.setMass(n,S.mass),f.setInertia(n,S.inertia),f.setPosition(n,S.centre)}},f.setCentre=function(n,a,o){o?(n.positionPrev.x+=a.x,n.positionPrev.y+=a.y,n.position.x+=a.x,n.position.y+=a.y):(n.positionPrev.x=a.x-(n.position.x-n.positionPrev.x),n.positionPrev.y=a.y-(n.position.y-n.positionPrev.y),n.position.x=a.x,n.position.y=a.y)},f.setPosition=function(n,a,o){var h=c.sub(a,n.position);o?(n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.velocity.x=h.x,n.velocity.y=h.y,n.speed=c.magnitude(h)):(n.positionPrev.x+=h.x,n.positionPrev.y+=h.y);for(var p=0;p<n.parts.length;p++){var y=n.parts[p];y.position.x+=h.x,y.position.y+=h.y,u.translate(y.vertices,h),m.update(y.bounds,y.vertices,n.velocity)}},f.setAngle=function(n,a,o){var h=a-n.angle;o?(n.anglePrev=n.angle,n.angularVelocity=h,n.angularSpeed=Math.abs(h)):n.anglePrev+=h;for(var p=0;p<n.parts.length;p++){var y=n.parts[p];y.angle+=h,u.rotate(y.vertices,h,n.position),v.rotate(y.axes,h),m.update(y.bounds,y.vertices,n.velocity),p>0&&c.rotateAbout(y.position,h,n.position,y.position)}},f.setVelocity=function(n,a){var o=n.deltaTime/f._baseDelta;n.positionPrev.x=n.position.x-a.x*o,n.positionPrev.y=n.position.y-a.y*o,n.velocity.x=(n.position.x-n.positionPrev.x)/o,n.velocity.y=(n.position.y-n.positionPrev.y)/o,n.speed=c.magnitude(n.velocity)},f.getVelocity=function(n){var a=f._baseDelta/n.deltaTime;return{x:(n.position.x-n.positionPrev.x)*a,y:(n.position.y-n.positionPrev.y)*a}},f.getSpeed=function(n){return c.magnitude(f.getVelocity(n))},f.setSpeed=function(n,a){f.setVelocity(n,c.mult(c.normalise(f.getVelocity(n)),a))},f.setAngularVelocity=function(n,a){var o=n.deltaTime/f._baseDelta;n.anglePrev=n.angle-a*o,n.angularVelocity=(n.angle-n.anglePrev)/o,n.angularSpeed=Math.abs(n.angularVelocity)},f.getAngularVelocity=function(n){return(n.angle-n.anglePrev)*f._baseDelta/n.deltaTime},f.getAngularSpeed=function(n){return Math.abs(f.getAngularVelocity(n))},f.setAngularSpeed=function(n,a){f.setAngularVelocity(n,d.sign(f.getAngularVelocity(n))*a)},f.translate=function(n,a,o){f.setPosition(n,c.add(n.position,a),o)},f.rotate=function(n,a,o,h){if(!o)f.setAngle(n,n.angle+a,h);else{var p=Math.cos(a),y=Math.sin(a),w=n.position.x-o.x,b=n.position.y-o.y;f.setPosition(n,{x:o.x+(w*p-b*y),y:o.y+(w*y+b*p)},h),f.setAngle(n,n.angle+a,h)}},f.scale=function(n,a,o,h){var p=0,y=0;h=h||n.position;for(var w=0;w<n.parts.length;w++){var b=n.parts[w];u.scale(b.vertices,a,o,h),b.axes=v.fromVertices(b.vertices),b.area=u.area(b.vertices),f.setMass(b,n.density*b.area),u.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),f.setInertia(b,f._inertiaScale*u.inertia(b.vertices,b.mass)),u.translate(b.vertices,{x:b.position.x,y:b.position.y}),w>0&&(p+=b.area,y+=b.inertia),b.position.x=h.x+(b.position.x-h.x)*a,b.position.y=h.y+(b.position.y-h.y)*o,m.update(b.bounds,b.vertices,n.velocity)}n.parts.length>1&&(n.area=p,n.isStatic||(f.setMass(n,n.density*p),f.setInertia(n,y))),n.circleRadius&&(a===o?n.circleRadius*=a:n.circleRadius=null)},f.update=function(n,a){a=(typeof a<"u"?a:1e3/60)*n.timeScale;var o=a*a,h=f._timeCorrection?a/(n.deltaTime||a):1,p=1-n.frictionAir*(a/d._baseDelta),y=(n.position.x-n.positionPrev.x)*h,w=(n.position.y-n.positionPrev.y)*h;n.velocity.x=y*p+n.force.x/n.mass*o,n.velocity.y=w*p+n.force.y/n.mass*o,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.position.x+=n.velocity.x,n.position.y+=n.velocity.y,n.deltaTime=a,n.angularVelocity=(n.angle-n.anglePrev)*p*h+n.torque/n.inertia*o,n.anglePrev=n.angle,n.angle+=n.angularVelocity;for(var b=0;b<n.parts.length;b++){var S=n.parts[b];u.translate(S.vertices,n.velocity),b>0&&(S.position.x+=n.velocity.x,S.position.y+=n.velocity.y),n.angularVelocity!==0&&(u.rotate(S.vertices,n.angularVelocity,n.position),v.rotate(S.axes,n.angularVelocity),b>0&&c.rotateAbout(S.position,n.angularVelocity,n.position,S.position)),m.update(S.bounds,S.vertices,n.velocity)}},f.updateVelocities=function(n){var a=f._baseDelta/n.deltaTime,o=n.velocity;o.x=(n.position.x-n.positionPrev.x)*a,o.y=(n.position.y-n.positionPrev.y)*a,n.speed=Math.sqrt(o.x*o.x+o.y*o.y),n.angularVelocity=(n.angle-n.anglePrev)*a,n.angularSpeed=Math.abs(n.angularVelocity)},f.applyForce=function(n,a,o){var h={x:a.x-n.position.x,y:a.y-n.position.y};n.force.x+=o.x,n.force.y+=o.y,n.torque+=h.x*o.y-h.y*o.x},f._totalProperties=function(n){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},o=n.parts.length===1?0:1;o<n.parts.length;o++){var h=n.parts[o],p=h.mass!==1/0?h.mass:1;a.mass+=p,a.area+=h.area,a.inertia+=h.inertia,a.centre=c.add(a.centre,c.mult(h.position,p))}return a.centre=c.div(a.centre,a.mass),a}})()},function(g,t,x){var f={};g.exports=f;var u=x(0);(function(){f.on=function(c,s,d){for(var m=s.split(" "),v,i=0;i<m.length;i++)v=m[i],c.events=c.events||{},c.events[v]=c.events[v]||[],c.events[v].push(d);return d},f.off=function(c,s,d){if(!s){c.events={};return}typeof s=="function"&&(d=s,s=u.keys(c.events).join(" "));for(var m=s.split(" "),v=0;v<m.length;v++){var i=c.events[m[v]],n=[];if(d&&i)for(var a=0;a<i.length;a++)i[a]!==d&&n.push(i[a]);c.events[m[v]]=n}},f.trigger=function(c,s,d){var m,v,i,n,a=c.events;if(a&&u.keys(a).length>0){d||(d={}),m=s.split(" ");for(var o=0;o<m.length;o++)if(v=m[o],i=a[v],i){n=u.clone(d,!1),n.name=v,n.source=c;for(var h=0;h<i.length;h++)i[h].apply(c,[n])}}}})()},function(g,t,x){var f={};g.exports=f;var u=x(5),c=x(0),s=x(1),d=x(4);(function(){f.create=function(m){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},m)},f.setModified=function(m,v,i,n){if(m.isModified=v,v&&m.cache&&(m.cache.allBodies=null,m.cache.allConstraints=null,m.cache.allComposites=null),i&&m.parent&&f.setModified(m.parent,v,i,n),n)for(var a=0;a<m.composites.length;a++){var o=m.composites[a];f.setModified(o,v,i,n)}},f.add=function(m,v){var i=[].concat(v);u.trigger(m,"beforeAdd",{object:v});for(var n=0;n<i.length;n++){var a=i[n];switch(a.type){case"body":if(a.parent!==a){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}f.addBody(m,a);break;case"constraint":f.addConstraint(m,a);break;case"composite":f.addComposite(m,a);break;case"mouseConstraint":f.addConstraint(m,a.constraint);break}}return u.trigger(m,"afterAdd",{object:v}),m},f.remove=function(m,v,i){var n=[].concat(v);u.trigger(m,"beforeRemove",{object:v});for(var a=0;a<n.length;a++){var o=n[a];switch(o.type){case"body":f.removeBody(m,o,i);break;case"constraint":f.removeConstraint(m,o,i);break;case"composite":f.removeComposite(m,o,i);break;case"mouseConstraint":f.removeConstraint(m,o.constraint);break}}return u.trigger(m,"afterRemove",{object:v}),m},f.addComposite=function(m,v){return m.composites.push(v),v.parent=m,f.setModified(m,!0,!0,!1),m},f.removeComposite=function(m,v,i){var n=c.indexOf(m.composites,v);if(n!==-1){var a=f.allBodies(v);f.removeCompositeAt(m,n);for(var o=0;o<a.length;o++)a[o].sleepCounter=0}if(i)for(var o=0;o<m.composites.length;o++)f.removeComposite(m.composites[o],v,!0);return m},f.removeCompositeAt=function(m,v){return m.composites.splice(v,1),f.setModified(m,!0,!0,!1),m},f.addBody=function(m,v){return m.bodies.push(v),f.setModified(m,!0,!0,!1),m},f.removeBody=function(m,v,i){var n=c.indexOf(m.bodies,v);if(n!==-1&&(f.removeBodyAt(m,n),v.sleepCounter=0),i)for(var a=0;a<m.composites.length;a++)f.removeBody(m.composites[a],v,!0);return m},f.removeBodyAt=function(m,v){return m.bodies.splice(v,1),f.setModified(m,!0,!0,!1),m},f.addConstraint=function(m,v){return m.constraints.push(v),f.setModified(m,!0,!0,!1),m},f.removeConstraint=function(m,v,i){var n=c.indexOf(m.constraints,v);if(n!==-1&&f.removeConstraintAt(m,n),i)for(var a=0;a<m.composites.length;a++)f.removeConstraint(m.composites[a],v,!0);return m},f.removeConstraintAt=function(m,v){return m.constraints.splice(v,1),f.setModified(m,!0,!0,!1),m},f.clear=function(m,v,i){if(i)for(var n=0;n<m.composites.length;n++)f.clear(m.composites[n],v,!0);return v?m.bodies=m.bodies.filter(function(a){return a.isStatic}):m.bodies.length=0,m.constraints.length=0,m.composites.length=0,f.setModified(m,!0,!0,!1),m},f.allBodies=function(m){if(m.cache&&m.cache.allBodies)return m.cache.allBodies;for(var v=[].concat(m.bodies),i=0;i<m.composites.length;i++)v=v.concat(f.allBodies(m.composites[i]));return m.cache&&(m.cache.allBodies=v),v},f.allConstraints=function(m){if(m.cache&&m.cache.allConstraints)return m.cache.allConstraints;for(var v=[].concat(m.constraints),i=0;i<m.composites.length;i++)v=v.concat(f.allConstraints(m.composites[i]));return m.cache&&(m.cache.allConstraints=v),v},f.allComposites=function(m){if(m.cache&&m.cache.allComposites)return m.cache.allComposites;for(var v=[].concat(m.composites),i=0;i<m.composites.length;i++)v=v.concat(f.allComposites(m.composites[i]));return m.cache&&(m.cache.allComposites=v),v},f.get=function(m,v,i){var n,a;switch(i){case"body":n=f.allBodies(m);break;case"constraint":n=f.allConstraints(m);break;case"composite":n=f.allComposites(m).concat(m);break}return n?(a=n.filter(function(o){return o.id.toString()===v.toString()}),a.length===0?null:a[0]):null},f.move=function(m,v,i){return f.remove(m,v),f.add(i,v),m},f.rebase=function(m){for(var v=f.allBodies(m).concat(f.allConstraints(m)).concat(f.allComposites(m)),i=0;i<v.length;i++)v[i].id=c.nextId();return m},f.translate=function(m,v,i){for(var n=i?f.allBodies(m):m.bodies,a=0;a<n.length;a++)d.translate(n[a],v);return m},f.rotate=function(m,v,i,n){for(var a=Math.cos(v),o=Math.sin(v),h=n?f.allBodies(m):m.bodies,p=0;p<h.length;p++){var y=h[p],w=y.position.x-i.x,b=y.position.y-i.y;d.setPosition(y,{x:i.x+(w*a-b*o),y:i.y+(w*o+b*a)}),d.rotate(y,v)}return m},f.scale=function(m,v,i,n,a){for(var o=a?f.allBodies(m):m.bodies,h=0;h<o.length;h++){var p=o[h],y=p.position.x-n.x,w=p.position.y-n.y;d.setPosition(p,{x:n.x+y*v,y:n.y+w*i}),d.scale(p,v,i)}return m},f.bounds=function(m){for(var v=f.allBodies(m),i=[],n=0;n<v.length;n+=1){var a=v[n];i.push(a.bounds.min,a.bounds.max)}return s.create(i)}})()},function(g,t,x){var f={};g.exports=f;var u=x(4),c=x(5),s=x(0);(function(){f._motionWakeThreshold=.18,f._motionSleepThreshold=.08,f._minBias=.9,f.update=function(d,m){for(var v=m/s._baseDelta,i=f._motionSleepThreshold,n=0;n<d.length;n++){var a=d[n],o=u.getSpeed(a),h=u.getAngularSpeed(a),p=o*o+h*h;if(a.force.x!==0||a.force.y!==0){f.set(a,!1);continue}var y=Math.min(a.motion,p),w=Math.max(a.motion,p);a.motion=f._minBias*y+(1-f._minBias)*w,a.sleepThreshold>0&&a.motion<i?(a.sleepCounter+=1,a.sleepCounter>=a.sleepThreshold/v&&f.set(a,!0)):a.sleepCounter>0&&(a.sleepCounter-=1)}},f.afterCollisions=function(d){for(var m=f._motionSleepThreshold,v=0;v<d.length;v++){var i=d[v];if(i.isActive){var n=i.collision,a=n.bodyA.parent,o=n.bodyB.parent;if(!(a.isSleeping&&o.isSleeping||a.isStatic||o.isStatic)&&(a.isSleeping||o.isSleeping)){var h=a.isSleeping&&!a.isStatic?a:o,p=h===a?o:a;!h.isStatic&&p.motion>m&&f.set(h,!1)}}}},f.set=function(d,m){var v=d.isSleeping;m?(d.isSleeping=!0,d.sleepCounter=d.sleepThreshold,d.positionImpulse.x=0,d.positionImpulse.y=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.speed=0,d.angularSpeed=0,d.motion=0,v||c.trigger(d,"sleepStart")):(d.isSleeping=!1,d.sleepCounter=0,v&&c.trigger(d,"sleepEnd"))}})()},function(g,t,x){var f={};g.exports=f;var u=x(3),c=x(9);(function(){var s=[],d={overlap:0,axis:null},m={overlap:0,axis:null};f.create=function(v,i){return{pair:null,collided:!1,bodyA:v,bodyB:i,parentA:v.parent,parentB:i.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},f.collides=function(v,i,n){if(f._overlapAxes(d,v.vertices,i.vertices,v.axes),d.overlap<=0||(f._overlapAxes(m,i.vertices,v.vertices,i.axes),m.overlap<=0))return null;var a=n&&n.table[c.id(v,i)],o;a?o=a.collision:(o=f.create(v,i),o.collided=!0,o.bodyA=v.id<i.id?v:i,o.bodyB=v.id<i.id?i:v,o.parentA=o.bodyA.parent,o.parentB=o.bodyB.parent),v=o.bodyA,i=o.bodyB;var h;d.overlap<m.overlap?h=d:h=m;var p=o.normal,y=o.tangent,w=o.penetration,b=o.supports,S=h.overlap,k=h.axis,E=k.x,T=k.y,R=i.position.x-v.position.x,O=i.position.y-v.position.y;E*R+T*O>=0&&(E=-E,T=-T),p.x=E,p.y=T,y.x=-T,y.y=E,w.x=E*S,w.y=T*S,o.depth=S;var M=f._findSupports(v,i,p,1),L=0;if(u.contains(v.vertices,M[0])&&(b[L++]=M[0]),u.contains(v.vertices,M[1])&&(b[L++]=M[1]),L<2){var I=f._findSupports(i,v,p,-1);u.contains(i.vertices,I[0])&&(b[L++]=I[0]),L<2&&u.contains(i.vertices,I[1])&&(b[L++]=I[1])}return L===0&&(b[L++]=M[0]),o.supportCount=L,o},f._overlapAxes=function(v,i,n,a){var o=i.length,h=n.length,p=i[0].x,y=i[0].y,w=n[0].x,b=n[0].y,S=a.length,k=Number.MAX_VALUE,E=0,T,R,O,M,L,I;for(L=0;L<S;L++){var B=a[L],V=B.x,G=B.y,Y=p*V+y*G,H=w*V+b*G,W=Y,K=H;for(I=1;I<o;I+=1)M=i[I].x*V+i[I].y*G,M>W?W=M:M<Y&&(Y=M);for(I=1;I<h;I+=1)M=n[I].x*V+n[I].y*G,M>K?K=M:M<H&&(H=M);if(R=W-H,O=K-Y,T=R<O?R:O,T<k&&(k=T,E=L,T<=0))break}v.axis=a[E],v.overlap=k},f._findSupports=function(v,i,n,a){var o=i.vertices,h=o.length,p=v.position.x,y=v.position.y,w=n.x*a,b=n.y*a,S=o[0],k=S,E=w*(p-k.x)+b*(y-k.y),T,R,O;for(O=1;O<h;O+=1)k=o[O],R=w*(p-k.x)+b*(y-k.y),R<E&&(E=R,S=k);return T=o[(h+S.index-1)%h],E=w*(p-T.x)+b*(y-T.y),k=o[(S.index+1)%h],w*(p-k.x)+b*(y-k.y)<E?(s[0]=S,s[1]=k,s):(s[0]=S,s[1]=T,s)}})()},function(g,t,x){var f={};g.exports=f;var u=x(16);(function(){f.create=function(c,s){var d=c.bodyA,m=c.bodyB,v={id:f.id(d,m),bodyA:d,bodyB:m,collision:c,contacts:[u.create(),u.create()],contactCount:0,separation:0,isActive:!0,isSensor:d.isSensor||m.isSensor,timeCreated:s,timeUpdated:s,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return f.update(v,c,s),v},f.update=function(c,s,d){var m=s.supports,v=s.supportCount,i=c.contacts,n=s.parentA,a=s.parentB;c.isActive=!0,c.timeUpdated=d,c.collision=s,c.separation=s.depth,c.inverseMass=n.inverseMass+a.inverseMass,c.friction=n.friction<a.friction?n.friction:a.friction,c.frictionStatic=n.frictionStatic>a.frictionStatic?n.frictionStatic:a.frictionStatic,c.restitution=n.restitution>a.restitution?n.restitution:a.restitution,c.slop=n.slop>a.slop?n.slop:a.slop,c.contactCount=v,s.pair=c;var o=m[0],h=i[0],p=m[1],y=i[1];(y.vertex===o||h.vertex===p)&&(i[1]=h,i[0]=h=y,y=i[1]),h.vertex=o,y.vertex=p},f.setActive=function(c,s,d){s?(c.isActive=!0,c.timeUpdated=d):(c.isActive=!1,c.contactCount=0)},f.id=function(c,s){return c.id<s.id?c.id.toString(36)+":"+s.id.toString(36):s.id.toString(36)+":"+c.id.toString(36)}})()},function(g,t,x){var f={};g.exports=f;var u=x(3),c=x(2),s=x(7),d=x(1),m=x(11),v=x(0);(function(){f._warming=.4,f._torqueDampen=1,f._minLength=1e-6,f.create=function(i){var n=i;n.bodyA&&!n.pointA&&(n.pointA={x:0,y:0}),n.bodyB&&!n.pointB&&(n.pointB={x:0,y:0});var a=n.bodyA?c.add(n.bodyA.position,n.pointA):n.pointA,o=n.bodyB?c.add(n.bodyB.position,n.pointB):n.pointB,h=c.magnitude(c.sub(a,o));n.length=typeof n.length<"u"?n.length:h,n.id=n.id||v.nextId(),n.label=n.label||"Constraint",n.type="constraint",n.stiffness=n.stiffness||(n.length>0?1:.7),n.damping=n.damping||0,n.angularStiffness=n.angularStiffness||0,n.angleA=n.bodyA?n.bodyA.angle:n.angleA,n.angleB=n.bodyB?n.bodyB.angle:n.angleB,n.plugin={};var p={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return n.length===0&&n.stiffness>.1?(p.type="pin",p.anchors=!1):n.stiffness<.9&&(p.type="spring"),n.render=v.extend(p,n.render),n},f.preSolveAll=function(i){for(var n=0;n<i.length;n+=1){var a=i[n],o=a.constraintImpulse;a.isStatic||o.x===0&&o.y===0&&o.angle===0||(a.position.x+=o.x,a.position.y+=o.y,a.angle+=o.angle)}},f.solveAll=function(i,n){for(var a=v.clamp(n/v._baseDelta,0,1),o=0;o<i.length;o+=1){var h=i[o],p=!h.bodyA||h.bodyA&&h.bodyA.isStatic,y=!h.bodyB||h.bodyB&&h.bodyB.isStatic;(p||y)&&f.solve(i[o],a)}for(o=0;o<i.length;o+=1)h=i[o],p=!h.bodyA||h.bodyA&&h.bodyA.isStatic,y=!h.bodyB||h.bodyB&&h.bodyB.isStatic,!p&&!y&&f.solve(i[o],a)},f.solve=function(i,n){var a=i.bodyA,o=i.bodyB,h=i.pointA,p=i.pointB;if(!(!a&&!o)){a&&!a.isStatic&&(c.rotate(h,a.angle-i.angleA,h),i.angleA=a.angle),o&&!o.isStatic&&(c.rotate(p,o.angle-i.angleB,p),i.angleB=o.angle);var y=h,w=p;if(a&&(y=c.add(a.position,h)),o&&(w=c.add(o.position,p)),!(!y||!w)){var b=c.sub(y,w),S=c.magnitude(b);S<f._minLength&&(S=f._minLength);var k=(S-i.length)/S,E=i.stiffness>=1||i.length===0,T=E?i.stiffness*n:i.stiffness*n*n,R=i.damping*n,O=c.mult(b,k*T),M=(a?a.inverseMass:0)+(o?o.inverseMass:0),L=(a?a.inverseInertia:0)+(o?o.inverseInertia:0),I=M+L,B,V,G,Y,H;if(R>0){var W=c.create();G=c.div(b,S),H=c.sub(o&&c.sub(o.position,o.positionPrev)||W,a&&c.sub(a.position,a.positionPrev)||W),Y=c.dot(G,H)}a&&!a.isStatic&&(V=a.inverseMass/M,a.constraintImpulse.x-=O.x*V,a.constraintImpulse.y-=O.y*V,a.position.x-=O.x*V,a.position.y-=O.y*V,R>0&&(a.positionPrev.x-=R*G.x*Y*V,a.positionPrev.y-=R*G.y*Y*V),B=c.cross(h,O)/I*f._torqueDampen*a.inverseInertia*(1-i.angularStiffness),a.constraintImpulse.angle-=B,a.angle-=B),o&&!o.isStatic&&(V=o.inverseMass/M,o.constraintImpulse.x+=O.x*V,o.constraintImpulse.y+=O.y*V,o.position.x+=O.x*V,o.position.y+=O.y*V,R>0&&(o.positionPrev.x+=R*G.x*Y*V,o.positionPrev.y+=R*G.y*Y*V),B=c.cross(p,O)/I*f._torqueDampen*o.inverseInertia*(1-i.angularStiffness),o.constraintImpulse.angle+=B,o.angle+=B)}}},f.postSolveAll=function(i){for(var n=0;n<i.length;n++){var a=i[n],o=a.constraintImpulse;if(!(a.isStatic||o.x===0&&o.y===0&&o.angle===0)){s.set(a,!1);for(var h=0;h<a.parts.length;h++){var p=a.parts[h];u.translate(p.vertices,o),h>0&&(p.position.x+=o.x,p.position.y+=o.y),o.angle!==0&&(u.rotate(p.vertices,o.angle,a.position),m.rotate(p.axes,o.angle),h>0&&c.rotateAbout(p.position,o.angle,a.position,p.position)),d.update(p.bounds,p.vertices,a.velocity)}o.angle*=f._warming,o.x*=f._warming,o.y*=f._warming}}},f.pointAWorld=function(i){return{x:(i.bodyA?i.bodyA.position.x:0)+(i.pointA?i.pointA.x:0),y:(i.bodyA?i.bodyA.position.y:0)+(i.pointA?i.pointA.y:0)}},f.pointBWorld=function(i){return{x:(i.bodyB?i.bodyB.position.x:0)+(i.pointB?i.pointB.x:0),y:(i.bodyB?i.bodyB.position.y:0)+(i.pointB?i.pointB.y:0)}},f.currentLength=function(i){var n=(i.bodyA?i.bodyA.position.x:0)+(i.pointA?i.pointA.x:0),a=(i.bodyA?i.bodyA.position.y:0)+(i.pointA?i.pointA.y:0),o=(i.bodyB?i.bodyB.position.x:0)+(i.pointB?i.pointB.x:0),h=(i.bodyB?i.bodyB.position.y:0)+(i.pointB?i.pointB.y:0),p=n-o,y=a-h;return Math.sqrt(p*p+y*y)}})()},function(g,t,x){var f={};g.exports=f;var u=x(2),c=x(0);(function(){f.fromVertices=function(s){for(var d={},m=0;m<s.length;m++){var v=(m+1)%s.length,i=u.normalise({x:s[v].y-s[m].y,y:s[m].x-s[v].x}),n=i.y===0?1/0:i.x/i.y;n=n.toFixed(3).toString(),d[n]=i}return c.values(d)},f.rotate=function(s,d){if(d!==0)for(var m=Math.cos(d),v=Math.sin(d),i=0;i<s.length;i++){var n=s[i],a;a=n.x*m-n.y*v,n.y=n.x*v+n.y*m,n.x=a}}})()},function(g,t,x){var f={};g.exports=f;var u=x(3),c=x(0),s=x(4),d=x(1),m=x(2);(function(){f.rectangle=function(v,i,n,a,o){o=o||{};var h={label:"Rectangle Body",position:{x:v,y:i},vertices:u.fromPath("L 0 0 L "+n+" 0 L "+n+" "+a+" L 0 "+a)};if(o.chamfer){var p=o.chamfer;h.vertices=u.chamfer(h.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete o.chamfer}return s.create(c.extend({},h,o))},f.trapezoid=function(v,i,n,a,o,h){h=h||{},o>=1&&c.warn("Bodies.trapezoid: slope parameter must be < 1."),o*=.5;var p=(1-o*2)*n,y=n*o,w=y+p,b=w+y,S;o<.5?S="L 0 0 L "+y+" "+-a+" L "+w+" "+-a+" L "+b+" 0":S="L 0 0 L "+w+" "+-a+" L "+b+" 0";var k={label:"Trapezoid Body",position:{x:v,y:i},vertices:u.fromPath(S)};if(h.chamfer){var E=h.chamfer;k.vertices=u.chamfer(k.vertices,E.radius,E.quality,E.qualityMin,E.qualityMax),delete h.chamfer}return s.create(c.extend({},k,h))},f.circle=function(v,i,n,a,o){a=a||{};var h={label:"Circle Body",circleRadius:n};o=o||25;var p=Math.ceil(Math.max(10,Math.min(o,n)));return p%2===1&&(p+=1),f.polygon(v,i,p,n,c.extend({},h,a))},f.polygon=function(v,i,n,a,o){if(o=o||{},n<3)return f.circle(v,i,a,o);for(var h=2*Math.PI/n,p="",y=h*.5,w=0;w<n;w+=1){var b=y+w*h,S=Math.cos(b)*a,k=Math.sin(b)*a;p+="L "+S.toFixed(3)+" "+k.toFixed(3)+" "}var E={label:"Polygon Body",position:{x:v,y:i},vertices:u.fromPath(p)};if(o.chamfer){var T=o.chamfer;E.vertices=u.chamfer(E.vertices,T.radius,T.quality,T.qualityMin,T.qualityMax),delete o.chamfer}return s.create(c.extend({},E,o))},f.fromVertices=function(v,i,n,a,o,h,p,y){var w=c.getDecomp(),b,S,k,E,T,R,O,M,L,I,B;for(b=!!(w&&w.quickDecomp),a=a||{},k=[],o=typeof o<"u"?o:!1,h=typeof h<"u"?h:.01,p=typeof p<"u"?p:10,y=typeof y<"u"?y:.01,c.isArray(n[0])||(n=[n]),I=0;I<n.length;I+=1)if(R=n[I],E=u.isConvex(R),T=!E,T&&!b&&c.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),E||!b)E?R=u.clockwiseSort(R):R=u.hull(R),k.push({position:{x:v,y:i},vertices:R});else{var V=R.map(function($){return[$.x,$.y]});w.makeCCW(V),h!==!1&&w.removeCollinearPoints(V,h),y!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(V,y);var G=w.quickDecomp(V);for(O=0;O<G.length;O++){var Y=G[O],H=Y.map(function($){return{x:$[0],y:$[1]}});p>0&&u.area(H)<p||k.push({position:u.centre(H),vertices:H})}}for(O=0;O<k.length;O++)k[O]=s.create(c.extend(k[O],a));if(o){var W=5;for(O=0;O<k.length;O++){var K=k[O];for(M=O+1;M<k.length;M++){var Q=k[M];if(d.overlaps(K.bounds,Q.bounds)){var se=K.vertices,A=Q.vertices;for(L=0;L<K.vertices.length;L++)for(B=0;B<Q.vertices.length;B++){var z=m.magnitudeSquared(m.sub(se[(L+1)%se.length],A[B])),q=m.magnitudeSquared(m.sub(se[L],A[(B+1)%A.length]));z<W&&q<W&&(se[L].isInternal=!0,A[B].isInternal=!0)}}}}}return k.length>1?(S=s.create(c.extend({parts:k.slice(0)},a)),s.setPosition(S,{x:v,y:i}),S):k[0]}})()},function(g,t,x){var f={};g.exports=f;var u=x(0),c=x(8);(function(){f.create=function(s){var d={bodies:[],collisions:[],pairs:null};return u.extend(d,s)},f.setBodies=function(s,d){s.bodies=d.slice(0)},f.clear=function(s){s.bodies=[],s.collisions=[]},f.collisions=function(s){var d=s.pairs,m=s.bodies,v=m.length,i=f.canCollide,n=c.collides,a=s.collisions,o=0,h,p;for(m.sort(f._compareBoundsX),h=0;h<v;h++){var y=m[h],w=y.bounds,b=y.bounds.max.x,S=y.bounds.max.y,k=y.bounds.min.y,E=y.isStatic||y.isSleeping,T=y.parts.length,R=T===1;for(p=h+1;p<v;p++){var O=m[p],M=O.bounds;if(M.min.x>b)break;if(!(S<M.min.y||k>M.max.y)&&!(E&&(O.isStatic||O.isSleeping))&&i(y.collisionFilter,O.collisionFilter)){var L=O.parts.length;if(R&&L===1){var I=n(y,O,d);I&&(a[o++]=I)}else for(var B=T>1?1:0,V=L>1?1:0,G=B;G<T;G++)for(var Y=y.parts[G],w=Y.bounds,H=V;H<L;H++){var W=O.parts[H],M=W.bounds;if(!(w.min.x>M.max.x||w.max.x<M.min.x||w.max.y<M.min.y||w.min.y>M.max.y)){var I=n(Y,W,d);I&&(a[o++]=I)}}}}}return a.length!==o&&(a.length=o),a},f.canCollide=function(s,d){return s.group===d.group&&s.group!==0?s.group>0:(s.mask&d.category)!==0&&(d.mask&s.category)!==0},f._compareBoundsX=function(s,d){return s.bounds.min.x-d.bounds.min.x}})()},function(g,t,x){var f={};g.exports=f;var u=x(0);(function(){f.create=function(c){var s={};return c||u.log("Mouse.create: element was undefined, defaulting to document.body","warn"),s.element=c||document.body,s.absolute={x:0,y:0},s.position={x:0,y:0},s.mousedownPosition={x:0,y:0},s.mouseupPosition={x:0,y:0},s.offset={x:0,y:0},s.scale={x:1,y:1},s.wheelDelta=0,s.button=-1,s.pixelRatio=parseInt(s.element.getAttribute("data-pixel-ratio"),10)||1,s.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},s.mousemove=function(d){var m=f._getRelativeMousePosition(d,s.element,s.pixelRatio),v=d.changedTouches;v&&(s.button=0,d.preventDefault()),s.absolute.x=m.x,s.absolute.y=m.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.sourceEvents.mousemove=d},s.mousedown=function(d){var m=f._getRelativeMousePosition(d,s.element,s.pixelRatio),v=d.changedTouches;v?(s.button=0,d.preventDefault()):s.button=d.button,s.absolute.x=m.x,s.absolute.y=m.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mousedownPosition.x=s.position.x,s.mousedownPosition.y=s.position.y,s.sourceEvents.mousedown=d},s.mouseup=function(d){var m=f._getRelativeMousePosition(d,s.element,s.pixelRatio),v=d.changedTouches;v&&d.preventDefault(),s.button=-1,s.absolute.x=m.x,s.absolute.y=m.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y,s.mouseupPosition.x=s.position.x,s.mouseupPosition.y=s.position.y,s.sourceEvents.mouseup=d},s.mousewheel=function(d){s.wheelDelta=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),d.preventDefault(),s.sourceEvents.mousewheel=d},f.setElement(s,s.element),s},f.setElement=function(c,s){c.element=s,s.addEventListener("mousemove",c.mousemove,{passive:!0}),s.addEventListener("mousedown",c.mousedown,{passive:!0}),s.addEventListener("mouseup",c.mouseup,{passive:!0}),s.addEventListener("wheel",c.mousewheel,{passive:!1}),s.addEventListener("touchmove",c.mousemove,{passive:!1}),s.addEventListener("touchstart",c.mousedown,{passive:!1}),s.addEventListener("touchend",c.mouseup,{passive:!1})},f.clearSourceEvents=function(c){c.sourceEvents.mousemove=null,c.sourceEvents.mousedown=null,c.sourceEvents.mouseup=null,c.sourceEvents.mousewheel=null,c.wheelDelta=0},f.setOffset=function(c,s){c.offset.x=s.x,c.offset.y=s.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y},f.setScale=function(c,s){c.scale.x=s.x,c.scale.y=s.y,c.position.x=c.absolute.x*c.scale.x+c.offset.x,c.position.y=c.absolute.y*c.scale.y+c.offset.y},f._getRelativeMousePosition=function(c,s,d){var m=s.getBoundingClientRect(),v=document.documentElement||document.body.parentNode||document.body,i=window.pageXOffset!==void 0?window.pageXOffset:v.scrollLeft,n=window.pageYOffset!==void 0?window.pageYOffset:v.scrollTop,a=c.changedTouches,o,h;return a?(o=a[0].pageX-m.left-i,h=a[0].pageY-m.top-n):(o=c.pageX-m.left-i,h=c.pageY-m.top-n),{x:o/(s.clientWidth/(s.width||s.clientWidth)*d),y:h/(s.clientHeight/(s.height||s.clientHeight)*d)}}})()},function(g,t,x){var f={};g.exports=f;var u=x(0);(function(){f._registry={},f.register=function(c){if(f.isPlugin(c)||u.warn("Plugin.register:",f.toString(c),"does not implement all required fields."),c.name in f._registry){var s=f._registry[c.name],d=f.versionParse(c.version).number,m=f.versionParse(s.version).number;d>m?(u.warn("Plugin.register:",f.toString(s),"was upgraded to",f.toString(c)),f._registry[c.name]=c):d<m?u.warn("Plugin.register:",f.toString(s),"can not be downgraded to",f.toString(c)):c!==s&&u.warn("Plugin.register:",f.toString(c),"is already registered to different plugin object")}else f._registry[c.name]=c;return c},f.resolve=function(c){return f._registry[f.dependencyParse(c).name]},f.toString=function(c){return typeof c=="string"?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")},f.isPlugin=function(c){return c&&c.name&&c.version&&c.install},f.isUsed=function(c,s){return c.used.indexOf(s)>-1},f.isFor=function(c,s){var d=c.for&&f.dependencyParse(c.for);return!c.for||s.name===d.name&&f.versionSatisfies(s.version,d.range)},f.use=function(c,s){if(c.uses=(c.uses||[]).concat(s||[]),c.uses.length===0){u.warn("Plugin.use:",f.toString(c),"does not specify any dependencies to install.");return}for(var d=f.dependencies(c),m=u.topologicalSort(d),v=[],i=0;i<m.length;i+=1)if(m[i]!==c.name){var n=f.resolve(m[i]);if(!n){v.push("❌ "+m[i]);continue}f.isUsed(c,n.name)||(f.isFor(n,c)||(u.warn("Plugin.use:",f.toString(n),"is for",n.for,"but installed on",f.toString(c)+"."),n._warned=!0),n.install?n.install(c):(u.warn("Plugin.use:",f.toString(n),"does not specify an install function."),n._warned=!0),n._warned?(v.push("🔶 "+f.toString(n)),delete n._warned):v.push("✅ "+f.toString(n)),c.used.push(n.name))}v.length>0&&u.info(v.join("  "))},f.dependencies=function(c,s){var d=f.dependencyParse(c),m=d.name;if(s=s||{},!(m in s)){c=f.resolve(c)||c,s[m]=u.map(c.uses||[],function(i){f.isPlugin(i)&&f.register(i);var n=f.dependencyParse(i),a=f.resolve(i);return a&&!f.versionSatisfies(a.version,n.range)?(u.warn("Plugin.dependencies:",f.toString(a),"does not satisfy",f.toString(n),"used by",f.toString(d)+"."),a._warned=!0,c._warned=!0):a||(u.warn("Plugin.dependencies:",f.toString(i),"used by",f.toString(d),"could not be resolved."),c._warned=!0),n.name});for(var v=0;v<s[m].length;v+=1)f.dependencies(s[m][v],s);return s}},f.dependencyParse=function(c){if(u.isString(c)){var s=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return s.test(c)||u.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}}return{name:c.name,range:c.range||c.version}},f.versionParse=function(c){var s=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;s.test(c)||u.warn("Plugin.versionParse:",c,"is not a valid version or range.");var d=s.exec(c),m=Number(d[4]),v=Number(d[5]),i=Number(d[6]);return{isRange:!!(d[1]||d[2]),version:d[3],range:c,operator:d[1]||d[2]||"",major:m,minor:v,patch:i,parts:[m,v,i],prerelease:d[7],number:m*1e8+v*1e4+i}},f.versionSatisfies=function(c,s){s=s||"*";var d=f.versionParse(s),m=f.versionParse(c);if(d.isRange){if(d.operator==="*"||c==="*")return!0;if(d.operator===">")return m.number>d.number;if(d.operator===">=")return m.number>=d.number;if(d.operator==="~")return m.major===d.major&&m.minor===d.minor&&m.patch>=d.patch;if(d.operator==="^")return d.major>0?m.major===d.major&&m.number>=d.number:d.minor>0?m.minor===d.minor&&m.patch>=d.patch:m.patch===d.patch}return c===s||c==="*"}})()},function(g,t){var x={};g.exports=x,function(){x.create=function(f){return{vertex:f,normalImpulse:0,tangentImpulse:0}}}()},function(g,t,x){var f={};g.exports=f;var u=x(7),c=x(18),s=x(13),d=x(19),m=x(5),v=x(6),i=x(10),n=x(0),a=x(4);(function(){f._deltaMax=1e3/60,f.create=function(o){o=o||{};var h={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},p=n.extend(h,o);return p.world=o.world||v.create({label:"World"}),p.pairs=o.pairs||d.create(),p.detector=o.detector||s.create(),p.detector.pairs=p.pairs,p.grid={buckets:[]},p.world.gravity=p.gravity,p.broadphase=p.grid,p.metrics={},p},f.update=function(o,h){var p=n.now(),y=o.world,w=o.detector,b=o.pairs,S=o.timing,k=S.timestamp,E;h>f._deltaMax&&n.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",f._deltaMax.toFixed(3),"ms."),h=typeof h<"u"?h:n._baseDelta,h*=S.timeScale,S.timestamp+=h,S.lastDelta=h;var T={timestamp:S.timestamp,delta:h};m.trigger(o,"beforeUpdate",T);var R=v.allBodies(y),O=v.allConstraints(y);for(y.isModified&&(s.setBodies(w,R),v.setModified(y,!1,!1,!0)),o.enableSleeping&&u.update(R,h),f._bodiesApplyGravity(R,o.gravity),h>0&&f._bodiesUpdate(R,h),m.trigger(o,"beforeSolve",T),i.preSolveAll(R),E=0;E<o.constraintIterations;E++)i.solveAll(O,h);i.postSolveAll(R);var M=s.collisions(w);d.update(b,M,k),o.enableSleeping&&u.afterCollisions(b.list),b.collisionStart.length>0&&m.trigger(o,"collisionStart",{pairs:b.collisionStart,timestamp:S.timestamp,delta:h});var L=n.clamp(20/o.positionIterations,0,1);for(c.preSolvePosition(b.list),E=0;E<o.positionIterations;E++)c.solvePosition(b.list,h,L);for(c.postSolvePosition(R),i.preSolveAll(R),E=0;E<o.constraintIterations;E++)i.solveAll(O,h);for(i.postSolveAll(R),c.preSolveVelocity(b.list),E=0;E<o.velocityIterations;E++)c.solveVelocity(b.list,h);return f._bodiesUpdateVelocities(R),b.collisionActive.length>0&&m.trigger(o,"collisionActive",{pairs:b.collisionActive,timestamp:S.timestamp,delta:h}),b.collisionEnd.length>0&&m.trigger(o,"collisionEnd",{pairs:b.collisionEnd,timestamp:S.timestamp,delta:h}),f._bodiesClearForces(R),m.trigger(o,"afterUpdate",T),o.timing.lastElapsed=n.now()-p,o},f.merge=function(o,h){if(n.extend(o,h),h.world){o.world=h.world,f.clear(o);for(var p=v.allBodies(o.world),y=0;y<p.length;y++){var w=p[y];u.set(w,!1),w.id=n.nextId()}}},f.clear=function(o){d.clear(o.pairs),s.clear(o.detector)},f._bodiesClearForces=function(o){for(var h=o.length,p=0;p<h;p++){var y=o[p];y.force.x=0,y.force.y=0,y.torque=0}},f._bodiesApplyGravity=function(o,h){var p=typeof h.scale<"u"?h.scale:.001,y=o.length;if(!(h.x===0&&h.y===0||p===0))for(var w=0;w<y;w++){var b=o[w];b.isStatic||b.isSleeping||(b.force.y+=b.mass*h.y*p,b.force.x+=b.mass*h.x*p)}},f._bodiesUpdate=function(o,h){for(var p=o.length,y=0;y<p;y++){var w=o[y];w.isStatic||w.isSleeping||a.update(w,h)}},f._bodiesUpdateVelocities=function(o){for(var h=o.length,p=0;p<h;p++)a.updateVelocities(o[p])}})()},function(g,t,x){var f={};g.exports=f;var u=x(3),c=x(0),s=x(1);(function(){f._restingThresh=2,f._restingThreshTangent=Math.sqrt(6),f._positionDampen=.9,f._positionWarming=.8,f._frictionNormalMultiplier=5,f._frictionMaxStatic=Number.MAX_VALUE,f.preSolvePosition=function(d){var m,v,i,n=d.length;for(m=0;m<n;m++)v=d[m],v.isActive&&(i=v.contactCount,v.collision.parentA.totalContacts+=i,v.collision.parentB.totalContacts+=i)},f.solvePosition=function(d,m,v){var i,n,a,o,h,p,y,w,b=f._positionDampen*(v||1),S=c.clamp(m/c._baseDelta,0,1),k=d.length;for(i=0;i<k;i++)n=d[i],!(!n.isActive||n.isSensor)&&(a=n.collision,o=a.parentA,h=a.parentB,p=a.normal,n.separation=a.depth+p.x*(h.positionImpulse.x-o.positionImpulse.x)+p.y*(h.positionImpulse.y-o.positionImpulse.y));for(i=0;i<k;i++)n=d[i],!(!n.isActive||n.isSensor)&&(a=n.collision,o=a.parentA,h=a.parentB,p=a.normal,w=n.separation-n.slop*S,(o.isStatic||h.isStatic)&&(w*=2),o.isStatic||o.isSleeping||(y=b/o.totalContacts,o.positionImpulse.x+=p.x*w*y,o.positionImpulse.y+=p.y*w*y),h.isStatic||h.isSleeping||(y=b/h.totalContacts,h.positionImpulse.x-=p.x*w*y,h.positionImpulse.y-=p.y*w*y))},f.postSolvePosition=function(d){for(var m=f._positionWarming,v=d.length,i=u.translate,n=s.update,a=0;a<v;a++){var o=d[a],h=o.positionImpulse,p=h.x,y=h.y,w=o.velocity;if(o.totalContacts=0,p!==0||y!==0){for(var b=0;b<o.parts.length;b++){var S=o.parts[b];i(S.vertices,h),n(S.bounds,S.vertices,w),S.position.x+=p,S.position.y+=y}o.positionPrev.x+=p,o.positionPrev.y+=y,p*w.x+y*w.y<0?(h.x=0,h.y=0):(h.x*=m,h.y*=m)}}},f.preSolveVelocity=function(d){var m=d.length,v,i;for(v=0;v<m;v++){var n=d[v];if(!(!n.isActive||n.isSensor)){var a=n.contacts,o=n.contactCount,h=n.collision,p=h.parentA,y=h.parentB,w=h.normal,b=h.tangent;for(i=0;i<o;i++){var S=a[i],k=S.vertex,E=S.normalImpulse,T=S.tangentImpulse;if(E!==0||T!==0){var R=w.x*E+b.x*T,O=w.y*E+b.y*T;p.isStatic||p.isSleeping||(p.positionPrev.x+=R*p.inverseMass,p.positionPrev.y+=O*p.inverseMass,p.anglePrev+=p.inverseInertia*((k.x-p.position.x)*O-(k.y-p.position.y)*R)),y.isStatic||y.isSleeping||(y.positionPrev.x-=R*y.inverseMass,y.positionPrev.y-=O*y.inverseMass,y.anglePrev-=y.inverseInertia*((k.x-y.position.x)*O-(k.y-y.position.y)*R))}}}}},f.solveVelocity=function(d,m){var v=m/c._baseDelta,i=v*v,n=i*v,a=-f._restingThresh*v,o=f._restingThreshTangent,h=f._frictionNormalMultiplier*v,p=f._frictionMaxStatic,y=d.length,w,b,S,k;for(S=0;S<y;S++){var E=d[S];if(!(!E.isActive||E.isSensor)){var T=E.collision,R=T.parentA,O=T.parentB,M=T.normal.x,L=T.normal.y,I=T.tangent.x,B=T.tangent.y,V=E.inverseMass,G=E.friction*E.frictionStatic*h,Y=E.contacts,H=E.contactCount,W=1/H,K=R.position.x-R.positionPrev.x,Q=R.position.y-R.positionPrev.y,se=R.angle-R.anglePrev,A=O.position.x-O.positionPrev.x,z=O.position.y-O.positionPrev.y,q=O.angle-O.anglePrev;for(k=0;k<H;k++){var $=Y[k],ie=$.vertex,re=ie.x-R.position.x,fe=ie.y-R.position.y,ge=ie.x-O.position.x,de=ie.y-O.position.y,me=K-fe*se,_e=Q+re*se,ae=A-de*q,he=z+ge*q,be=me-ae,ke=_e-he,xe=M*be+L*ke,we=I*be+B*ke,Me=E.separation+xe,He=Math.min(Me,1);He=Me<0?0:He;var Ie=He*G;we<-Ie||we>Ie?(b=we>0?we:-we,w=E.friction*(we>0?1:-1)*n,w<-b?w=-b:w>b&&(w=b)):(w=we,b=p);var dt=re*L-fe*M,nt=ge*L-de*M,ot=W/(V+R.inverseInertia*dt*dt+O.inverseInertia*nt*nt),ut=(1+E.restitution)*xe*ot;if(w*=ot,xe<a)$.normalImpulse=0;else{var ct=$.normalImpulse;$.normalImpulse+=ut,$.normalImpulse>0&&($.normalImpulse=0),ut=$.normalImpulse-ct}if(we<-o||we>o)$.tangentImpulse=0;else{var Ae=$.tangentImpulse;$.tangentImpulse+=w,$.tangentImpulse<-b&&($.tangentImpulse=-b),$.tangentImpulse>b&&($.tangentImpulse=b),w=$.tangentImpulse-Ae}var Xe=M*ut+I*w,Le=L*ut+B*w;R.isStatic||R.isSleeping||(R.positionPrev.x+=Xe*R.inverseMass,R.positionPrev.y+=Le*R.inverseMass,R.anglePrev+=(re*Le-fe*Xe)*R.inverseInertia),O.isStatic||O.isSleeping||(O.positionPrev.x-=Xe*O.inverseMass,O.positionPrev.y-=Le*O.inverseMass,O.anglePrev-=(ge*Le-de*Xe)*O.inverseInertia)}}}}})()},function(g,t,x){var f={};g.exports=f;var u=x(9),c=x(0);(function(){f.create=function(s){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},s)},f.update=function(s,d,m){var v=u.update,i=u.create,n=u.setActive,a=s.table,o=s.list,h=o.length,p=h,y=s.collisionStart,w=s.collisionEnd,b=s.collisionActive,S=d.length,k=0,E=0,T=0,R,O,M;for(M=0;M<S;M++)R=d[M],O=R.pair,O?(O.isActive&&(b[T++]=O),v(O,R,m)):(O=i(R,m),a[O.id]=O,y[k++]=O,o[p++]=O);for(p=0,h=o.length,M=0;M<h;M++)O=o[M],O.timeUpdated>=m?o[p++]=O:(n(O,!1,m),O.collision.bodyA.sleepCounter>0&&O.collision.bodyB.sleepCounter>0?o[p++]=O:(w[E++]=O,delete a[O.id]));o.length!==p&&(o.length=p),y.length!==k&&(y.length=k),w.length!==E&&(w.length=E),b.length!==T&&(b.length=T)},f.clear=function(s){return s.table={},s.list.length=0,s.collisionStart.length=0,s.collisionActive.length=0,s.collisionEnd.length=0,s}})()},function(g,t,x){var f=g.exports=x(21);f.Axes=x(11),f.Bodies=x(12),f.Body=x(4),f.Bounds=x(1),f.Collision=x(8),f.Common=x(0),f.Composite=x(6),f.Composites=x(22),f.Constraint=x(10),f.Contact=x(16),f.Detector=x(13),f.Engine=x(17),f.Events=x(5),f.Grid=x(23),f.Mouse=x(14),f.MouseConstraint=x(24),f.Pair=x(9),f.Pairs=x(19),f.Plugin=x(15),f.Query=x(25),f.Render=x(26),f.Resolver=x(18),f.Runner=x(27),f.SAT=x(28),f.Sleeping=x(7),f.Svg=x(29),f.Vector=x(2),f.Vertices=x(3),f.World=x(30),f.Engine.run=f.Runner.run,f.Common.deprecated(f.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(g,t,x){var f={};g.exports=f;var u=x(15),c=x(0);(function(){f.name="matter-js",f.version="0.20.0",f.uses=[],f.used=[],f.use=function(){u.use(f,Array.prototype.slice.call(arguments))},f.before=function(s,d){return s=s.replace(/^Matter./,""),c.chainPathBefore(f,s,d)},f.after=function(s,d){return s=s.replace(/^Matter./,""),c.chainPathAfter(f,s,d)}})()},function(g,t,x){var f={};g.exports=f;var u=x(6),c=x(10),s=x(0),d=x(4),m=x(12),v=s.deprecated;(function(){f.stack=function(i,n,a,o,h,p,y){for(var w=u.create({label:"Stack"}),b=i,S=n,k,E=0,T=0;T<o;T++){for(var R=0,O=0;O<a;O++){var M=y(b,S,O,T,k,E);if(M){var L=M.bounds.max.y-M.bounds.min.y,I=M.bounds.max.x-M.bounds.min.x;L>R&&(R=L),d.translate(M,{x:I*.5,y:L*.5}),b=M.bounds.max.x+h,u.addBody(w,M),k=M,E+=1}else b+=h}S+=R+p,b=i}return w},f.chain=function(i,n,a,o,h,p){for(var y=i.bodies,w=1;w<y.length;w++){var b=y[w-1],S=y[w],k=b.bounds.max.y-b.bounds.min.y,E=b.bounds.max.x-b.bounds.min.x,T=S.bounds.max.y-S.bounds.min.y,R=S.bounds.max.x-S.bounds.min.x,O={bodyA:b,pointA:{x:E*n,y:k*a},bodyB:S,pointB:{x:R*o,y:T*h}},M=s.extend(O,p);u.addConstraint(i,c.create(M))}return i.label+=" Chain",i},f.mesh=function(i,n,a,o,h){var p=i.bodies,y,w,b,S,k;for(y=0;y<a;y++){for(w=1;w<n;w++)b=p[w-1+y*n],S=p[w+y*n],u.addConstraint(i,c.create(s.extend({bodyA:b,bodyB:S},h)));if(y>0)for(w=0;w<n;w++)b=p[w+(y-1)*n],S=p[w+y*n],u.addConstraint(i,c.create(s.extend({bodyA:b,bodyB:S},h))),o&&w>0&&(k=p[w-1+(y-1)*n],u.addConstraint(i,c.create(s.extend({bodyA:k,bodyB:S},h)))),o&&w<n-1&&(k=p[w+1+(y-1)*n],u.addConstraint(i,c.create(s.extend({bodyA:k,bodyB:S},h))))}return i.label+=" Mesh",i},f.pyramid=function(i,n,a,o,h,p,y){return f.stack(i,n,a,o,h,p,function(w,b,S,k,E,T){var R=Math.min(o,Math.ceil(a/2)),O=E?E.bounds.max.x-E.bounds.min.x:0;if(!(k>R)){k=R-k;var M=k,L=a-1-k;if(!(S<M||S>L)){T===1&&d.translate(E,{x:(S+(a%2===1?1:-1))*O,y:0});var I=E?S*O:0;return y(i+I+S*h,b,S,k,E,T)}}})},f.newtonsCradle=function(i,n,a,o,h){for(var p=u.create({label:"Newtons Cradle"}),y=0;y<a;y++){var w=1.9,b=m.circle(i+y*(o*w),n+h,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),S=c.create({pointA:{x:i+y*(o*w),y:n},bodyB:b});u.addBody(p,b),u.addConstraint(p,S)}return p},v(f,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),f.car=function(i,n,a,o,h){var p=d.nextGroup(!0),y=20,w=-a*.5+y,b=a*.5-y,S=0,k=u.create({label:"Car"}),E=m.rectangle(i,n,a,o,{collisionFilter:{group:p},chamfer:{radius:o*.5},density:2e-4}),T=m.circle(i+w,n+S,h,{collisionFilter:{group:p},friction:.8}),R=m.circle(i+b,n+S,h,{collisionFilter:{group:p},friction:.8}),O=c.create({bodyB:E,pointB:{x:w,y:S},bodyA:T,stiffness:1,length:0}),M=c.create({bodyB:E,pointB:{x:b,y:S},bodyA:R,stiffness:1,length:0});return u.addBody(k,E),u.addBody(k,T),u.addBody(k,R),u.addConstraint(k,O),u.addConstraint(k,M),k},v(f,"car","Composites.car ➤ moved to car example"),f.softBody=function(i,n,a,o,h,p,y,w,b,S){b=s.extend({inertia:1/0},b),S=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var k=f.stack(i,n,a,o,h,p,function(E,T){return m.circle(E,T,w,b)});return f.mesh(k,a,o,y,S),k.label="Soft Body",k},v(f,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")})()},function(g,t,x){var f={};g.exports=f;var u=x(9),c=x(0),s=c.deprecated;(function(){f.create=function(d){var m={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return c.extend(m,d)},f.update=function(d,m,v,i){var n,a,o,h=v.world,p=d.buckets,y,w,b=!1;for(n=0;n<m.length;n++){var S=m[n];if(!(S.isSleeping&&!i)&&!(h.bounds&&(S.bounds.max.x<h.bounds.min.x||S.bounds.min.x>h.bounds.max.x||S.bounds.max.y<h.bounds.min.y||S.bounds.min.y>h.bounds.max.y))){var k=f._getRegion(d,S);if(!S.region||k.id!==S.region.id||i){(!S.region||i)&&(S.region=k);var E=f._regionUnion(k,S.region);for(a=E.startCol;a<=E.endCol;a++)for(o=E.startRow;o<=E.endRow;o++){w=f._getBucketId(a,o),y=p[w];var T=a>=k.startCol&&a<=k.endCol&&o>=k.startRow&&o<=k.endRow,R=a>=S.region.startCol&&a<=S.region.endCol&&o>=S.region.startRow&&o<=S.region.endRow;!T&&R&&R&&y&&f._bucketRemoveBody(d,y,S),(S.region===k||T&&!R||i)&&(y||(y=f._createBucket(p,w)),f._bucketAddBody(d,y,S))}S.region=k,b=!0}}}b&&(d.pairsList=f._createActivePairsList(d))},s(f,"update","Grid.update ➤ replaced by Matter.Detector"),f.clear=function(d){d.buckets={},d.pairs={},d.pairsList=[]},s(f,"clear","Grid.clear ➤ replaced by Matter.Detector"),f._regionUnion=function(d,m){var v=Math.min(d.startCol,m.startCol),i=Math.max(d.endCol,m.endCol),n=Math.min(d.startRow,m.startRow),a=Math.max(d.endRow,m.endRow);return f._createRegion(v,i,n,a)},f._getRegion=function(d,m){var v=m.bounds,i=Math.floor(v.min.x/d.bucketWidth),n=Math.floor(v.max.x/d.bucketWidth),a=Math.floor(v.min.y/d.bucketHeight),o=Math.floor(v.max.y/d.bucketHeight);return f._createRegion(i,n,a,o)},f._createRegion=function(d,m,v,i){return{id:d+","+m+","+v+","+i,startCol:d,endCol:m,startRow:v,endRow:i}},f._getBucketId=function(d,m){return"C"+d+"R"+m},f._createBucket=function(d,m){var v=d[m]=[];return v},f._bucketAddBody=function(d,m,v){var i=d.pairs,n=u.id,a=m.length,o;for(o=0;o<a;o++){var h=m[o];if(!(v.id===h.id||v.isStatic&&h.isStatic)){var p=n(v,h),y=i[p];y?y[2]+=1:i[p]=[v,h,1]}}m.push(v)},f._bucketRemoveBody=function(d,m,v){var i=d.pairs,n=u.id,a;m.splice(c.indexOf(m,v),1);var o=m.length;for(a=0;a<o;a++){var h=i[n(v,m[a])];h&&(h[2]-=1)}},f._createActivePairsList=function(d){var m,v=d.pairs,i=c.keys(v),n=i.length,a=[],o;for(o=0;o<n;o++)m=v[i[o]],m[2]>0?a.push(m):delete v[i[o]];return a}})()},function(g,t,x){var f={};g.exports=f;var u=x(3),c=x(7),s=x(14),d=x(5),m=x(13),v=x(10),i=x(6),n=x(0),a=x(1);(function(){f.create=function(o,h){var p=(o?o.mouse:null)||(h?h.mouse:null);p||(o&&o.render&&o.render.canvas?p=s.create(o.render.canvas):h&&h.element?p=s.create(h.element):(p=s.create(),n.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=v.create({label:"Mouse Constraint",pointA:p.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:p,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},b=n.extend(w,h);return d.on(o,"beforeUpdate",function(){var S=i.allBodies(o.world);f.update(b,S),f._triggerEvents(b)}),b},f.update=function(o,h){var p=o.mouse,y=o.constraint,w=o.body;if(p.button===0){if(y.bodyB)c.set(y.bodyB,!1),y.pointA=p.position;else for(var b=0;b<h.length;b++)if(w=h[b],a.contains(w.bounds,p.position)&&m.canCollide(w.collisionFilter,o.collisionFilter))for(var S=w.parts.length>1?1:0;S<w.parts.length;S++){var k=w.parts[S];if(u.contains(k.vertices,p.position)){y.pointA=p.position,y.bodyB=o.body=w,y.pointB={x:p.position.x-w.position.x,y:p.position.y-w.position.y},y.angleB=w.angle,c.set(w,!1),d.trigger(o,"startdrag",{mouse:p,body:w});break}}}else y.bodyB=o.body=null,y.pointB=null,w&&d.trigger(o,"enddrag",{mouse:p,body:w})},f._triggerEvents=function(o){var h=o.mouse,p=h.sourceEvents;p.mousemove&&d.trigger(o,"mousemove",{mouse:h}),p.mousedown&&d.trigger(o,"mousedown",{mouse:h}),p.mouseup&&d.trigger(o,"mouseup",{mouse:h}),s.clearSourceEvents(h)}})()},function(g,t,x){var f={};g.exports=f;var u=x(2),c=x(8),s=x(1),d=x(12),m=x(3);(function(){f.collides=function(v,i){for(var n=[],a=i.length,o=v.bounds,h=c.collides,p=s.overlaps,y=0;y<a;y++){var w=i[y],b=w.parts.length,S=b===1?0:1;if(p(w.bounds,o))for(var k=S;k<b;k++){var E=w.parts[k];if(p(E.bounds,o)){var T=h(E,v);if(T){n.push(T);break}}}}return n},f.ray=function(v,i,n,a){a=a||1e-100;for(var o=u.angle(i,n),h=u.magnitude(u.sub(i,n)),p=(n.x+i.x)*.5,y=(n.y+i.y)*.5,w=d.rectangle(p,y,h,a,{angle:o}),b=f.collides(w,v),S=0;S<b.length;S+=1){var k=b[S];k.body=k.bodyB=k.bodyA}return b},f.region=function(v,i,n){for(var a=[],o=0;o<v.length;o++){var h=v[o],p=s.overlaps(h.bounds,i);(p&&!n||!p&&n)&&a.push(h)}return a},f.point=function(v,i){for(var n=[],a=0;a<v.length;a++){var o=v[a];if(s.contains(o.bounds,i))for(var h=o.parts.length===1?0:1;h<o.parts.length;h++){var p=o.parts[h];if(s.contains(p.bounds,i)&&m.contains(p.vertices,i)){n.push(o);break}}}return n}})()},function(g,t,x){var f={};g.exports=f;var u=x(4),c=x(0),s=x(6),d=x(1),m=x(5),v=x(2),i=x(14);(function(){var n,a;typeof window<"u"&&(n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(S){window.setTimeout(function(){S(c.now())},1e3/60)},a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),f._goodFps=30,f._goodDelta=1e3/60,f.create=function(S){var k={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!S.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},E=c.extend(k,S);return E.canvas&&(E.canvas.width=E.options.width||E.canvas.width,E.canvas.height=E.options.height||E.canvas.height),E.mouse=S.mouse,E.engine=S.engine,E.canvas=E.canvas||p(E.options.width,E.options.height),E.context=E.canvas.getContext("2d"),E.textures={},E.bounds=E.bounds||{min:{x:0,y:0},max:{x:E.canvas.width,y:E.canvas.height}},E.controller=f,E.options.showBroadphase=!1,E.options.pixelRatio!==1&&f.setPixelRatio(E,E.options.pixelRatio),c.isElement(E.element)&&E.element.appendChild(E.canvas),E},f.run=function(S){(function k(E){S.frameRequestId=n(k),o(S,E),f.world(S,E),S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0),(S.options.showStats||S.options.showDebug)&&f.stats(S,S.context,E),(S.options.showPerformance||S.options.showDebug)&&f.performance(S,S.context,E),S.context.setTransform(1,0,0,1,0,0)})()},f.stop=function(S){a(S.frameRequestId)},f.setPixelRatio=function(S,k){var E=S.options,T=S.canvas;k==="auto"&&(k=y(T)),E.pixelRatio=k,T.setAttribute("data-pixel-ratio",k),T.width=E.width*k,T.height=E.height*k,T.style.width=E.width+"px",T.style.height=E.height+"px"},f.setSize=function(S,k,E){S.options.width=k,S.options.height=E,S.bounds.max.x=S.bounds.min.x+k,S.bounds.max.y=S.bounds.min.y+E,S.options.pixelRatio!==1?f.setPixelRatio(S,S.options.pixelRatio):(S.canvas.width=k,S.canvas.height=E)},f.lookAt=function(S,k,E,T){T=typeof T<"u"?T:!0,k=c.isArray(k)?k:[k],E=E||{x:0,y:0};for(var R={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},O=0;O<k.length;O+=1){var M=k[O],L=M.bounds?M.bounds.min:M.min||M.position||M,I=M.bounds?M.bounds.max:M.max||M.position||M;L&&I&&(L.x<R.min.x&&(R.min.x=L.x),I.x>R.max.x&&(R.max.x=I.x),L.y<R.min.y&&(R.min.y=L.y),I.y>R.max.y&&(R.max.y=I.y))}var B=R.max.x-R.min.x+2*E.x,V=R.max.y-R.min.y+2*E.y,G=S.canvas.height,Y=S.canvas.width,H=Y/G,W=B/V,K=1,Q=1;W>H?Q=W/H:K=H/W,S.options.hasBounds=!0,S.bounds.min.x=R.min.x,S.bounds.max.x=R.min.x+B*K,S.bounds.min.y=R.min.y,S.bounds.max.y=R.min.y+V*Q,T&&(S.bounds.min.x+=B*.5-B*K*.5,S.bounds.max.x+=B*.5-B*K*.5,S.bounds.min.y+=V*.5-V*Q*.5,S.bounds.max.y+=V*.5-V*Q*.5),S.bounds.min.x-=E.x,S.bounds.max.x-=E.x,S.bounds.min.y-=E.y,S.bounds.max.y-=E.y,S.mouse&&(i.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.canvas.width,y:(S.bounds.max.y-S.bounds.min.y)/S.canvas.height}),i.setOffset(S.mouse,S.bounds.min))},f.startViewTransform=function(S){var k=S.bounds.max.x-S.bounds.min.x,E=S.bounds.max.y-S.bounds.min.y,T=k/S.options.width,R=E/S.options.height;S.context.setTransform(S.options.pixelRatio/T,0,0,S.options.pixelRatio/R,0,0),S.context.translate(-S.bounds.min.x,-S.bounds.min.y)},f.endViewTransform=function(S){S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0)},f.world=function(S,k){var E=c.now(),T=S.engine,R=T.world,O=S.canvas,M=S.context,L=S.options,I=S.timing,B=s.allBodies(R),V=s.allConstraints(R),G=L.wireframes?L.wireframeBackground:L.background,Y=[],H=[],W,K={timestamp:T.timing.timestamp};if(m.trigger(S,"beforeRender",K),S.currentBackground!==G&&b(S,G),M.globalCompositeOperation="source-in",M.fillStyle="transparent",M.fillRect(0,0,O.width,O.height),M.globalCompositeOperation="source-over",L.hasBounds){for(W=0;W<B.length;W++){var Q=B[W];d.overlaps(Q.bounds,S.bounds)&&Y.push(Q)}for(W=0;W<V.length;W++){var se=V[W],A=se.bodyA,z=se.bodyB,q=se.pointA,$=se.pointB;A&&(q=v.add(A.position,se.pointA)),z&&($=v.add(z.position,se.pointB)),!(!q||!$)&&(d.contains(S.bounds,q)||d.contains(S.bounds,$))&&H.push(se)}f.startViewTransform(S),S.mouse&&(i.setScale(S.mouse,{x:(S.bounds.max.x-S.bounds.min.x)/S.options.width,y:(S.bounds.max.y-S.bounds.min.y)/S.options.height}),i.setOffset(S.mouse,S.bounds.min))}else H=V,Y=B,S.options.pixelRatio!==1&&S.context.setTransform(S.options.pixelRatio,0,0,S.options.pixelRatio,0,0);!L.wireframes||T.enableSleeping&&L.showSleeping?f.bodies(S,Y,M):(L.showConvexHulls&&f.bodyConvexHulls(S,Y,M),f.bodyWireframes(S,Y,M)),L.showBounds&&f.bodyBounds(S,Y,M),(L.showAxes||L.showAngleIndicator)&&f.bodyAxes(S,Y,M),L.showPositions&&f.bodyPositions(S,Y,M),L.showVelocity&&f.bodyVelocity(S,Y,M),L.showIds&&f.bodyIds(S,Y,M),L.showSeparations&&f.separations(S,T.pairs.list,M),L.showCollisions&&f.collisions(S,T.pairs.list,M),L.showVertexNumbers&&f.vertexNumbers(S,Y,M),L.showMousePosition&&f.mousePosition(S,S.mouse,M),f.constraints(H,M),L.hasBounds&&f.endViewTransform(S),m.trigger(S,"afterRender",K),I.lastElapsed=c.now()-E},f.stats=function(S,k,E){for(var T=S.engine,R=T.world,O=s.allBodies(R),M=0,L=55,I=44,B=0,V=0,G=0;G<O.length;G+=1)M+=O[G].parts.length;var Y={Part:M,Body:O.length,Cons:s.allConstraints(R).length,Comp:s.allComposites(R).length,Pair:T.pairs.list.length};k.fillStyle="#0e0f19",k.fillRect(B,V,L*5.5,I),k.font="12px Arial",k.textBaseline="top",k.textAlign="right";for(var H in Y){var W=Y[H];k.fillStyle="#aaa",k.fillText(H,B+L,V+8),k.fillStyle="#eee",k.fillText(W,B+L,V+26),B+=L}},f.performance=function(S,k){var E=S.engine,T=S.timing,R=T.deltaHistory,O=T.elapsedHistory,M=T.timestampElapsedHistory,L=T.engineDeltaHistory,I=T.engineUpdatesHistory,B=T.engineElapsedHistory,V=E.timing.lastUpdatesPerFrame,G=E.timing.lastDelta,Y=h(R),H=h(O),W=h(L),K=h(I),Q=h(B),se=h(M),A=se/Y||0,z=Math.round(Y/G),q=1e3/Y||0,$=4,ie=12,re=60,fe=34,ge=10,de=69;k.fillStyle="#0e0f19",k.fillRect(0,50,ie*5+re*6+22,fe),f.status(k,ge,de,re,$,R.length,Math.round(q)+" fps",q/f._goodFps,function(me){return R[me]/Y-1}),f.status(k,ge+ie+re,de,re,$,L.length,G.toFixed(2)+" dt",f._goodDelta/G,function(me){return L[me]/W-1}),f.status(k,ge+(ie+re)*2,de,re,$,I.length,V+" upf",Math.pow(c.clamp(K/z||1,0,1),4),function(me){return I[me]/K-1}),f.status(k,ge+(ie+re)*3,de,re,$,B.length,Q.toFixed(2)+" ut",1-V*Q/f._goodFps,function(me){return B[me]/Q-1}),f.status(k,ge+(ie+re)*4,de,re,$,O.length,H.toFixed(2)+" rt",1-H/f._goodFps,function(me){return O[me]/H-1}),f.status(k,ge+(ie+re)*5,de,re,$,M.length,A.toFixed(2)+" x",A*A*A,function(me){return(M[me]/R[me]/A||0)-1})},f.status=function(S,k,E,T,R,O,M,L,I){S.strokeStyle="#888",S.fillStyle="#444",S.lineWidth=1,S.fillRect(k,E+7,T,1),S.beginPath(),S.moveTo(k,E+7-R*c.clamp(.4*I(0),-2,2));for(var B=0;B<T;B+=1)S.lineTo(k+B,E+7-(B<O?R*c.clamp(.4*I(B),-2,2):0));S.stroke(),S.fillStyle="hsl("+c.clamp(25+95*L,0,120)+",100%,60%)",S.fillRect(k,E-7,4,4),S.font="12px Arial",S.textBaseline="middle",S.textAlign="right",S.fillStyle="#eee",S.fillText(M,k+T,E-5)},f.constraints=function(S,k){for(var E=k,T=0;T<S.length;T++){var R=S[T];if(!(!R.render.visible||!R.pointA||!R.pointB)){var O=R.bodyA,M=R.bodyB,L,I;if(O?L=v.add(O.position,R.pointA):L=R.pointA,R.render.type==="pin")E.beginPath(),E.arc(L.x,L.y,3,0,2*Math.PI),E.closePath();else{if(M?I=v.add(M.position,R.pointB):I=R.pointB,E.beginPath(),E.moveTo(L.x,L.y),R.render.type==="spring")for(var B=v.sub(I,L),V=v.perp(v.normalise(B)),G=Math.ceil(c.clamp(R.length/5,12,20)),Y,H=1;H<G;H+=1)Y=H%2===0?1:-1,E.lineTo(L.x+B.x*(H/G)+V.x*Y*4,L.y+B.y*(H/G)+V.y*Y*4);E.lineTo(I.x,I.y)}R.render.lineWidth&&(E.lineWidth=R.render.lineWidth,E.strokeStyle=R.render.strokeStyle,E.stroke()),R.render.anchors&&(E.fillStyle=R.render.strokeStyle,E.beginPath(),E.arc(L.x,L.y,3,0,2*Math.PI),E.arc(I.x,I.y,3,0,2*Math.PI),E.closePath(),E.fill())}}},f.bodies=function(S,k,E){var T=E;S.engine;var R=S.options,O=R.showInternalEdges||!R.wireframes,M,L,I,B;for(I=0;I<k.length;I++)if(M=k[I],!!M.render.visible){for(B=M.parts.length>1?1:0;B<M.parts.length;B++)if(L=M.parts[B],!!L.render.visible){if(R.showSleeping&&M.isSleeping?T.globalAlpha=.5*L.render.opacity:L.render.opacity!==1&&(T.globalAlpha=L.render.opacity),L.render.sprite&&L.render.sprite.texture&&!R.wireframes){var V=L.render.sprite,G=w(S,V.texture);T.translate(L.position.x,L.position.y),T.rotate(L.angle),T.drawImage(G,G.width*-V.xOffset*V.xScale,G.height*-V.yOffset*V.yScale,G.width*V.xScale,G.height*V.yScale),T.rotate(-L.angle),T.translate(-L.position.x,-L.position.y)}else{if(L.circleRadius)T.beginPath(),T.arc(L.position.x,L.position.y,L.circleRadius,0,2*Math.PI);else{T.beginPath(),T.moveTo(L.vertices[0].x,L.vertices[0].y);for(var Y=1;Y<L.vertices.length;Y++)!L.vertices[Y-1].isInternal||O?T.lineTo(L.vertices[Y].x,L.vertices[Y].y):T.moveTo(L.vertices[Y].x,L.vertices[Y].y),L.vertices[Y].isInternal&&!O&&T.moveTo(L.vertices[(Y+1)%L.vertices.length].x,L.vertices[(Y+1)%L.vertices.length].y);T.lineTo(L.vertices[0].x,L.vertices[0].y),T.closePath()}R.wireframes?(T.lineWidth=1,T.strokeStyle=S.options.wireframeStrokeStyle,T.stroke()):(T.fillStyle=L.render.fillStyle,L.render.lineWidth&&(T.lineWidth=L.render.lineWidth,T.strokeStyle=L.render.strokeStyle,T.stroke()),T.fill())}T.globalAlpha=1}}},f.bodyWireframes=function(S,k,E){var T=E,R=S.options.showInternalEdges,O,M,L,I,B;for(T.beginPath(),L=0;L<k.length;L++)if(O=k[L],!!O.render.visible)for(B=O.parts.length>1?1:0;B<O.parts.length;B++){for(M=O.parts[B],T.moveTo(M.vertices[0].x,M.vertices[0].y),I=1;I<M.vertices.length;I++)!M.vertices[I-1].isInternal||R?T.lineTo(M.vertices[I].x,M.vertices[I].y):T.moveTo(M.vertices[I].x,M.vertices[I].y),M.vertices[I].isInternal&&!R&&T.moveTo(M.vertices[(I+1)%M.vertices.length].x,M.vertices[(I+1)%M.vertices.length].y);T.lineTo(M.vertices[0].x,M.vertices[0].y)}T.lineWidth=1,T.strokeStyle=S.options.wireframeStrokeStyle,T.stroke()},f.bodyConvexHulls=function(S,k,E){var T=E,R,O,M;for(T.beginPath(),O=0;O<k.length;O++)if(R=k[O],!(!R.render.visible||R.parts.length===1)){for(T.moveTo(R.vertices[0].x,R.vertices[0].y),M=1;M<R.vertices.length;M++)T.lineTo(R.vertices[M].x,R.vertices[M].y);T.lineTo(R.vertices[0].x,R.vertices[0].y)}T.lineWidth=1,T.strokeStyle="rgba(255,255,255,0.2)",T.stroke()},f.vertexNumbers=function(S,k,E){var T=E,R,O,M;for(R=0;R<k.length;R++){var L=k[R].parts;for(M=L.length>1?1:0;M<L.length;M++){var I=L[M];for(O=0;O<I.vertices.length;O++)T.fillStyle="rgba(255,255,255,0.2)",T.fillText(R+"_"+O,I.position.x+(I.vertices[O].x-I.position.x)*.8,I.position.y+(I.vertices[O].y-I.position.y)*.8)}}},f.mousePosition=function(S,k,E){var T=E;T.fillStyle="rgba(255,255,255,0.8)",T.fillText(k.position.x+"  "+k.position.y,k.position.x+5,k.position.y-5)},f.bodyBounds=function(S,k,E){var T=E;S.engine;var R=S.options;T.beginPath();for(var O=0;O<k.length;O++){var M=k[O];if(M.render.visible)for(var L=k[O].parts,I=L.length>1?1:0;I<L.length;I++){var B=L[I];T.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}R.wireframes?T.strokeStyle="rgba(255,255,255,0.08)":T.strokeStyle="rgba(0,0,0,0.1)",T.lineWidth=1,T.stroke()},f.bodyAxes=function(S,k,E){var T=E;S.engine;var R=S.options,O,M,L,I;for(T.beginPath(),M=0;M<k.length;M++){var B=k[M],V=B.parts;if(B.render.visible)if(R.showAxes)for(L=V.length>1?1:0;L<V.length;L++)for(O=V[L],I=0;I<O.axes.length;I++){var G=O.axes[I];T.moveTo(O.position.x,O.position.y),T.lineTo(O.position.x+G.x*20,O.position.y+G.y*20)}else for(L=V.length>1?1:0;L<V.length;L++)for(O=V[L],I=0;I<O.axes.length;I++)T.moveTo(O.position.x,O.position.y),T.lineTo((O.vertices[0].x+O.vertices[O.vertices.length-1].x)/2,(O.vertices[0].y+O.vertices[O.vertices.length-1].y)/2)}R.wireframes?(T.strokeStyle="indianred",T.lineWidth=1):(T.strokeStyle="rgba(255, 255, 255, 0.4)",T.globalCompositeOperation="overlay",T.lineWidth=2),T.stroke(),T.globalCompositeOperation="source-over"},f.bodyPositions=function(S,k,E){var T=E;S.engine;var R=S.options,O,M,L,I;for(T.beginPath(),L=0;L<k.length;L++)if(O=k[L],!!O.render.visible)for(I=0;I<O.parts.length;I++)M=O.parts[I],T.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),T.closePath();for(R.wireframes?T.fillStyle="indianred":T.fillStyle="rgba(0,0,0,0.5)",T.fill(),T.beginPath(),L=0;L<k.length;L++)O=k[L],O.render.visible&&(T.arc(O.positionPrev.x,O.positionPrev.y,2,0,2*Math.PI,!1),T.closePath());T.fillStyle="rgba(255,165,0,0.8)",T.fill()},f.bodyVelocity=function(S,k,E){var T=E;T.beginPath();for(var R=0;R<k.length;R++){var O=k[R];if(O.render.visible){var M=u.getVelocity(O);T.moveTo(O.position.x,O.position.y),T.lineTo(O.position.x+M.x,O.position.y+M.y)}}T.lineWidth=3,T.strokeStyle="cornflowerblue",T.stroke()},f.bodyIds=function(S,k,E){var T=E,R,O;for(R=0;R<k.length;R++)if(k[R].render.visible){var M=k[R].parts;for(O=M.length>1?1:0;O<M.length;O++){var L=M[O];T.font="12px Arial",T.fillStyle="rgba(255,255,255,0.5)",T.fillText(L.id,L.position.x+10,L.position.y-10)}}},f.collisions=function(S,k,E){var T=E,R=S.options,O,M,L,I;for(T.beginPath(),L=0;L<k.length;L++)if(O=k[L],!!O.isActive)for(M=O.collision,I=0;I<O.contactCount;I++){var B=O.contacts[I],V=B.vertex;T.rect(V.x-1.5,V.y-1.5,3.5,3.5)}for(R.wireframes?T.fillStyle="rgba(255,255,255,0.7)":T.fillStyle="orange",T.fill(),T.beginPath(),L=0;L<k.length;L++)if(O=k[L],!!O.isActive&&(M=O.collision,O.contactCount>0)){var G=O.contacts[0].vertex.x,Y=O.contacts[0].vertex.y;O.contactCount===2&&(G=(O.contacts[0].vertex.x+O.contacts[1].vertex.x)/2,Y=(O.contacts[0].vertex.y+O.contacts[1].vertex.y)/2),M.bodyB===M.supports[0].body||M.bodyA.isStatic===!0?T.moveTo(G-M.normal.x*8,Y-M.normal.y*8):T.moveTo(G+M.normal.x*8,Y+M.normal.y*8),T.lineTo(G,Y)}R.wireframes?T.strokeStyle="rgba(255,165,0,0.7)":T.strokeStyle="orange",T.lineWidth=1,T.stroke()},f.separations=function(S,k,E){var T=E,R=S.options,O,M,L,I,B;for(T.beginPath(),B=0;B<k.length;B++)if(O=k[B],!!O.isActive){M=O.collision,L=M.bodyA,I=M.bodyB;var V=1;!I.isStatic&&!L.isStatic&&(V=.5),I.isStatic&&(V=0),T.moveTo(I.position.x,I.position.y),T.lineTo(I.position.x-M.penetration.x*V,I.position.y-M.penetration.y*V),V=1,!I.isStatic&&!L.isStatic&&(V=.5),L.isStatic&&(V=0),T.moveTo(L.position.x,L.position.y),T.lineTo(L.position.x+M.penetration.x*V,L.position.y+M.penetration.y*V)}R.wireframes?T.strokeStyle="rgba(255,165,0,0.5)":T.strokeStyle="orange",T.stroke()},f.inspector=function(S,k){S.engine;var E=S.selected,T=S.render,R=T.options,O;if(R.hasBounds){var M=T.bounds.max.x-T.bounds.min.x,L=T.bounds.max.y-T.bounds.min.y,I=M/T.options.width,B=L/T.options.height;k.scale(1/I,1/B),k.translate(-T.bounds.min.x,-T.bounds.min.y)}for(var V=0;V<E.length;V++){var G=E[V].data;switch(k.translate(.5,.5),k.lineWidth=1,k.strokeStyle="rgba(255,165,0,0.9)",k.setLineDash([1,2]),G.type){case"body":O=G.bounds,k.beginPath(),k.rect(Math.floor(O.min.x-3),Math.floor(O.min.y-3),Math.floor(O.max.x-O.min.x+6),Math.floor(O.max.y-O.min.y+6)),k.closePath(),k.stroke();break;case"constraint":var Y=G.pointA;G.bodyA&&(Y=G.pointB),k.beginPath(),k.arc(Y.x,Y.y,10,0,2*Math.PI),k.closePath(),k.stroke();break}k.setLineDash([]),k.translate(-.5,-.5)}S.selectStart!==null&&(k.translate(.5,.5),k.lineWidth=1,k.strokeStyle="rgba(255,165,0,0.6)",k.fillStyle="rgba(255,165,0,0.1)",O=S.selectBounds,k.beginPath(),k.rect(Math.floor(O.min.x),Math.floor(O.min.y),Math.floor(O.max.x-O.min.x),Math.floor(O.max.y-O.min.y)),k.closePath(),k.stroke(),k.fill(),k.translate(-.5,-.5)),R.hasBounds&&k.setTransform(1,0,0,1,0,0)};var o=function(S,k){var E=S.engine,T=S.timing,R=T.historySize,O=E.timing.timestamp;T.delta=k-T.lastTime||f._goodDelta,T.lastTime=k,T.timestampElapsed=O-T.lastTimestamp||0,T.lastTimestamp=O,T.deltaHistory.unshift(T.delta),T.deltaHistory.length=Math.min(T.deltaHistory.length,R),T.engineDeltaHistory.unshift(E.timing.lastDelta),T.engineDeltaHistory.length=Math.min(T.engineDeltaHistory.length,R),T.timestampElapsedHistory.unshift(T.timestampElapsed),T.timestampElapsedHistory.length=Math.min(T.timestampElapsedHistory.length,R),T.engineUpdatesHistory.unshift(E.timing.lastUpdatesPerFrame),T.engineUpdatesHistory.length=Math.min(T.engineUpdatesHistory.length,R),T.engineElapsedHistory.unshift(E.timing.lastElapsed),T.engineElapsedHistory.length=Math.min(T.engineElapsedHistory.length,R),T.elapsedHistory.unshift(T.lastElapsed),T.elapsedHistory.length=Math.min(T.elapsedHistory.length,R)},h=function(S){for(var k=0,E=0;E<S.length;E+=1)k+=S[E];return k/S.length||0},p=function(S,k){var E=document.createElement("canvas");return E.width=S,E.height=k,E.oncontextmenu=function(){return!1},E.onselectstart=function(){return!1},E},y=function(S){var k=S.getContext("2d"),E=window.devicePixelRatio||1,T=k.webkitBackingStorePixelRatio||k.mozBackingStorePixelRatio||k.msBackingStorePixelRatio||k.oBackingStorePixelRatio||k.backingStorePixelRatio||1;return E/T},w=function(S,k){var E=S.textures[k];return E||(E=S.textures[k]=new Image,E.src=k,E)},b=function(S,k){var E=k;/(jpg|gif|png)$/.test(k)&&(E="url("+k+")"),S.canvas.style.background=E,S.canvas.style.backgroundSize="contain",S.currentBackground=k}})()},function(g,t,x){var f={};g.exports=f;var u=x(5),c=x(17),s=x(0);(function(){f._maxFrameDelta=1e3/15,f._frameDeltaFallback=1e3/60,f._timeBufferMargin=1.5,f._elapsedNextEstimate=1,f._smoothingLowerBound=.1,f._smoothingUpperBound=.9,f.create=function(m){var v={delta:16.666666666666668,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:33.333333333333336,lastUpdatesDeferred:0,enabled:!0},i=s.extend(v,m);return i.fps=0,i},f.run=function(m,v){return m.timeBuffer=f._frameDeltaFallback,function i(n){m.frameRequestId=f._onNextFrame(m,i),n&&m.enabled&&f.tick(m,v,n)}(),m},f.tick=function(m,v,i){var n=s.now(),a=m.delta,o=0,h=i-m.timeLastTick;if((!h||!m.timeLastTick||h>Math.max(f._maxFrameDelta,m.maxFrameTime))&&(h=m.frameDelta||f._frameDeltaFallback),m.frameDeltaSmoothing){m.frameDeltaHistory.push(h),m.frameDeltaHistory=m.frameDeltaHistory.slice(-m.frameDeltaHistorySize);var p=m.frameDeltaHistory.slice(0).sort(),y=m.frameDeltaHistory.slice(p.length*f._smoothingLowerBound,p.length*f._smoothingUpperBound),w=d(y);h=w||h}m.frameDeltaSnapping&&(h=1e3/Math.round(1e3/h)),m.frameDelta=h,m.timeLastTick=i,m.timeBuffer+=m.frameDelta,m.timeBuffer=s.clamp(m.timeBuffer,0,m.frameDelta+a*f._timeBufferMargin),m.lastUpdatesDeferred=0;var b=m.maxUpdates||Math.ceil(m.maxFrameTime/a),S={timestamp:v.timing.timestamp};u.trigger(m,"beforeTick",S),u.trigger(m,"tick",S);for(var k=s.now();a>0&&m.timeBuffer>=a*f._timeBufferMargin;){u.trigger(m,"beforeUpdate",S),c.update(v,a),u.trigger(m,"afterUpdate",S),m.timeBuffer-=a,o+=1;var E=s.now()-n,T=s.now()-k,R=E+f._elapsedNextEstimate*T/o;if(o>=b||R>m.maxFrameTime){m.lastUpdatesDeferred=Math.round(Math.max(0,m.timeBuffer/a-f._timeBufferMargin));break}}v.timing.lastUpdatesPerFrame=o,u.trigger(m,"afterTick",S),m.frameDeltaHistory.length>=100&&(m.lastUpdatesDeferred&&Math.round(m.frameDelta/a)>b?s.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):m.lastUpdatesDeferred&&s.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),typeof m.isFixed<"u"&&s.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(m.deltaMin||m.deltaMax)&&s.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),m.fps!==0&&s.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},f.stop=function(m){f._cancelNextFrame(m)},f._onNextFrame=function(m,v){if(typeof window<"u"&&window.requestAnimationFrame)m.frameRequestId=window.requestAnimationFrame(v);else throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return m.frameRequestId},f._cancelNextFrame=function(m){if(typeof window<"u"&&window.cancelAnimationFrame)window.cancelAnimationFrame(m.frameRequestId);else throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.")};var d=function(m){for(var v=0,i=m.length,n=0;n<i;n+=1)v+=m[n];return v/i||0}})()},function(g,t,x){var f={};g.exports=f;var u=x(8),c=x(0),s=c.deprecated;(function(){f.collides=function(d,m){return u.collides(d,m)},s(f,"collides","SAT.collides ➤ replaced by Collision.collides")})()},function(g,t,x){var f={};g.exports=f,x(1);var u=x(0);(function(){f.pathToVertices=function(c,s){typeof window<"u"&&!("SVGPathSeg"in window)&&u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,m,v,i,n,a,o,h,p,y,w=[],b,S,k=0,E=0,T=0;s=s||15;var R=function(M,L,I){var B=I%2===1&&I>1;if(!p||M!=p.x||L!=p.y){p&&B?(b=p.x,S=p.y):(b=0,S=0);var V={x:b+M,y:S+L};(B||!p)&&(p=V),w.push(V),E=b+M,T=S+L}},O=function(M){var L=M.pathSegTypeAsLetter.toUpperCase();if(L!=="Z"){switch(L){case"M":case"L":case"T":case"C":case"S":case"Q":E=M.x,T=M.y;break;case"H":E=M.x;break;case"V":T=M.y;break}R(E,T,M.pathSegType)}};for(f._svgPathToAbsolute(c),v=c.getTotalLength(),a=[],d=0;d<c.pathSegList.numberOfItems;d+=1)a.push(c.pathSegList.getItem(d));for(o=a.concat();k<v;){if(y=c.getPathSegAtLength(k),n=a[y],n!=h){for(;o.length&&o[0]!=n;)O(o.shift());h=n}switch(n.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=c.getPointAtLength(k),R(i.x,i.y,0);break}k+=s}for(d=0,m=o.length;d<m;++d)O(o[d]);return w},f._svgPathToAbsolute=function(c){for(var s,d,m,v,i,n,a=c.pathSegList,o=0,h=0,p=a.numberOfItems,y=0;y<p;++y){var w=a.getItem(y),b=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(b))"x"in w&&(o=w.x),"y"in w&&(h=w.y);else switch("x1"in w&&(m=o+w.x1),"x2"in w&&(i=o+w.x2),"y1"in w&&(v=h+w.y1),"y2"in w&&(n=h+w.y2),"x"in w&&(o+=w.x),"y"in w&&(h+=w.y),b){case"m":a.replaceItem(c.createSVGPathSegMovetoAbs(o,h),y);break;case"l":a.replaceItem(c.createSVGPathSegLinetoAbs(o,h),y);break;case"h":a.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(o),y);break;case"v":a.replaceItem(c.createSVGPathSegLinetoVerticalAbs(h),y);break;case"c":a.replaceItem(c.createSVGPathSegCurvetoCubicAbs(o,h,m,v,i,n),y);break;case"s":a.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(o,h,i,n),y);break;case"q":a.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(o,h,m,v),y);break;case"t":a.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(o,h),y);break;case"a":a.replaceItem(c.createSVGPathSegArcAbs(o,h,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),y);break;case"z":case"Z":o=s,h=d;break}(b=="M"||b=="m")&&(s=o,d=h)}}})()},function(g,t,x){var f={};g.exports=f;var u=x(6);x(0),function(){f.create=u.create,f.add=u.add,f.remove=u.remove,f.clear=u.clear,f.addComposite=u.addComposite,f.addBody=u.addBody,f.addConstraint=u.addConstraint}()}])})}(Tc)),Tc.exports}var eS=J2();const en=Qh(eS);class tS{constructor(r){this.p5=r,this.engine=en.Engine.create(),this.world=this.engine.world,this.particles=new Map,this.world.gravity.y=.2,this.bounds=null,this.canvasWidth=null,this.canvasHeight=null,this.runner=en.Runner.create(),en.Runner.run(this.runner,this.engine),this.animationConfigs={0:{color:"#3B82F6",minSize:80,maxSize:160,duration:2e3,style:"circle",density:.001,restitution:.8,spawn:{radius:30,spread:1},motion:{force:.15,verticalBias:.8,horizontalSpread:.3,randomness:.2},noteResponse:{sizeScale:1.5,pitchEffect:.6,durationScale:1.2}},1:{color:"#EF4444",minSize:30,maxSize:60,duration:1500,style:"square",density:.001,restitution:.9,spawn:{radius:20,spread:.8},motion:{force:.2,verticalBias:.6,horizontalSpread:.5,randomness:.4},noteResponse:{sizeScale:2,pitchEffect:.3,durationScale:.8}},2:{color:"#10B981",minSize:40,maxSize:100,duration:2e3,style:"triangle",density:.008,restitution:.85,spawn:{radius:25,spread:.9},motion:{force:.1,verticalBias:.7,horizontalSpread:.4,randomness:.3},noteResponse:{sizeScale:1.2,pitchEffect:1.5,durationScale:1}},3:{color:"#8B5CF6",minSize:100,maxSize:200,duration:3e3,style:"circle",density:5e-4,restitution:.7,spawn:{radius:40,spread:1.2},motion:{force:.05,verticalBias:.6,horizontalSpread:.6,randomness:.3},noteResponse:{sizeScale:.8,pitchEffect:1,durationScale:1.5}},4:{color:"#F59E0B",minSize:20,maxSize:50,duration:1e3,style:"triangle",density:.002,restitution:.95,spawn:{radius:15,spread:.7},motion:{force:.25,verticalBias:.9,horizontalSpread:.2,randomness:.4},noteResponse:{sizeScale:1,pitchEffect:2,durationScale:.7}},5:{color:"#EC4899",minSize:30,maxSize:120,duration:2500,style:"square",density:.001,restitution:.9,spawn:{radius:35,spread:1.3},motion:{force:.15,verticalBias:.5,horizontalSpread:.8,randomness:.6},noteResponse:{sizeScale:1.8,pitchEffect:1.2,durationScale:1.1}},6:{color:"#1D4ED8",minSize:100,maxSize:200,duration:2500,style:"circle",density:.002,restitution:.7,spawn:{radius:20,spread:.6},motion:{force:.1,verticalBias:.7,horizontalSpread:.2,randomness:.15},noteResponse:{sizeScale:1.3,pitchEffect:.4,durationScale:1.4}},7:{color:"#DC2626",minSize:25,maxSize:45,duration:1e3,style:"square",density:.001,restitution:.95,spawn:{radius:15,spread:.7},motion:{force:.3,verticalBias:.5,horizontalSpread:.6,randomness:.5},noteResponse:{sizeScale:2.2,pitchEffect:.5,durationScale:.6}}},console.log("PhysicsTrackAnimationSystem initialized")}setP5Instance(r){this.p5=r,this.setupBounds(),console.log("P5 instance updated and bounds set up in animation system")}setupBounds(){this.canvasWidth=this.p5.width||window.innerWidth,this.canvasHeight=this.p5.height||window.innerHeight,this.bounds&&Object.values(this.bounds).forEach(g=>{en.World.remove(this.world,g)});const r={isStatic:!0,restitution:.8,friction:.005};this.bounds={ground:en.Bodies.rectangle(this.canvasWidth/2,this.canvasHeight+5,this.canvasWidth,10,r),leftWall:en.Bodies.rectangle(-5,this.canvasHeight/2,10,this.canvasHeight,r),rightWall:en.Bodies.rectangle(this.canvasWidth+5,this.canvasHeight/2,10,this.canvasHeight,r),ceiling:en.Bodies.rectangle(this.canvasWidth/2,-5,this.canvasWidth,10,r)},en.World.add(this.world,Object.values(this.bounds)),console.log("Bounds set up with canvas dimensions:",{width:this.canvasWidth,height:this.canvasHeight})}calculateSpawnPosition(r,g,t,x){const f=Math.random()*Math.PI*2,u=x!=null&&x.pitch?x.pitch/127:.5,s=t.spawn.radius*(.5+u*t.noteResponse.pitchEffect)*Math.pow(Math.random(),1/(t.spawn.spread+.1));return{x:r+Math.cos(f)*s,y:g+Math.sin(f)*s}}triggerAnimation(r,g,t,x){const f=this.animationConfigs[r];if(!f){console.warn(`No config found for trackId: ${r}`);return}const u=(x==null?void 0:x.velocity)||.7,c=x!=null&&x.pitch?x.pitch/127:.5,d=(f.minSize+(f.maxSize-f.minSize)*u)*(1+(u-.5)*f.noteResponse.sizeScale),m=this.calculateSpawnPosition(g,t,f,x),v=this.createParticle(m.x,m.y,d,f),i=f.motion.force*(1+(u-.5)*.5),n=f.motion.verticalBias*(1-c*f.noteResponse.pitchEffect),a={x:i*(Math.random()-.5)*f.motion.horizontalSpread,y:-i*n};en.Body.applyForce(v,v.position,a),en.World.add(this.world,v),this.particles.set(v.id,{body:v,createdAt:performance.now(),noteStartTime:performance.now(),noteDuration:(x==null?void 0:x.duration)||0,noteVelocity:u,notePitch:(x==null?void 0:x.pitch)||60,config:f,trackId:r,initialSpawnPoint:{x:g,y:t}})}createParticle(r,g,t,x){const f={restitution:x.restitution,friction:.001,density:x.density,render:{fillStyle:x.color}};switch(x.style){case"square":return en.Bodies.rectangle(r,g,t,t,f);case"triangle":{const u=t*Math.sqrt(3)/2,c=[{x:r,y:g-u/2},{x:r+t/2,y:g+u/2},{x:r-t/2,y:g+u/2}];return en.Bodies.fromVertices(r,g,[c],f)}default:return en.Bodies.circle(r,g,t/2,f)}}update(){const r=performance.now();this.p5.push(),this.particles.forEach((g,t)=>{const x=r-g.createdAt,f=g.config.duration;if(x>f){en.World.remove(this.world,g.body),this.particles.delete(t);return}const u=g.body.position,c=r-g.noteStartTime<g.noteDuration;this.p5.push(),this.p5.fill(c?g.config.color:"#000000"),this.p5.noStroke(),this.p5.translate(u.x,u.y),this.p5.rotate(g.body.angle);const s=g.body.circleRadius*2||Math.max(g.body.bounds.max.x-g.body.bounds.min.x,g.body.bounds.max.y-g.body.bounds.min.y);switch(g.config.style){case"square":this.p5.rect(-s/2,-s/2,s,s);break;case"triangle":const d=s*Math.sqrt(3)/2;this.p5.triangle(0,-d/2,s/2,d/2,-s/2,d/2);break;default:this.p5.ellipse(0,0,s,s)}this.p5.pop()}),this.p5.pop()}updateTrackPosition(r,g,t){this.particles.forEach(x=>{x.trackId===r&&en.Body.translate(x.body,{x:g-x.body.position.x,y:t-x.body.position.y})})}cleanup(){en.Runner.stop(this.runner),en.World.clear(this.world),en.Engine.clear(this.engine),this.particles.clear()}}const rS=D=>new tS(D),nS=()=>{const D=lr.useRef(null),r=lr.useRef(null),g=lr.useRef({draggedTrackId:null,lastClickTime:0}),t=lr.useRef(null),x=lr.useRef(!1),f=lr.useRef(!1),u=Lr(n=>n.tracks),c=Lr(n=>n.updateTrackPosition),s=Lr(n=>n.selectTrack),d=Lr(n=>n.initializeTracks),m=lr.useRef(u),v=lr.useRef(c),i=lr.useCallback(()=>{var n;if(!((n=m.current)!=null&&n.length)||!t.current){console.log("Cannot setup callbacks: Missing required references");return}console.log("Setting up track callbacks for",m.current.length,"tracks"),m.current.forEach(a=>{a.toneSequence&&(console.log(`Setting up callback for track ${a.id}`),a.toneSequence.callback&&(console.log(`Removing existing callback for track ${a.id}`),a.toneSequence.callback=null),a.toneSequence.callback=(h,p)=>{var y;a.isMuted||(console.log(`Animation triggered for track ${a.id}:`,{time:h,note:p,position:{x:a.x,y:a.y}}),(y=t.current)!=null&&y.triggerAnimation&&t.current.triggerAnimation(a.id,a.x,a.y,{pitch:p.midi,velocity:p.velocity,duration:p.duration*1e3}))})}),console.log("Track callbacks setup completed")},[]);return lr.useEffect(()=>{(async()=>{if(x.current){console.log("Track initialization already completed");return}await d(),x.current=!0})()},[d]),lr.useEffect(()=>{if(!(!D.current||r.current)){if(console.log("Initializing P5 instance"),!t.current){console.log("Creating animation system");const n=rS(null);t.current=n,window.animationSystem=n,console.log("Animation system initialized globally")}return r.current=new mv(n=>{n.setup=()=>{console.log("P5 Canvas setup starting..."),n.createCanvas(window.innerWidth,window.innerHeight).parent(D.current),n.frameRate(60),n.pixelDensity(2),n.textAlign(n.CENTER,n.CENTER),n.textFont("Jost"),t.current&&(t.current.setP5Instance(n),console.log("P5 instance set in animation system"))},n.draw=()=>{var o;if(n.background("#FFFFFF"),(o=m.current)==null||o.forEach(h=>{a(h)}),t.current)try{t.current.update()}catch(h){console.error("Error updating animation:",h)}};const a=o=>{o&&(n.push(),n.translate(o.x,o.y),n.noStroke(),n.fill((o.isMuted,"#CBD5E1")),n.textSize(16),n.text(o.name,0,1),n.pop())};n.mousePressed=()=>{if(!m.current)return;const o=m.current.find(h=>n.dist(n.mouseX,n.mouseY,h.x,h.y)<20);if(o){const h=Date.now();h-g.current.lastClickTime<300&&s(o.id),g.current.lastClickTime=h,g.current.draggedTrackId=o.id,n.cursor(n.CROSS)}},n.mouseDragged=()=>{const{draggedTrackId:o}=g.current;if(o!==null&&v.current){const h=n.constrain(n.mouseX,0,n.width),p=n.constrain(n.mouseY,0,n.height);v.current(o,h,p),t.current&&t.current.updateTrackPosition(o,h,p)}},n.mouseReleased=()=>{g.current.draggedTrackId=null,n.cursor(n.ARROW)},n.windowResized=()=>{n.resizeCanvas(window.innerWidth,window.innerHeight)}}),()=>{console.log("Cleaning up P5 Canvas"),r.current&&(r.current.remove(),r.current=null),f.current=!1}}},[]),lr.useEffect(()=>{m.current=u},[u]),lr.useEffect(()=>{!u.length||!t.current||f.current||(i(),f.current=!0)},[u,i]),lr.useEffect(()=>{v.current=c},[c]),lr.useEffect(()=>()=>{t.current&&(t.current.cleanup(),window.animationSystem=null,t.current=null)},[]),Bt.jsx("div",{ref:D,className:"select-none absolute inset-0"})},sS=()=>{const D=Lr(c=>c.isPlaying),r=Lr(c=>c.bpm),g=Lr(c=>c.metronomeEnabled),t=Lr(c=>c.togglePlay),x=Lr(c=>c.setBpm),f=Lr(c=>c.toggleMetronome),u=async()=>{console.log("Metronome toggle clicked, current state:",g),pv.state!=="running"&&await Aa(),f(),setTimeout(()=>{console.log("Metronome state after toggle:",Lr.getState().metronomeEnabled),console.log("Transport state:",mi.state)},0)};return Bt.jsx("div",{className:"select-none fixed bottom-0 right-0 bg-none border-none z-10",children:Bt.jsx("div",{className:"max-w-screen-xl mx-auto px-0 py-0 flex",children:Bt.jsxs("div",{className:"flex items-center  bg-none p-0",children:[Bt.jsxs("label",{htmlFor:"bpm",className:"w-100 text-primary text-lg",children:["bpm = ",r]}),Bt.jsx("div",{className:"flex items-center mr-12",children:Bt.jsx("input",{id:"bpm",type:"range",min:"40",max:"200",value:r,onChange:c=>x(parseInt(c.target.value)),className:"w-24 h-1 bg-primary rounded-full appearance-none accent-primary"})}),Bt.jsx("button",{onClick:u,className:`
          w-100 text-xl items-center rounded-full mr-8
          
          ${g?"bg-none text-primary":"bg-primary text-base"}
        `,children:Bt.jsxs("span",{children:["Metro ",g?"ON":"OFF"]})}),Bt.jsxs("button",{onClick:t,className:`
              flex items-center justify-center
              w-48 h-48 
            
              ${D?"bg-highlight text-primary":"bg-secondary text-primary"}
            `,children:[Bt.jsx("span",{className:"sr-only",children:D?"Stop":"Play"}),D?Bt.jsxs("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:[Bt.jsx("rect",{x:"7",y:"5",width:"4",height:"14"}),Bt.jsx("rect",{x:"13",y:"5",width:"4",height:"14"})]}):Bt.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:Bt.jsx("path",{d:"M8 5v14l11-7z"})})]})]})})})},iS=({onStart:D})=>{const r=Lr(t=>t.closeWelcomeModal),g=async()=>{await D(),r()};return Bt.jsx("div",{className:"fixed inset-0 bg-base flex items-center justify-center p-4 z-50",children:Bt.jsxs("div",{className:"bg-base rounded-lg p-6 text-primary max-w-md w-full",children:[Bt.jsx("h2",{className:"text-6xl text-center mb-4 ",children:"Hello!"}),Bt.jsxs("div",{className:"space-y-36 mb-6",children:[Bt.jsx("p",{children:"This application allows you to create music visually:"}),Bt.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[Bt.jsx("li",{children:"Drag markers to change pan and filter effects"}),Bt.jsx("li",{children:"Double-click markers to open the piano roll"}),Bt.jsx("li",{children:"Use the controls at the top to manage playback"})]})]}),Bt.jsx("button",{onClick:g,className:"w-full bg-none text-lg border-2 border-primary text-primary rounded-full px-2 py-2 hover:bg-highlight transition-colors",children:"Start"})]})})},Nl=32,_s=16,bs=8,is=32,oS=()=>{const D=Lr(o=>o.selectedTrackId),r=Lr(o=>o.isPianoRollOpen),g=Lr(o=>o.closePianoRoll),t=Lr(o=>o.setTrackSequence),x=Lr(o=>o.tracks),f=Lr(o=>o.playbackPosition),u=lr.useRef(),c=lr.useRef(null),s=lr.useRef(null),d=lr.useRef([]),m=lr.useRef(null),v=lr.useRef([]);lr.useRef(null);const i=o=>{if(!o||!o.keyRange)return[];const h=Pa(o.keyRange.low).toMidi(),p=Pa(o.keyRange.high).toMidi();return Array.from({length:p-h+1},(y,w)=>{const b=p-w;return Pa(b,"midi").toNote()})};lr.useEffect(()=>{s.current=D,d.current=x,m.current=t;const o=x.find(h=>h.id===D);o&&(v.current=i(o),c.current&&c.current.resizeCanvas(bs+Nl*is,v.current.length*_s))},[D,x,t]),lr.useEffect(()=>{c.current&&(c.current.playbackPosition=f)},[f]),lr.useEffect(()=>{if(!r||!u.current||c.current)return;let o=!1,h=null,p=null,y=0,w=0,b=new Set,S=null,k=new Map;const E=()=>{const O=d.current.find(M=>M.id===s.current);return{track:O,sequence:(O==null?void 0:O.sequence)||[]}},T=(O,M)=>{const L=Math.floor((O-bs)/is),I=Math.floor(M/_s),B=v.current,{sequence:V}=E(),G=V.reduce((Y,H,W)=>(B.indexOf(H.note)===I&&L>=H.time&&L<H.time+H.duration&&Y.push({index:W,note:H}),Y),[]);return G.length>0?G[0]:null},R=(O,M)=>{const L=bs+(M.time+M.duration)*is;return Math.abs(O-L)<is/3};return c.current=new mv(O=>{O.setup=()=>{const L=v.current;O.createCanvas(bs+Nl*is,L.length*_s).parent(u.current),O.pixelDensity(8),O.frameRate(60),O.textFont("Jost")};const M=(L,I,B=!1)=>{const G=v.current.indexOf(L.note);if(G===-1)return;const Y=bs+L.time*is,H=G*_s,W=L.duration*is,K=b.has(I);O.noStroke(),K?O.fill("#B4FFC8"):O.fill(B?"#B4FFC8":"#000000"),O.rect(Y+4,H+4,W-8,_s-8,8),O.noFill(),O.rect(Y,H,W,_s)};O.draw=()=>{const L=v.current;O.background("#FFFFFF"),L.forEach((B,V)=>{const G=V*_s;O.push(),O.strokeWeight(1),O.stroke("#CBD5E1"),O.line(0,G,O.width,G),O.fill(B.includes("#")?0:255),O.stroke(B.includes("#")?0:255),O.rect(0,G,bs,_s),O.noFill(),O.strokeWeight(1),O.textAlign(O.LEFT,O.BOTTOM),O.textSize(10),O.pop()}),O.strokeWeight(1);for(let B=0;B<=Nl;B++){const V=bs+B*is;B%4===0?(O.stroke("#000000"),O.strokeWeight(1)):(O.stroke("#CBD5E1"),O.strokeWeight(1)),O.push(),O.strokeWeight(1),O.line(V,0,V,O.height),O.pop()}const{sequence:I}=E();if(I.forEach((B,V)=>{M(B,V,V===h)}),O.playbackPosition!==void 0){const B=bs+O.playbackPosition*is;O.push(),O.noStroke(),O.fill("#B4FFC8"),O.triangle(B-8,0,B+8,0,B,8),O.stroke("#B4FFC8"),O.strokeWeight(2),O.line(B,0,B,O.height),O.pop()}p==="select"&&S&&(O.noFill(),O.stroke("#000000"),O.strokeWeight(1),O.rect(S.x,S.y,S.width,S.height))},O.mousePressed=()=>{var I;if(y=O.mouseX,w=O.mouseY,O.mouseX<bs)return;const L=T(O.mouseX,O.mouseY);if(L)if(o=!0,h=L.index,R(O.mouseX,L.note))p="resize",k.set(h,{duration:L.note.duration});else{p="move",!O.keyIsDown(O.SHIFT)&&!b.has(L.index)&&b.clear(),b.add(L.index);const B=v.current;k.clear(),b.forEach(V=>{const G=E().sequence[V];k.set(V,{time:G.time,pitchIndex:B.indexOf(G.note)})})}else{p="select",O.keyIsDown(O.SHIFT)||b.clear(),S={x:y,y:w,width:0,height:0};const{sequence:B}=E();B&&B.length>0&&((I=m.current)==null||I.call(m,s.current,B))}},O.mouseDragged=()=>{var H;if(p==="select"){S={x:Math.min(y,O.mouseX),y:Math.min(w,O.mouseY),width:Math.abs(O.mouseX-y),height:Math.abs(O.mouseY-w)};return}if(!o||h===null)return;const{sequence:L}=E();if(!L)return;const I=Math.floor((O.mouseX-y)/is),B=Math.floor((O.mouseY-w)/_s),V=v.current;let G=[...L],Y=!1;if(p==="resize"){const W=k.get(h);if(W){const K=Math.max(1,W.duration+I);G[h].duration!==K&&(G[h]={...G[h],duration:Math.min(K,Nl-G[h].time)},Y=!0)}}else p==="move"&&b.forEach(W=>{const K=k.get(W);if(K){const Q=Math.max(0,Math.min(Nl-1,K.time+I)),se=Math.max(0,Math.min(V.length-1,K.pitchIndex+B));if(!G.find((z,q)=>q!==W&&z.time===Q&&z.note===V[se])){const z=V[se];(G[W].time!==Q||G[W].note!==z)&&(G[W]={...G[W],time:Q,note:z},Y=!0)}}});Y&&((H=m.current)==null||H.call(m,s.current,G))},O.mouseReleased=()=>{if(p==="select"&&S){const{sequence:L}=E(),I=v.current;L.forEach((B,V)=>{const G=I.indexOf(B.note),Y=bs+B.time*is,H=G*_s;Y<S.x+S.width&&Y+B.duration*is>S.x&&H<S.y+S.height&&H+_s>S.y&&b.add(V)})}o=!1,h=null,p=null,S=null,k.clear()},O.doubleClicked=()=>{var V;if(O.mouseX<bs)return;const L=v.current,I=Math.floor((O.mouseX-bs)/is),B=Math.floor(O.mouseY/_s);if(B>=0&&B<L.length){const{track:G,sequence:Y}=E();if(!(G!=null&&G.instrument)||!G.isLoaded)return;const H={note:L[B],time:I,duration:1},W=[...Y,H];console.log("Adding new note:",H),console.log("New sequence:",W),(V=m.current)==null||V.call(m,s.current,W);try{G.isNoiseTrack?G.instrument.trigger(void 0,"16n"):G.instrument.triggerAttackRelease(H.note,"16n",void 0,.7)}catch(K){console.warn("Failed to trigger note:",K)}}},O.keyPressed=()=>{var I;const{sequence:L}=E();if(O.keyCode===O.DELETE||O.keyCode===O.BACKSPACE){const B=L.filter((V,G)=>!b.has(G));(I=m.current)==null||I.call(m,s.current,B),b.clear()}}}),()=>{c.current&&(c.current.remove(),c.current=null)}},[r]);const n=x.find(o=>o.id===D),a=n?`${n.name}`:"";return r?Bt.jsxs("div",{className:"select-none fixed w-fit flex-col bottom-0 left-0 right-0 bg-none border-none z-20",children:[Bt.jsxs("div",{className:"w-fit h-fit flex bg-none border-none",children:[Bt.jsx("button",{onClick:g,className:"select-none w-full px-4 h-full bg-none hover:bg-highlight text-primary text-lg",children:"×"}),Bt.jsx("h2",{className:"px-0 h-full flex text-xl text-primary",children:a}),Bt.jsx("div",{className:"select-none w-auto"})]}),Bt.jsx("div",{className:"select-none w-fit p-1  bg-primary h-flex overflow-auto",children:Bt.jsx("div",{ref:u})})]}):null};function aS(){const D=Lr(x=>x.isWelcomeModalOpen),r=Lr(x=>x.isPianoRollOpen),g=Lr(x=>x.initializeTracks),t=Lr(x=>x.cleanup);return lr.useEffect(()=>()=>t(),[t]),Bt.jsxs("div",{className:"relative h-screen w-screen overflow-hidden bg-gray-900",children:[!D&&Bt.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[Bt.jsx(sS,{className:"z-10"}),Bt.jsxs("div",{className:"relative flex-1",children:[Bt.jsx("div",{className:"absolute inset-0",children:Bt.jsx(nS,{})}),r&&Bt.jsx("div",{className:"absolute inset-0",children:Bt.jsx(oS,{})})]})]}),D&&Bt.jsx(iS,{onStart:async()=>{await Aa(),g()}})]})}y0.createRoot(document.getElementById("root")).render(Bt.jsx(lr.StrictMode,{children:Bt.jsx(aS,{})}));
